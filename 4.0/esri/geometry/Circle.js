// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define("../core/declare ../core/lang ./Point ./Polygon ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion dojo/_base/lang".split(" "),function(r,l,s,k,t,m,h,n){var p={centimeters:0.01,decimeters:0.1,feet:0.3048,inches:0.0254,kilometers:1E3,meters:1,miles:1609.34,millimeters:0.0010,"nautical-miles":1852,yards:0.9144,"decimal-degrees":111320},u={radius:1E3,radiusUnit:"meters",geodesic:!1,numberOfPoints:60},q=r(k,{declaredClass:"esri.geometry.Circle",classMetadata:{properties:{center:{type:s}}},
getDefaults:function(){return n.mixin(this.inherited(arguments,[]),u)},normalizeCtorArgs:function(a,e){var b;if(a&&a.center)b=a;else{if(a&&a.rings)return this.inherited(arguments);b={center:a}}return n.mixin(this.inherited(arguments,[]),b,e)},initialize:function(){var a=this.center,e=this.numberOfPoints;if(0===this.rings.length&&a){var b=this.radius*p[this.radiusUnit],c=a.spatialReference,d="geographic";if(c.isWebMercator)d="webMercator";else if(l.isDefined(h[c.wkid])||c.wkt&&0===c.wkt.indexOf("PROJCS"))d=
"projected";if(this.geodesic){var f;switch(d){case "webMercator":f=m.webMercatorToGeographic(a);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":f=a}a=this._createGeodesicCircle(f,b,e);"webMercator"===d&&(a=m.geographicToWebMercator(a))}else{var g;"webMercator"===d||"projected"===d?g=b/this._convert2Meters(1,a.spatialReference):"geographic"===d&&(g=b/p.esriDecimalDegrees);
a=this._createPlanarCircle(a,g,e)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0])}},center:null,geodesic:!1,_hasMGetter:function(){return!1},_hasZGetter:function(){return!1},numberOfPoints:60,radius:null,radiusUnit:null,clone:function(){return new q({rings:this.rings,hasZ:this.hasZ,hasM:this.hasM,spatialReference:this.spatialReference})},_createGeodesicCircle:function(a,e,b){for(var c=0,d=Math.PI/180,f=[],g;c<2*Math.PI;)g=t._directGeodeticSolver(a.y*d,a.x*d,c,e),f.push(g.toArray()),
c+=Math.PI/(b/2);f.push(f[0]);return new k(f)},_createPlanarCircle:function(a,e,b){for(var c=0,d=[],f,g;c<2*Math.PI;)f=a.x+Math.cos(c)*e,g=a.y+Math.sin(c)*e,d.push([f,g]),c+=Math.PI/(b/2);d.push(d[0]);return new k({spatialReference:a.spatialReference,rings:[d]})},_convert2Meters:function(a,e){var b;if(l.isDefined(h[e.wkid]))b=h.values[h[e.wkid]];else{b=e.wkt;var c=b.lastIndexOf(",")+1,d=b.lastIndexOf("]]");b=parseFloat(b.substring(c,d))}return a*b}});return q});