// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["../../../../core/declare","../../support/aaBoundingBox","../../support/aaBoundingRect"],function(l,f,h){var g=f.create(),k=h.create();return l(null,{constructor:function(b,a,c){this.graphics3DSymbol=a;this.graphic=b;this._graphics=c;this._labelGraphics=[];this.addedToSpatialIndex=!1},initialize:function(b,a,c){var d=function(b,a){a&&a.initialize(b,c)};this._graphics.forEach(d.bind(this,b));a&&this._labelGraphics.forEach(d.bind(this,a))},addLabelGraphic:function(b){this._labelGraphics.push(b)},
isDraped:function(){for(var b=0;b<this._graphics.length;b++){var a=this._graphics[b];if(a&&a.isDraped())return!0}return!1},areVisibilityFlagsSet:function(b,a){for(var c=!0,d=0;d<this._graphics.length;d++){var e=this._graphics[d];e&&(c=c&&e.areVisibilityFlagsSet(b,a))}for(d=0;d<this._labelGraphics.length;d++)(e=this._labelGraphics[d])&&(c=c&&e.areVisibilityFlagsSet(b,a));return c},setVisibilityFlag:function(b,a){var c=!1,d=function(d){d&&(c=d.setVisibilityFlag(b,a)||c)};this._graphics.forEach(d);this._labelGraphics.forEach(d);
return c},destroy:function(){var b=function(a){a&&a.destroy()};this._graphics.forEach(b);this._graphics.length=0;this._labelGraphics.forEach(b);this._labelGraphics.length=0},getBSRadius:function(){var b=0;this._graphics.forEach(function(a){b=Math.max(b,a.getBSRadius())});return b},getCenterObjectSpace:function(){return this._graphics[0].getCenterObjectSpace()},getProjectedBoundingBox:function(b,a,c){c?f.set(c,f.NEGATIVE_INFINITY):c=f.create(f.NEGATIVE_INFINITY);for(var d=0;d<this._graphics.length;d++){var e=
this._graphics[d];if(e){var m=e.isDraped()?a:b;e&&e.getProjectedBoundingBox(m,g)&&f.expand(c,e.isDraped()?f.toRect(g,k):g)}}return f.allFinite(c)||h.allFinite(f.toRect(c,k))?c:null},mustAlignToTerrain:function(){for(var b=this._graphics.length,a=0;a<b;a++){var c=this._graphics[a];if(c&&c.mustAlignToTerrain())return!0}b=this._labelGraphics.length;for(a=0;a<b;a++)if((c=this._labelGraphics[a])&&c.mustAlignToTerrain())return!0;return!1},alignWithElevation:function(b,a){for(var c=this._graphics.length,
d=0;d<c;d++){var e=this._graphics[d];e&&e.alignWithElevation(b,a)}c=this._labelGraphics.length;for(d=0;d<c;d++)(e=this._labelGraphics[d])&&this._labelGraphics[d].alignWithElevation(b,a)},setDrawOrder:function(b,a,c){c[this.graphics3DSymbol.symbol.id]=!0;for(var d=this._graphics.length,e=0;e<d;e++){var f=this._graphics[e];f&&f.setDrawOrder(b+(1-(1+e)/d),a,c)}}})});