// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["require","exports","./GLUtil"],function(h,k,f){return function(){function d(c,b,a,d,e,f,g){this.frameBuffer=e.createFramebuffer();this.texture=f||e.createTexture();this.renderBuffer=a?e.createRenderbuffer():void 0;this.depthTexture=g?e.createTexture():void 0;this.dimJ=this.dimI=0;this.gl=e;this.format=c;this.type=b;this.texFilter=d;this._initTexture(this.texture);g&&this._initTexture(this.depthTexture)}d.prototype._initTexture=function(c){var b=this.gl;b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,this.texFilter);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,this.texFilter);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,4,4,0,b.RGBA,b.UNSIGNED_BYTE,null)};d.prototype.dispose=function(){var c=this.gl;c.deleteFramebuffer(this.frameBuffer);c.deleteTexture(this.texture);void 0!==this.renderBuffer&&c.deleteRenderbuffer(this.renderBuffer)};d.prototype.setSize=
function(c,b){if(!(c===this.dimI&&b===this.dimJ)){this.dimI=c;this.dimJ=b;var a=this.gl;a.bindTexture(a.TEXTURE_2D,this.texture);a.texImage2D(a.TEXTURE_2D,0,this.format,this.dimI,this.dimJ,0,this.format,this.type,null);void 0!==this.renderBuffer?(a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.dimI,this.dimJ)):void 0!==this.depthTexture&&(a.bindTexture(a.TEXTURE_2D,this.depthTexture),a.texImage2D(a.TEXTURE_2D,0,a.DEPTH_STENCIL,this.dimI,
this.dimJ,0,a.DEPTH_STENCIL,34042,null));a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0);void 0!==this.renderBuffer?a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this.renderBuffer):void 0!==this.depthTexture&&a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this.depthTexture,0);f.checkFramebufferStatus(a.FRAMEBUFFER,a);void 0!==this.renderBuffer&&a.bindRenderbuffer(a.RENDERBUFFER,
null);a.bindFramebuffer(a.FRAMEBUFFER,null)}};d.prototype.getWidth=function(){return this.dimI};d.prototype.getHeight=function(){return this.dimJ};d.prototype.bind=function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer)};d.prototype.getVirtualDepthFBO=function(){var c=this.depthTexture,b=this.dimI,a=this.dimJ;return{getWidth:function(){return b},getHeight:function(){return a},getTexture:function(){return c}}};d.prototype.getTexture=function(){return this.texture};d.prototype.getGLName=
function(){return this.frameBuffer};return d}()});