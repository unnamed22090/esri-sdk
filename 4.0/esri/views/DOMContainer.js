// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["dojo/on","../core/Accessoire","../core/Scheduler","../core/watchUtils"],function(l,m,n,p){var g=[0,0];return m.createSubclass({declaredClass:"esri.views.DOMContainer",classMetadata:{properties:{container:{},height:{},position:{},resizing:{},size:{dependsOn:["width","height"],readOnly:!0},suspended:{},width:{}}},constructor:function(){Object.defineProperty(this,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}})},initialize:function(){var b=this._measureInfo,a=null;
p.init(this,"container",function(c,d,f,e){a&&(a.remove(),a=null,b.freq=16,b.time=750);b.task&&(b.task.remove(),b.task=null);c?(a=l(window,"resize",function(){b.freq=16;b.time=750}.bind(e)),b.task=n.addFrameTask({prepare:function(b){var a=this._measureInfo;a.time+=b.deltaTime;a.time<a.freq||(a.time=0,this._measure()?(a.freq=16,this.resizing=!0):(a.freq=Math.min(750,2*a.freq),512<=a.freq&&(this.resizing=!1)))}.bind(e)})):this.resizing=!1;this._measure();c=this.root;d=this.surface;f=this.width;e=this.height;
c&&(d&&f&&e)&&(c.style.width=d.style.width=f+"px",c.style.height=d.style.height=e+"px")})},destroy:function(){this.container=null},_measureInfo:null,size:null,_sizeGetter:function(b,a){a||(a=[0,0]);a[0]=this.width;a[1]=this.height;return a},position:null,height:0,resizing:!1,suspended:!0,width:0,pageToContainer:function(b,a,c){var d=this.position;b-=d[0];a-=d[1];c?(c[0]=b,c[1]=a):c=[b,a];return c},containerToPage:function(b,a,c){var d=this.position;b+=d[0];a+=d[1];c?(c[0]=b,c[1]=a):c=[b,a];return c},
_measure:function(){var b=this.container,a=b?b.clientWidth:0,c=b?b.clientHeight:0;if(0===a||0===c||"hidden"===window.getComputedStyle(b).visibility)return this.suspended=!0,!1;var d=this.root,f=this.surface,e=this.width,k=this.height,h=this.position;if(a===e&&c===k)return this.suspended=!1;d&&f&&(d.style.width=f.style.width=a+"px",d.style.height=f.style.height=c+"px");this.width=a;this.height=c;this.suspended=!1;d=b.ownerDocument||window.document;d=d.parentWindow||d.defaultView;b=b.getBoundingClientRect();
g[0]=b.left+d.pageXOffset;g[1]=b.top+d.pageYOffset;if(!h||g[0]!==h[0]||g[1]!==h[1])this.position=g.slice();this.emit("resize",{oldWidth:e,oldHeight:k,width:a,height:c});return!0}})});