// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["../../layers/LayerView","../../../core/watchUtils","../engine/Container"],function(f,g,h){return f.createSubclass({declaredClass:"esri.views.2d.layers.LayerView2D",classMetadata:{properties:{suspended:{dependsOn:["view.scale","layer.minScale","layer.maxScale"]}}},constructor:function(a){this.container=new h({visible:!1});this.watch("suspended",this._suspendedWatcher.bind(this));this._opacityWatch=this.watch("layer.opacity",function(a){this.container.opacity=a}.bind(this));this._opacityWatch=
this.watch("layer.blendMode",function(a){this.container.blendMode=a}.bind(this))},destroy:function(){this._opacityWatch.remove();this._opacityWatch=null;this.updateNeeded=!1;this.layer=null},_viewChangeHdl:null,_viewSetter:function(a){this.inherited(arguments);this._viewChangeHdl&&(this._viewChangeHdl.remove(),this._viewChangeHdl=null);a&&(this._viewChangeHdl=g.when(a,"state.transform",function(a){this.emit("view-change")}.bind(this)));return a},hitTest:function(a,b){return null},needUpdate:function(){this.updateNeeded||
(this.updateNeeded=!0,this.suspended||this.view.scheduleLayerViewUpdate(this))},_commitUpdate:function(){this.updateNeeded&&(this.updateNeeded=!1,this.update())},canResume:function(){var a=this.inherited(arguments);if(a){var a=this.view.scale,b=this.layer,e=b.minScale,b=b.maxScale,c=!e,d=!b;!c&&a<=e&&(c=!0);!d&&a>=b&&(d=!0);a=c&&d}return a},_suspendedWatcher:function(a){this.container.visible=!a;!a&&this.updateNeeded&&this.view.scheduleLayerViewUpdate(this)}})});