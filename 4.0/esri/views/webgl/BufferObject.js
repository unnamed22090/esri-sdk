// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["require","exports"],function(l,m){return function(){function b(a,c,e,d){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._context=a;this._bufferType=c;this._usage=e;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();d&&this.setData(d)}b.createIndex=function(a,c,e){return new b(a,34963,c,e)};b.createVertex=function(a,c,e){return new b(a,34962,c,e)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});b.prototype.dispose=function(){if(this._glName){var a=
this._context.gl;a.isBuffer(this._glName)&&(a.deleteBuffer(this._glName),this._glName=null)}};b.prototype.setData=function(a){if(a){this._context.bindBuffer(this);if("number"===typeof a)0>a&&console.error("Buffer size cannot be negative!"),this._size=a;else{var c=a.byteLength;a instanceof Uint16Array&&(c/=2);a instanceof Uint32Array&&(c/=4);this._size=c}this._context.gl.bufferData(this._bufferType,a,this._usage)}};b.prototype.setSubData=function(a,c,b,d){void 0===c&&(c=0);void 0===b&&(b=0);if(a){(0>
c||c>=this._size)&&console.error("offset is out of range!");var f=c,g=b,h=d,k=a.byteLength;a instanceof Uint16Array&&(k/=2,f*=2,g*=2,h*=2);a instanceof Uint32Array&&(k/=4,f*=4,g*=4,h*=2);void 0===d&&(d=k-1);b>=d&&console.error("end must be bigger than start!");c+b-d>this._size&&console.error("An attempt to write beyond the end of the buffer!");this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,f,a.buffer.slice(g,h))}};b._nextId=0;return b}()});