// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["../../core/LinkedList","../../core/declare"],function(f,g){return g([f],{classMetadata:{properties:{view:{dependsOn:["gestureManager.view"]}}},constructor:function(){this.on("add, remove",this._collectEvents.bind(this))},removers:null,_gestureManager:null,_gestureManagerSetter:function(a){this._addCustomGestures();return a},_gestures:null,_eventsGetter:function(){return this._gestures},_customGestures:null,_customGesturesSetter:function(a){this._addCustomGestures();return a},_viewGetter:function(){return this.get("gestureManager.view")},
_gestureConfig:null,_phaseDict:{1:"start",2:"move",4:"end",8:"cancel",START:1,MOVE:2,END:4,CANCEL:8},processEvent:function(a){var b=a&&(a.type||a.name||a.eventType);a.lastEvent=this._lastEvt;"hammer.input"===b&&(b="input");var c=this.first,e=!0;if(!a.screenPoint){var d=this.view.pageToContainer(a.center.x,a.center.y);a.screenPoint={x:d[0],y:d[1]}}for(;c;){if(d=c[b])c=d.call(c,a),e=!1!==c&&!0!==a.canceled;c=e&&this.next()}this._lastEvt=a.eventType<this._phaseDict.END&&"scroll"!==b?a:null;e&&this.view.emit(b,
a)},_collectEvents:function(){var a=this.first,b=[];for(this._gestureConfig=this._collectCustoms();a;)b=b.concat(a.get("events")),a=this.next();return this._gestures=b},_collectCustoms:function(){for(var a=this.first,b=null;a;){if(a=a.customGestures)if(b)for(var c=Object.keys(a),e=c.length-1;0<=e;e--){var d=c[e];b[d]||(b[d]=a[d])}else b=a;a=this.next()}if(null!=b&&this.gestureManager){this._gestureConfig=b;var f=this.gestureManager;b.forEach(function(a){f.addGesture(a)})}return b},_addCustomGestures:function(){if(this._gestureManager&&
this._customGestures){var a=this._gestureManager;this.customGestures.forEach(function(b){a.addGesture(b)})}}})});