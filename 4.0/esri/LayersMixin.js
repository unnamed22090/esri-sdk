// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["./core/Accessoire","./core/Collection"],function(g,d){var f=function(b,a){for(var c,e=0,d=b.length;e<d;e++)if(c=b.getItemAt(e),c.id===a||c.layers&&(c=f(c.layers,a)))return c};return g.createSubclass({declaredClass:"esri.LayersMixin",classMetadata:{properties:{layers:{type:d}}},destroy:function(){this.layers.drain(this.layerRemoved,this)},_layersGetter:function(b){b||(b=new d,b.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a)}.bind(this)),
b.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this)));return b},_layersSetter:function(b,a){a&&this.remove(a.toArray());this.addMany(b.toArray());return a},findLayerById:function(b){return f(this.layers,b)},add:function(b,a){var c=this.layers;a=c.getNextIndex(a);b.parent===this?this.reorder(b,a):c.add(b,a)},addMany:function(b,a){var c=this.layers;a=c.getNextIndex(a);b.forEach(function(b){b.parent===this?this.reorder(b,a):(c.add(b,a),a+=1)},this)},remove:function(b){return this.layers.remove(b)},
removeMany:function(b){return this.layers.removeMany(b)},removeAll:function(){return this.layers.removeAll()},reorder:function(b,a){return this.layers.reorder(b,a)},layerAdded:function(b){},layerRemoved:function(b){}})});