// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define("require exports dojo/has ./Store ./PropertyOrigin ./dictionary ./extensions ./introspection".split(" "),function(f,g,q,k,d,h,l,m){function e(b,a,c){void 0===c&&(c=!1);if(!a.metadatas[b]){b="[accessor] cannot access unknown property '"+b+"' on instance of "+a.host.declaredClass+".";if(c||n)throw Error(b);console.error(b)}}var p=0,n=0;f=function(){function b(a){this.host=a;this._origin=d.default.USER;this.ctorArgs=null;this.dirties=h.default();this.initialized=!1;this.metadatas=m.getInstanceMetadatas(this.host);
this.overridden=null;this.uid="properties_"+p++;this.store=new k.default}b.prototype.initialize=function(){this.initialized=!0;l.defineProperties(this.host,this.metadatas)};b.prototype.destroy=function(){};b.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};b.prototype.get=function(a){e(a,this);var c=this.metadatas[a];if(this.store.has(a)&&!0===!this.dirties[a])return this.store.get(a);var b=c.get;return b?(c=b.call(this.host),this.store.set(a,
c,d.default.COMPUTED),this.propertyCommitted(a,c),c):c.value};b.prototype.has=function(a){return!this.metadatas[a]?!1:this.store.has(a)};b.prototype.internalGet=function(a){e(a,this,!0);var c=this.store;return c.has(a)?c.get(a):this.metadatas[a].value};b.prototype.internalSet=function(a,c){e(a,this,!0);this.propertyInvalidated(a);this.initialized?this.store.set(a,c,this._origin):this.store.set(a,c,d.default.SERVICE);this.propertyCommitted(a,c)};b.prototype.isOverridden=function(a){return null!=this.overridden&&
!0===this.overridden[a]};b.prototype.keys=function(){return this.store.keys()};b.prototype.override=function(a,c){e(a,this,!0);this.overridden||(this.overridden=h.default());this.overridden[a]=!0;this.internalSet(a,c)};b.prototype.set=function(a,c){e(a,this);var b=this.metadatas[a],d=b.set;(b=b.cast)&&(c=b.call(this.host,c));d?d.call(this.host,c):this.internalSet(a,c)};b.prototype.setDefault=function(a,b){e(a,this,!0);this.store._originStores?(this.setDefaultOrigin(d.default.SERVICE),this.set(a,b),
this.setDefaultOrigin(d.default.USER)):this.store.has(a,d.default.SERVICE)||(this.setDefaultOrigin(d.default.SERVICE),this.set(a,b),this.setDefaultOrigin(d.default.USER))};b.prototype.setDefaultOrigin=function(a){this._origin=a};b.prototype.propertyInvalidated=function(a){this.isOverridden(a)||(this.dirties[a]=!0)};b.prototype.propertyCommitted=function(a,b){this.dirties[a]=!1};return b}();Object.defineProperty(g,"__esModule",{value:!0});g.default=f});