// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["require","exports","./utils","./ensureType","./extensions"],function(y,f,p,m,q){function r(a){var k=a.declaredClass,b=a.properties;k||(k=a.declaredClass="accessor_"+t++);if(f.prototypeMetadatas[k])return f.prototypeMetadatas[k];b||(b=a.properties={});for(var d=0,h=Object.getOwnPropertyNames(b);d<h.length;d++){var c=h[d],g=b[c],e=typeof g;null==g?b[c]={value:g}:"object"===e?p.getProperties(g)||g instanceof Date?b[c]={type:g.constructor,value:g}:Array.isArray(g)&&(b[c]={type:g,value:null}):
"boolean"===e?b[c]={type:Boolean,value:g}:"string"===e?b[c]={type:String,value:g}:"number"===e?b[c]={type:Number,value:g}:"function"===e&&(b[c]={type:g,value:null})}h=0;for(g=Object.getOwnPropertyNames(a);h<g.length;h++){var e=g[h],n=a[e],l=void 0,d=c=void 0;if(l=u.exec(e))c=l[1],d=v[l[2]];else if(l=w.exec(e))c=l[2][0].toLowerCase()+l[2].substr(1),d=l[1].toLowerCase();c&&d&&(b[c]||(b[c]={}),"read"===d?b[c].json?b[c].json.read=n:b[c].json={read:n}:b[c][d]=n)}h=0;for(g=Object.getOwnPropertyNames(b);h<
g.length;h++)if(c=g[h],e=b[c],d=e.type,void 0===e.value&&x.call(a,c)&&(e.value=a[c]),!e.cast&&d)switch(d){case Number:e.cast=m.ensureNumber;break;case Boolean:e.cast=m.ensureBoolean;break;case String:e.cast=m.ensureString;break;case Date:e.cast=m.ensureDate;break;default:Array.isArray(d)?e.cast=m.ensureArray(d[0]):e.cast=m.ensureType(d)}q.processPrototypeMetadatas(b,k);return f.prototypeMetadatas[k]=b}function s(a){var k=a.prototype.declaredClass;if(f.classMetadatas[k])return f.classMetadatas[k];
a=a._meta.bases;for(var b=[],d=a.length-1;0<=d;d--){var h=r(a[d].prototype);h&&b.push(h)}a=b.reduce(p.merge,{});q.processClassMetadatas(a,k);return f.classMetadatas[k]=a}var x=Object.prototype.hasOwnProperty,u=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Caster)$/,v={Getter:"get",Setter:"set",Reader:"read",Caster:"cast"},w=/^_(set|get)([a-zA-Z0-9]+)Attr$/;f.prototypeMetadatas={};f.classMetadatas={};var t=0;f.hasPrototypeMetadata=function(a){a=a.declaredClass;return null!=a&&null!=f.prototypeMetadatas[a]};
f.createPrototypeMetadata=r;f.createClassMetadata=s;f.getInstanceMetadatas=function(a){a=a.declaredClass;return f.classMetadatas[a]?f.classMetadatas[a]:null};f.defineProperties=function(a){for(var f=s(a),b={},d=function(a){var c=f[a];b[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):c.value},set:function(b){var d=this.__accessor__;if(d){if(!Object.isFrozen(this))if(d.initialized){if(c.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+
a+"' of "+this.declaredClass);d.set(a,b)}else d.setDefault(a,b)}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}}},h=0,c=Object.getOwnPropertyNames(f);h<c.length;h++)d(c[h]);Object.defineProperties(a.prototype,b);return a}});