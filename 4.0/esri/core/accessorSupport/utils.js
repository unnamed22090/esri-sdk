// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["require","exports","../lang"],function(n,f,m){function g(a){return!a?null:a.__accessor__?a.__accessor__:a._accessorProps?a._accessorProps:a.propertyInvalidated?a:null}function h(a,b){return!b?a:Object.keys(b).reduce(function(a,c){if("value"===c)return a[c]=b[c],a;if(void 0===a[c])return a[c]=m.clone(b[c]),a;var d=a[c],e=b[c];if(d===e)return a;if(Array.isArray(e)||Array.isArray(a))d=d?Array.isArray(d)?a[c]=d.concat():a[c]=[d]:a[c]=[],e&&(Array.isArray(e)||(e=[e]),e.forEach(function(a){-1===
d.indexOf(a)&&d.push(a)}));else if(e&&"object"===typeof e)a[c]=h(d,e);else if(!a.hasOwnProperty(c)||b.hasOwnProperty(c))a[c]=e;return a},a||{})}function k(a){var b=!1;return function(){b||(b=!0,a())}}f.getProperties=g;f.isPropertyDeclared=function(a,b){return a&&(a.metadatas&&null!=a.metadatas[b]||null!=a.properties)};f.merge=h;f.pathToArray=function(a){return Array.isArray(a)?a:a.split(".")};f.parse=function(a,b,f,c){if(Array.isArray(b)||-1<b.indexOf(",")){var d=(Array.isArray(b)?b:b.split(",")).map(function(b){return c(a,
b.trim(),f)});return{remove:k(function(){return d.forEach(function(a){return a.remove()})})}}return c(a,b.trim(),f)};f.once=k;var l=0;f.uid=function(a){if(null==a)return"uid-"+l++;a=g(a);a.uid||(a.uid="uid-"+l++);return a.uid}});