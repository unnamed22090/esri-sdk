// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessoireSupport/typescript ./support/graphicsUtils ./LayerLoader ../../core/Error ../../request".split(" "),function(m,n,f,b,d,g,h,k,l){return function(e){function a(){e.apply(this,arguments)}f(a,e);a.prototype.loadLayer=function(){var a=this;return this.fetchData().then(function(c){if(c)return g.readItemOverrides(a.portalItem,a.instance,c,a.sublayerId)})};a.prototype.validateItem=function(){this.inherited(arguments);
if(null==this.sublayerId)throw new k("portal:incompatible-service","Feature layer portal items should refer to a specific feature service sublayer");};a.prototype.updateSublayerId=function(){var a=this,c=this.instance,b=c.url;if(null!=c.layerId)this.sublayerId=c.layerId;else return l(b,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(b){if((b=b.data)&&b.layers&&b.layers[0])a.sublayerId=b.layers[0].id,c.layerId=a.sublayerId});return this.inherited(arguments)};b([d.shared("esri.portal.loaders.FeatureLayerLoader")],
a.prototype,"declaredClass",void 0);b([d.shared(["Feature Service"])],a.prototype,"supportedItemTypes",void 0);return a=b([d.subclass()],a)}(h)});