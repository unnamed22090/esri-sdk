// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessoireSupport/typescript ./support/jsonUtils ./LayerLoader ../../core/Collection ../../geometry/support/jsonUtils ../../Graphic".split(" "),function(p,q,g,d,e,h,k,l,m,n){return function(f){function a(){f.apply(this,arguments)}g(a,f);a.prototype.updateSublayerId=function(){var b=this.instance;null!=b.layerId?this.sublayerId=b.layerId:null==this.sublayerId&&(this.sublayerId=0);return this.inherited(arguments)};
a.prototype.loadLayer=function(){var b=this;return this.fetchData().then(function(a){if(a){var c=a;c.featureCollection&&(a=c.featureCollection);if(c=(new l(a.layers)).getItemAt(b.sublayerId))c.popupInfo&&(c.layerDefinition.popupInfo=c.popupInfo),b.instance.layerId=b.sublayerId,h.readIfDefined(b.instance,"opacity",a.opacity,{opacity:a.opacity}),b.instance.source=c.featureSet.features.map(function(a){return new n({geometry:m.fromJSON(a.geometry),attributes:a.attributes})}),b.instance.source.layerDefinition=
c.layerDefinition}})};d([e.shared("esri.portal.loaders.FeatureCollectionLoader")],a.prototype,"declaredClass",void 0);d([e.shared(["Feature Collection"])],a.prototype,"supportedItemTypes",void 0);return a=d([e.subclass()],a)}(k)});