// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/widgets/ColorPicker/templates/ColorPicker.html":'\x3cdiv class\x3d"${css.container}"\x3e\r\n  \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_header"\x3e\r\n    \x3cspan class\x3d"${css.swatchPreview} ${css.container}"\x3e\r\n      \x3cspan class\x3d"${css.swatch} ${css.swatchTransparencyBackground}"\x3e\x3c/span\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"dap_previewSwatch" class\x3d"${css.swatch}"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.middle}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dap_paletteContainer" class\x3d"${css.palette} ${css.container}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_primaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\x3c!--\r\n      --\x3e\x3cdiv data-dojo-attach-point\x3d"dap_secondaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.paletteOptions}"\x3e\r\n      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"dap_hexInput" class\x3d"${css.hexInput}"/\x3e\r\n      \x3cinput class\x3d"${css.paletteToggle}" type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"dap_paletteToggle" label\x3d"${labels.more}"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.footer}" data-dojo-attach-point\x3d"dap_footer"\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_suggestedColorSection"\x3e\r\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.suggested}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_suggestedColorPalette" class\x3d"${css.suggested} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recentColorSection"\x3e\r\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.recent}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_recentColorPalette" class\x3d"${css.recent} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_transparencySection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_transparencyLabel" class\x3d"${css.label}"\x3e${labels.transparency}\x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.transparencySlider}"\r\n           data-dojo-attach-point\x3d"dap_transparencySlider"\r\n           data-dojo-type\x3d"esri/widgets/HorizontalSlider"\r\n           data-dojo-props\x3d"minimum: 0, maximum: 1, discreteValues: 100, labels: [\'0%\', \'50%\', \'100%\']"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("../Color ./ColorPicker/colorUtil ./ColorPicker/HexPalette ./support/_Tooltip ./Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/i18n!./ColorPicker/nls/ColorPicker dojo/text!./ColorPicker/templates/ColorPicker.html ./HorizontalSlider dijit/form/RadioButton dijit/form/TextBox dijit/form/ToggleButton dojo/NodeList-dom".split(" "),function(m,d,q,n,r,s,t,e,h,k,l,p,u,v){var c={root:"esri-color-picker",container:"esri-container",
header:"esri-header",footer:"esri-footer",middle:"esri-middle",swatch:"esri-swatch",swatchRow:"esri-swatch-row",swatchPreview:"esri-swatch-preview",swatchTransparencyBackground:"esri-swatch-transparency-background",palette:"esri-palette",paletteOptions:"esri-palette-options",paletteToggle:"esri-palette-toggle",label:"esri-label",hexInput:"esri-hex-input",recent:"esri-recent",suggested:"esri-suggested",selected:"esri-selected",disabled:"esri-disabled",section:"esri-section",transparencySlider:"esri-transparency-slider",
alt:"esri-alt",hidden:"esri-hidden"};n=r.createSubclass([s,t,n],{declaredClass:"esri.widgets.ColorPicker",templateString:v,labels:u,baseClass:c.root,css:c,constructor:function(a){a=a||{};this._brightsPalette=new q({colors:a.palette});this._pastelsPalette=new q({colors:this._toPastels(this._brightsPalette.colors)});this._activePalette=this._brightsPalette;this._swatches={}},buildRendering:function(){this.inherited(arguments);this._createPalettes();this.required||(this._noColorSwatchNode=h.create("div",
{className:c.swatch+" "+c.hidden},this.dap_hexInput.domNode,"after"));e.toggle(this.dap_transparencySection,c.hidden,!this.showTransparencySlider);e.toggle(this.dap_recentColorSection,c.hidden,!this.showRecentColors);e.toggle(this.dap_suggestedColorSection,c.hidden,!this.showSuggestedColors)},postCreate:function(){this.inherited(arguments);this._addListeners();this._selectColor();this.dap_hexInput.intermediateChanges=!0;this.dap_transparencySlider.intermediateChanges=!0;var a=this.labels;this.createTooltips([{node:this.dap_paletteContainer,
label:a.paletteTooltip},{node:this.dap_hexInput,label:a.hexInputTooltip},{node:this._noColorSwatchNode,label:a.noColorTooltip},{node:this.dap_paletteToggle,label:a.moreColorsTooltip}])},_activePalette:null,_brightsPalette:null,_pastelsPalette:null,_swatches:null,_noColorSwatchNode:null,_previousColor:null,color:null,_getColorAttr:function(){var a=this._get("color");return"no-color"===a?"no-color":new m(a)},_setColorAttr:function(a,b){a=a||"no-color";b=b||void 0===b;if(!this.required){if("no-color"===
a){this._set("color","no-color");this._previousColor="no-color";this._disableTransparencySlider();this._clearSelection();this._silentlyUpdateHexInput("no-color");this._updatePreviewSwatch(a);e.add(this._noColorSwatchNode,c.selected);b&&this.emit("color-change",{color:"no-color"});return}this._enableTransparencySlider();e.remove(this._noColorSwatchNode,c.selected)}var f=d.normalizeColor(a),g=this._previousColor;if(g){if(d.equal(g,f))return;if(g=this._findColorSwatch(g))e.remove(g,c.selected),k.set(g,
"borderColor","")}g=new m(f);this._set("color",g);this._previousColor=f;this._silentlyUpdateIntermediateChangingValueWidget(this.dap_transparencySlider,1-g.a);this._updatePreviewSwatch(g);this._checkSelection();this._silentlyUpdateHexInput(g);this.trackColors&&this._addRecentColor(g.toHex());b&&this.emit("color-change",{color:new m(g)})},colorsPerRow:13,_setColorsPerRowAttr:function(a){this._set("colorsPerRow",0<a?a:13)},_setPaletteAttr:function(a){var b=this._activePalette===this._brightsPalette;
this._brightsPalette.colors=a;this._pastelsPalette.colors=this._toPastels(this._brightsPalette.colors);this._activePalette=b?this._brightsPalette:this._pastelsPalette;this._createPalettes();this._togglePalette(!b)},recentColors:[],_getRecentColorsAttr:function(){return this._get("recentColors").map(function(a){return d.normalizeColor(a)})},_setRecentColorsAttr:function(a){a=a||[];this.showRecentColors&&(a=a.map(function(a){return d.normalizeColor(a).toHex()}));this._set("recentColors",a);0===a.length?
this._clearRecentSwatches():this._renderRecentSwatches()},required:!1,showRecentColors:!0,showSuggestedColors:!1,showTransparencySlider:!0,suggestedColors:null,_getSuggestedColorsAttr:function(){return this._get("suggestedColors").map(function(a){return d.normalizeColor(a)})},_setSuggestedColorsAttr:function(a){this.showSuggestedColors&&(this._clearSuggestedSwatches(),a=a||[],a=a.map(function(a){return d.normalizeColor(a).toHex()}),this._set("suggestedColors",a),0<a.length&&this._renderSuggestedSwatches())},
trackColors:!0,addRecentColor:function(a){a&&"no-color"!==a&&this._addRecentColor(d.normalizeColor(a).toHex())},saveRecentColors:function(a){localStorage.setItem(a,JSON.stringify(this.get("recentColors")))},loadRecentColors:function(a){this.set("recentColors",JSON.parse(localStorage.getItem(a)))},_toPastels:function(a){var b=new m([238,238,238]);return a.map(function(a){return m.blendColors(new m(a),b,0.2)})},_createSwatch:function(a){return h.create("span",{className:a.className,style:{background:a.hexColor||
"transparent"}},a.paletteNode)},_createSwatches:function(a,b){var f;b.colors.forEach(function(b,d){var e;0===d%this.colorsPerRow&&(f=h.create("div",{className:c.swatchRow},a));e=this._createSwatch({className:c.swatch,hexColor:b,paletteNode:f});this._swatches[b]=e},this)},_selectColor:function(){this.set("color",this.color||this._activePalette.colors[0])},_setColorWithCurrentAlpha:function(a){"no-color"!==a&&"no-color"!==this.color&&(a=d.normalizeColor(a),a.a=this.color.a);this.set("color",a)},_updatePreviewSwatch:function(a){var b=
this.dap_previewSwatch,f;"no-color"===a?(e.add(b,c.hidden),k.set(b,{backgroundColor:"",borderColor:""})):(f=d.getContrastingColor(a),e.remove(b,c.hidden),k.set(b,{backgroundColor:a.toCss(!0),borderColor:f.toCss(!0)}))},_showBrights:function(){e.remove(this.dap_paletteContainer,c.alt);this._activePalette=this._brightsPalette},_showPastels:function(){e.add(this.dap_paletteContainer,c.alt);this._activePalette=this._pastelsPalette},_setColorFromSwatch:function(a){a=k.get(a,"backgroundColor");this._setColorWithCurrentAlpha(a)},
_checkSelection:function(){var a=this.get("color");this._activePalette.contains(a)?this._highlightColor(a):this._clearSelection()},_addListeners:function(){var a="."+c.swatch;this.own(l(this.dap_paletteContainer,l.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)),l(this.dap_recentColorPalette,l.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)),l(this.dap_suggestedColorPalette,l.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)));
this.required||this.own(l(this._noColorSwatchNode,"click",function(){this.set("color","no-color")}.bind(this)));var b=this.dap_hexInput;b.on("blur",function(){var a=d.normalizeHex(b.get("value"));d.isShorthandHex(a)?this._setColorWithCurrentAlpha(a):this._silentlyUpdateHexInput(this.color)}.bind(this));b.on("change",function(){var a=d.normalizeHex(b.get("value"));d.isLonghandHex(a)&&this.color.toHex()!==a&&this._setColorWithCurrentAlpha(a)}.bind(this));this.dap_transparencySlider.on("change",function(a){var b=
this.get("color");"no-color"!==b&&(b=d.normalizeColor(b),b.a=1-a,this._updatePreviewSwatch(b),this._silentlyUpdateHexInput(b),this.set("color",b))}.bind(this));this.dap_paletteToggle.on("change",this._togglePalette.bind(this))},_togglePalette:function(a){this.dap_paletteToggle.set("checked",a,!1);a?this._showPastels():this._showBrights();this._checkSelection()},_createPalettes:function(){this._swatches={};h.empty(this.dap_primaryPalette);h.empty(this.dap_secondaryPalette);this._createSwatches(this.dap_primaryPalette,
this._brightsPalette);this._createSwatches(this.dap_secondaryPalette,this._pastelsPalette)},_silentlyUpdateHexInput:function(a){a="no-color"===a?"":a.toHex();this._silentlyUpdateIntermediateChangingValueWidget(this.dap_hexInput,a)},_silentlyUpdateIntermediateChangingValueWidget:function(a,b){a.intermediateChanges=!1;a.set("value",b,!1);a.intermediateChanges=!0},_addRecentColor:function(a){if(a){var b=this.recentColors,c=b.indexOf(a);-1<c&&b.splice(c,1);b.unshift(a);b.length>this.colorsPerRow&&b.pop();
this._renderRecentSwatches()}},_renderRecentSwatches:function(){if(this.recentColors){var a=p("."+c.recent+"."+c.swatch,this.dap_recentColorPalette);this.recentColors.forEach(function(b,f){if(f<this.colorsPerRow){if(f+1>a.length){var d=this._createSwatch({hexColor:b,className:c.swatch+" "+c.recent,paletteNode:this.dap_recentColorPalette});a.push(d)}k.set(a[f],"backgroundColor",b)}},this)}},_renderSuggestedSwatches:function(){if(this.suggestedColors){var a=p("."+c.suggested+"."+c.swatch,this.dap_recentColorPalette);
this.suggestedColors.forEach(function(b,d){if(d<this.colorsPerRow){if(d+1>a.length){var e=this._createSwatch({hexColor:b,className:c.swatch+" "+c.suggested,paletteNode:this.dap_suggestedColorPalette});a.push(e)}k.set(a[d],"backgroundColor",b)}},this)}},_clearRecentSwatches:function(){h.empty(this.dap_recentColorPalette)},_clearSuggestedSwatches:function(){h.empty(this.dap_suggestedColorPalette)},_clearSelection:function(){p("."+c.selected,this.dap_paletteContainer).removeClass(c.selected)},_highlightColor:function(a){var b=
this._findColorSwatch(a);b&&(a=d.normalizeColor(a),a=d.getContrastingColor(a),e.add(b,c.selected),k.set(b,"borderColor",a.toHex()))},_findColorSwatch:function(a){var b=this._activePalette.colors;a=d.toHex(a);var c;-1<b.indexOf(a)&&(c=this._swatches[a]);return c},_enableTransparencySlider:function(){e.remove(this.dap_transparencyLabel,c.disabled);this.dap_transparencySlider.set("disabled",!1)},_disableTransparencySlider:function(){e.add(this.dap_transparencyLabel,c.disabled);this.dap_transparencySlider.set("disabled",
!0)}});n.NO_COLOR="no-color";return n});