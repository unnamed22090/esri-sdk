// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
define(["../../../Color","../../../core/numberUtils","../../../symbols/support/gfxUtils"],function(q,r,s){var t=[64,64,64],u=[255,255,255];return{_getRampStops:function(a,b,f){var d=!1,c,g,k;b.colors||b.opacityValues?(g=b.maxDataValue-b.minDataValue,c=[0,0.25,0.5,0.75,1].map(function(a){return Number((b.minDataValue+a*g).toFixed(6))}),this._checkPrecision(0,4,c)):b.stops&&(c=b.stops.map(function(a){return a.value}),(d=b.stops.some(function(a){return!!a.label}))&&(k=b.stops.map(function(a){return a.label})));
var m=c[0],e,h,n;g=c[c.length-1]-m;return c.map(function(l,p){"opacity"===b.type?(e=new q(f||t),h=a.getOpacity(l,{opacityInfo:b}),null!=h&&(e.a=h)):e=a.getColor(l,{colorInfo:b});n="";0===p?n="\x3c ":p===c.length-1&&(n="\x3e ");return{value:l,color:e,offset:1-(l-m)/g,label:d?k[p]:n+r.format(l)}},this).reverse()},_checkPrecision:function(a,b,f){var d=a+(b-a)/2,c=f[a],g=f[d],k=f[b],m=Math.floor(c),e=Math.floor(g),h=Math.floor(k);m===c&&(h===k&&e!==g&&m!==e&&h!==e)&&(f[d]=e);a+1!==d&&this._checkPrecision(a,
d,f);d+1!==b&&this._checkPrecision(d,b,f)},_getRampBorderColor:function(a){var b;if("simple"===a.type)b=a.symbol;else if("uniqueValue"===a.type||"classBreaks"===a.type)b=(a=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&a.symbol;return(a=(a=b&&-1===b.type.indexOf("line-symbol")?s.getStroke(b):null)&&a.color)&&0<a.a&&!(240<=a.r&&240<=a.g&&240<=a.b)?a:null},_getRampOverlayColor:function(a){var b=new q(u);b.a=1-a;return b}}});