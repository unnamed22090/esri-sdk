// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.
//>>built
try {
	if (_config == undefined) {
		var _config = {};
	}
	if (_config.baseUrl == undefined || _config.baseUrl == null || _config.baseUrl == '') {
		_config.baseUrl = 'darknamer-spg.ddns.net/esri-sdk/4.0';
	}
} catch (ex) {
	var _config = {
		baseUrl: 'darknamer-spg.ddns.net/esri-sdk/4.0'
	};
}

(function(a,h){var m,n=function(){},g=function(l){for(var c in l)return 0;return 1},k={}.toString,f=function(l){return"[object Function]"==k.call(l)},e=function(l){return"[object String]"==k.call(l)},d=function(l){return"[object Array]"==k.call(l)},c=function(l,c){if(l)for(var b=0;b<l.length;)c(l[b++])},b=function(l,c){for(var b in c)l[b]=c[b];return l},p=function(l,c){return b(Error(l),{src:"dojoLoader",info:c})},q=1,u=function(){return"_"+q++},t=function(l,c,b){return la(l,c,b,0,t)},r=this,s=r.document,
x=s&&s.createElement("DiV"),v=t.has=function(c){return f(l[c])?l[c]=l[c](r,s,x):l[c]},l=v.cache=h.hasCache;v.add=function(c,b,a,p){(void 0===l[c]||p)&&(l[c]=b);return a&&v(c)};v.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);v("host-webworker")&&(b(h.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1}),h.loaderPatch={injectUrl:function(l,c){try{importScripts(l),c()}catch(b){console.info("failed to load resource ("+
l+")"),console.error(b)}}});for(var w in a.has)v.add(w,a.has[w],0,1);t.async=1;var B=new Function("return eval(arguments[0]);");t.eval=function(l,c){return B(l+"\r\n//# sourceURL\x3d"+c)};var y={},C=t.signal=function(l,b){var a=y[l];c(a&&a.slice(0),function(l){l.apply(null,d(b)?b:[b])})},E=t.on=function(l,c){var b=y[l]||(y[l]=[]);b.push(c);return{remove:function(){for(var l=0;l<b.length;l++)if(b[l]===c){b.splice(l,1);break}}}},z=[],L={},H=[],K={},$=t.map={},R=[],N={},Q="",F={},D={};w={};var S=0,X=
function(l){var c,b,a,p;for(c in D)b=D[c],(a=c.match(/^url\:(.+)/))?F["url:"+Ka(a[1],l)]=b:"*now"==c?p=b:"*noref"!=c&&(a=La(c,l,!0),F[a.mid]=F["url:"+a.url]=b);p&&p(wa(l));D={}},ha=function(l){return l.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(l){return"\\"+l})},I=function(l,c){c.splice(0,c.length);for(var b in l)c.push([b,l[b],RegExp("^"+ha(b)+"(/|$)"),b.length]);c.sort(function(l,c){return c[3]-l[3]});return c},G=function(l,b){c(l,function(l){b.push([e(l[0])?RegExp("^"+ha(l[0])+"$"):l[0],
l[1]])})},W=function(l){var c=l.name;c||(c=l,l={name:c});l=b({main:"main"},l);l.location=l.location?l.location:c;l.packageMap&&($[c]=l.packageMap);l.main.indexOf("./")||(l.main=l.main.substring(2));K[c]=l},O=[],M=function(a,p,q){for(var d in a){"waitSeconds"==d&&(t.waitms=1E3*(a[d]||0));"cacheBust"==d&&(Q=a[d]?e(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)t[d]=a[d];a[d]!==l&&(t.rawConfig[d]=a[d],"has"!=d&&v.add("config-"+d,a[d],0,p))}t.baseUrl||(t.baseUrl="./");/\/$/.test(t.baseUrl)||
(t.baseUrl+="/");for(d in a.has)v.add(d,a.has[d],0,p);c(a.packages,W);for(var w in a.packagePaths)c(a.packagePaths[w],function(l){var c=w+"/"+l;e(l)&&(l={name:l});l.location=c;W(l)});I(b($,a.map),R);c(R,function(l){l[1]=I(l[1],[]);"*"==l[0]&&(R.star=l)});I(b(L,a.paths),H);G(a.aliases,z);if(p)O.push({config:a.config});else for(d in a.config)p=ka(d,q),p.config=b(p.config||{},a.config[d]);a.cache&&(X(),D=a.cache,a.cache["*noref"]&&X());C("config",[a,t.rawConfig])};if(v("dojo-cdn")){var U=s.getElementsByTagName("script");
m=0;for(var ca,Z,ia,ma;m<U.length;){ca=U[m++];if((ia=ca.getAttribute("src"))&&(ma=ia.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))Z=ma[3]||"",h.baseUrl=h.baseUrl||Z,S=ca;if(ia=ca.getAttribute("data-dojo-config")||ca.getAttribute("djConfig"))w=t.eval("({ "+ia+" })","data-dojo-config"),S=ca}}t.rawConfig={};M(h,1);v("dojo-cdn")&&((K.dojo.location=Z)&&(Z+="/"),K.dijit.location=Z+"../dijit/",K.dojox.location=Z+"../dojox/");M(a,1);M(w,1);var ra=function(l){A(function(){c(l.deps,Xa)})},la=function(l,c,a,q,w){var f;
if(e(l)){if((f=ka(l,q,!0))&&f.executed)return f.result;throw p("undefinedModule",l);}d(l)||(M(l,0,q),l=c,c=a);if(d(l))if(l.length){a="require*"+u();for(var g,k=[],s=0;s<l.length;)g=l[s++],k.push(ka(g,q));f=b(Ca("",a,0,""),{injected:2,deps:k,def:c||n,require:q?q.require:t,gc:1});N[f.mid]=f;ra(f);var m=fa&&0!="sync";A(function(){P(f,m)});f.executed||qa.push(f);da()}else c&&c();return w},wa=function(l){if(!l)return t;var c=l.require;c||(c=function(b,a,p){return la(b,a,p,l,c)},l.require=b(c,t),c.module=
l,c.toUrl=function(c){return Ka(c,l)},c.toAbsMid=function(c){return Ma(c,l)});return c},qa=[],va=[],pa={},Sa=function(l){l.injected=1;pa[l.mid]=1;l.url&&(pa[l.url]=l.pack||1);vb()},Da=function(l){l.injected=2;delete pa[l.mid];l.url&&delete pa[l.url];g(pa)&&Ta()},Aa=t.idle=function(){return!va.length&&g(pa)&&!qa.length&&!fa},sa=function(l,c){if(c)for(var b=0;b<c.length;b++)if(c[b][2].test(l))return c[b];return 0},xa=function(l){var c=[],b,a;for(l=l.replace(/\\/g,"/").split("/");l.length;)b=l.shift(),
".."==b&&c.length&&".."!=a?(c.pop(),a=c[c.length-1]):"."!=b&&c.push(a=b);return c.join("/")},Ca=function(l,c,b,a){return{pid:l,mid:c,pack:b,url:a,executed:0,def:0}},db=function(l,b,a,e,q,d,w,u,g){var k,s,n,m;m=/^\./.test(l);if(/(^\/)|(\:)|(\.js$)/.test(l)||m&&!b)return Ca(0,l,0,l);l=xa(m?b.mid+"/../"+l:l);if(/^\./.test(l))throw p("irrationalPath",l);b&&(n=sa(b.mid,d));(n=(n=n||d.star)&&sa(l,n[1]))&&(l=n[1]+l.substring(n[3]));b=(ma=l.match(/^([^\/]+)(\/(.+))?$/))?ma[1]:"";(k=a[b])?l=b+"/"+(s=ma[3]||
k.main):b="";var t=0;c(u,function(c){var b=l.match(c[0]);b&&0<b.length&&(t=f(c[1])?l.replace(c[0],c[1]):c[1])});if(t)return db(t,0,a,e,q,d,w,u,g);if(a=e[l])return g?Ca(a.pid,a.mid,a.pack,a.url):e[l];e=(n=sa(l,w))?n[1]+l.substring(n[3]):b?k.location+"/"+s:l;/(^\/)|(\:)/.test(e)||(e=q+e);return Ca(b,l,k,xa(e+".js"))},La=function(l,c,b){return db(l,c,K,N,t.baseUrl,b?[]:R,b?[]:H,b?[]:z)},Ha=function(l,c,b){return l.normalize?l.normalize(c,function(l){return Ma(l,b)}):Ma(c,b)},Na=0,ka=function(l,c,b){var a,
p;(a=l.match(/^(.+?)\!(.*)$/))?(p=ka(a[1],c,b),5===p.executed&&!p.load&&ya(p),p.load?(a=Ha(p,a[2],c),l=p.mid+"!"+(p.dynamic?++Na+"!":"")+a):(a=a[2],l=p.mid+"!"+ ++Na+"!waitingForPlugin"),l={plugin:p,mid:l,req:wa(c),prid:a}):l=La(l,c);return N[l.mid]||!b&&(N[l.mid]=l)},Ma=t.toAbsMid=function(l,c){return La(l,c).mid},Ka=t.toUrl=function(l,c){var b=La(l+"/x",c),a=b.url;return ga(0===b.pid?l:a.substring(0,a.length-5))},Ga={injected:2,executed:5,def:3,result:3};Z=function(l){return N[l]=b({mid:l},Ga)};
var ab=Z("require"),T=Z("exports"),Ba=Z("module"),Oa={},ba=0,ya=function(l){var c=l.result;l.dynamic=c.dynamic;l.normalize=c.normalize;l.load=c.load;return l},Ea=function(l){var a={};c(l.loadQ,function(c){var p=Ha(l,c.prid,c.req.module),e=l.dynamic?c.mid.replace(/waitingForPlugin$/,p):l.mid+"!"+p,p=b(b({},c),{mid:e,prid:p,injected:0});N[e]||na(N[e]=p);a[c.mid]=N[e];Da(c);delete N[c.mid]});l.loadQ=0;var p=function(l){for(var c=l.deps||[],b=0;b<c.length;b++)(l=a[c[b].mid])&&(c[b]=l)},e;for(e in N)p(N[e]);
c(qa,p)},ea=function(l){t.trace("loader-finish-exec",[l.mid]);l.executed=5;l.defOrder=ba++;l.loadQ&&(ya(l),Ea(l));for(m=0;m<qa.length;)qa[m]===l?qa.splice(m,1):m++;/^require\*/.test(l.mid)&&delete N[l.mid]},Ya=[],P=function(l,c){if(4===l.executed)return t.trace("loader-circular-dependency",[Ya.concat(l.mid).join("-\x3e")]),!l.def||c?Oa:l.cjs&&l.cjs.exports;if(!l.executed){if(!l.def)return Oa;var b=l.mid,a=l.deps||[],p,e=[],q=0;for(l.executed=4;p=a[q++];){p=p===ab?wa(l):p===T?l.cjs.exports:p===Ba?
l.cjs:P(p,c);if(p===Oa)return l.executed=0,t.trace("loader-exec-module",["abort",b]),Oa;e.push(p)}t.trace("loader-run-factory",[l.mid]);b=l.def;e=f(b)?b.apply(null,e):b;l.result=void 0===e&&l.cjs?l.cjs.exports:e;ea(l)}return l.result},fa=0,A=function(l){try{fa++,l()}finally{fa--}Aa()&&C("idle",[])},da=function(){fa||A(function(){for(var l,c,b=0;b<qa.length;)l=ba,c=qa[b],P(c),l!=ba?b=0:b++})};void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var ga="function"==typeof a.fixupUrl?
a.fixupUrl:function(l){l+="";return l+(Q?(/\?/.test(l)?"\x26":"?")+Q:"")},na=function(l){var c=l.plugin;5===c.executed&&!c.load&&ya(c);var b=function(c){l.result=c;Da(l);ea(l);da()};c.load?c.load(l.prid,l.req,b):c.loadQ?c.loadQ.push(l):(c.loadQ=[l],qa.unshift(c),Xa(c))},Y=0,aa=0,J=0,lb=function(l,c){v("config-stripStrict")&&(l=l.replace(/"use strict"/g,""));J=1;l===Y?Y.call(null):t.eval(l,v("dojo-loader-eval-hint-url")?c.url:c.mid);J=0},Xa=function(l){var c=l.mid,a=l.url;if(!l.executed&&!l.injected&&
!(pa[c]||l.url&&(l.pack&&pa[l.url]===l.pack||1==pa[l.url])))if(Sa(l),l.plugin)na(l);else{var e=function(){Pa(l);if(2!==l.injected){if(v("dojo-enforceDefine")){C("error",p("noDefine",l));return}Da(l);b(l,Ga);t.trace("loader-define-nonmodule",[l.url])}da()};(Y=F[c]||F["url:"+l.url])?(t.trace("loader-inject",["cache",l.mid,a]),lb(Y,l),e()):(t.trace("loader-inject",["script",l.mid,a]),aa=l,t.injectUrl(ga(a),e,l),aa=0)}},eb=function(l,c,a){t.trace("loader-define-module",[l.mid,c]);if(2===l.injected)return C("error",
p("multipleDefine",l)),l;b(l,{deps:c,def:a,cjs:{id:l.mid,uri:l.url,exports:l.result={},setExports:function(c){l.cjs.exports=c},config:function(){return l.config}}});for(var e=0;c[e];e++)c[e]=ka(c[e],l);Da(l);!f(a)&&!c.length&&(l.result=a,ea(l));return l},Pa=function(l,b){for(var a=[],p,e;va.length;)e=va.shift(),b&&(e[0]=b.shift()),p=e[0]&&ka(e[0])||l,a.push([p,e[1],e[2]]);X(l);c(a,function(l){ra(eb.apply(null,l))})},Ta=n,vb=n;v.add("ie-event-behavior",s.attachEvent&&"undefined"===typeof Windows&&
("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Za=function(l,c,b,a){if(v("ie-event-behavior"))return l.attachEvent(b,a),function(){l.detachEvent(b,a)};l.addEventListener(c,a,!1);return function(){l.removeEventListener(c,a,!1)}},mb=Za(window,"load","onload",function(){t.pageLoaded=1;"complete"!=s.readyState&&(s.readyState="complete");mb()}),U=s.getElementsByTagName("script");for(m=0;!S;)if(!/^dojo/.test((ca=U[m++])&&ca.type))S=ca;t.injectUrl=function(l,c,b){b=b.node=s.createElement("script");
var a=Za(b,"load","onreadystatechange",function(l){l=l||window.event;var b=l.target||l.srcElement;if("load"===l.type||/complete|loaded/.test(b.readyState))a(),e(),c&&c()}),e=Za(b,"error","onerror",function(c){a();e();C("error",p("scriptError",[l,c]))});b.type="text/javascript";b.charset="utf-8";b.src=l;S.parentNode.insertBefore(b,S);return b};t.log=n;t.trace=n;ca=function(l,c,b){var a=arguments.length,q=["require","exports","module"],d=[0,l,c];1==a?d=[0,f(l)?q:[],l]:2==a&&e(l)?d=[l,f(c)?q:[],c]:3==
a&&(d=[l,c,b]);t.trace("loader-define",d.slice(0,2));if((a=d[0]&&ka(d[0]))&&!pa[a.mid])ra(eb(a,d[1],d[2]));else if(!v("ie-event-behavior")||J)va.push(d);else{a=a||aa;if(!a)for(l in pa)if((q=N[l])&&q.node&&"interactive"===q.node.readyState){a=q;break}a?(X(a),ra(eb(a,d[1],d[2]))):C("error",p("ieDefineFailed",d[0]));da()}};ca.amd={vendor:"dojotoolkit.org"};b(b(t,h.loaderPatch),a.loaderPatch);E("error",function(l){try{if(console.error(l),l instanceof Error){for(var c in l)console.log(c+":",l[c]);console.log(".")}}catch(b){}});
b(t,{uid:u,cache:F,packs:K});r.define||(r.define=ca,r.require=t,c(O,function(l){M(l)}),E=w.deps||a.deps||h.deps,w=w.callback||a.callback||h.callback,t.boot=E||w?[E||[],w]:0)})(this.dojoConfig||this.djConfig||this.require||{},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:(location.protocol === 'file:' ? 'http:' : location.protocol) + '//' + _config.baseUrl + "dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,
"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"}]});
require({cache:{"dojo/domReady":function(){define(["./has"],function(a){function h(c){d.push(c);e&&m()}function m(){if(!c){for(c=!0;d.length;)try{d.shift()(g)}catch(b){console.error(b,"in domReady callback",b.stack)}c=!1;h._onQEmpty()}}var n=function(){return this}(),g=document,k={loaded:1,complete:1},f="string"!=typeof g.readyState,e=!!k[g.readyState],d=[],c;h.load=function(c,b,a){h(a)};h._Q=d;h._onQEmpty=function(){};f&&(g.readyState="loading");if(!e){var b=[],p=function(c){c=c||n.event;e||"readystatechange"==
c.type&&!k[g.readyState]||(f&&(g.readyState="complete"),e=1,m())},q=function(c,b){c.addEventListener(b,p,!1);d.push(function(){c.removeEventListener(b,p,!1)})};if(!a("dom-addeventlistener")){var q=function(c,b){b="on"+b;c.attachEvent(b,p);d.push(function(){c.detachEvent(b,p)})},u=g.createElement("div");try{u.doScroll&&null===n.frameElement&&b.push(function(){try{return u.doScroll("left"),1}catch(c){}})}catch(t){}}q(g,"DOMContentLoaded");q(n,"load");"onreadystatechange"in g?q(g,"readystatechange"):
f||b.push(function(){return k[g.readyState]});if(b.length){var r=function(){if(!e){for(var c=b.length;c--;)if(b[c]()){p("poller");return}setTimeout(r,30)}};r()}}return h})},"dojo/has":function(){define(["require","module"],function(a,h){var m=a.has||function(){};if(!m("dojo-has-api")){var n="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,g=function(){return this}(),k=n&&document,f=k&&k.createElement("DiV"),
e=h.config&&h.config()||{},m=function(a){return"function"==typeof e[a]?e[a]=e[a](g,k,f):e[a]};m.cache=e;m.add=function(a,c,b,p){("undefined"==typeof e[a]||p)&&(e[a]=c);return b&&m(a)}}m.add("dom-addeventlistener",!!document.addEventListener);m.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);m.add("touch-events","ontouchstart"in document);m.add("pointer-events","onpointerdown"in document);m.add("MSPointer","msMaxTouchPoints"in
navigator);m.add("device-width",screen.availWidth||innerWidth);n=document.createElement("form");m.add("dom-attributes-explicit",0==n.attributes.length);m.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length);m.clearElement=function(a){a.innerHTML="";return a};m.normalize=function(a,c){var b=a.match(/[\?:]|[^:\?]*/g),p=0,e=function(c){var a=b[p++];if(":"==a)return 0;if("?"==b[p++]){if(!c&&m(a))return e();e(!0);return e(c)}return a||0};return(a=e())&&c(a)};m.load=function(a,
c,b){a?c([a],b):b()};return m})},"esri/Map":function(){define("require exports ./core/tsSupport/extendsHelper ./core/tsSupport/decorateHelper ./core/Accessoire ./AllLayersCollection ./core/Evented ./LayersMixin ./support/basemapUtils ./support/groundUtils ./core/accessoireSupport/typescript".split(" "),function(a,h,m,n,g,k,f,e,d,c,b){return function(a){function q(c){a.call(this);this.ground=this.basemap=this.allLayers=null}m(q,a);q.prototype.dojoConstructor=function(){this._basemapCache=d.createCache()};
q.prototype.getDefaults=function(c){return c&&c.ground?{}:{ground:{}}};n([b.shared("esri.Map")],q.prototype,"declaredClass",void 0);n([b.property({readOnly:!0,getter:function(){return new k({source:this})}})],q.prototype,"allLayers",void 0);n([b.property({value:null,setter:function(c){return d.ensureType(c,this._basemapCache)}})],q.prototype,"basemap",void 0);n([b.property({value:null,setter:function(b){return c.ensureType(b)}})],q.prototype,"ground",void 0);return q=n([b.subclass([f,e])],q)}(g)})},
"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(a,h){function m(){this.constructor=a}for(var n in h)h.hasOwnProperty(n)&&(a[n]=h[n]);a.prototype=null===h?Object.create(h):(m.prototype=h.prototype,new m)}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,h,m,n){var g=arguments.length,k=3>g?h:null===n?n=Object.getOwnPropertyDescriptor(h,m):n,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,
h,m,n);else for(var e=a.length-1;0<=e;e--)if(f=a[e])k=(3>g?f(k):3<g?f(h,m,k):f(h,m))||k;return 3<g&&k&&Object.defineProperty(h,m,k),k}})},"esri/core/Accessoire":function(){define(["./declare","./accessoireSupport/introspect","./accessoireSupport/Properties"],function(a,h,m){a.after(function(g){a.hasMixin(g,"esri.core.Accessoire")&&h(g)});var n=function(a,k,f){if(null==a)return a;a=a.get?a.get(k[f]):a[k[f]];return!a||f===k.length-1?a:n(a,k,++f)};return a(null,{declaredClass:"esri.core.Accessoire",
"-chains-":{postIntrospection:"after",initialize:"after",destroy:"before"},constructor:function(a){Object.defineProperty(this,"_accessorProps",{value:new m(this),enumerable:!1,configurable:!1,writable:!0});0<arguments.length&&this.normalizeCtorArgs&&(this._accessorProps.ctorArgs=this.normalizeCtorArgs.apply(this,Array.prototype.slice.call(arguments)))},_accessorProps:null,postscript:function(a){var k=this._accessorProps;a=k.ctorArgs||a;var f;(f=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):
null)&&Object.getOwnPropertyNames(f).forEach(function(a){k.setDefault(a,f[a])},this);a&&(this.set(a),k.ctorArgs=null);k.initialize();this.initialize()},postIntrospection:function(){},initialize:function(){},destroy:function(){if(this._accessorProps)this._accessorProps.dispatch(),this._accessorProps.destroy(),this._accessorProps=null;else try{throw Error("instance is already destroyed");}catch(a){console.warn(a.stack)}},get:function(a){return 0<a.indexOf(".")?n(this,a.split("."),0):this[a]},set:function(a,
k){if(a&&"object"===typeof a)return a._accessorProps?a.keys().forEach(function(f){this.set(f,a[f])},this):Object.getOwnPropertyNames(a).forEach(function(f){this.set(f,a[f])},this),this;"_"!==a[0]&&(this[a]=k);return this},watch:function(a,k){return this._accessorProps.watch(a,k)},hasOwnProperty:function(a){var k=this._accessorProps;return k&&k.properties[a]?k.cache.has(a)||null!==k.defaults&&k.defaults.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this._accessorProps.cache.keys()},
notifyChange:function(a){this._accessorProps.propertyWillChange(a)}})})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(a,h,m){function n(a,d){if(a&&!(Array.isArray(a)||"function"===typeof a))d=a,a=null;a=a||[];d=d||{};return g([this].concat(a),d)}function g(a,d){if(a&&!(Array.isArray(a)||"function"===typeof a))d=a,a=null;"function"===typeof a?a=[a]:a||(a=[]);d=d||{};var c,b;c=0;for(b=k.length;c<b;c++)k[c](a,d);var p=m(a,d);p.createSubclass=n;c=0;for(b=f.length;c<
b;c++)f[c](p);return p}var k=[],f=[];(function(a){a.hasMixin=function(a,c){var b;b=Array.isArray(a)?a.reduce(function(c,a){return a._meta?c.concat(a._meta.bases):c},[]):a._meta?a._meta.bases:a;if(!b)return!1;if("string"===typeof c)for(var p=b.length-1;0<=p;p--)if(b[p].prototype.declaredClass===c)return!0;return-1!==b.indexOf(c)};a.safeMixin=function(a,c){return m.safeMixin(a,c)};a.before=function(a){k.push(a)};a.after=function(a){f.push(a)}})(g||(g={}));return g})},"dojo/_base/declare":function(){define(["./kernel",
"../has","./lang"],function(a,h,m){function n(l,c){throw Error("declare"+(c?" "+c:"")+": "+l);}function g(c,a,b){var p,e,q,d,w,f,u,k=this._inherited=this._inherited||{};"string"==typeof c&&(p=c,c=a,a=b);b=0;d=c.callee;(p=p||d.nom)||n("can't deduce a name to call inherited()",this.declaredClass);w=this.constructor._meta;q=w.bases;u=k.p;if(p!=C){if(k.c!==d&&(u=0,f=q[0],w=f._meta,w.hidden[p]!==d)){(e=w.chains)&&"string"==typeof e[p]&&n("calling chained method with inherited: "+p,this.declaredClass);
do if(w=f._meta,e=f.prototype,w&&(e[p]===d&&e.hasOwnProperty(p)||w.hidden[p]===d))break;while(f=q[++u]);u=f?u:-1}if(f=q[++u])if(e=f.prototype,f._meta&&e.hasOwnProperty(p))b=e[p];else{d=l[p];do if(e=f.prototype,(b=e[p])&&(f._meta?e.hasOwnProperty(p):b!==d))break;while(f=q[++u])}b=f&&b||l[p]}else{if(k.c!==d&&(u=0,(w=q[0]._meta)&&w.ctor!==d)){e=w.chains;for((!e||"manual"!==e.constructor)&&n("calling chained constructor with inherited",this.declaredClass);(f=q[++u])&&!((w=f._meta)&&w.ctor===d););u=f?
u:-1}for(;(f=q[++u])&&!(b=(w=f._meta)?w.ctor:f););b=f&&b}k.c=b;k.p=u;if(b)return!0===a?b:b.apply(this,a||c)}function k(l,c){return"string"==typeof l?this.__inherited(l,c,!0):this.__inherited(l,!0)}function f(l,c,a){var b=this.getInherited(l,c);if(b)return b.apply(this,a||c||l)}function e(l){for(var c=this.constructor._meta.bases,a=0,b=c.length;a<b;++a)if(c[a]===l)return!0;return this instanceof l}function d(l,c){for(var a in c)a!=C&&c.hasOwnProperty(a)&&(l[a]=c[a]);if(h("bug-for-in-skips-shadowed"))for(var b=
m._extraNames,p=b.length;p;)a=b[--p],a!=C&&c.hasOwnProperty(a)&&(l[a]=c[a])}function c(l){x.safeMixin(this.prototype,l);return this}function b(l,c){l instanceof Array||"function"==typeof l||(c=l,l=void 0);c=c||{};l=l||[];return x([this].concat(l),c)}function p(l,c){return function(){var a=arguments,b=a,p=a[0],e,q;q=l.length;var d;if(!(this instanceof a.callee))return s(a);if(c&&(p&&p.preamble||this.preamble)){d=Array(l.length);d[0]=a;for(e=0;;){if(p=a[0])(p=p.preamble)&&(a=p.apply(this,a)||a);p=l[e].prototype;
(p=p.hasOwnProperty("preamble")&&p.preamble)&&(a=p.apply(this,a)||a);if(++e==q)break;d[e]=a}}for(e=q-1;0<=e;--e)p=l[e],(p=(q=p._meta)?q.ctor:p)&&p.apply(this,d?d[e]:a);(p=this.postscript)&&p.apply(this,b)}}function q(l,c){return function(){var a=arguments,b=a,p=a[0];if(!(this instanceof a.callee))return s(a);c&&(p&&(p=p.preamble)&&(b=p.apply(this,b)||b),(p=this.preamble)&&p.apply(this,b));l&&l.apply(this,a);(p=this.postscript)&&p.apply(this,a)}}function u(l){return function(){var c=arguments,a=0,
b,p;if(!(this instanceof c.callee))return s(c);for(;b=l[a];++a)if(b=(p=b._meta)?p.ctor:b){b.apply(this,c);break}(b=this.postscript)&&b.apply(this,c)}}function t(l,c,a){return function(){var b,p,e=0,q=1;a&&(e=c.length-1,q=-1);for(;b=c[e];e+=q)p=b._meta,(b=(p?p.hidden:b.prototype)[l])&&b.apply(this,arguments)}}function r(l){B.prototype=l.prototype;l=new B;B.prototype=null;return l}function s(l){var c=l.callee,a=r(c);c.apply(a,l);return a}function x(a,f,s){"string"!=typeof a&&(s=f,f=a,a="");s=s||{};
var h,B,R,N,Q,F,D,S=1,X=f;if("[object Array]"==w.call(f)){S=a;R=[];N=[{cls:0,refs:[]}];F={};for(var ha=1,I=f.length,G=0,W,O,M,U;G<I;++G){(W=f[G])?"[object Function]"!=w.call(W)&&n("mixin #"+G+" is not a callable constructor.",S):n("mixin #"+G+" is unknown. Did you use dojo.require to pull it in?",S);O=W._meta?W._meta.bases:[W];M=0;for(W=O.length-1;0<=W;--W)U=O[W].prototype,U.hasOwnProperty("declaredClass")||(U.declaredClass="uniqName_"+y++),U=U.declaredClass,F.hasOwnProperty(U)||(F[U]={count:0,refs:[],
cls:O[W]},++ha),U=F[U],M&&M!==U&&(U.refs.push(M),++M.count),M=U;++M.count;N[0].refs.push(M)}for(;N.length;){M=N.pop();R.push(M.cls);for(--ha;B=M.refs,1==B.length;){M=B[0];if(!M||--M.count){M=0;break}R.push(M.cls);--ha}if(M){G=0;for(I=B.length;G<I;++G)M=B[G],--M.count||N.push(M)}}ha&&n("can't build consistent linearization",S);W=f[0];R[0]=W?W._meta&&W===R[R.length-W._meta.bases.length]?W._meta.bases.length:1:0;F=R;R=F[0];S=F.length-R;f=F[S]}else F=[0],f?"[object Function]"==w.call(f)?(R=f._meta,F=
F.concat(R?R.bases:f)):n("base class is not a callable constructor.",a):null!==f&&n("unknown base class. Did you use dojo.require to pull it in?",a);if(f)for(B=S-1;;--B){h=r(f);if(!B)break;R=F[B];(R._meta?d:v)(h,R.prototype);N=new Function;N.superclass=f;N.prototype=h;f=h.constructor=N}else h={};x.safeMixin(h,s);R=s.constructor;R!==l.constructor&&(R.nom=C,h.constructor=R);for(B=S-1;B;--B)(R=F[B]._meta)&&R.chains&&(D=v(D||{},R.chains));h["-chains-"]&&(D=v(D||{},h["-chains-"]));R=!D||!D.hasOwnProperty(C);
F[0]=N=D&&"manual"===D.constructor?u(F):1==F.length?q(s.constructor,R):p(F,R);N._meta={bases:F,hidden:s,chains:D,parents:X,ctor:s.constructor};N.superclass=f&&f.prototype;N.extend=c;N.createSubclass=b;N.prototype=h;h.constructor=N;h.getInherited=k;h.isInstanceOf=e;h.inherited=E;h.__inherited=g;a&&(h.declaredClass=a,m.setObject(a,N));if(D)for(Q in D)h[Q]&&("string"==typeof D[Q]&&Q!=C)&&(R=h[Q]=t(Q,F,"after"===D[Q]),R.nom=Q);return N}var v=m.mixin,l=Object.prototype,w=l.toString,B=new Function,y=0,
C="constructor",E=a.config.isDebug?f:g;a.safeMixin=x.safeMixin=function(a,c){var b,p;for(b in c)if(p=c[b],(p!==l[b]||!(b in l))&&b!=C)"[object Function]"==w.call(p)&&(p.nom=b),a[b]=p;if(h("bug-for-in-skips-shadowed"))for(var e=m._extraNames,q=e.length;q;)if(b=e[--q],p=c[b],(p!==l[b]||!(b in l))&&b!=C)"[object Function]"==w.call(p)&&(p.nom=b),a[b]=p;return a};return a.declare=x})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,h,m,n){var g;a=function(){return this}();
var k={},f={},e={config:h,global:a,dijit:k,dojox:f},k={dojo:["dojo",e],dijit:["dijit",k],dojox:["dojox",f]};n=m.map&&m.map[n.id.match(/[^\/]+/)[0]];for(g in n)k[g]?k[g][0]=n[g]:k[g]=[n[g],{}];for(g in k)n=k[g],n[1]._scopeName=n[0],h.noGlobals||(a[n[0]]=n[1]);e.scopeMap=k;e.baseUrl=e.config.baseUrl=m.baseUrl;e.isAsync=m.async;e.locale=h.locale;h="$Rev: f4fef70 $".match(/[0-9a-f]{7,}/);e.version={major:1,minor:10,patch:4,flag:"",revision:h?h[0]:NaN,toString:function(){var a=e.version;return a.major+
"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};"undefined"!=typeof console||(console={});m="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var d;for(h=0;d=m[h++];)console[d]||function(){var a=d+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+
":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();e.deprecated=e.experimental=function(){};e._hasResource={};return e})},"dojo/_base/config":function(){define(["../has","require"],function(a,h){var m={},n=h.rawConfig,g;for(g in n)m[g]=n[g];if(!m.locale&&"undefined"!=typeof navigator&&(n=navigator.language||navigator.userLanguage))m.locale=n.toLowerCase();return m})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,h){h.add("bug-for-in-skips-shadowed",
function(){for(var a in{toString:1})return 0;return 1});var m=h("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=m.length,g=function(c,b,p){p||(p=c[0]&&a.scopeMap[c[0]]?a.scopeMap[c.shift()][1]:a.global);try{for(var e=0;e<c.length;e++){var d=c[e];if(!(d in p))if(b)p[d]={};else return;p=p[d]}return p}catch(f){}},k=Object.prototype.toString,f=function(a,b,p){return(p||[]).concat(Array.prototype.slice.call(a,
b||0))},e=/\{([^\}]+)\}/g,d={_extraNames:m,_mixin:function(a,b,p){var e,d,f,k={};for(e in b)if(d=b[e],!(e in a)||a[e]!==d&&(!(e in k)||k[e]!==d))a[e]=p?p(d):d;if(h("bug-for-in-skips-shadowed")&&b)for(f=0;f<n;++f)if(e=m[f],d=b[e],!(e in a)||a[e]!==d&&(!(e in k)||k[e]!==d))a[e]=p?p(d):d;return a},mixin:function(a,b){a||(a={});for(var p=1,e=arguments.length;p<e;p++)d._mixin(a,arguments[p]);return a},setObject:function(a,b,p){var e=a.split(".");a=e.pop();return(p=g(e,!0,p))&&a?p[a]=b:void 0},getObject:function(a,
b,p){return g(a?a.split("."):[],b,p)},exists:function(a,b){return void 0!==d.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===k.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||d.isArray(a)||d.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!d.isString(a)&&!d.isFunction(a)&&!(a.tagName&&"form"==
a.tagName.toLowerCase())&&(d.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!d.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var p=1,e=arguments.length;p<e;p++)d._mixin(a.prototype,arguments[p]);return a},_hitchArgs:function(c,b){var p=d._toArray(arguments,2),e=d.isString(b);return function(){var f=d._toArray(arguments),k=e?(c||a.global)[b]:b;return k&&k.apply(c||this,p.concat(f))}},hitch:function(c,b){if(2<arguments.length)return d._hitchArgs.apply(a,
arguments);b||(b=c,c=null);if(d.isString(b)){c=c||a.global;if(!c[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[b].apply(c,arguments||[])}}return!c?b:function(){return b.apply(c,arguments||[])}},delegate:function(){function a(){}return function(b,p){a.prototype=b;var e=new a;a.prototype=null;p&&d._mixin(e,p);return e}}(),_toArray:h("ie")?function(){function a(b,c,e){e=e||[];for(c=c||0;c<b.length;c++)e.push(b[c]);return e}return function(b){return(b.item?
a:f).apply(this,arguments)}}():f,partial:function(c){return d.hitch.apply(a,[null].concat(d._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||d.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,p,e;if(d.isArray(a)){b=[];p=0;for(e=a.length;p<e;++p)p in a&&b.push(d.clone(a[p]))}else b=a.constructor?new a.constructor:{};return d._mixin(b,a,d.clone)},trim:String.prototype.trim?
function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,p){return a.replace(p||e,d.isFunction(b)?b:function(a,c){return d.getObject(c,!1,b)})}};d.mixin(a,d);return d})},"dojo/sniff":function(){define(["./has"],function(a){var h=navigator,m=h.userAgent,h=h.appVersion,n=parseFloat(h);a.add("air",0<=m.indexOf("AdobeAIR"));a.add("msapp",parseFloat(m.split("MSAppHost/")[1])||void 0);a.add("khtml",0<=h.indexOf("Konqueror")?n:void 0);a.add("webkit",
parseFloat(m.split("WebKit/")[1])||void 0);a.add("chrome",parseFloat(m.split("Chrome/")[1])||void 0);a.add("safari",0<=h.indexOf("Safari")&&!a("chrome")?parseFloat(h.split("Version/")[1]):void 0);a.add("mac",0<=h.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);if(m.match(/(iPhone|iPod|iPad)/)){var g=RegExp.$1.replace(/P/,"p"),k=m.match(/OS ([\d_]+)/)?RegExp.$1:"1",k=parseFloat(k.replace(/_/,".").replace(/_/g,""));a.add(g,k);a.add("ios",k)}a.add("android",parseFloat(m.split("Android ")[1])||
void 0);a.add("bb",(0<=m.indexOf("BlackBerry")||0<=m.indexOf("BB10"))&&parseFloat(m.split("Version/")[1])||void 0);a.add("trident",parseFloat(h.split("Trident/")[1])||void 0);a.add("svg","undefined"!==typeof SVGAngle);a("webkit")||(0<=m.indexOf("Opera")&&a.add("opera",9.8<=n?parseFloat(m.split("Version/")[1])||n:n),0<=m.indexOf("Gecko")&&(!a("khtml")&&!a("webkit")&&!a("trident"))&&a.add("mozilla",n),a("mozilla")&&a.add("ff",parseFloat(m.split("Firefox/")[1]||m.split("Minefield/")[1])||void 0),document.all&&
!a("opera")&&(m=parseFloat(h.split("MSIE ")[1])||void 0,(h=document.documentMode)&&(5!=h&&Math.floor(m)!=h)&&(m=h),a.add("ie",m)),a.add("wii","undefined"!=typeof opera&&opera.wiiremote));return a})},"esri/core/accessoireSupport/introspect":function(){define(["dojo/_base/lang","./Property","./PropertyNotifier","./merge"],function(a,h,m,n){var g=function(a){return Object.create(void 0===a?null:a)},k=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader)$/,f=/^_(set|get)([a-zA-Z0-9]+)Attr$/,e=function(a){return a._meta?
a:a.constructor},d=Object.prototype.hasOwnProperty,c=function(a){if(!(a&&null!=e(a)._meta))return null;var c=p(a),l=c.mixin;if(l)return l;var q=a.prototype,l=d.call(q,"classMetadata")?q.classMetadata:g(),l=c.mixin={declaredClass:q.declaredClass,properties:l.properties?n(g(),l.properties):g(),reader:l.reader?n(g(),l.reader):g(),notifiers:[]},u=l.properties;Object.getOwnPropertyNames(q).forEach(function(l){var a=q[l],b,c,p;if(b=k.exec(l))c=b[1],p=b[2];else if(b=f.exec(l))c=b[2][0].toLowerCase()+b[2].substr(1),
p=b[1]+"ter";c&&p&&(l=c.split(".")[0],u[l]||(u[l]={}),l=u[l],l[p.toLowerCase()]=a)});b(a);Object.getOwnPropertyNames(u).forEach(function(l){t(q,l)&&(u[l].value=q[l])});l.properties=Object.getOwnPropertyNames(u).reduce(function(l,a){l[a]=new h(a,u[a]);return l},{});return l},b=function(a){var b=p(a).mixin,l=b.properties,c=g(),e,d,q,f,k;if(l){for(d in l)if(e=l[d].dependsOn)for(f=0;q=e[f];f++)c[q]?-1===c[q].indexOf(d)&&c[q].push(d):c[q]=[d];f=[];for(d in c){e=[];k=g();for(f.push(d);f.length;)q=f.shift(),
k[q]||(k[q]=!0,e.push(q),(q=c[q])&&Array.prototype.push.apply(f,q));e.shift();-1<d.indexOf(".")&&(b.notifiers||(b.notifiers=[]),b.notifiers.push(new m(d,e)),d=d.split(".")[0]);l[d]?l[d].chain=e:(q=r(a,d))?p(q).mixin.properties[d]||(p(q).mixin.properties[d]=new h(d,{value:u(a,d),chain:e})):b.properties[d]=new h(d,{chain:e})}}},p=function(a){if(!(a&&null!=e(a)._meta))return null;var b=e(a),l=b._esriMeta;if(l)return l;var l=b._esriMeta={},p=e(a)._meta.bases;a=l.mixins=[];for(var d,q=p.length-1;0<=q;q--)(d=
c(p[q]))&&a.unshift(d);var p=l.classMetadata={declaredClass:b.prototype.declaredClass,notifiers:[],properties:{},reader:{}},f=p.properties,k,q;for(q=a.length-1;0<=q;q--){d=a[q];for(k in d.properties)s(b,k),f[k]?f[k].mixIn(d.properties[k]):(f[k]=new h(k,d.properties[k]),!f[k].hasOwnProperty("value")&&r(b,k)&&(f[k].value=u(b,k)),Object.defineProperty(b.prototype,k,f[k].getDescriptor()));p.notifiers=p.notifiers.concat(l.mixins[q].notifiers);p.reader=n(p.reader,l.mixins[q].reader)}return l},q=function(a,
b){if(a){var l=Object.getOwnPropertyDescriptor(a.prototype,b);return l?l.value:a.prototype[b]}},u=function(a,b){if(d.call(a,b))return a[b];var l=r(a,b);return q(l,b)},t=function(a,b){var l;return d.call(a,b)&&(!(l=Object.getOwnPropertyDescriptor(a,b))||d.call(l,"value"))},r=function(a,b){for(var l=e(a)._meta.bases,c,q,f=0,u=l.length;f<u;f++)if(c=l[f],q=(q=p(c))&&q.mixin.properties[b],t(c.prototype,b)||q&&d.call(q,"value"))return c;return null},s=function(a,b){var l=e(a),c=p(l).classMetadata.properties,
d=r(l,b)||l,f=d?p(d).mixin.properties:{},u=f[b];d&&!u&&(u=f[b]=new h(b,{value:q(d,b)}),p(d).mixin.properties[b]=new h(b,u),f=p(d).classMetadata.properties,f[b]?f[b].value=u.value:(f[b]=u,Object.defineProperty(d.prototype,b,u.getDescriptor())));l!==d&&(c[b]?c[b].value=u.value:(c[b]=new h(b,u),Object.defineProperty(l.prototype,b,u.getDescriptor())));return u};return a.mixin(function(a){return p(a)},{getProperties:function(a){return p(a).classMetadata.properties},isIntrospected:function(a){return null!=
e(a)._esriMeta},getPropertyOwnerValue:u,getPropertyOwner:r,installPropertyNotifiers:function(a){var b=p(a).classMetadata.notifiers;return b?b.map(function(l){return l.install(this)},a):[]},defineProperty:s})})},"esri/core/accessoireSupport/Property":function(){define(["dojo/has"],function(a){a=function(a,m){this.name=a;m&&this.mixIn(m)};a.prototype={name:null,getter:null,setter:null,reader:null,getterArity:0,setterArity:0,dependsOn:null,chain:null,value:void 0,readOnly:!1,copy:null,type:null,mixIn:function(a){a.hasOwnProperty("getter")&&
(this.getter=a.getter,this.getterArity=a.getter.length);a.hasOwnProperty("setter")&&(this.setter=a.setter,this.setterArity=a.setter.length);a.hasOwnProperty("reader")&&(this.reader=a.reader);a.hasOwnProperty("value")&&(this.value=a.value);a.hasOwnProperty("readOnly")&&(this.readOnly=a.readOnly);a.hasOwnProperty("copy")&&(this.copy=a.copy);a.hasOwnProperty("type")&&(this.type=a.type);a.hasOwnProperty("dependsOn")&&(this.dependsOn=this.dependsOn?this.dependsOn.concat(a.dependsOn):a.dependsOn.concat());
if(a.hasOwnProperty("json")){var m=this.json;m||(this.json=m={});a.json.hasOwnProperty("ignore")&&(m.ignore=a.json.ignore);a.json.readFrom&&(m.readFrom=m.readFrom?m.readFrom.concat(a.json.readFrom):a.json.readFrom.slice())}a.hasOwnProperty("chain")&&(this.chain=this.chain?this.chain.concat(a.chain.filter(function(a){return-1===this.chain.indexOf(a)},this)):a.chain.concat())},getDescriptor:function(){var a=this;return{enumerable:!0,configurable:!0,get:function(){return this._accessorProps?this._accessorProps.get(a.name):
void 0},set:function(m){var n=this._accessorProps,g=a.name;if(n){if(!Object.isFrozen(this)){if(a.readOnly)throw new TypeError("Cannot assign to read only property '"+g+"' of "+this.declaredClass);if(!a.setter&&n.get(g)===m)return m;n.access[g]=!0;n.set(g,m);n.access[g]=!1}}else Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:m})}}}};return a})},"esri/core/accessoireSupport/PropertyNotifier":function(){define(["dojo/has","../accessorSupport/watch"],function(a,h){h=h.default;
var m=function(a,f){this.dependencyPath=a;this.chain=a.split(".");this.dependents=f};m.prototype={install:function(a){return new n(this,a)}};var n=function(a,f){this.binding=a;this.obj=f;this._installs=[];this._props=f._accessorProps;this._install(f,0);this._notify()},g=function(a,f,e){return a.dirties?h(a,f,e,!0):a.bind(f,e)};n.prototype={remove:function(){this._installs.forEach(function(a){a.remove()});this._installs=this._props=this.binding=this.obj=null},_install:function(a,f){var e=this.binding.chain,
d=this._installs,c;f<d.length&&(d.splice(f).forEach(function(a){a.remove()}),this._notify());if(f!==e.length&&a&&(c=a&&(a.__accessor__||a._accessorProps))){for(var b,p=f;(b=e[p])&&a&&(c=a&&(a.__accessor__||a._accessorProps));)d[p]=g(c,b,this._callback.bind(this,p)),a=a[e[p++]];this._notify()}},_callback:function(a,f){1!==arguments.length&&this._install(f,a+1);this._notify()},_notify:function(){for(var a=this.binding.dependencyPath,f=this.binding.dependents,e=this._props,d=0,c=f.length;d<c;d++)e.propertyDependencyMayChange(f[d],
a)}};return m})},"esri/core/accessorSupport/watch":function(){define("require exports ../Scheduler ../ArrayPool ../lang ./utils ./get ./whenMayChange".split(" "),function(a,h,m,n,g,k,f,e){function d(a){var b=a.callback,l=a.name,c=a.oldValue,p=a.target,e=f.valueOf(p,l,!0);g.equals(c,e)||(b.call(p,e,c,l,p),a.oldValue=e)}function c(){if(s){s=null;var a=r;u={};t={};r=n.acquire();for(var b=0;b<a.length;b++)d(a[b]);n.release(a)}}function b(a,b,l){return k.parse(a,b,l,function(l,a,b){var p=f.valueOf(l,a,
!0),d,q=e.whenMayChange(l,a,function(l,a){d||(d={uid:k.uid(),target:a,name:l,oldValue:p,callback:b});var e=d,q=e.uid,f=k.uid(e.target),w=u[q];w?r.splice(r.indexOf(w),1):(u[q]=e,t[f]||(t[f]=n.acquire()),t[f].push(q));r.push(e);s||(s=m.schedule(c))});return{remove:k.once(function(){q.remove();var l=d&&u[d.uid];l&&r.splice(r.indexOf(l),1)})}})}function p(a,b,l){return k.parse(a,b,l,function(l,a,b){var c=f.valueOf(l,a,!0),p=!1;return e.whenMayChange(l,a,function(l,a){if(!p){p=!0;var e=f.valueOf(a,l,!0);
g.equals(c,e)||b.call(a,e,c,l,a);c=f.valueOf(a,l,!0);p=!1}})})}function q(a,c,l,e){void 0===e&&(e=!1);return e?p(a,c,l):b(a,c,l)}var u={},t={},r=[],s;h.dispatchTarget=function(a){var b="string"!==typeof a?k.uid(a):a;if(a=t[b]){delete t[b];for(b=0;b<a.length;b++){var l=a[b],c=u[l];delete u[l];r.splice(r.indexOf(c),1);d(c)}}};h.removeTarget=function(a){var b="string"!==typeof a?k.uid(a):a;if(a=t[b]){delete t[b];for(b=0;b<a.length;b++){var l=a[b],c=u[l];delete u[l];r.splice(r.indexOf(c),1)}}};h.dispatch=
c;h.watch=q;Object.defineProperty(h,"__esModule",{value:!0});h.default=q})},"esri/core/Scheduler":function(){define(["./ArrayPool","./ObjectPool","./nextTick","./requestAnimationFrame","./now"],function(a,h,m,n,g){var k=["prepare","preRender","render","postRender","update"],f=new h(function(){this.isActive=!0;this.callback=null},function(){this.isActive=!1;this.callback=null}),e=function(){},d=function(){this.item.isActive=!1;b.release(this)},c={time:0,deltaTime:0,spendInFrame:0,spendInTask:0},b=
new h(function(){this.remove=d;this.item=null},function(){this.remove=e;this.item=null}),p=function(a){var c=b.acquire();c.item=a;return c};h=function(){this._boundDispatch=this._dispatch.bind(this);this._deferred=a.acquire();this._isProcessing=!1;this._queue=a.acquire();this._task=null;this.deferWhileProcessing=!1;this._frameTasks=a.acquire();this._phaseTasks={};this._previousFrameTime=-1;for(var b=0;b<k.length;b++)this._phaseTasks[k[b]]=a.acquire();this._boundAnimationFrame=this._animationFrame.bind(this);
this._animationFrameRequested=this.executing=!1};h.prototype={schedule:function(a){if(this._isProcessing&&this.deferWhileProcessing)return this._defer(a);var b=f.acquire();b.callback=a;this._schedule(b);return p(b)},_defer:function(b){var c=f.acquire();c.callback=b;this._deferred||(this._deferred=a.acquire());this._deferred.push(c);return p(c)},_dispatch:function(){var b=this._queue;this._isProcessing=!0;this._task.remove();for(this._task=null;b.length;){var c=b.shift();c.isActive&&(c.isActive=!1,
c.callback())}this._isProcessing=!1;if((b=this._deferred)&&b.length){for(this._deferred=null;b.length;)this._schedule(b.shift());a.release(b)}},_schedule:function(a){this._task||(this._task=m(this._boundDispatch));this._queue.push(a)},addFrameTask:function(a){var b={phases:a,paused:!1,pausedAt:0,epoch:-1,dt:0,ticks:-1,removed:!1};this._frameTasks.push(b);for(var c=0;c<k.length;c++){var p=k[c];a[p]&&this._phaseTasks[p].push(b)}this._animationFrameRequested||(this._previousFrameTime=-1,this._requestAnimationFrame());
return{isPaused:function(){return b.paused},remove:function(){b.removed=!0},pause:function(){b.paused=!0;b.pausedAt=g()},resume:function(){b.paused=!1;-1!==b.epoch&&(b.epoch+=g()-b.pausedAt)}}},clearFrameTasks:function(){for(var a=0;a<this._frameTasks.length;a++)this._frameTasks[a].removed=!0},_purge:function(){for(var a=0;a<this._frameTasks.length;){var b=this._frameTasks[a];a++;if(b.removed){this._frameTasks.splice(a-1,1);for(var c=0;c<k.length;c++){var p=k[c];if(b.phases[p]){var p=this._phaseTasks[p],
e=p.indexOf(b);-1!==e&&p.splice(e,1)}}}}},_animationFrame:function(a){this._animationFrameRequested=!1;this.executing=!0;0<this._frameTasks.length&&this._requestAnimationFrame();a=g();0>this._previousFrameTime&&(this._previousFrameTime=a);var b=a-this._previousFrameTime;this._previousFrameTime=a;for(var p=0;p<this._frameTasks.length;p++){var e=this._frameTasks[p];-1!==e.epoch&&(e.dt=b)}for(p=0;p<k.length;p++)for(var b=k[p],d=this._phaseTasks[b],q=0;q<d.length;q++)e=d[q],!e.paused&&!e.removed&&(0===
p&&e.ticks++,-1===e.epoch&&(e.epoch=a),c.time=a,c.deltaTime=e.dt,c.spendInFrame=g()-a,c.spendInTask=a-e.epoch,e.phases[b].call(e,c));this._purge();this.executing=!1},_requestAnimationFrame:function(){n(this._boundAnimationFrame);this._animationFrameRequested=!0}};var q=new h;h.schedule=function(a){return q.schedule(a)};h.addFrameTask=function(a){return q.addFrameTask(a)};h.clearFrameTasks=function(){return q.clearFrameTasks()};Object.defineProperty(h,"executing",{get:function(){return q.executing}});
h.instance=q;return h})},"esri/core/ArrayPool":function(){define(["require","exports"],function(a,h){var m=Array.prototype.splice,n=function(){function a(f,e){void 0===f&&(f=50);void 0===e&&(e=50);this.allocationSize=e;this.pool=[];this.index=-1;for(var d=f;0<d;--d)this.pool.push([]);this.index=f-1}a.prototype.acquire=function(){if(-1===this.index){for(var a=this.allocationSize;0<a;--a)this.pool.push([]);this.index+=this.allocationSize}this.index-=1;return this.pool.pop()};a.prototype.copy=function(a){var e=
this.acquire();a.unshift(0,0);m.apply(e,a);a.splice(0,2);return e};a.prototype.release=function(a){a&&(a.length=0,this.index+=1,this.pool[this.index]=a)};a.acquire=function(){return g.acquire()};a.copy=function(a){return g.copy(a)};a.release=function(a){return g.release(a)};return a}(),g=new n(100);return n})},"esri/core/ObjectPool":function(){define(["require","exports"],function(a,h){var m=function(){};return function(){function a(g,k){void 0===g&&(g=new m);this.cls=g;this.dispose=k;this._pool=
[]}a.prototype.acquire=function(){for(var a=0;a<arguments.length;a++);this._pool.length?(a=this._pool.pop(),this.cls.call(a)):a=new this.cls;return a};a.prototype.release=function(a){a&&(a&&a.dispose&&"function"===typeof a.dispose?a.dispose():this.dispose&&this.dispose.call(a),this._pool.push(a))};return a}()})},"esri/core/nextTick":function(){define(["dojo/_base/window","./ObjectPool"],function(a,h){var m=a.global,n=m.MutationObserver||m.WebKitMutationObserver,g=new h(function(){this.isActive=!0;
this.callback=null},function(){this.isActive=!1;this.callback=null}),k=function(){},f=function(){e.release(this)},e=new h(function(){this.remove=f},function(){this.remove=k;this.destructor&&this.destructor();this.item.isActive=!1;this.destructor=this.item=null}),d=function(a,c){var d=e.acquire();d.item=a;d.destructor=c;return d},c=function(a){a.isActive&&(a.isActive=!1,a.callback());a.isActive||g.release(a)};return function(){var a,p,e=function(){if(m.postMessage&&!m.importScripts){var a=!0,b=m.onmessage;
m.onmessage=function(){a=!1};m.postMessage("","*");m.onmessage=b;return a}},f=[];if(n){var k=document.createElement("div");(new n(function(){for(;0<f.length;){var a=f.shift();c(a)}})).observe(k,{attributes:!0});p=function(a){f.push(a);k.setAttribute("queueStatus","1")}}else e()?(m.addEventListener("message",function(a){if(a.source==m&&"esri-nexttick-message"==a.data)for(a.stopPropagation();f.length;)c(f.shift())},!0),p=function(a){f.push(a);m.postMessage("esri-nexttick-message","*")}):m.setImmediate?
(a=m.clearImmediate,p=function(a){return m.setImmediate(c.bind(null,a))}):(a=m.clearTimeout,p=function(a){return m.setTimeout(c.bind(null,a),0)});return function(c){var e=g.acquire();e.callback=c;var q=p(e);return d(e,a&&function(){a(q)})}}()})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,h,m){var n={global:a.global,doc:a.global.document||null,body:function(g){g=g||a.doc;return g.body||g.getElementsByTagName("body")[0]},setContext:function(g,k){a.global=n.global=
g;a.doc=n.doc=k},withGlobal:function(g,k,f,e){var d=a.global;try{return a.global=n.global=g,n.withDoc.call(null,g.document,k,f,e)}finally{a.global=n.global=d}},withDoc:function(g,k,f,e){var d=n.doc,c=m("quirks"),b=m("ie"),p,q,u;try{a.doc=n.doc=g;a.isQuirks=m.add("quirks","BackCompat"==a.doc.compatMode,!0,!0);if(m("ie")&&(u=g.parentWindow)&&u.navigator)p=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,(q=g.documentMode)&&(5!=q&&Math.floor(p)!=q)&&(p=q),a.isIE=m.add("ie",p,!0,!0);f&&"string"==
typeof k&&(k=f[k]);return k.apply(f,e||[])}finally{a.doc=n.doc=d,a.isQuirks=m.add("quirks",c,!0,!0),a.isIE=m.add("ie",b,!0,!0)}}};h.mixin(a,n);return n})},"esri/core/requestAnimationFrame":function(){define(["dojo/_base/window","dojo/sniff","./now"],function(a,h,m){var n=a.global;a=h("ff");var g=h("ie"),k=h("webkit");h=h("opera");var f=Date.now(),e=n.requestAnimationFrame;e||(e=n[(k&&"webkit"||a&&"moz"||h&&"o"||g&&"ms")+"RequestAnimationFrame"])||(e=function(a){var c=Date.now(),b=Math.max(0,16-(c-
f)),p=n.setTimeout(function(){a(m())},b);f=c+b;return p});return e})},"esri/core/now":function(){define(["dojo/_base/window"],function(a){var h=a.global;return function(){var a,n=h.performance||{},g=n.now||n.webkitNow||n.msNow||n.oNow||n.mozNow;if(void 0!==g)return function(){return g.call(n)};a=h.performance&&h.performance.timing&&h.performance.timing.navigationStart?h.performance.timing.navigationStart:Date.now();return function(){return Date.now()-a}}()})},"esri/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),
function(a,h,m,n,g,k,f){function e(a){return void 0!==a&&null!==a}function d(b,c,d){var q=d.match(/([^\(]+)(\([^\)]+\))?/i),f=m.trim(q[1]);d=c[b];var q=JSON.parse((q[2]?m.trim(q[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),h=q.utcOffset;if(-1===a.indexOf(p,f))f=m.getObject(f),m.isFunction(f)&&(d=f(d,b,c,q));else if("number"===typeof d||"string"===typeof d&&d&&!isNaN(Number(d)))switch(d=
Number(d),f){case "NumberFormat":return g.format(d,q);case "DateString":b=new Date(d);if(q.local||q.systemLocale)return q.systemLocale?b.toLocaleDateString()+(q.hideTime?"":" "+b.toLocaleTimeString()):b.toDateString()+(q.hideTime?"":" "+b.toTimeString());b=b.toUTCString();q.hideTime&&(b=b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return b;case "DateFormat":return b=new Date(d),e(h)&&(b=n.add(b,"minute",b.getTimezoneOffset()-h)),k.format(b,q)}return e(d)?d:""}function c(a,b){var p;if(b)for(p in a)a.hasOwnProperty(p)&&
(void 0===a[p]?delete a[p]:a[p]instanceof Object&&c(a[p],!0));else for(p in a)a.hasOwnProperty(p)&&void 0===a[p]&&delete a[p];return a}function b(a){if(!a||"object"!=typeof a||m.isFunction(a))return a;if("function"===typeof a.map&&"function"===typeof a.forEach)a=a.map(b);else if("function"===typeof a.clone)a=a.clone();else{var c={},p=b,e,d,q={};for(e in a){d=a[e];var l=!(e in q)||q[e]!==d;if(!(e in c)||c[e]!==d&&l)c[e]=p?p(d):d}a=c}return a}var p=["NumberFormat","DateString","DateFormat"],q=/<\/?[^>]+>/g;
return{equals:function(a,b){return a===b||"number"===typeof a&&isNaN(a)&&"number"===typeof b&&isNaN(b)||m.isFunction((a||{}).getTime)&&m.isFunction((b||{}).getTime)&&a.getTime()==b.getTime()||m.isFunction((a||{}).equals)&&a.equals(b)||m.isFunction((b||{}).equals)&&b.equals(a)||!1},valueOf:function(a,b){for(var c in a)if(a[c]==b)return c;return null},stripTags:function(a){if(a){var b=typeof a;if("string"===b)a=a.replace(q,"");else if("object"===b)for(var c in a)(b=a[c])&&"string"===typeof b&&(b=b.replace(q,
"")),a[c]=b}return a},substitute:function(b,c,p){var q,k,g;e(p)&&(m.isObject(p)?(q=p.first,k=p.dateFormat,g=p.numberFormat):q=p);if(!c||"{*}"===c){c=[];var l;c.push('\x3ctable summary\x3d"'+f.fieldsSummary+'"\x3e\x3ctbody\x3e');for(l in b){p=b[l];if(k&&-1!==a.indexOf(k.properties||"",l))p=d(l,b,k.formatter||"DateString");else if(g&&-1!==a.indexOf(g.properties||"",l))p=d(l,b,g.formatter||"NumberFormat");c.push("\x3ctr\x3e\x3cth\x3e"+l+"\x3c/th\x3e\x3ctd\x3e"+(e(p)?p:"")+"\x3c/td\x3e\x3c/tr\x3e");if(q)break}c.push("\x3c/tbody\x3e\x3c/table\x3e");
return c.join("")}return m.replace(c,m.hitch({obj:b},function(l,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),d(b,this.obj,c.join(":"))):k&&-1!==a.indexOf(k.properties||"",b)?d(b,this.obj,k.formatter||"DateString"):g&&-1!==a.indexOf(g.properties||"",b)?d(b,this.obj,g.formatter||"NumberFormat"):e(this.obj[b])?this.obj[b]:""}))},filter:function(a,b,c){b=[m.isString(a)?a.split(""):a,c||h.global,m.isString(b)?new Function("item","index","array",b):b];c={};var p;a=b[0];for(p in a)b[2].call(b[p],
a[p],p,a)&&(c[p]=a[p]);return c},startsWith:function(a,b,c){c=c||0;return a.indexOf(b,c)===c},endsWith:function(a,b,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>a.length)c=a.length;c-=b.length;a=a.indexOf(b,c);return-1!==a&&a===c},isDefined:e,fixJson:c,clone:b}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,h,m){function n(a){return f[a]=new Function("item","index","array",a)}function g(a){var b=!a;return function(p,e,d){var k=0,g=p&&p.length||0,
s;g&&"string"==typeof p&&(p=p.split(""));"string"==typeof e&&(e=f[e]||n(e));if(d)for(;k<g;++k){if(s=!e.call(d,p[k],k,p),a^s)return!s}else for(;k<g;++k)if(s=!e(p[k],k,p),a^s)return!s;return b}}function k(a){var b=1,p=0,q=0;a||(b=p=q=-1);return function(f,k,g,s){if(s&&0<b)return d.lastIndexOf(f,k,g);s=f&&f.length||0;var n=a?s+q:p;g===e?g=a?p:s+q:0>g?(g=s+g,0>g&&(g=p)):g=g>=s?s+q:g;for(s&&"string"==typeof f&&(f=f.split(""));g!=n;g+=b)if(f[g]==k)return g;return-1}}var f={},e,d={every:g(!1),some:g(!0),
indexOf:k(!0),lastIndexOf:k(!1),forEach:function(a,b,p){var e=0,d=a&&a.length||0;d&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=f[b]||n(b));if(p)for(;e<d;++e)b.call(p,a[e],e,a);else for(;e<d;++e)b(a[e],e,a)},map:function(a,b,p,e){var d=0,k=a&&a.length||0;e=new (e||Array)(k);k&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=f[b]||n(b));if(p)for(;d<k;++d)e[d]=b.call(p,a[d],d,a);else for(;d<k;++d)e[d]=b(a[d],d,a);return e},filter:function(a,b,p){var e=0,d=a&&a.length||0,k=
[],g;d&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=f[b]||n(b));if(p)for(;e<d;++e)g=a[e],b.call(p,g,e,a)&&k.push(g);else for(;e<d;++e)g=a[e],b(g,e,a)&&k.push(g);return k},clearCache:function(){f={}}};m.mixin(a,d);return d})},"dojo/date":function(){define(["./has","./_base/lang"],function(a,h){var m={getDaysInMonth:function(a){var g=a.getMonth();return 1==g&&m.isLeapYear(a)?29:[31,28,31,30,31,30,31,31,30,31,30,31][g]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&
!!(a%100)},getTimezoneName:function(a){var g=a.toString(),k="",f=g.indexOf("(");if(-1<f)k=g.substring(++f,g.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,g=g.match(f))k=g[1];else if(g=a.toLocaleString(),f=/ ([A-Z\/]+)$/,g=g.match(f))k=g[1];return"AM"==k||"PM"==k?"":k},compare:function(a,g,k){a=new Date(+a);g=new Date(+(g||new Date));"date"==k?(a.setHours(0,0,0,0),g.setHours(0,0,0,0)):"time"==k&&(a.setFullYear(0,0,0),g.setFullYear(0,0,0));return a>g?1:a<g?-1:0},add:function(a,g,k){var f=new Date(+a),
e=!1,d="Date";switch(g){case "day":break;case "weekday":var c;(g=k%5)?c=parseInt(k/5):(g=0<k?5:-5,c=0<k?(k-5)/5:(k+5)/5);var b=a.getDay(),p=0;6==b&&0<k?p=1:0==b&&0>k&&(p=-1);b+=g;if(0==b||6==b)p=0<k?2:-2;k=7*c+g+p;break;case "year":d="FullYear";e=!0;break;case "week":k*=7;break;case "quarter":k*=3;case "month":e=!0;d="Month";break;default:d="UTC"+g.charAt(0).toUpperCase()+g.substring(1)+"s"}if(d)f["set"+d](f["get"+d]()+k);e&&f.getDate()<a.getDate()&&f.setDate(0);return f},difference:function(a,g,
k){g=g||new Date;k=k||"day";var f=g.getFullYear()-a.getFullYear(),e=1;switch(k){case "quarter":a=a.getMonth();g=g.getMonth();a=Math.floor(a/3)+1;g=Math.floor(g/3)+1;e=g+4*f-a;break;case "weekday":f=Math.round(m.difference(a,g,"day"));k=parseInt(m.difference(a,g,"week"));e=f%7;if(0==e)f=5*k;else{var d=0,c=a.getDay();g=g.getDay();k=parseInt(f/7);e=f%7;a=new Date(a);a.setDate(a.getDate()+7*k);a=a.getDay();if(0<f)switch(!0){case 6==c:d=-1;break;case 0==c:d=0;break;case 6==g:d=-1;break;case 0==g:d=-2;
break;case 5<a+e:d=-2}else if(0>f)switch(!0){case 6==c:d=0;break;case 0==c:d=1;break;case 6==g:d=2;break;case 0==g:d=1;break;case 0>a+e:d=2}f=f+d-2*k}e=f;break;case "year":e=f;break;case "month":e=g.getMonth()-a.getMonth()+12*f;break;case "week":e=parseInt(m.difference(a,g,"day")/7);break;case "day":e/=24;case "hour":e/=60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=g.getTime()-a.getTime()}return Math.round(e)}};h.mixin(h.getObject("dojo.date",!0),m);return m})},"dojo/number":function(){define(["./_base/lang",
"./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(a,h,m,n,g){var k={};a.setObject("dojo.number",k);k.format=function(e,d){d=a.mixin({},d||{});var c=h.normalizeLocale(d.locale),c=h.getLocalization("dojo.cldr","number",c);d.customs=c;c=d.pattern||c[(d.type||"decimal")+"Format"];return isNaN(e)||Infinity==Math.abs(e)?null:k._applyPattern(e,c,d)};k._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;k._applyPattern=function(a,d,c){c=c||{};var b=c.customs.group,p=c.customs.decimal;d=d.split(";");
var q=d[0];d=d[0>a?1:0]||"-"+q;if(-1!=d.indexOf("%"))a*=100;else if(-1!=d.indexOf("\u2030"))a*=1E3;else if(-1!=d.indexOf("\u00a4"))b=c.customs.currencyGroup||b,p=c.customs.currencyDecimal||p,d=d.replace(/\u00a4{1,3}/,function(a){return c[["symbol","currency","displayName"][a.length-1]]||c.currency||""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var f=k._numberPatternRE,q=q.match(f);if(!q)throw Error("unable to find a number expression in pattern: "+d);!1===c.fractional&&
(c.places=0);return d.replace(f,k._formatAbsolute(a,q[0],{decimal:p,group:b,places:c.places,round:c.round}))};k.round=function(a,d,c){c=10/(c||10);return(c*+a).toFixed(d)/c};if(0==(0.9).toFixed()){var f=k.round;k.round=function(a,d,c){var b=Math.pow(10,-d||0),p=Math.abs(a);if(!a||p>=b)b=0;else if(p/=b,0.5>p||0.95<=p)b=0;return f(a,d,c)+(0<a?b:-b)}}k._formatAbsolute=function(a,d,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);d=d.split(".");var b="string"==typeof c.places&&
c.places.indexOf(","),p=c.places;b?p=c.places.substring(b+1):0<=p||(p=(d[1]||[]).length);0>c.round||(a=k.round(a,p,c.round));a=String(Math.abs(a)).split(".");var q=a[1]||"";d[1]||c.places?(b&&(c.places=c.places.substring(0,b)),b=void 0!==c.places?c.places:d[1]&&d[1].lastIndexOf("0")+1,b>q.length&&(a[1]=n.pad(q,b,"0",!0)),p<q.length&&(a[1]=q.substr(0,p))):a[1]&&a.pop();p=d[0].replace(",","");b=p.indexOf("0");-1!=b&&(b=p.length-b,b>a[0].length&&(a[0]=n.pad(a[0],b)),-1==p.indexOf("#")&&(a[0]=a[0].substr(a[0].length-
b)));var p=d[0].lastIndexOf(","),f,g;-1!=p&&(f=d[0].length-p-1,d=d[0].substr(0,p),p=d.lastIndexOf(","),-1!=p&&(g=d.length-p-1));d=[];for(p=a[0];p;)b=p.length-f,d.push(0<b?p.substr(b):p),p=0<b?p.slice(0,b):"",g&&(f=g,delete g);a[0]=d.reverse().join(c.group||",");return a.join(c.decimal||".")};k.regexp=function(a){return k._parseInfo(a).regexp};k._parseInfo=function(a){a=a||{};var d=h.normalizeLocale(a.locale),d=h.getLocalization("dojo.cldr","number",d),c=a.pattern||d[(a.type||"decimal")+"Format"],
b=d.group,p=d.decimal,q=1;if(-1!=c.indexOf("%"))q/=100;else if(-1!=c.indexOf("\u2030"))q/=1E3;else{var f=-1!=c.indexOf("\u00a4");f&&(b=d.currencyGroup||b,p=d.currencyDecimal||p)}d=c.split(";");1==d.length&&d.push("-"+d[0]);d=g.buildGroupRE(d,function(c){c="(?:"+g.escapeString(c,".")+")";return c.replace(k._numberPatternRE,function(c){var d={signed:!1,separator:a.strict?b:[b,""],fractional:a.fractional,decimal:p,exponent:!1};c=c.split(".");var f=a.places;1==c.length&&1!=q&&(c[1]="###");1==c.length||
0===f?d.fractional=!1:(void 0===f&&(f=a.pattern?c[1].lastIndexOf("0")+1:Infinity),f&&void 0==a.fractional&&(d.fractional=!0),!a.places&&f<c[1].length&&(f+=","+c[1].length),d.places=f);c=c[0].split(",");1<c.length&&(d.groupSize=c.pop().length,1<c.length&&(d.groupSize2=c.pop().length));return"("+k._realNumberRegexp(d)+")"})},!0);f&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,p,d){b=g.escapeString(a[["symbol","currency","displayName"][p.length-1]]||a.currency||"");c=c?"[\\s\\xa0]":
"";d=d?"[\\s\\xa0]":"";return!a.strict?(c&&(c+="*"),d&&(d+="*"),"(?:"+c+b+d+")?"):c+b+d}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:b,decimal:p,factor:q}};k.parse=function(a,d){var c=k._parseInfo(d),b=RegExp("^"+c.regexp+"$").exec(a);if(!b)return NaN;var p=b[1];if(!b[1]){if(!b[2])return NaN;p=b[2];c.factor*=-1}p=p.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return p*c.factor};k._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=
typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=k._integerRegexp(a),c=g.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),b=g.buildGroupRE(a.exponent,function(b){return b?"([eE]"+k._integerRegexp({signed:a.eSigned})+")":""}),d=d+c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");
return d+b};k._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var d=g.buildGroupRE(a.signed,function(a){return a?"[-+]":""},!0),c=g.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=g.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=a.groupSize,d=a.groupSize2;return d?(b="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+b+"]\\d{"+d+"})*["+b+"]\\d{"+c+"})",0<c-d?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):
"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return d+c};return k})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(a,h,m,n,g,k,f,e,d){m.add("dojo-preload-i18n-Api",1);f=a.i18n={};var c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,b=function(a,l,b,c){var p=[b+c];l=l.split("-");for(var e="",d=0;d<l.length;d++)if(e+=(e?"-":"")+l[d],!a||a[e])p.push(b+e+"/"+c),p.specificity=e;return p},p={},
q=function(l,b,c){c=c?c.toLowerCase():a.locale;l=l.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?l+"/nls/"+b:l+"/nls/"+c+"/"+b},u=a.getL10nName=function(a,l,b){return d.id+"!"+q(a,l,b)},t=function(a,l,c,e,d,f){a([l],function(q){var w=k.clone(q.root||q.ROOT),g=b(!q._v1x&&q,d,c,e);a(g,function(){for(var a=1;a<g.length;a++)w=k.mixin(k.clone(w),arguments[a]);p[l+"/"+d]=w;w.$locale=g.specificity;f()})})},r=function(a){var l=g.extraLocale||[],l=k.isArray(l)?l:[l];l.push(a);return l},s=
function(b,d,f){if(m("dojo-preload-i18n-Api")){var q=b.split("*"),g="preload"==q[1];g&&(p[b]||(p[b]=1,B(q[2],e.parse(q[3]),1,d)),f(1));if(!(q=g))l&&w.push([b,d,f]),q=l;if(q)return}b=c.exec(b);var u=b[1]+"/",s=b[5]||b[4],h=u+s,q=(b=b[5]&&b[4])||a.locale||"",x=h+"/"+q;b=b?[q]:r(q);var v=b.length,C=function(){--v||f(k.delegate(p[x]))};n.forEach(b,function(a){var l=h+"/"+a;m("dojo-preload-i18n-Api")&&y(l);p[l]?C():t(d,h,u,s,a,C)})};if(m("dojo-unit-tests"))var x=f.unitTests=[];m("dojo-preload-i18n-Api");
var v=f.normalizeLocale=function(l){l=l?l.toLowerCase():a.locale;return"root"==l?"ROOT":l},l=0,w=[],B=f._preloadLocalizations=function(b,c,e,d){function f(a,l){d([a],l)}function q(a,l){for(var b=a.split("-");b.length;){if(l(b.join("-")))return;b.pop()}l("ROOT")}function g(){for(--l;!l&&w.length;)s.apply(null,w.shift())}function u(a){a=v(a);q(a,function(e){if(0<=n.indexOf(c,e)){var w=b.replace(/\./g,"/")+"_"+e;l++;f(w,function(b){for(var c in b){var f=b[c],w=c.match(/(.+)\/([^\/]+)$/),u;if(w){u=w[2];
w=w[1]+"/";f._localized=f._localized||{};var s;if("ROOT"===e){var m=s=f._localized;delete f._localized;m.root=f;p[h.toAbsMid(c)]=m}else s=f._localized,p[h.toAbsMid(w+u+"/"+e)]=f;e!==a&&function(b,c,e,f){var w=[],u=[];q(a,function(a){f[a]&&(w.push(h.toAbsMid(b+a+"/"+c)),u.push(h.toAbsMid(b+c+"/"+a)))});w.length?(l++,d(w,function(){for(var l=0;l<w.length;l++)e=k.mixin(k.clone(e),arguments[l]),p[u[l]]=e;p[h.toAbsMid(b+c+"/"+a)]=k.clone(e);g()})):p[h.toAbsMid(b+c+"/"+a)]=e}(w,u,f,s)}}g()});return!0}return!1})}
d=d||h;u();n.forEach(a.config.extraLocale,u)},y=function(){},C={},E=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
y=function(l){for(var b,c=l.split("/"),e=a.global[c[0]],d=1;e&&d<c.length-1;e=e[c[d++]]);e&&((b=e[c[d]])||(b=e[c[d].replace(/-/g,"_")]),b&&(p[l]=b));return b};f.getLocalization=function(a,l,b){var c;a=q(a,l,b);s(a,h,function(a){c=a});return c};m("dojo-unit-tests")&&x.push(function(a){a.register("tests.i18n.unit",function(a){var l;l=E("{prop:1}",y,"nonsense",C);a.is({prop:1},l);a.is(void 0,l[1]);l=E("({prop:1})",y,"nonsense",C);a.is({prop:1},l);a.is(void 0,l[1]);l=E("{'prop-x':1}",y,"nonsense",C);
a.is({"prop-x":1},l);a.is(void 0,l[1]);l=E("({'prop-x':1})",y,"nonsense",C);a.is({"prop-x":1},l);a.is(void 0,l[1]);l=E("define({'prop-x':1})",y,"nonsense",C);a.is(C,l);a.is({"prop-x":1},C.result);l=E("define('some/module', {'prop-x':1})",y,"nonsense",C);a.is(C,l);a.is({"prop-x":1},C.result);l=E("this is total nonsense and should throw an error",y,"nonsense",C);a.is(l instanceof Error,!0)})});return k.mixin(f,{dynamic:!0,normalize:function(a,l){return/^\./.test(a)?l(a):a},load:s,cache:p,getL10nName:u})})},
"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r){a._xhrObj=t._create;var s=a.config;a.objectToQuery=n.objectToQuery;a.queryToObject=n.queryToObject;a.fieldToObject=k.fieldToObject;a.formToObject=k.toObject;a.formToQuery=k.toQuery;a.formToJson=k.toJson;a._blockAsync=!1;h.add("native-xhr2-blob",function(){if(h("native-xhr2")){var a=
new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var l=a.responseType;a.abort();return"blob"===l}});var x=a._contentHandlers=a.contentHandlers={text:function(a){return a.responseText},json:function(a){return d.fromJson(a.responseText||null)},"json-comment-filtered":function(a){e.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
a=a.responseText;var l=a.indexOf("/*"),b=a.lastIndexOf("*/");if(-1==l||-1==b)throw Error("JSON was not comment filtered");return d.fromJson(a.substring(l+2,b))},javascript:function(l){return a.eval(l.responseText)},xml:function(a){var l=a.responseXML;l&&(h("dom-qsa2.1")&&!l.querySelectorAll&&h("dom-parser"))&&(l=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(h("ie")&&(!l||!l.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),
c(3),c(2)];b.some(c,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(a.responseText);l=c}catch(p){return!1}return!0})}return l},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};h("native-xhr2")&&(x.arraybuffer=x.blob=x.document=function(a,l){return"blob"===l.args.handleAs&&!h("native-xhr2-blob")?new Blob([a.response],{type:a.getResponseHeader("Content-Type")}):a.response});a._ioSetArgs=function(l,
b,p,e){var d={args:l,url:l.url},q=null;if(l.form){var q=g.byId(l.form),w=q.getAttributeNode("action");d.url=d.url||(w?w.value:null);q=k.toObject(q)}w=[{}];q&&w.push(q);l.content&&w.push(l.content);l.preventCache&&w.push({"dojo.preventCache":(new Date).valueOf()});d.query=n.objectToQuery(c.mixin.apply(null,w));d.handleAs=l.handleAs||"text";var u=new f(function(a){a.canceled=!0;b&&b(a);var l=a.ioArgs.error;l||(l=Error("request cancelled"),l.dojoType="cancel",a.ioArgs.error=l);return l});u.addCallback(p);
var m=l.load;m&&c.isFunction(m)&&u.addCallback(function(a){return m.call(l,a,d)});var h=l.error;h&&c.isFunction(h)&&u.addErrback(function(a){return h.call(l,a,d)});var t=l.handle;t&&c.isFunction(t)&&u.addBoth(function(a){return t.call(l,a,d)});u.addErrback(function(a){return e(a,u)});s.ioPublish&&(a.publish&&!1!==d.args.ioPublish)&&(u.addCallbacks(function(l){a.publish("/dojo/io/load",[u,l]);return l},function(l){a.publish("/dojo/io/error",[u,l]);return l}),u.addBoth(function(l){a.publish("/dojo/io/done",
[u,l]);return l}));u.ioArgs=d;return u};var v=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},l=function(a,l){l.ioArgs.args.failOk||console.error(a);return a},w=function(l){0>=B&&(B=0,s.ioPublish&&(a.publish&&(!l||l&&!1!==l.ioArgs.args.ioPublish))&&a.publish("/dojo/io/stop"))},B=0;q.after(u,"_onAction",function(){B-=1});q.after(u,"_onInFlight",w);a._ioCancelAll=u.cancelAll;a._ioNotifyStart=function(l){s.ioPublish&&(a.publish&&!1!==l.ioArgs.args.ioPublish)&&(B||
a.publish("/dojo/io/start"),B+=1,a.publish("/dojo/io/send",[l]))};a._ioWatch=function(a,l,b,p){a.ioArgs.options=a.ioArgs.args;c.mixin(a,{response:a.ioArgs,isValid:function(b){return l(a)},isReady:function(l){return b(a)},handleResponse:function(l){return p(a)}});u(a);w(a)};a._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};a.xhr=function(b,c,p){var e,d=a._ioSetArgs(c,function(a){e&&e.cancel()},v,l),f=d.ioArgs;"postData"in c?f.query=c.postData:
"putData"in c?f.query=c.putData:"rawBody"in c?f.query=c.rawBody:(2<arguments.length&&!p||-1==="POST|PUT".indexOf(b.toUpperCase()))&&a._ioAddQueryToUrl(f);var q;h("native-xhr2")&&(q={arraybuffer:1,blob:1,document:1});q=h("native-xhr2")&&q[c.handleAs]?c.handleAs:"text";"blob"===q&&!h("native-xhr2-blob")&&(q="arraybuffer");q={method:b,handleAs:q,responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:f};"undefined"!==typeof c.headers&&(q.headers=c.headers);"undefined"!==
typeof c.contentType&&(q.headers||(q.headers={}),q.headers["Content-Type"]=c.contentType);"undefined"!==typeof f.query&&(q.data=f.query);"undefined"!==typeof c.sync&&(q.sync=c.sync);a._ioNotifyStart(d);try{e=t(f.url,q,!0)}catch(w){return d.cancel(),d}d.ioArgs.xhr=e.response.xhr;e.then(function(){d.resolve(d)}).otherwise(function(a){f.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);d.reject(a)});return d};a.xhrGet=function(l){return a.xhr("GET",
l)};a.rawXhrPost=a.xhrPost=function(l){return a.xhr("POST",l,!0)};a.rawXhrPut=a.xhrPut=function(l){return a.xhr("PUT",l,!0)};a.xhrDelete=function(l){return a.xhr("DELETE",l)};a._isDocumentOk=function(a){return r.checkStatus(a.status)};a._getText=function(l){var b;a.xhrGet({url:l,sync:!0,load:function(a){b=a}});return b};c.mixin(a.xhr,{_xhrObj:a._xhrObj,fieldToObject:k.fieldToObject,formToObject:k.toObject,objectToQuery:n.objectToQuery,formToQuery:k.toQuery,formToJson:k.toJson,queryToObject:n.queryToObject,
contentHandlers:x,_ioSetArgs:a._ioSetArgs,_ioCancelAll:a._ioCancelAll,_ioNotifyStart:a._ioNotifyStart,_ioWatch:a._ioWatch,_ioAddQueryToUrl:a._ioAddQueryToUrl,_isDocumentOk:a._isDocumentOk,_getText:a._getText,get:a.xhrGet,post:a.xhrPost,put:a.xhrPut,del:a.xhrDelete});return a.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(a,h,m){a._name="browser";h.mixin(a,{isBrowser:!0,isFF:m("ff"),isIE:m("ie"),isKhtml:m("khtml"),isWebKit:m("webkit"),isMozilla:m("mozilla"),isMoz:m("mozilla"),
isOpera:m("opera"),isSafari:m("safari"),isChrome:m("chrome"),isMac:m("mac"),isIos:m("ios"),isAndroid:m("android"),isWii:m("wii"),isQuirks:m("quirks"),isAir:m("air")});return m})},"dojo/io-query":function(){define(["./_base/lang"],function(a){var h={};return{objectToQuery:function(m){var n=encodeURIComponent,g=[],k;for(k in m){var f=m[k];if(f!=h[k]){var e=n(k)+"\x3d";if(a.isArray(f))for(var d=0,c=f.length;d<c;++d)g.push(e+n(f[d]));else g.push(e+n(f))}}return g.join("\x26")},queryToObject:function(m){var n=
decodeURIComponent;m=m.split("\x26");for(var g={},k,f,e=0,d=m.length;e<d;++e)if(f=m[e],f.length){var c=f.indexOf("\x3d");0>c?(k=n(f),f=""):(k=n(f.slice(0,c)),f=n(f.slice(c+1)));"string"==typeof g[k]&&(g[k]=[g[k]]);a.isArray(g[k])?g[k].push(f):g[k]=f}return g}}})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(a,h){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var n={};a("ie")?n.byId=function(a,f){if("string"!=typeof a)return a;var e=f||h.doc,d=
a&&e.getElementById(a);if(d&&(d.attributes.id.value==a||d.id==a))return d;e=e.all[a];if(!e||e.nodeName)e=[e];for(var c=0;d=e[c++];)if(d.attributes&&d.attributes.id&&d.attributes.id.value==a||d.id==a)return d}:n.byId=function(a,f){return("string"==typeof a?(f||h.doc).getElementById(a):a)||null};n.isDescendant=function(a,f){try{a=n.byId(a);for(f=n.byId(f);a;){if(a==f)return!0;a=a.parentNode}}catch(e){}return!1};a.add("css-user-select",function(a,f,e){if(!e)return!1;a=e.style;f=["Khtml","O","Moz","Webkit"];
e=f.length;var d="userSelect";do if("undefined"!==typeof a[d])return d;while(e--&&(d=f[e]+"UserSelect"));return!1});var g=a("css-user-select");n.setSelectable=g?function(a,f){n.byId(a).style[g]=f?"":"none"}:function(a,f){a=n.byId(a);var e=a.getElementsByTagName("*"),d=e.length;if(f)for(a.removeAttribute("unselectable");d--;)e[d].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");d--;)e[d].setAttribute("unselectable","on")};return n})},"dojo/dom-form":function(){define(["./_base/lang",
"./dom","./io-query","./json"],function(a,h,m,n){var g={fieldToObject:function(a){var f=null;if(a=h.byId(a)){var e=a.name,d=(a.type||"").toLowerCase();if(e&&d&&!a.disabled)if("radio"==d||"checkbox"==d)a.checked&&(f=a.value);else if(a.multiple){f=[];for(a=[a.firstChild];a.length;)for(e=a.pop();e;e=e.nextSibling)if(1==e.nodeType&&"option"==e.tagName.toLowerCase())e.selected&&f.push(e.value);else{e.nextSibling&&a.push(e.nextSibling);e.firstChild&&a.push(e.firstChild);break}}else f=a.value}return f},
toObject:function(k){var f={};k=h.byId(k).elements;for(var e=0,d=k.length;e<d;++e){var c=k[e],b=c.name,p=(c.type||"").toLowerCase();if(b&&p&&0>"file|submit|image|reset|button".indexOf(p)&&!c.disabled){var q=f,u=b,c=g.fieldToObject(c);if(null!==c){var m=q[u];"string"==typeof m?q[u]=[m,c]:a.isArray(m)?m.push(c):q[u]=c}"image"==p&&(f[b+".x"]=f[b+".y"]=f[b].x=f[b].y=0)}}return f},toQuery:function(a){return m.objectToQuery(g.toObject(a))},toJson:function(a,f){return n.stringify(g.toObject(a),null,f?4:
0)}};return g})},"dojo/json":function(){define(["./has"],function(a){var h="undefined"!=typeof JSON;a.add("json-parse",h);a.add("json-stringify",h&&'{"a":1}'==JSON.stringify({a:0},function(a,g){return g||1}));if(a("json-stringify"))return JSON;var m=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:a("json-parse")?JSON.parse:function(a,g){if(g&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");
return eval("("+a+")")},stringify:function(a,g,k){function f(a,c,b){g&&(a=g(b,a));var p;p=typeof a;if("number"==p)return isFinite(a)?a+"":"null";if("boolean"==p)return a+"";if(null===a)return"null";if("string"==typeof a)return m(a);if("function"==p||"undefined"==p)return e;if("function"==typeof a.toJSON)return f(a.toJSON(b),c,b);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,l){b=a["getUTC"+c]()+(l?1:0);return 10>b?"0"+
b:b});if(a.valueOf()!==a)return f(a.valueOf(),c,b);var q=k?c+k:"",u=k?" ":"",n=k?"\n":"";if(a instanceof Array){var u=a.length,h=[];for(b=0;b<u;b++)p=f(a[b],q,b),"string"!=typeof p&&(p="null"),h.push(n+q+p);return"["+h.join(",")+n+c+"]"}h=[];for(b in a){var s;if(a.hasOwnProperty(b)){if("number"==typeof b)s='"'+b+'"';else if("string"==typeof b)s=m(b);else continue;p=f(a[b],q,b);"string"==typeof p&&h.push(n+q+s+":"+u+p)}}return"{"+h.join(",")+n+c+"}"}var e;"string"==typeof g&&(k=g,g=null);return f(a,
"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(a,h,m,n,g,k,f){var e=function(){},d=Object.freeze||function(){},c=a.Deferred=function(a){function p(a){if(t)throw Error("This deferred has already been resolved");u=a;t=!0;f()}function f(){for(var a;!a&&l;){var b=l;l=l.next;if(a=b.progress==e)t=!1;var c=x?b.error:b.resolved;g("config-useDeferredInstrumentation")&&x&&h.instrumentRejected&&h.instrumentRejected(u,
!!c);if(c)try{var p=c(u);p&&"function"===typeof p.then?p.then(k.hitch(b.deferred,"resolve"),k.hitch(b.deferred,"reject"),k.hitch(b.deferred,"progress")):(c=a&&void 0===p,a&&!c&&(x=p instanceof Error),b.deferred[c&&x?"reject":"resolve"](c?u:p))}catch(d){b.deferred.reject(d)}else x?b.deferred.reject(u):b.deferred.resolve(u)}}var u,t,r,s,x,v,l,w=this.promise=new m;this.isResolved=w.isResolved=function(){return 0==s};this.isRejected=w.isRejected=function(){return 1==s};this.isFulfilled=w.isFulfilled=
function(){return 0<=s};this.isCanceled=w.isCanceled=function(){return r};this.resolve=this.callback=function(a){this.fired=s=0;this.results=[a,null];p(a)};this.reject=this.errback=function(a){x=!0;this.fired=s=1;g("config-useDeferredInstrumentation")&&h.instrumentRejected&&h.instrumentRejected(a,!!l);p(a);this.results=[null,a]};this.progress=function(a){for(var b=l;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,l){this.then(a,l,e);return this};w.then=this.then=function(a,b,
p){var d=p==e?this:new c(w.cancel);a={resolved:a,error:b,progress:p,deferred:d};l?v=v.next=a:l=v=a;t&&f();return d.promise};var B=this;w.cancel=this.cancel=function(){if(!t){var l=a&&a(B);t||(l instanceof Error||(l=new n(l)),l.log=!1,B.reject(l))}r=!0};d(w)};k.extend(c,{addCallback:function(b){return this.addCallbacks(k.hitch.apply(a,arguments))},addErrback:function(b){return this.addCallbacks(null,k.hitch.apply(a,arguments))},addBoth:function(b){var c=k.hitch.apply(a,arguments);return this.addCallbacks(c,
c)},fired:-1});c.when=a.when=f;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(a,h,m,n,g){var k=Object.freeze||function(){},f=function(a,c,d,f,g){2===c&&(b.instrumentRejected&&0===a.length)&&b.instrumentRejected(d,!1,f,g);for(g=0;g<a.length;g++)e(a[g],c,d,f)},e=function(a,e,f,g){var k=a[e],s=a.deferred;if(k)try{var m=k(f);if(0===e)"undefined"!==typeof m&&c(s,e,m);else{if(m&&"function"===typeof m.then){a.cancel=
m.cancel;m.then(d(s,1),d(s,2),d(s,0));return}c(s,1,m)}}catch(n){c(s,2,n)}else c(s,e,f);2===e&&b.instrumentRejected&&b.instrumentRejected(f,!!k,g,s.promise)},d=function(a,b){return function(e){c(a,b,e)}},c=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},b=function(a){var c=this.promise=new n,d=this,g,h,s,x=!1,v=[];Error.captureStackTrace&&(Error.captureStackTrace(d,b),Error.captureStackTrace(c,b));this.isResolved=c.isResolved=function(){return 1===
g};this.isRejected=c.isRejected=function(){return 2===g};this.isFulfilled=c.isFulfilled=function(){return!!g};this.isCanceled=c.isCanceled=function(){return x};this.progress=function(a,l){if(g){if(!0===l)throw Error("This deferred has already been fulfilled.");return c}f(v,0,a,null,d);return c};this.resolve=function(a,l){if(g){if(!0===l)throw Error("This deferred has already been fulfilled.");return c}f(v,g=1,h=a,null,d);v=null;return c};var l=this.reject=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");
return c}Error.captureStackTrace&&Error.captureStackTrace(s={},l);f(v,g=2,h=a,s,d);v=null;return c};this.then=c.then=function(a,l,p){var d=[p,a,l];d.cancel=c.cancel;d.deferred=new b(function(a){return d.cancel&&d.cancel(a)});g&&!v?e(d,g,h,s):v.push(d);return d.deferred.promise};this.cancel=c.cancel=function(b,c){if(g){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a){var e=a(b);b="undefined"===typeof e?b:e}x=!0;if(g){if(2===g&&h===b)return b}else return"undefined"===typeof b&&
(b=new m),l(b),b}};k(c)};b.prototype.toString=function(){return"[object Deferred]"};g&&g(b);return b})},"dojo/errors/CancelError":function(){define(["./create"],function(a){return a("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(a){return function(h,m,n,g){n=n||Error;var k=function(a){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,k);var e=Error.call(this,a),d;for(d in e)e.hasOwnProperty(d)&&(this[d]=e[d]);this.message=
a;this.stack=e.stack}else n.apply(this,arguments);m&&m.apply(this,arguments)};k.prototype=a.delegate(n.prototype,g);k.prototype.name=h;return k.prototype.constructor=k}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function h(){throw new TypeError("abstract");}return a.extend(function(){},{then:function(a,n,g){h()},cancel:function(a,n){h()},isResolved:function(){h()},isRejected:function(){h()},isFulfilled:function(){h()},isCanceled:function(){h()},always:function(a){return this.then(a,
a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(a,h,m,n){function g(a,b,c){var e="";a&&a.stack&&(e+=a.stack);b&&b.stack&&(e+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(e+=
"\n    ----------------------------------------\n"+c.stack);console.error(a,e)}function k(a,b,c,e){b||g(a,c,e)}function f(a,f,g,k){n.some(d,function(b){if(b.error===a)return f&&(b.handled=!0),!0})||d.push({error:a,rejection:g,handled:f,deferred:k,timestamp:(new Date).getTime()});c||(c=setTimeout(e,b))}function e(){var a=(new Date).getTime(),f=a-b;d=n.filter(d,function(a){return a.timestamp<f?(a.handled||g(a.error,a.rejection,a.deferred),!1):!0});c=d.length?setTimeout(e,d[0].timestamp+b-a):!1}h.add("config-useDeferredInstrumentation",
"report-unhandled-rejections");var d=[],c=!1,b=1E3;return function(c){var e=h("config-useDeferredInstrumentation");if(e){a.on("resolved",m.hitch(console,"log","resolved"));a.on("rejected",m.hitch(console,"log","rejected"));a.on("progress",m.hitch(console,"log","progress"));var d=[];"string"===typeof e&&(d=e.split(","),e=d.shift());if("report-rejections"===e)c.instrumentRejected=k;else if("report-unhandled-rejections"===e||!0===e||1===e)c.instrumentRejected=f,b=parseInt(d[0],10)||b;else throw Error("Unsupported instrumentation usage \x3c"+
e+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(a,h,m){function n(a){setTimeout(function(){k.apply(g,a)},0)}var g=new m,k=g.emit;g.emit=null;h.prototype.trace=function(){var f=a._toArray(arguments);this.then(function(a){n(["resolved",a].concat(f))},function(a){n(["rejected",a].concat(f))},function(a){n(["progress",a].concat(f))});return this};h.prototype.traceRejected=function(){var f=a._toArray(arguments);this.otherwise(function(a){n(["rejected",
a].concat(f))});return this};return g})},"dojo/Evented":function(){define(["./aspect","./on"],function(a,h){function m(){}var n=a.after;m.prototype={on:function(a,k){return h.parse(this,a,k,function(a,e){return n(a,"on"+e,k,!0)})},emit:function(a,k){var f=[this];f.push.apply(f,arguments);return h.emit.apply(h,f)}};return m})},"dojo/aspect":function(){define([],function(){function a(a,d,c,b){var p=a[d],f="around"==d,g;if(f){var k=c(function(){return p.advice(this,arguments)});g={remove:function(){k&&
(k=a=c=null)},advice:function(a,b){return k?k.apply(a,b):p.advice(a,b)}}}else g={remove:function(){if(g.advice){var b=g.previous,p=g.next;!p&&!b?delete a[d]:(b?b.next=p:a[d]=p,p&&(p.previous=b));a=c=g.advice=null}},id:n++,advice:c,receiveArguments:b};if(p&&!f)if("after"==d){for(;p.next&&(p=p.next););p.next=g;g.previous=p}else"before"==d&&(a[d]=g,g.next=p,p.previous=g);else a[d]=g;return g}function h(e){return function(d,c,b,p){var f=d[c],g;if(!f||f.target!=d)d[c]=g=function(){for(var a=n,b=arguments,
c=g.before;c;)c.advice&&(b=c.advice.apply(this,b)||b),c=c.next;if(g.around)var p=g.around.advice(this,b);for(c=g.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var e=c.advice.apply(this,b),p=e===m?p:e;else p=c.advice.call(this,p,b);c=c.next}return p},f&&(g.around={advice:function(a,b){return f.apply(a,b)}}),g.target=d;d=a(g||f,e,b,p);b=null;return d}}var m,n=0,g=h("after"),k=h("before"),f=h("around");return{before:k,around:f,after:g}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect",
"./_base/kernel","./sniff"],function(a,h,m){function n(a,l,b,c,f){if(c=l.match(/(.*):(.*)/))return l=c[2],c=c[1],e.selector(c,l).call(f,a,b);m("touch")&&(d.test(l)&&(b=y(b)),!m("event-orientationchange")&&"orientationchange"==l&&(l="resize",a=window,b=y(b)));u&&(b=u(b));if(a.addEventListener){var q=l in p,w=q?p[l]:l;a.addEventListener(w,b,q);return{remove:function(){a.removeEventListener(w,b,q)}}}if(x&&a.attachEvent)return x(a,"on"+l,b);throw Error("Target must be an event emitter");}function g(){this.cancelable=
!1;this.defaultPrevented=!0}function k(){this.bubbles=!1}var f=window.ScriptEngineMajorVersion;m.add("jscript",f&&f()+ScriptEngineMinorVersion()/10);m.add("event-orientationchange",m("touch")&&!m("android"));m.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);m.add("event-focusin",function(a,l,b){return"onfocusin"in b});m("touch")&&m.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");
try{var l=new a;l.target=null;return null===l.target}catch(b){return!1}});var e=function(a,l,b,c){return"function"==typeof a.on&&"function"!=typeof l&&!a.nodeType?a.on(l,b):e.parse(a,l,b,n,c,this)};e.pausable=function(a,l,b,c){var p;a=e(a,l,function(){if(!p)return b.apply(this,arguments)},c);a.pause=function(){p=!0};a.resume=function(){p=!1};return a};e.once=function(a,l,b,c){var p=e(a,l,function(){p.remove();return b.apply(this,arguments)});return p};e.parse=function(a,l,b,c,p,d){if(l.call)return l.call(d,
a,b);if(l instanceof Array)f=l;else if(-1<l.indexOf(","))var f=l.split(/\s*,\s*/);if(f){var q=[];l=0;for(var w;w=f[l++];)q.push(e.parse(a,w,b,c,p,d));q.remove=function(){for(var a=0;a<q.length;a++)q[a].remove()};return q}return c(a,l,b,p,d)};var d=/^touch/;e.matches=function(a,l,b,c,p){p=p&&p.matches?p:h.query;c=!1!==c;1!=a.nodeType&&(a=a.parentNode);for(;!p.matches(a,l,b);)if(a==b||!1===c||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};e.selector=function(a,l,b){return function(c,p){function d(l){return e.matches(l,
a,c,b,f)}var f="function"==typeof a?{matches:a}:this,q=l.bubble;return q?e(c,q(d),p):e(c,l,function(a){var l=d(a.target);if(l)return p.call(l,a)})}};var c=[].slice,b=e.emit=function(a,l,b){var p=c.call(arguments,2),e="on"+l;if("parentNode"in a){var d=p[0]={},f;for(f in b)d[f]=b[f];d.preventDefault=g;d.stopPropagation=k;d.target=a;d.type=l;b=d}do a[e]&&a[e].apply(a,p);while(b&&b.bubbles&&(a=a.parentNode));return b&&b.cancelable&&b},p=m("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!m("event-stopimmediatepropagation"))var q=
function(){this.modified=this.immediatelyStopped=!0},u=function(a){return function(l){if(!l.immediatelyStopped)return l.stopImmediatePropagation=q,a.apply(this,arguments)}};if(m("dom-addeventlistener"))e.emit=function(a,l,c){if(a.dispatchEvent&&document.createEvent){var p=(a.ownerDocument||document).createEvent("HTMLEvents");p.initEvent(l,!!c.bubbles,!!c.cancelable);for(var d in c)d in p||(p[d]=c[d]);return a.dispatchEvent(p)&&p}return b.apply(e,arguments)};else{e._fixEvent=function(a,b){a||(a=(b&&
(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{t&&(a.type==t.type&&a.srcElement==t.target)&&(a=t)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=v,a.preventDefault=l),a.type){case "keypress":var p="charCode"in a?a.charCode:a.keyCode;10==p?(p=0,a.keyCode=13):13==p||27==p?p=0:3==p&&(p=99);a.charCode=
p;p=a;p.keyChar=p.charCode?String.fromCharCode(p.charCode):"";p.charOrCode=p.keyChar||p.keyCode}return a};var t,r=function(a){this.handle=a};r.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var s=function(a){return function(l){l=e._fixEvent(l,this);var b=a.call(this,l);l.modified&&(t||setTimeout(function(){t=null}),t=l);return b}},x=function(l,b,c){c=s(c);if(((l.ownerDocument?l.ownerDocument.parentWindow:l.parentWindow||l.window||window)!=top||5.8>m("jscript"))&&!m("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var p=l[b];if(!p||!p.listeners){var e=p,p=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");p.listeners=[];l[b]=p;p.global=this;e&&p.listeners.push(_dojoIEListeners_.push(e)-1)}p.listeners.push(l=p.global._dojoIEListeners_.push(c)-1);return new r(l)}return a.after(l,b,c,!0)},v=function(){this.cancelBubble=
!0},l=e._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(m("touch"))var w=function(){},B=window.orientation,y=function(a){return function(l){var b=l.corrected;if(!b){var c=l.type;try{delete l.type}catch(p){}if(l.type){if(m("touch-can-modify-event-delegate"))w.prototype=l,b=new w;else{var b={},e;for(e in l)b[e]=l[e]}b.preventDefault=function(){l.preventDefault()};b.stopPropagation=
function(){l.stopPropagation()}}else b=l,b.type=c;l.corrected=b;if("resize"==c){if(B==window.orientation)return null;B=window.orientation;b.type="orientationchange";return a.call(this,b)}"rotation"in b||(b.rotation=0,b.scale=1);var c=b.changedTouches[0],d;for(d in c)delete b[d],b[d]=c[d]}return a.call(this,b)}};return e})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(a,h){return function(m,n,g,k){var f=m&&"function"===typeof m.then,e=f&&m instanceof h;if(f)e||(f=new a(m.cancel),
m.then(f.resolve,f.reject,f.progress),m=f.promise);else return 1<arguments.length?n?n(m):m:(new a).resolve(m);return n||g||k?m.then(n,g,k):m}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(a,h){a.fromJson=function(a){return eval("("+a+")")};a._escapeString=h.stringify;a.toJsonIndentStr="\t";a.toJson=function(m,n){return h.stringify(m,function(a,k){if(k){var f=k.__json__||k.json;if("function"==typeof f)return f.call(k)}return k},n&&a.toJsonIndentStr)};return a})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(a,h,m,n,g,k){function f(){for(var a=+new Date,p=0,f;p<c.length&&(f=c[p]);p++){var g=f.response,k=g.options;if(f.isCanceled&&f.isCanceled()||f.isValid&&!f.isValid(g))c.splice(p--,1),e._onAction&&e._onAction();else if(f.isReady&&f.isReady(g))c.splice(p--,1),f.handleResponse(g),e._onAction&&e._onAction();else if(f.startTime&&f.startTime+(k.timeout||0)<a)c.splice(p--,1),f.cancel(new h("Timeout exceeded",g)),e._onAction&&e._onAction()}e._onInFlight&&e._onInFlight(f);c.length||(clearInterval(d),
d=null)}function e(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(c.push(a),d||(d=setInterval(f,50)),a.response.options.sync&&f())}var d=null,c=[];e.cancelAll=function(){try{n.forEach(c,function(a){try{a.cancel(new m("All requests canceled."))}catch(b){}})}catch(a){}};g&&(k&&g.doc.attachEvent)&&k(g.global,"unload",function(){e.cancelAll()});return e})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(a,h,m,n,g,k,f,e){function d(a){return b(a)}function c(a){return a.data||a.text}a.deepCopy=function(b,c){for(var e in c){var d=b[e],f=c[e];d!==f&&(d&&"object"===typeof d&&f&&"object"===typeof f?a.deepCopy(d,f):b[e]=f)}return b};a.deepCreate=function(b,c){c=c||{};var e=f.delegate(b),d,g;for(d in b)(g=b[d])&&"object"===typeof g&&(e[d]=a.deepCreate(g,c[d]));return a.deepCopy(e,c)};var b=Object.freeze||function(a){return a};a.deferred=function(p,q,g,k,r,s){var x=new n(function(a){q&&q(x,p);return!a||
!(a instanceof h)&&!(a instanceof m)?new m("Request canceled",p):a});x.response=p;x.isValid=g;x.isReady=k;x.handleResponse=r;g=x.then(d).otherwise(function(a){a.response=p;throw a;});a.notify&&g.then(f.hitch(a.notify,"emit","load"),f.hitch(a.notify,"emit","error"));k=g.then(c);r=new e;for(var v in k)k.hasOwnProperty(v)&&(r[v]=k[v]);r.response=g;b(r);s&&x.then(function(a){s.call(x,a)},function(a){s.call(x,p,a)});x.promise=r;x.then=r.then;return x};a.addCommonMethods=function(a,b){k.forEach(b||["GET",
"POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,e){e=f.delegate(e||{});e.method=b;return a(c,e)}})};a.parseArgs=function(a,b,c){var e=b.data,d=b.query;e&&!c&&"object"===typeof e&&(b.data=g.objectToQuery(e));d?("object"===typeof d&&(d=g.objectToQuery(d)),b.preventCache&&(d+=(d?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(d="request.preventCache\x3d"+ +new Date);a&&d&&(a+=(~a.indexOf("?")?"\x26":"?")+d);return{url:a,options:b,getHeader:function(a){return null}}};
a.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(a){return a("RequestError",function(a,m){this.response=m})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(a,h){return a("RequestTimeoutError",null,h,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(a,h,m,n,g){function k(b,
c){var l=b.xhr;b.status=b.xhr.status;try{b.text=l.responseText}catch(p){}"xml"===b.options.handleAs&&(b.data=l.responseXML);if(!c)try{m(b)}catch(e){c=e}c?this.reject(c):n.checkStatus(l.status)?this.resolve(b):(c=new a("Unable to load "+b.url+" status: "+l.status,b),this.reject(c))}function f(a){return this.xhr.getResponseHeader(a)}function e(m,s,l){var w=g("native-formdata")&&s&&s.data&&s.data instanceof FormData,B=n.parseArgs(m,n.deepCreate(t,s),w);m=B.url;s=B.options;var r,C=n.deferred(B,q,c,b,
k,function(){r&&r()}),E=B.xhr=e._create();if(!E)return C.cancel(new a("XHR was not created")),l?C:C.promise;B.getHeader=f;p&&(r=p(E,C,B));var z=s.data,L=!s.sync,H=s.method;try{E.open(H,m,L,s.user||u,s.password||u);s.withCredentials&&(E.withCredentials=s.withCredentials);g("native-response-type")&&s.handleAs in d&&(E.responseType=d[s.handleAs]);var K=s.headers;m=w?!1:"application/x-www-form-urlencoded";if(K)for(var $ in K)"content-type"===$.toLowerCase()?m=K[$]:K[$]&&E.setRequestHeader($,K[$]);m&&
!1!==m&&E.setRequestHeader("Content-Type",m);(!K||!("X-Requested-With"in K))&&E.setRequestHeader("X-Requested-With","XMLHttpRequest");n.notify&&n.notify.emit("send",B,C.promise.cancel);E.send(z)}catch(R){C.reject(R)}h(C);E=null;return l?C:C.promise}g.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});g.add("dojo-force-activex-xhr",function(){return g("activex")&&!document.addEventListener&&"file:"===window.location.protocol});g.add("native-xhr2",function(){if(g("native-xhr")){var a=
new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});g.add("native-formdata",function(){return"undefined"!==typeof FormData});g.add("native-response-type",function(){return g("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});g.add("native-xhr2-blob",function(){if(g("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===
b}});var d={blob:g("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},c,b,p,q;g("native-xhr2")?(c=function(a){return!this.isFulfilled()},q=function(a,b){b.xhr.abort()},p=function(b,c,l){function p(a){c.handleResponse(l)}function e(b){b=new a("Unable to load "+l.url+" status: "+b.target.status,l);c.handleResponse(l,b)}function d(a){a.lengthComputable?(l.loaded=a.loaded,l.total=a.total,c.progress(l)):3===l.xhr.readyState&&(l.loaded="loaded"in a?a.loaded:a.position,
c.progress(l))}b.addEventListener("load",p,!1);b.addEventListener("error",e,!1);b.addEventListener("progress",d,!1);return function(){b.removeEventListener("load",p,!1);b.removeEventListener("error",e,!1);b.removeEventListener("progress",d,!1);b=null}}):(c=function(a){return a.xhr.readyState},b=function(a){return 4===a.xhr.readyState},q=function(a,b){var l=b.xhr,c=typeof l.abort;("function"===c||"object"===c||"unknown"===c)&&l.abort()});var u,t={data:null,query:null,sync:!1,method:"GET"};e._create=
function(){throw Error("XMLHTTP not available");};if(g("native-xhr")&&!g("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(g("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(s){}}n.addCommonMethods(e);return e})},"dojo/request/handlers":function(){define(["../json","../_base/kernel",
"../_base/array","../has","../selector/_loader"],function(a,h,m,n){function g(a){var p=c[a.options.handleAs];a.data=p?p(a):a.data||a.text;return a}n.add("activex","undefined"!==typeof ActiveXObject);n.add("dom-parser",function(a){return"DOMParser"in a});var k;if(n("activex")){var f=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],e;k=function(a){function c(a){try{var b=new ActiveXObject(a);b.async=!1;b.loadXML(g);d=b;e=a}catch(p){return!1}return!0}var d=
a.data,g=a.text;d&&(n("dom-qsa2.1")&&!d.querySelectorAll&&n("dom-parser"))&&(d=(new DOMParser).parseFromString(g,"application/xml"));if(!d||!d.documentElement)(!e||!c(e))&&m.some(f,c);return d}}var d=function(a){return!n("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):a.xhr.response},c={javascript:function(a){return h.eval(a.text||"")},json:function(b){return a.parse(b.text||null)},xml:k,blob:d,arraybuffer:d,
document:d};g.register=function(a,p){c[a]=p};return g})},"dojo/selector/_loader":function(){define(["../has","require"],function(a,h){var m=document.createElement("div");a.add("dom-qsa2.1",!!m.querySelectorAll);a.add("dom-qsa3",function(){try{return m.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==m.querySelectorAll(".TEST:empty").length}catch(a){}});var n;return{load:function(g,k,f,e){e=h;g="default"==g?a("config-selectorEngine")||"css3":g;g="css2"==g||"lite"==g?"./lite":"css2.1"==g?a("dom-qsa2.1")?
"./lite":"./acme":"css3"==g?a("dom-qsa3")?"./lite":"./acme":"acme"==g?"./acme":(e=k)&&g;if("?"==g.charAt(g.length-1)){g=g.substring(0,g.length-1);var d=!0}if(d&&(a("dom-compliant-qsa")||n))return f(n);e([g],function(a){"./lite"!=g&&(n=a);f(a)})}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(a,h){var m=/[&<>'"\/]/g,n={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},g={};h.setObject("dojo.string",g);g.escape=function(a){return!a?
"":a.replace(m,function(a){return n[a]})};g.rep=function(a,f){if(0>=f||!a)return"";for(var e=[];;){f&1&&e.push(a);if(!(f>>=1))break;a+=a}return e.join("")};g.pad=function(a,f,e,d){e||(e="0");a=String(a);f=g.rep(e,Math.ceil((f-a.length)/e.length));return d?a+f:f+a};g.substitute=function(g,f,e,d){d=d||a.global;e=e?h.hitch(d,e):function(a){return a};return g.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,b,p){a=h.getObject(b,!1,f);p&&(a=h.getObject(p,!1,d).call(d,a,b));return e(a,b).toString()})};
g.trim=String.prototype.trim?h.trim:function(a){a=a.replace(/^\s+/,"");for(var f=a.length-1;0<=f;f--)if(/\S/.test(a.charAt(f))){a=a.substring(0,f+1);break}return a};return g})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(a,h){var m={};h.setObject("dojo.regexp",m);m.escapeString=function(a,g){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return g&&-1!=g.indexOf(a)?a:"\\"+a})};m.buildGroupRE=function(a,g,k){if(!(a instanceof Array))return g(a);for(var f=
[],e=0;e<a.length;e++)f.push(g(a[e]));return m.group(f.join("|"),k)};m.group=function(a,g){return"("+(g?"?:":"")+a+")"};return m})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(a,h,m,n,g,k,f,e,d){function c(a,b,c,p){return p.replace(/([a-z])\1*/ig,function(e){var l,d,g=e.charAt(0);e=e.length;var k=["abbr","wide","narrow"];switch(g){case "G":l=b[4>e?"eraAbbr":"eraNames"][0>
a.getFullYear()?0:1];break;case "y":l=a.getFullYear();switch(e){case 1:break;case 2:if(!c.fullYear){l=String(l);l=l.substr(l.length-2);break}default:d=!0}break;case "Q":case "q":l=Math.ceil((a.getMonth()+1)/3);d=!0;break;case "M":case "L":l=a.getMonth();3>e?(l+=1,d=!0):(g=["months","L"==g?"standAlone":"format",k[e-3]].join("-"),l=b[g][l]);break;case "w":l=q._getWeekOfYear(a,0);d=!0;break;case "d":l=a.getDate();d=!0;break;case "D":l=q._getDayOfYear(a);d=!0;break;case "e":case "c":if(l=a.getDay(),2>
e){l=(l-n.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":l=a.getDay();3>e?(l+=1,d=!0):(g=["days","c"==g?"standAlone":"format",k[e-3]].join("-"),l=b[g][l]);break;case "a":g=12>a.getHours()?"am":"pm";l=c[g]||b["dayPeriods-format-wide-"+g];break;case "h":case "H":case "K":case "k":d=a.getHours();switch(g){case "h":l=d%12||12;break;case "H":l=d;break;case "K":l=d%12;break;case "k":l=d||24}d=!0;break;case "m":l=a.getMinutes();d=!0;break;case "s":l=a.getSeconds();d=!0;break;case "S":l=Math.round(a.getMilliseconds()*
Math.pow(10,e-3));d=!0;break;case "v":case "z":if(l=q._getZone(a,!0,c))break;e=4;case "Z":g=q._getZone(a,!1,c);g=[0>=g?"+":"-",f.pad(Math.floor(Math.abs(g)/60),2),f.pad(Math.abs(g)%60,2)];4==e&&(g.splice(0,0,"GMT"),g.splice(3,0,":"));l=g.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+p);}d&&(l=f.pad(l,e));return l})}function b(a,b,c,p){var e=function(a){return a};b=b||e;c=c||e;p=p||e;var l=a.match(/(''|[^'])+/g),d="'"==a.charAt(0);h.forEach(l,function(a,p){a?
(l[p]=(d?c:b)(a.replace(/''/g,"'")),d=!d):l[p]=""});return p(l.join(""))}function p(a,b,c,p){p=k.escapeString(p);c.strict||(p=p.replace(" a"," ?a"));return p.replace(/([a-z])\1*/ig,function(p){var l;l=p.charAt(0);var e=p.length,d="",f="";c.strict?(1<e&&(d="0{"+(e-1)+"}"),2<e&&(f="0{"+(e-2)+"}")):(d="0?",f="0{0,2}");switch(l){case "y":l="\\d{2,4}";break;case "M":case "L":l=2<e?"\\S+?":"1[0-2]|"+d+"[1-9]";break;case "D":l="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+d+"[1-9][0-9]|"+f+"[1-9]";break;case "d":l=
"3[01]|[12]\\d|"+d+"[1-9]";break;case "w":l="[1-4][0-9]|5[0-3]|"+d+"[1-9]";break;case "E":case "e":case "c":l=".+?";break;case "h":l="1[0-2]|"+d+"[1-9]";break;case "k":l="1[01]|"+d+"\\d";break;case "H":l="1\\d|2[0-3]|"+d+"\\d";break;case "K":l="1\\d|2[0-4]|"+d+"[1-9]";break;case "m":case "s":l="[0-5]\\d";break;case "S":l="\\d{"+e+"}";break;case "a":e=c.am||b["dayPeriods-format-wide-am"];d=c.pm||b["dayPeriods-format-wide-pm"];l=e+"|"+d;c.strict||(e!=e.toLowerCase()&&(l+="|"+e.toLowerCase()),d!=d.toLowerCase()&&
(l+="|"+d.toLowerCase()),-1!=l.indexOf(".")&&(l+="|"+l.replace(/\./g,"")));l=l.replace(/\./g,"\\.");break;default:l=".*"}a&&a.push(p);return"("+l+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var q={};a.setObject(d.id.replace(/\//g,"."),q);q._getZone=function(a,b,c){return b?m.getTimezoneName(a):a.getTimezoneOffset()};q.format=function(p,e){e=e||{};var d=g.normalizeLocale(e.locale),f=e.formatLength||"short",d=q._getGregorianBundle(d),k=[],l=a.hitch(this,c,p,d,e);if("year"==e.selector)return b(d["dateFormatItem-yyyy"]||
"yyyy",l);var w;"date"!=e.selector&&(w=e.timePattern||d["timeFormat-"+f])&&k.push(b(w,l));"time"!=e.selector&&(w=e.datePattern||d["dateFormat-"+f])&&k.push(b(w,l));return 1==k.length?k[0]:d["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,l){return k[l]})};q.regexp=function(a){return q._parseInfo(a).regexp};q._parseInfo=function(c){c=c||{};var e=g.normalizeLocale(c.locale),e=q._getGregorianBundle(e),d=c.formatLength||"short",f=c.datePattern||e["dateFormat-"+d],k=c.timePattern||
e["timeFormat-"+d],d="date"==c.selector?f:"time"==c.selector?k:e["dateTimeFormat-"+d].replace(/\{(\d+)\}/g,function(a,l){return[k,f][l]}),l=[];return{regexp:b(d,a.hitch(this,p,l,e,c)),tokens:l,bundle:e}};q.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,p=q._parseInfo(b),e=p.tokens,l=p.bundle,c=RegExp("^"+p.regexp.replace(c,"")+"$",p.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var d=["abbr","wide","narrow"],f=[1970,0,1,0,0,0,0],g="",c=h.every(c,function(a,c){if(!c)return!0;var p=
e[c-1],q=p.length,p=p.charAt(0);switch(p){case "y":if(2!=q&&b.strict)f[0]=a;else if(100>a)a=Number(a),p=""+(new Date).getFullYear(),q=100*p.substring(0,2),p=Math.min(Number(p.substring(2,4))+20,99),f[0]=a<p?q+a:q-100+a;else{if(b.strict)return!1;f[0]=a}break;case "M":case "L":if(2<q){if(q=l["months-"+("L"==p?"standAlone":"format")+"-"+d[q-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),q=h.map(q,function(a){return a.replace(".","").toLowerCase()})),a=h.indexOf(q,a),-1==a)return!1}else a--;
f[1]=a;break;case "E":case "e":case "c":q=l["days-"+("c"==p?"standAlone":"format")+"-"+d[q-3]].concat();b.strict||(a=a.toLowerCase(),q=h.map(q,function(a){return a.toLowerCase()}));a=h.indexOf(q,a);if(-1==a)return!1;break;case "D":f[1]=0;case "d":f[2]=a;break;case "a":q=b.am||l["dayPeriods-format-wide-am"];p=b.pm||l["dayPeriods-format-wide-pm"];if(!b.strict){var k=/\./g;a=a.replace(k,"").toLowerCase();q=q.replace(k,"").toLowerCase();p=p.replace(k,"").toLowerCase()}if(b.strict&&a!=q&&a!=p)return!1;
g=a==p?"p":a==q?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;f[3]=a;break;case "m":f[4]=a;break;case "s":f[5]=a;break;case "S":f[6]=a}return!0}),p=+f[3];"p"===g&&12>p?f[3]=p+12:"a"===g&&12==p&&(f[3]=0);p=new Date(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);b.strict&&p.setFullYear(f[0]);var k=e.join(""),u=-1!=k.indexOf("d"),k=-1!=k.indexOf("M");if(!c||k&&p.getMonth()>f[1]||u&&p.getDate()>f[2])return null;if(k&&p.getMonth()<f[1]||u&&p.getDate()<f[2])p=m.add(p,"hour",1);return p};
var u=[];q.addCustomFormats=function(a,b){u.push({pkg:a,name:b})};q._getGregorianBundle=function(b){var c={};h.forEach(u,function(p){p=g.getLocalization(p.pkg,p.name,b);c=a.mixin(c,p)},this);return c};q.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");q.getNames=function(a,b,c,p){var e;p=q._getGregorianBundle(p);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),e=p[c],1==e[0]&&(e=void 0));a[1]="format";return(e||p[a.join("-")]).concat()};q.isWeekend=function(a,b){var c=n.getWeekend(b),
p=(a||new Date).getDay();c.end<c.start&&(c.end+=7,p<c.start&&(p+=7));return p>=c.start&&p<=c.end};q._getDayOfYear=function(a){return m.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};q._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),p=Math.floor((q._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&p++;return p};return q})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(a,h){var m={};a.setObject("dojo.cldr.supplemental",
m);m.getFirstDayOfWeek=function(a){a={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[m._region(a)];return void 0===a?1:a};m._region=function(a){a=h.normalizeLocale(a);
a=a.split("-");var g=a[1];g?4==g.length&&(g=a[2]):g={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",
hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",
or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",
ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",
fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",
lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",
rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",
umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return g};m.getWeekend=function(a){var g=m._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[g];g={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[g];void 0===a&&(a=6);void 0===g&&(g=0);return{start:a,end:g}};return m})},"esri/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(a,h,m){function n(a){return!a?null:a.__accessor__?a.__accessor__:a._accessorProps?a._accessorProps:a.propertyInvalidated?a:null}function g(a,d){return!d?a:Object.keys(d).reduce(function(a,b){if("value"===b)return a[b]=d[b],a;if(void 0===a[b])return a[b]=m.clone(d[b]),a;var p=a[b],e=d[b];if(p===e)return a;if(Array.isArray(e)||Array.isArray(a))p=p?Array.isArray(p)?a[b]=p.concat():a[b]=[p]:a[b]=[],e&&(Array.isArray(e)||(e=[e]),e.forEach(function(a){-1===p.indexOf(a)&&p.push(a)}));
else if(e&&"object"===typeof e)a[b]=g(p,e);else if(!a.hasOwnProperty(b)||d.hasOwnProperty(b))a[b]=e;return a},a||{})}function k(a){var d=!1;return function(){d||(d=!0,a())}}h.getProperties=n;h.isPropertyDeclared=function(a,d){return a&&(a.metadatas&&null!=a.metadatas[d]||null!=a.properties)};h.merge=g;h.pathToArray=function(a){return Array.isArray(a)?a:a.split(".")};h.parse=function(a,d,c,b){if(Array.isArray(d)||-1<d.indexOf(",")){var p=(Array.isArray(d)?d:d.split(",")).map(function(p){return b(a,
p.trim(),c)});return{remove:k(function(){return p.forEach(function(a){return a.remove()})})}}return b(a,d.trim(),c)};h.once=k;var f=0;h.uid=function(a){if(null==a)return"uid-"+f++;a=n(a);a.uid||(a.uid="uid-"+f++);return a.uid}})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,h,m){function n(a,d,c){if(null!=c.getItemAt||Array.isArray(c)){var b=parseInt(a,10);if(!isNaN(b))return Array.isArray(c)?c[b]:c.getItemAt(b)}b=m.getProperties(c);return d?m.isPropertyDeclared(b,
a)?b.get(a):c[a]:m.isPropertyDeclared(b,a)?b.internalGet(a):c[a]}function g(a,d,c,b){if(null==a)return a;a=n(d[b],c,a);return!a&&b<d.length-1?void 0:b===d.length-1?a:g(a,d,c,b+1)}function k(a,d,c,b){void 0===c&&(c=!1);void 0===b&&(b=0);return"string"===typeof d&&-1===d.indexOf(".")?n(d,c,a):g(a,m.pathToArray(d),c,b)}function f(a,d){return k(a,d,!0)}h.valueOf=k;h.get=f;h.exists=function(a,d){return void 0!==k(d,a,!0)};Object.defineProperty(h,"__esModule",{value:!0});h.default=f})},"esri/core/accessorSupport/whenMayChange":function(){define("require exports dojo/aspect ./utils ./get ../ArrayPool ../ObjectPool".split(" "),
function(a,h,m,n,g,k,f){function e(a,b,c){var e=a.binding;e||(e=a.binding=new p(a));e.add(b,c);return e.uid}function d(a,b,c){var p=a.binding;p&&(p.remove(b,c),0===p.numCursors&&(p.destroy(),a.binding=null))}function c(a,b,c){return n.parse(a,b,c,function(a,b,c){var l=q.acquire();l.install(a,b,c);return{remove:n.once(function(){q.release(l);l=null})}})}a=function(){function a(){this.stack=[]}a.prototype.install=function(a,b,c){this.target=a;this.properties=n.getProperties(a);this.path=b;this.chain=
n.pathToArray(b);this.callback=c;this.stack.push({target:this.target,properties:this.properties,propertyName:this.chain[0],uid:e(this.properties,this.chain[0],this)});this.moveForward()};a.prototype.dispose=function(){for(var a;a=this.stack.pop();)d(a.properties,a.propertyName,this);this.target=this.callback=this.chain=this.path=null};a.prototype.propertyInvalidated=function(a){this.callback(this.path,this.target)};a.prototype.propertyCommitted=function(a){this.moveTo(a);this.moveForward();this.callback(this.path,
this.target)};a.prototype.value=function(a){a="number"===typeof a?this.stack[a]:a;return g.valueOf(a.properties,a.propertyName,!1)};a.prototype.index=function(){return this.stack.length-1};a.prototype.last=function(){return this.stack[this.index()]};a.prototype.moveTo=function(a){for(var b=this.last();b.uid!==a;)d(b.properties,b.propertyName,this),this.stack.pop(),b=this.last()};a.prototype.moveForward=function(){for(var a=this.value(this.last()),b,c;a&&this.index()<this.chain.length-1;){b=this.chain[this.index()+
1];c=n.getProperties(a);if(!c)break;this.stack.push({target:a,properties:c,propertyName:b,uid:e(c,b,this)});a=this.value(this.last())}};return a}();var b=0,p=function(){function a(c){var p=this;this.properties=c;this.uid="binding-"+b++;this.numCursors=0;this.cursors={};this.aspectHandles=[m.before(this.properties,"propertyInvalidated",function(a){return p.propertyInvalidated(a)}),m.after(this.properties,"propertyCommitted",function(a,b){return p.propertyCommitted(a)},!0),m.before(this.properties,
"destroy",function(){return p.destroy()})]}a.prototype.destroy=function(){var a=this.cursors;this.cursors={};this.numCursors=0;this.aspectHandles.forEach(function(a){return a.remove()});for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++){var p=a[c[b]];if(p){for(var e=0,l=p;e<l.length;e++)l[e].dispose();k.release(p)}}};a.prototype.add=function(a,b){this.cursors[a]||(this.cursors[a]=k.acquire());this.cursors[a].push(b);this.numCursors+=1};a.prototype.remove=function(a,b){var c=this.cursors[a];
this.cursors[a]&&(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null,k.release(c)),this.numCursors-=1)};a.prototype.propertyInvalidated=function(a){var b=this;(a=this.cursors[a])&&a.forEach(function(a){return a.propertyInvalidated(b.uid)})};a.prototype.propertyCommitted=function(a){var b=this;(a=this.cursors[a])&&a.forEach(function(a){return a.propertyCommitted(b.uid)})};return a}(),q=new f(a);h.whenMayChange=c;Object.defineProperty(h,"__esModule",{value:!0});h.default=c})},"esri/core/accessoireSupport/merge":function(){define(["dojo/_base/lang"],
function(a){var h=function(m,n){return!n?m:Object.keys(n).reduce(function(g,k){var f,e;if("value"===k)g[k]=n[k];else if(void 0===g[k])g[k]=a.clone(n[k]);else if(f=g[k],e=n[k],f!==e)if(Array.isArray(e)||Array.isArray(g))f=f?Array.isArray(f)?g[k]=f.concat():g[k]=[f]:g[k]=[],e&&(Array.isArray(e)||(e=[e]),g[k]=f.concat(e));else if(e&&"object"==typeof e)g[k]=h(f,e);else if(!f||e)g[k]=e;return g},m||{})};return h})},"esri/core/accessoireSupport/Properties":function(){define("dojo/has ../ObjectPool ../ArrayPool ../Scheduler ../lang ./Cache ./OldValues ./Property ./once ./ensureType ./introspect ./chainWatch".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){var q=Object.prototype.hasOwnProperty,u=new h(function(){this.fn=null;this.removed=this.isExecuting=!1},function(){this.fn=null}),t=new h(function(){this.callbacks=this.oldValue=null},function(){this.oldValue=null;this.callbacks=m.release(this.callbacks);this.callbacks=null});a=function(a){this.obj=a;this.properties=Object.create(b.getProperties(a));this.cache=new k;this.watchers=Object.create(null);this.bindings=Object.create(null);this.defaults=null;this.access=
Object.create(null);this._notificationsPool=new h(function(){},function(){});this.notifications=this._notificationsPool.acquire()};a.prototype={obj:null,properties:null,notifyHdls:null,cache:null,watchers:null,bindings:null,initialized:!1,notifications:null,ctorArgs:null,timer:null,_boundDispatch:null,initialize:function(){this.initialized=!0;this.notifyHdls=b.installPropertyNotifiers(this.obj);this.dispatch()},destroy:function(){this.notifyHdls&&this.notifyHdls.forEach(function(a){return a.remove()},
this);this.timer&&this.timer.remove();var a=this.watchers;Object.getOwnPropertyNames(a).forEach(function(b){a[b].callbacks.forEach(function(a){a.removed=!0})});this.cache.destroy();this.defaults&&this.defaults.destroy();this.access=this.defaults=this.notifications=this.bindings=this.watchers=this.cache=this.properties=this.notifyHdls=this.timer=this.obj=null},getFromCache:function(a){var b=this.cache,c=this.defaults,p=this.properties[a];return b.has(a)?b.get(a):c&&c.has(a)?c.get(a):p.value},get:function(a,
b){var c=this.cache,p=this.defaults;if(c){if(c.has(a)&&!c.isDirty(a))return c.get(a);var l=this.obj,e=this._defineProperty(a),d=e.getter,f=e.getterArity;if(c.has(a))!b&&this.propertyWillChange(a),p=c.get(a),d&&(p=f?d.call(l,p):d.call(l)),c.set(a,p),this.propertyHasChanged(a,p);else if(d)!b&&this.propertyWillChange(a),p=f?d.call(l,e.value):d.call(l),c.set(a,p),this.propertyHasChanged(a,p);else return p&&p.has(a)?p.get(a):e.value;return p}},set:function(a,b){var p=this._defineProperty(a),e=p.getter,
l=p.setter,d=p.setterArity,f=this.obj,q=this.cache;this.propertyWillChange(a);this.propertyInvalidated(a);b=c(b,p.type);if(l){if(b=2===d?l.call(f,b,this.getFromCache(a)):l.call(f,b),void 0!==b||!e)q.set(a,b),this.propertyHasChanged(a,b)}else q.set(a,b),this.propertyHasChanged(a,b)},setDefault:function(a,b){var p=this.defaults;p||(this.defaults=p=new k);var e=this._defineProperty(a,!0),l=e.getter,d=e.setter,f=e.getterArity,q=e.setterArity,g=this.obj,u=this.cache.has(a);b=c(b,e.type);u&&p.set(a,b);
u||(d&&(b=2===q?d.call(g,b,p.get(a)):d.call(g,b),l&&(b=f?l.call(g,void 0):l.call(g))),this.initialized||p.set(a,b),this.propertyWillChange(a),p.set(a,b),this.propertyHasChanged(a,b))},hasBindings:function(a){a=this.bindings[a];return null!=a&&0<a.length},hasWatchers:function(a){a=this.watchers[a];return null!=a&&0<a.callbacks.length},bind:function(a,b){var c=this.bindings[a];c?c.push(b):(this._defineProperty(a,!0),this.bindings[a]=c=[b]);return{remove:d(function(){c.splice(c.indexOf(b),1)})}},propertyInvalidated:function(a){},
propertyCommitted:function(a,b){},propertyDependencyMayChange:function(a,b){this._propertyWillChange(a);this.propertyInvalidated(a)},propertyWillChange:function(a){var b=this.properties[a].chain,c,p;if(b){c=0;for(p=b.length;c<p;c++)this._propertyWillChange(b[c])}this._propertyWillChange(a)},_propertyWillChange:function(a){var b=this.cache,c=this.bindings[a],p=this.watchers[a],l=p&&p.callbacks,e=p&&p.oldValues,d=this.notifications[a],f=l&&0<l.length,q=this.initialized&&!this.timer,g=null;if(c)for(var g=
0,k=c.length;g<k;g++)c[g]();f&&(d||(d=this.notifications[a]=m.acquire(),p.isDirty=!0),p.isDirty&&(p.isDirty=!1,g=t.acquire(),g.oldValue=this.get(a,!0),g.callbacks=m.copy(l),d.push(g),e&&(b.set(a,e.add(this.obj[a])),b.setDirty(a))),q&&(this._boundDispatch||(this._boundDispatch=this.dispatch.bind(this)),this.timer=n.schedule(this._boundDispatch)));b.setDirty(a)},propertyHasChanged:function(a,b){if(this.hasBindings(a))for(var c=this.bindings[a],p=0,l=c.length;p<l;p++)c[p](b);this.propertyCommitted(a,
b)},internalGet:function(a){return this.get(a,!0)},watch:function(a,b){var c=this.obj,e=this.properties,l=this.watchers[a],q;Array.isArray(a)?q=a:-1<a.indexOf(",")&&(q=a.split(/\s*,\s*/));if(q){for(var g=m.acquire(),c=0;a=q[c++];)g.push(this.watch(a,b));return{handles:g,remove:d(function(){for(var a=0,l=g.length;a<l;a++)g[a].remove();m.release(g)})}}if(-1<a.indexOf("."))return p(c,a,b);var k=u.acquire();k.fn=b;l?(l.isDirty=!0,l.callbacks.push(k)):(this._defineProperty(a),this.get(a,!0),this.watchers[a]=
l={isDirty:!0,callbacks:[k]},e[a].copy&&(l.oldValues=new f(e[a].copy)));return{remove:d(function(){k.removed=!0;l.callbacks.splice(l.callbacks.indexOf(k),1)})}},dispatch:function(){this.timer=null;var a=this.obj,b=this.notifications,c=this.watchers,p,l,e,d,f,q,k,u;this.notifications=this._notificationsPool.acquire();var n=m.acquire();for(l in b)if(d=b[l]){b[l]=null;n.length=0;k=this.get(l);u=c[l].oldValues;for(f=0;e=d[f];f++){if(!g.equals(e.oldValue,k))for(q=0;p=e.callbacks[q];q++)!p.isExecuting&&
(!p.removed&&-1===n.indexOf(p))&&(n.push(p),p.isExecuting=!0,p.fn.call(a,k,e.oldValue,l,a),p.isExecuting=!1);t.release(e)}u&&u.reset();m.release(d)}this._notificationsPool.release(b);m.release(n)},_defineProperty:function(a,c){var p=this.obj,d=this.properties,l=d[a],f,g=!1;if(l)return l;var k=b.getPropertyOwner(p,a);k&&(l=b(k).mixin.properties[a]);l||(q.call(this.obj,a)&&(f=this.obj[a],delete this.obj[a],g=!0),c?l=b.defineProperty(this.obj,a):(l=new e(a,{value:b.getPropertyOwnerValue(p,a)}),Object.defineProperty(p,
a,l.getDescriptor())),g&&this.cache.set(a,f));return d[a]=l}};return a})},"esri/core/accessoireSupport/Cache":function(){define(["./dictionary"],function(a){var h=Object.prototype.hasOwnProperty,m=function(){this.dirty=a();this.values=a()};m.prototype={destroy:function(){this.values=this.dirty=null},has:function(a){return h.call(this.values,a)},get:function(a){return this.values[a]},remove:function(a){delete this.values[a];delete this.dirty[a]},keys:function(){return Object.keys(this.values)},set:function(a,
g){this.dirty[a]=!1;this.values[a]=g},setDirty:function(a){this.dirty[a]=!0},isDirty:function(a){return!0===this.dirty[a]}};return m})},"esri/core/accessoireSupport/dictionary":function(){define([],function(){return function(){var a=Object.create(null);a.temp={};delete a.temp;return a}})},"esri/core/accessoireSupport/OldValues":function(){define([],function(){var a=function(a){this._slots=[];this._copyFn=a};a.prototype={current:null,_slots:null,_copyFn:null,_size:0,_used:0,add:function(a){if(!a)return a;
var m=this._slots;this._used===this._size?(m[this._used++]=a,this._size++,this.current=void 0):(this.current=m.splice(this._used++,1,a)[0],this._copyFn(this.current,a));return this.current},reset:function(){this._used=0},destroy:function(){this._used=this._size=0;this.current=this._slots=null}};return a})},"esri/core/accessoireSupport/once":function(){define([],function(){return function(a){var h=!1;return function(){h||(h=!0,a())}}})},"esri/core/accessoireSupport/ensureType":function(){define(["dojo/has"],
function(a){return function(a,m){a&&(m&&!(a instanceof m))&&!(a.constructor&&void 0!==a.constructor._meta)&&(a=new m(a));return a}})},"esri/core/accessoireSupport/chainWatch":function(){define(["dojo/has","../lang","./once"],function(a,h,m){var n=function(a,e,d){this._hdl=this._obj=null;this.name=a;this.callback=e;this.next=d;this.handler=this.handler.bind(this)};n.prototype={handler:function(a,e,d,c){this.next&&(this.next.obj=a);this.name===d&&this.callback(a,e,d,c)},remove:function(){this.obj=null}};
Object.defineProperty(n.prototype,"obj",{get:function(){return this._obj},set:function(a){this._hdl&&(this._hdl.remove(),this._hdl=null);if(this._obj=a)a._accessorProps||a.__accessor__?this._hdl=a.watch(this.name,this.handler):a.watch&&(this._hdl=a.watch(this.name,function(a,d,c){this.handler(c,d,this.name,this.obj)}.bind(this)));this.next&&(this.next.obj=null==a?a:a[this.name])}});var g=function(a,e,d){Array.isArray(e)||(e=[e]);return 0<e.length?(e=new n(e[0],d,g(null,e.slice(1),d)),e.obj=a,e):null},
k=function(a,e,d){if(a)return a=a.get?a.get(e[d]):a[e[d]],d===e.length-1?a:k(a,e,++d)};return function(a,e,d){var c=e.split("."),b=k(a,c,0),p=g(a,c,function(){var p=k(a,c,0);h.equals(b,p)||(d.call(a,p,b,e,a),b=p)});return{remove:m(function(){p.remove();p=null})}}})},"esri/AllLayersCollection":function(){define(["./core/Collection","./core/HandleRegistry","./core/Scheduler","./core/watchUtils"],function(a,h,m,n){var g=function(a){var e=function(d){d&&(a.push(d),d.forEach(function(a){e(a.layers)}));
return a};return e},k=function(a){var e=function(d){d&&d.forEach(function(c){a.push(c);e(c.layers)});return a};return e};return a.createSubclass({declaredClass:"esri.AllLayersCollection",properties:{source:{}},constructor:function(){this._handles=new h;this._repopulate=this._repopulate.bind(this);this.refresh=this.refresh.bind(this)},initialize:function(){this._handles.add(this.layersCollectionNames.map(function(a){return this.watch(a,this.refresh)},this));this._repopulate()},destroy:function(){this.source=
null;this._repopulate();this._handles.destroy();this._handles=null},_handles:null,layersCollectionNames:["source.basemap.baseLayers","source.ground.layers","source.layers","source.basemap.referenceLayers"],source:null,refresh:function(){var a=this._handles;a&&(a.remove("refresh"),a.add(m.schedule(this._repopulate),"refresh"))},_repopulate:function(){var a=this._handles;a.remove("refresh");a.remove("collections");var e=this.layersCollectionNames.map(this.get,this).filter(function(a){return null!=a}),
d=[];e.forEach(g(d));a.remove("collections");a.add(d.map(function(a){return a.on("change",this.refresh)},this),"collections");this.removeAll();e.forEach(k(this))},_createNewInstance:function(f){return new a(f)}})})},"esri/core/Collection":function(){define("dojo/has dojo/on dojo/aspect ./ArrayPool ./ObjectPool ./Accessor ./Evented ./Scheduler ./accessorSupport/ensureType".split(" "),function(a,h,m,n,g,k,f,e,d){d=d.ensureType;var c=function(){},b=m.after,p=0,q=function(a){return!a?[]:(!a?0:a.isInstanceOf&&
a.isInstanceOf(r))?a.toArray():a.length?Array.prototype.slice.apply(a):[]},u=function(a){return!a||!a.length?void 0:a[0]};a=function(){this.target=null;this.defaultPrevented=this.cancellable=!1};a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};var t=new g(a,function(){this.target=this.item=null}),r=k.createSubclass([f],{declaredClass:"esri.core.Collection",properties:{length:{},items:{}},constructor:function(){this.id=
(new Date).getTime().toString(16)+"-collection"+p++;this._chgListeners=[];this._timer=this._notification=null;this._items=[];this._dispatchColChange=this._dispatchColChange.bind(this)},normalizeCtorArgs:function(a){return!a?{}:Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(r)?{items:a}:a},onchange:null,"onbefore-add":null,"onbefore-remove":null,"onafter-add":null,"onafter-remove":null,length:0,_itemsGetter:function(){return this._items},_itemsSetter:function(a){this._splice(0,this.length,q(a))},
on:function(a,p){return h.parse(this,a,p,function(a,e){if("change"===e){a._notification&&a._dispatchColChange();var d={removed:!1,callback:p};a._chgListeners.push(d);return{remove:function(){this.remove=c;d.removed=!0;a._chgListeners.splice(a._chgListeners.indexOf(d),1)}}}return b(a,"on"+e,p,!0)})},hasEventListener:function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)},add:function(a,b){b=this.getNextIndex(b);this._splice(b,0,[a]);return this},addMany:function(a,b){b=
this.getNextIndex(b);this._splice(b,0,q(a))},removeAll:function(){return this._splice(0,this.length)||[]},clone:function(){return this._createNewInstance({items:this._items})},concat:function(a){var b=q(arguments).map(q);return this._createNewInstance({items:Array.prototype.concat.apply(this._items,b)})},drain:function(a,b){var l=this.removeAll(),c,p;c=0;for(p=l.length;c<p;c++)a.call(b,l[c],c,l)},every:function(a,b){return this._items.every(a,b)},filter:function(a,b){var l;l=2===arguments.length?
this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:l})},find:function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var l=this._items,c,p=0,e=this.length;p<e;p++)if(c=l[p],a.call(b,c,p,l))return c},findIndex:function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");var l=this._items,c=this.length,p,e;for(e=0;e<c;e++)if(p=l[e],a.call(b,p,e,l))return e;return-1},forEach:function(a,b){return this._items.forEach(a,
b)},getItemAt:function(a){return this._items[a]},getNextIndex:function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a},includes:function(a,b){return!arguments.length?!1:-1!==this._items.indexOf(a,b||0)},indexOf:function(a,b){var l=arguments.length;return 0===l?-1:1===l?this._items.indexOf(a):this._items.indexOf(a,b)},join:function(a){return arguments.length?this._items.join(a):this._items.join()},lastIndexOf:function(a,b){var l=arguments.length;return 1===l?this._items.lastIndexOf(a):
2===l?this._items.lastIndexOf(a,b):-1},map:function(a,b){return new r({items:this._items.map(a,b)})},reorder:function(a,b){var l=this.indexOf(a),c=this._items.length-1;if(-1!==l)return b=null==b?c:b,0>b?b=0:b>c&&(b=c),l!==b&&(this._splice(l,1),this._splice(b,0,[a])),a},pop:function(){return!this._items.length?void 0:u(this._splice(this._items.length-1,1))},push:function(a){this._splice(this._items.length,0,Array.prototype.slice.call(arguments));return this._items.length},reduce:function(a,b){var l=
this._items;return 2===arguments.length?l.reduce(a,b):l.reduce(a)},reduceRight:function(a,b){var l=this._items;return 2===arguments.length?l.reduceRight(a,b):l.reduceRight(a)},remove:function(a){a=this.indexOf(a);return this.removeAt(a)},removeAt:function(a){if(0<=a&&a<this.length)return u(this._splice(a,1))},removeMany:function(a){if(!a||!a.length)return a;(!a?0:a.isInstanceOf&&a.isInstanceOf(r))&&(a=a.toArray());var b=this._items,l=[],c,p,e;c=0;for(p=a.length;c<p;c++)e=a[c],e=b.indexOf(e),-1<e&&
(e=u(this._splice(e,1)))&&l.push(e);return l},shift:function(){return!this._items.length?void 0:u(this._splice(0,1))},slice:function(a,b){var l=arguments.length,c=null;0===l?c=this._items.slice():1===l?c=this._items.slice(a):2===l&&(c=this._items.slice(a,b));return this._createNewInstance({items:c})},some:function(a,b){return this._items.some(a,b)},sort:function(a){var b=this._splice(0,this._items.length);if(!b)return this;arguments.length?b.sort(a):b.sort();this._splice(0,0,b);return this},toArray:function(){return this._items.slice()},
toLocaleString:function(){return this._items.toLocaleString()},toString:function(){return this._items.toString()},unshift:function(a){this._splice(0,0,Array.prototype.slice.call(arguments));return this._items.length},_createNewInstance:function(a){return new this.constructor(a)},_splice:function(a,b,l){var c=this._items,p=this.itemType,f,q,g,k;this.hasEventListener("change")&&!this._notification&&(this._notification={listeners:this._chgListeners.slice(),items:c.slice(),changes:[]},this._timer&&this._timer.remove(),
this._timer=e.schedule(this._dispatchColChange));if(b){f=c.splice(a,b);if(this.hasEventListener("before-remove")){k=t.acquire();k.target=this;k.cancellable=!0;b=0;for(q=f.length;b<q;b++)g=f[b],k.reset(g),this.emit("before-remove",k),k.defaultPrevented&&(f.splice(b,1),c.splice(a,0,g),a+=1,b-=1,q-=1);t.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){k=t.acquire();k.target=this;k.cancellable=!1;b=0;for(q=f.length;b<q;b++)g=f[b],k.reset(g),this.emit("after-remove",
k);t.release(k)}this._notifyColChange(null,f)}l&&l.length&&(p&&(l=l.map(d.bind(null,p))),this.hasEventListener("before-add")&&(k=t.acquire(),k.target=this,k.cancellable=!0,l=l.filter(function(a){k.reset(a);this.emit("before-add",k);return!k.defaultPrevented},this),t.release(k)),Array.prototype.splice.apply(c,[a,0].concat(l)),this.length=this._items.length,this.hasEventListener("after-add")&&(k=t.acquire(),k.target=this,k.cancellable=!1,l.forEach(function(a){k.reset(a);this.emit("after-add",k)},this),
t.release(k)),this._notifyColChange(l,null));return f},_notifyColChange:function(a,b){this.hasEventListener("change")&&this._notification.changes.push({added:a,removed:b})},_dispatchColChange:function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notification){var a=this._notification,b=a.items,l=a.changes,c=n.acquire(),p=n.acquire(),e=n.acquire(),d,f,q,g,k,u;this._notification=null;d=0;for(f=l.length;d<f;d++){g=l[d];if(g.added){k=g.added;if(0<p.length)for(q=k.length-1;0<=q;q--)u=
p.indexOf(k[q]),-1!==u&&(k.splice(q,1),e.push(p.splice(u,1)[0]));c=c.concat(k)}if(g.removed){k=g.removed;if(0<c.length||0<e.length)for(q=k.length-1;0<=q;q--)u=c.indexOf(k[q]),-1!==u?(c.splice(u,1),k.splice(q,1)):(u=e.indexOf(k[q]),-1!==u&&e.splice(u,1));p=p.concat(k)}}e=e.filter(function(a){return b.indexOf(a)!==this._items.indexOf(a)},this);if(a.listeners&&(c.length||p.length||e.length)){g={target:this,added:c,removed:p,moved:e};d=0;for(f=a.listeners.length;d<f;d++)l=a.listeners[d],l.removed||l.callback.call(this,
g)}n.release(c);n.release(p);n.release(e)}}}),s={};r.ofType=function(a){var b=a.prototype.declaredClass;if(!b)return r;if(b&&s[b])return s[b];var l=r.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});Object.defineProperty(l.prototype,"itemType",{value:a,configurable:!1,enumerable:!1,writable:!1});return s[b]=l};return r})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),
function(a,h,m,n,g,k){h=h.default;a.before(function(e,d){if(a.hasMixin(e,f)){if(n.hasPrototypeMetadata(d))throw Error("[accessor] classMetadata '"+d.declaredClass+"' already used.");n.createPrototypeMetadata(d)}});a.after(function(e){a.hasMixin(e,f)&&n.defineProperties(e)});var f=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(a){if(this.constructor===f)throw Error("[accessor] cannot instanciate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new h(this),enumerable:!1,configurable:!1,writable:!0});0<arguments.length&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,Array.prototype.slice.call(arguments)))},__accessor__:null,postscript:function(a){var d=this.__accessor__;a=d.ctorArgs||a;var c;(c=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(c).forEach(function(a){d.setDefault(a,c[a])},this);d.initialize();
a&&(this.set(a),d.ctorArgs=null);this.initialize()},initialize:function(){},destroy:function(){if(this.__accessor__)k.removeTarget(this),this.__accessor__.destroy(),this.__accessor__=null;else try{throw Error("instance is already destroyed");}catch(a){console.warn(a.stack)}},get:function(a){return m.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():
[]},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},set:function(a,d){g.set(this,a,d);return this},watch:function(a,d,c){return k.watch(this,a,d,c)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,d){return this.__accessor__.override(a,d)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,d){return this.__accessor__.internalSet(a,d)}});return f})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ./Store ./PropertyOrigin ./dictionary ./extensions ./introspection".split(" "),
function(a,h,m,n,g,k,f,e){function d(a,c,e){void 0===e&&(e=!1);if(!c.metadatas[a]){a="[accessor] cannot access unknown property '"+a+"' on instance of "+c.host.declaredClass+".";if(e||b)throw Error(a);console.error(a)}}var c=0,b=0;a=function(){function a(b){this.host=b;this._origin=g.default.USER;this.ctorArgs=null;this.dirties=k.default();this.initialized=!1;this.metadatas=e.getInstanceMetadatas(this.host);this.overridden=null;this.uid="properties_"+c++;this.store=new n.default}a.prototype.initialize=
function(){this.initialized=!0;f.defineProperties(this.host,this.metadatas)};a.prototype.destroy=function(){};a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};a.prototype.get=function(a){d(a,this);var b=this.metadatas[a];if(this.store.has(a)&&!0===!this.dirties[a])return this.store.get(a);var c=b.get;return c?(b=c.call(this.host),this.store.set(a,b,g.default.COMPUTED),this.propertyCommitted(a,b),b):b.value};a.prototype.has=function(a){return!this.metadatas[a]?
!1:this.store.has(a)};a.prototype.internalGet=function(a){d(a,this,!0);var b=this.store;return b.has(a)?b.get(a):this.metadatas[a].value};a.prototype.internalSet=function(a,b){d(a,this,!0);this.propertyInvalidated(a);this.initialized?this.store.set(a,b,this._origin):this.store.set(a,b,g.default.SERVICE);this.propertyCommitted(a,b)};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=
function(a,b){d(a,this,!0);this.overridden||(this.overridden=k.default());this.overridden[a]=!0;this.internalSet(a,b)};a.prototype.set=function(a,b){d(a,this);var c=this.metadatas[a],p=c.set;(c=c.cast)&&(b=c.call(this.host,b));p?p.call(this.host,b):this.internalSet(a,b)};a.prototype.setDefault=function(a,b){d(a,this,!0);this.store._originStores?(this.setDefaultOrigin(g.default.SERVICE),this.set(a,b),this.setDefaultOrigin(g.default.USER)):this.store.has(a,g.default.SERVICE)||(this.setDefaultOrigin(g.default.SERVICE),
this.set(a,b),this.setDefaultOrigin(g.default.USER))};a.prototype.setDefaultOrigin=function(a){this._origin=a};a.prototype.propertyInvalidated=function(a){this.isOverridden(a)||(this.dirties[a]=!0)};a.prototype.propertyCommitted=function(a,b){this.dirties[a]=!1};return a}();Object.defineProperty(h,"__esModule",{value:!0});h.default=a})},"esri/core/accessorSupport/Store":function(){define(["require","exports"],function(a,h){var m=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};
a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,k){this._values[a]=k};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a,k){return a in this._values};return a}();Object.defineProperty(h,"__esModule",{value:!0});h.default=m})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(a,h){var m,n=m||(m={});n[n.COMPUTED=0]="COMPUTED";n[n.SERVICE=1]="SERVICE";n[n.PORTAL_ITEM=2]="PORTAL_ITEM";n[n.PORTAL_DOCUMENT=
3]="PORTAL_DOCUMENT";n[n.USER=4]="USER";n[n.NUM=5]="NUM";Object.defineProperty(h,"__esModule",{value:!0});h.default=m})},"esri/core/accessorSupport/dictionary":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.default=function(){var a=Object.create(null);a.temp=!0;delete a.temp;return a}})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],
function(a,h,m,n,g){var k=[m.default,n.default,g.default];h.processPrototypeMetadatas=function(a,e){for(var d=0;d<k.length;d++){var c=k[d];if(c.processPrototypePropertyMetadata)for(var b=0,p=Object.getOwnPropertyNames(a);b<p.length;b++){var q=p[b];c.processPrototypePropertyMetadata(q,a[q],a,e)}}};h.processClassMetadatas=function(a,e){for(var d=0;d<k.length;d++){var c=k[d];if(c.processClassPropertyMetadata)for(var b=0,p=Object.getOwnPropertyNames(a);b<p.length;b++){var q=p[b];c.processClassPropertyMetadata(q,
a[q],a,e)}}};h.defineProperties=function(a,e){for(var d=0;d<k.length;d++){var c=k[d];if(c.defineProperty)for(var b=0,p=Object.getOwnPropertyNames(e);b<p.length;b++){var q=p[b];c.defineProperty(a,q,e[q],e)}}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../whenMayChange ../utils ../get ../set".split(" "),function(a,h,m,n,g,k,f){function e(a,c,b){var p=g.getProperties(a);return n.whenMayChange(a,b.aliasOf,function(){p.propertyInvalidated(c)})}
h.AliasedPropertyExtension={processClassPropertyMetadata:function(a,c,b,p){var e=c.aliasOf;e&&(a=e.split(".")[0],null!=b[a]&&(!c.set&&!c.get)&&(c.get=function(){return k.default(this,e)},c.readOnly||(c.set=function(a){return f.default(this,e,a)})))},defineProperty:function(a,c,b,p){b.aliasOf&&e(a,c,b)}};Object.defineProperty(h,"__esModule",{value:!0});h.default=h.AliasedPropertyExtension})},"esri/core/accessorSupport/set":function(){define(["require","exports","./get"],function(a,h,m){function n(a,
k,f){if(a&&k)if("object"===typeof k){f=0;for(var e=Object.getOwnPropertyNames(k);f<e.length;f++){var d=e[f];n(a,d,k[d])}}else"_"!==k[0]&&(-1!==k.indexOf(".")?(k=k.split("."),d=k.splice(k.length-1,1)[0],n(m.default(a,k),d,f)):a[k]=f)}h.set=n;Object.defineProperty(h,"__esModule",{value:!0});h.default=n})},"esri/core/accessorSupport/extensions/computedProperty":function(){define(["require","exports","dojo/has","../utils","../whenMayChange"],function(a,h,m,n,g){h.ComputedPropertyExtension={processClassPropertyMetadata:function(a,
f,e,d){},defineProperty:function(a,f,e,d){if(e.dependsOn)return g.whenMayChange(a,e.dependsOn,function(){return n.getProperties(a).propertyInvalidated(f)})}};Object.defineProperty(h,"__esModule",{value:!0});h.default=h.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define(["require","exports"],function(a,h){h.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,n,g,k){if(n.type){var f=(a=Array.isArray(n.type))?n.type[0]:n.type;
if(f.fromJSON&&(!n.json||!n.json.read))if(n.json||(n.json={}),a)n.json.read=function(a,c){return null==a?a:Array.isArray(a)?a.map(f.fromJSON):[f.fromJSON(a)]};else if(f.prototype.declaredClass&&0===f.prototype.declaredClass.indexOf("esri.core.Collection\x3c")&&f.prototype.itemType.fromJSON){var e=f.prototype.itemType;n.json.read=function(a,c){return null==a?a:Array.isArray(a)?new f(a.map(e.fromJSON)):new f([e.fromJSON(a)])}}else n.json.read=f.fromJSON}}};Object.defineProperty(h,"__esModule",{value:!0});
h.default=h.SerializablePropertyExtension})},"esri/core/accessorSupport/introspection":function(){define(["require","exports","./utils","./ensureType","./extensions"],function(a,h,m,n,g){function k(a){var f=a.declaredClass,k=a.properties;f||(f=a.declaredClass="accessor_"+p++);if(h.prototypeMetadatas[f])return h.prototypeMetadatas[f];k||(k=a.properties={});for(var r=0,s=Object.getOwnPropertyNames(k);r<s.length;r++){var x=s[r],v=k[x],l=typeof v;null==v?k[x]={value:v}:"object"===l?m.getProperties(v)||
v instanceof Date?k[x]={type:v.constructor,value:v}:Array.isArray(v)&&(k[x]={type:v,value:null}):"boolean"===l?k[x]={type:Boolean,value:v}:"string"===l?k[x]={type:String,value:v}:"number"===l?k[x]={type:Number,value:v}:"function"===l&&(k[x]={type:v,value:null})}s=0;for(v=Object.getOwnPropertyNames(a);s<v.length;s++){var l=v[s],w=a[l],B=void 0,r=x=void 0;if(B=d.exec(l))x=B[1],r=c[B[2]];else if(B=b.exec(l))x=B[2][0].toLowerCase()+B[2].substr(1),r=B[1].toLowerCase();x&&r&&(k[x]||(k[x]={}),"read"===r?
k[x].json?k[x].json.read=w:k[x].json={read:w}:k[x][r]=w)}s=0;for(v=Object.getOwnPropertyNames(k);s<v.length;s++)if(x=v[s],l=k[x],r=l.type,void 0===l.value&&e.call(a,x)&&(l.value=a[x]),!l.cast&&r)switch(r){case Number:l.cast=n.ensureNumber;break;case Boolean:l.cast=n.ensureBoolean;break;case String:l.cast=n.ensureString;break;case Date:l.cast=n.ensureDate;break;default:Array.isArray(r)?l.cast=n.ensureArray(r[0]):l.cast=n.ensureType(r)}g.processPrototypeMetadatas(k,f);return h.prototypeMetadatas[f]=
k}function f(a){var b=a.prototype.declaredClass;if(h.classMetadatas[b])return h.classMetadatas[b];a=a._meta.bases;for(var c=[],p=a.length-1;0<=p;p--){var e=k(a[p].prototype);e&&c.push(e)}a=c.reduce(m.merge,{});g.processClassMetadatas(a,b);return h.classMetadatas[b]=a}var e=Object.prototype.hasOwnProperty,d=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Caster)$/,c={Getter:"get",Setter:"set",Reader:"read",Caster:"cast"},b=/^_(set|get)([a-zA-Z0-9]+)Attr$/;h.prototypeMetadatas={};h.classMetadatas={};var p=0;
h.hasPrototypeMetadata=function(a){a=a.declaredClass;return null!=a&&null!=h.prototypeMetadatas[a]};h.createPrototypeMetadata=k;h.createClassMetadata=f;h.getInstanceMetadatas=function(a){a=a.declaredClass;return h.classMetadatas[a]?h.classMetadatas[a]:null};h.defineProperties=function(a){for(var b=f(a),c={},p=function(a){var l=b[a];c[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):l.value},set:function(b){var c=this.__accessor__;if(c){if(!Object.isFrozen(this))if(c.initialized){if(l.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+
a+"' of "+this.declaredClass);c.set(a,b)}else c.setDefault(a,b)}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}}},e=0,d=Object.getOwnPropertyNames(b);e<d.length;e++)p(d[e]);Object.defineProperties(a.prototype,c);return a}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","dojo/has"],function(a,h,m){function n(a,d){return d.isInstanceOf?d.isInstanceOf(a):d instanceof a}function g(a,d){if(1===arguments.length)return g.bind(null,
a);d&&(a&&!n(a,d))&&(f&&d.constructor&&void 0!==d.constructor._meta?console.warn("Assigning an instance of '"+(d.declaredClass||"unknown")+"' which is not a subclass of '"+(a.prototype&&a.prototype.declaredClass||"unknown")+"'"):d=new a(d));return d}function k(a,d){return 1===arguments.length?k.bind(null,a):!d?d:Array.isArray(d)?d.map(g.bind(null,a)):[g(a,d)]}var f=0;h.isInstanceOf=n;h.ensureDate=function(a){return null==a?a:new Date(a)};h.ensureBoolean=function(a){return!0===a||!1===a?a:!!a};h.ensureString=
function(a){return null==a?a:a.toString()};h.ensureNumber=function(a){return null==a?a:parseFloat(a)};h.ensureType=g;h.ensureArray=k;Object.defineProperty(h,"__esModule",{value:!0});h.default=g})},"esri/core/Evented":function(){define(["./declare","dojo/Evented"],function(a,h){return a(h,{declaredClass:"esri.Evented",hasEventListener:function(a){a="on"+a;return!(!this[a]||!this[a].after)},emit:function(a,n){if(this.hasEventListener(a))return n=n||{},n.target||(n.target=this),this.inherited(arguments,
[a,n])}})})},"esri/core/HandleRegistry":function(){define(["./Accessoire"],function(a){return a.createSubclass({constructor:function(){this._groups={}},destroy:function(){this.removeAll();this._groups=null},_groups:null,_sizeGetter:function(){var a=0,m=this._groups,n;for(n in m)a+=m[n].length;return a},add:function(a,m){if(!a||!a.remove&&!a.length)return this;var n=this._getOrCreateGroup(m);if("function"===typeof a.remove)n.push(a);else for(var g=0,k=a.length;g<k;g++)n.push(a[g]);this.notifyChange("size");
return this},has:function(a){a=this._groups[a];return!!a&&0<a.length},remove:function(a){if(Array.isArray(a))return a.forEach(this.remove.bind(this)),this;a=this._getGroup(a);if(!a)return this;for(var m=0,n=a.length;m<n;m++)a[m].remove();a.length=0;this.notifyChange("size");return this},removeAll:function(){var a=this._groups,m;for(m in a)this.remove(m),delete a[m];return this},_getOrCreateGroup:function(a){return this._getGroup(a)||(this._groups[this._ensureGroupName(a)]=[])},_getGroup:function(a){return this._groups[this._ensureGroupName(a)]},
_ensureGroupName:function(a){return a||"_default_"}})})},"esri/core/watchUtils":function(){define(["dojo/Deferred","dojo/promise/Promise"],function(a,h){function m(a,b,c,p){var e=a.watch(b,function(b,l,e,d){(!p||p(b))&&c.call(a,b,l,e,d)}),d=a.get(b);p&&p(d)&&c.call(a,d,d,b,a);return e}function n(a,b){var c=new h;c.cancel=a.cancel;c.isCanceled=a.isCanceled;c.isFulfilled=a.isFulfilled;c.isRejected=a.isRejected;c.isResolved=a.isResolved;c.then=a.then;c.remove=b;return Object.freeze(c)}function g(b,c,
p,e){var d=!1,f,g=new a(function(){f&&(f.remove(),f=null)}),l=n(g,function(){f&&(f.remove(),f=null)});f=m(b,c,function(a,l,c,e){d=!0;f&&(f.remove(),f=null);p&&p.call(b,a,l,c,e);g.resolve({value:a,oldValue:l,propertyName:c,target:e})},e);d&&f.remove();return l}function k(a){return!!a}function f(a){return!a}function e(a){return!0===a}function d(a){return!1===a}function c(a){return void 0!==a}function b(a){return void 0===a}var p={init:function(a,b,c){(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):
[b]).forEach(function(b){b=b.trim();var p=a.get(b);c.call(a,p,p,b,a)});return p.watch(a,b,c)},watch:function(a,b,c){return a.watch(b,c)},once:function(a,b,c){return g(a,b,c)},when:function(a,b,c){return m(a,b,c,k)},whenOnce:function(a,b,c){return g(a,b,c,k)},whenNot:function(a,b,c){return m(a,b,c,f)},whenNotOnce:function(a,b,c){return g(a,b,c,f)},whenTrue:function(a,b,c){return m(a,b,c,e)},whenTrueOnce:function(a,b,c){return g(a,b,c,e)},whenFalse:function(a,b,c){return m(a,b,c,d)},whenFalseOnce:function(a,
b,c){return g(a,b,c,d)},whenDefined:function(a,b,p){return m(a,b,p,c)},whenDefinedOnce:function(a,b,p){return g(a,b,p,c)},whenUndefined:function(a,c,p){return m(a,c,p,b)},whenUndefinedOnce:function(a,c,p){return g(a,c,p,b)},pausable:function(a,b,c){!c&&"function"===typeof b&&(c=b,b="*");var p=!1;return{remove:a.watch(b,function(b,e,d,l){p||c.call(a,b,e,d,l)}).remove,pause:function(){p=!0},resume:function(){p=!1}}},on:function(a,b,c,e,d,f){var g=null,l=null,k=function(){l&&(f&&f(g,a,b,c),l.remove(),
g=l=null)},m=p.init(a,b,function(p){k();p&&p.on&&(g=p,l=p.on(c,e),d&&d(g,a,b,c))});return{remove:function(){m.remove();k()}}}};return p})},"esri/LayersMixin":function(){define(["./core/Accessoire","./core/Collection"],function(a,h){var m=function(a,g){for(var k,f=0,e=a.length;f<e;f++)if(k=a.getItemAt(f),k.id===g||k.layers&&(k=m(k.layers,g)))return k};return a.createSubclass({declaredClass:"esri.LayersMixin",classMetadata:{properties:{layers:{type:h}}},destroy:function(){this.layers.drain(this.layerRemoved,
this)},_layersGetter:function(a){a||(a=new h,a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a)}.bind(this)),a.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this)));return a},_layersSetter:function(a,g){g&&this.remove(g.toArray());this.addMany(a.toArray());return g},findLayerById:function(a){return m(this.layers,a)},add:function(a,g){var k=this.layers;g=k.getNextIndex(g);a.parent===this?this.reorder(a,
g):k.add(a,g)},addMany:function(a,g){var k=this.layers;g=k.getNextIndex(g);a.forEach(function(a){a.parent===this?this.reorder(a,g):(k.add(a,g),g+=1)},this)},remove:function(a){return this.layers.remove(a)},removeMany:function(a){return this.layers.removeMany(a)},removeAll:function(){return this.layers.removeAll()},reorder:function(a,g){return this.layers.reorder(a,g)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/support/basemapUtils":function(){define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../layers/TileLayer ../Basemap".split(" "),
function(a,h,m,n,g,k){function f(a,c){var b;if("string"===typeof a){if(!(a in m))return b=Object.keys(m).map(function(a){return'"'+a+'"'}).join(", "),console.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;c&&(b=c[a]);b||(b=k.fromId(a),c&&(c[a]=b))}else b=n.default(k,a);return b}function e(a,c){return a.map(function(a){return!(a instanceof g)?a:c.find(function(c){return c.constructor===a.constructor&&c.url===a.url})||a})}h.createCache=function(){return{}};h.ensureType=
f;h.clonePreservingTiledLayers=function(a,c){void 0===c&&(c=null);var b=f(a);if(!b)return null;b=new k({id:b.id,title:b.title,baseLayers:b.baseLayers.clone(),referenceLayers:b.referenceLayers.clone()});c&&(b.baseLayers=e(b.baseLayers,c.baseLayers),b.referenceLayers=e(b.referenceLayers,c.referenceLayers));return b}})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(a,h,m){return{streets:{id:"streets",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),
baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",showLegend:!1}]},satellite:{id:"satellite",title:m.satellite,thumbnailUrl:a.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",showLegend:!1}]},hybrid:{id:"hybrid",title:m.hybrid,thumbnailUrl:a.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",
showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0,showLegend:!1}]},terrain:{id:"terrain",title:m.terrain,thumbnailUrl:a.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0,showLegend:!1}]},topo:{id:"topo",
title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",showLegend:!1}]},gray:{id:"gray",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0,showLegend:!1}]},
"dark-gray":{id:"dark-gray",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0,showLegend:!1}]},oceans:{id:"oceans",title:m.oceans,thumbnailUrl:a.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",
showLegend:!1},{url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0,showLegend:!1}]},"national-geographic":{id:"national-geographic",title:m["national-geographic"],thumbnailUrl:a.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",showLegend:!1}]},osm:{id:"osm",title:m.osm,thumbnailUrl:a.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{layerType:"OpenStreetMap",
showLegend:!1}]},"dark-gray-vector":{id:"dark-gray-vector",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/3e3099d7302f4d99bc6f916dcc07ed59/resources/styles/root.json",layerType:"VectorTileLayer"}]},"gray-vector":{id:"gray-vector",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/bdf1eec3fa79456c8c7c2bb62f86dade/resources/styles/root.json",
layerType:"VectorTileLayer"}]},"streets-vector":{id:"streets-vector",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/3b8814f6ddbd485cae67e8018992246e/resources/styles/root.json",layerType:"VectorTileLayer"}]},"topo-vector":{id:"topo-vector",title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/be44936bcdd24db588a1ae5076e36f34/resources/styles/root.json",
layerType:"VectorTileLayer"}]},"streets-night-vector":{id:"streets-night-vector",title:m["streets-night-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/f96366254a564adda1dc468b447ed956/resources/styles/root.json",layerType:"VectorTileLayer"}]},"streets-relief-vector":{id:"streets-relief-vector",title:m["streets-relief-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",
showLegend:!1},{url:"//www.arcgis.com/sharing/rest/content/items/ad06088bd1174866aad2dddbf5ec9642/resources/styles/root.json",layerType:"VectorTileLayer",isReference:!0,showLegend:!1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:m["streets-navigation-vector"],thumbnailUrl:a.toUrl("./images/basemap/streets-navigation.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/00cd8e843bae49b3a040423e5d65416b/resources/styles/root.json",layerType:"VectorTileLayer"}]}}})},
"esri/layers/TileLayer":function(){define("dojo/_base/lang dojo/io-query ../request ../core/urlUtils ../core/promiseUtils ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/PortalLayer".split(" "),function(a,h,m,n,g,k,f,e,d,c){return f.createSubclass([e,d,c],{declaredClass:"esri.layers.TileLayer",portalLoaderModule:"portal/loaders/TileLayerLoader",_mapsWithAttribution:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_attributionServices:["services.arcgisonline.com/arcgis/rest/services","servicesdev.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],normalizeCtorArgs:function(b,c){return"string"===typeof b?a.mixin({},{url:b},c):b},getDefaults:function(b){var c=null,e=[];b.url&&(e=n.urlToObject(b.url).path.toLowerCase(),c=this._getDefaultAttribution(this._getMapName(e)),e=this._getDefaultTileServers(e));
return a.mixin(this.inherited(arguments),{tileServers:e,attributionDataUrl:c,hasAttributionData:!!c})},load:function(){this.addResolvingPromise(this.loadFromPortal(this._fetchService.bind(this)))},properties:{popupTemplates:null,tileServers:{value:null,cast:function(a){return Array.isArray(a)?a.map(function(a){return n.urlToObject(a).path}):null}},spatialReference:{json:{readFrom:["spatialReference","tileInfo"],read:function(a,c){return(a=a||c.tileInfo&&c.tileInfo.spatialReference)&&k.fromJSON(a)}}}},
getTileUrl:function(b,c,e){var d=this.tileServers,f=a.mixin({},this.parsedUrl.query,{token:this.token,blankTile:this.resampling&&!this.tileMap&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});b=(d&&d.length?d[c%d.length]:this.parsedUrl.path)+"/tile/"+b+"/"+c+"/"+e;f=h.objectToQuery(f);return n.addProxy(b+(f?"?"+f:""))},_fetchService:function(){return g.resolve().then(function(){return this.resourceInfo||m(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),responseType:"json",
callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data)}.bind(this))},_getMapName:function(a){return(a=a.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&a[2]},_getDefaultAttribution:function(a){if(a){var c;a=a.toLowerCase();for(var e=0,d=this._mapsWithAttribution.length;e<d;e++)if(c=this._mapsWithAttribution[e],-1<c.toLowerCase().indexOf(a))return this._getProtocol()+
"//static.arcgis.com/attribution/"+c}},_getProtocol:function(){var a=window.location.protocol;return"file:"===a?"http:":a},_getDefaultTileServers:function(a){var c=-1!==a.search(/^https?\:\/\/server\.arcgisonline\.com/i),e=-1!==a.search(/^https?\:\/\/services\.arcgisonline\.com/i);return c||e?[a,a.replace(c?/server\.arcgisonline/i:/services\.arcgisonline/i,c?"services.arcgisonline":"server.arcgisonline")]:[]}})})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/request dojo/io-query dojo/when ./kernel ./config ./core/sniff ./core/lang ./core/urlUtils ./core/deferredUtils dojo/io/script dojo/io/iframe dojo/dom-construct".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x){function v(a){a=new k(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function l(a,b,l){var d=!!a.useProxy,k=a.method||"auto",w;w=a.crossOrigin;a=g.mixin({},a);a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var B=a.content,t=a.url,y=b&&a.form;w=q.isDefined(w)?w:z.useCors;a.load=function(a){var b;a&&(a.error?(b=g.mixin(Error(),a.error),b.log=m.isDebug):"error"===a.status&&(b=g.mixin(Error(),a),b.log=m.isDebug),b&&!q.isDefined(b.httpCode)&&(b.httpCode=
b.code));return b||a};a.error=function(a,b){b&&b.xhr&&b.xhr.abort();a instanceof Error||(a=g.mixin(Error(),a));a.log=m.isDebug;return a};a._token&&(a.content=a.content||{},a.content.token=a._token);var C=0,L;B&&t&&(L=e.objectToQuery(B),C=L.length+t.length+1,p("esri-url-encodes-apostrophe")&&(C=L.replace(/'/g,"%27").length+t.length+1));a.timeout=q.isDefined(a.timeout)?a.timeout:z.timeout;a.handleAs=a.handleAs||"json";try{var G,W,O=w&&u.canUseXhr(a.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(a.url),
M=u.hasSameOrigin(a.urlObj,u.appUrl)||O,U="post"===k||b||C>z.maxUrlLength?!0:!1,ca=!M&&-1!==a.handleAs.indexOf("json")&&a.callbackParamName&&!b?!0:!1,Z=u.getProxyRule(a.url)||z.forceProxy||d||(!ca||U)&&!M?!0:!1;b&&(!p("esri-file-upload")&&!Z&&O)&&(Z=!0);if(Z)if(G=u.getProxyUrl(t,w),W=G.path,G._xo&&(O=!0),!U&&W.length+1+C>z.maxUrlLength&&(U=!0),a.url=W+"?"+t,U)a.content=g.mixin(G.query||{},B);else{var ia=e.objectToQuery(g.mixin(G.query||{},B));ia&&(a.url+=(-1===t.indexOf("?")?"?":"\x26")+ia);a.content=
null}if(ca&&!U)return!q.isDefined(a.isAsync)&&4>p("ff")&&(a.isAsync=!0),r.get(E?E(a):a);var ma=a.headers;if(!ma||!ma.hasOwnProperty("X-Requested-With"))ma=a.headers=ma||{},ma["X-Requested-With"]=null;if(b){var ra=a.callbackParamName||"callback.html",la=a.callbackElementName||"textarea",wa,qa,va,pa,Sa=y.elements?y.elements.length:0,Da;if(B=a.content)for(wa in B)if(va=B[wa],q.isDefined(va)){qa=null;for(pa=0;pa<Sa;pa++)if(Da=y.elements[pa],Da.name===wa){qa=Da;break}qa?qa.value=va:l?y.append(wa,va):y.appendChild(x.create("input",
{type:"hidden",name:wa,value:va}))}if(p("esri-file-upload"))h.forEach(y.elements,function(a){a.name===ra&&y.removeChild(a)}),a.contentType=!1,a.postData=l?y:new FormData(y),delete a.form;else{y.enctype="multipart/form-data";9>p("ie")&&(y.encoding="multipart/form-data");y.method="post";h.some(y.elements,function(a){return a.name===ra})||y.appendChild(x.create("input",{type:"hidden",name:ra,value:la}));if(-1!==t.toLowerCase().indexOf("addattachment")||-1!==t.toLowerCase().indexOf("updateattachment"))a.url=
t+(-1===t.indexOf("?")?"?":"\x26")+ra+"\x3d"+la,Z&&(a.url=W+"?"+a.url);delete a.content}}if(O&&!a.hasOwnProperty("withCredentials"))if(l=Z?W:t,-1!==h.indexOf(z.webTierAuthServers,v(l)))a.withCredentials=!0;else if(c.id){var Aa=c.id.findServerInfo(l);Aa&&Aa.webTierAuth&&(a.withCredentials=!0)}a=E?E(a):a;if(U){a.data=a.content;if(b&&!p("esri-file-upload"))return s.send(a);!Z&&p("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+H++);return f.post(a.url,a)}a.query=
a.content;return f.get(a.url,a)}catch(sa){return b=new n,b.errback(a.error(sa)),b}}function w(a){var b=z.corsStatus,l=u.canUseXhr(a,!0);-1<l&&z.corsEnabledServers.splice(l,1);b[v(a)]=1;return l}function B(a){var b=z.corsStatus;try{var l=v(a.url);if(z.corsDetection&&z.useCors&&p("esri-cors")&&a.url&&-1!==a.url.toLowerCase().indexOf("/rest/services")&&!u.hasSameOrigin(a.urlObj,u.appUrl)&&!u.canUseXhr(a.urlObj)){if(b[l])return b[l];var c=new n;b[l]=c.promise;var e=a.url.substring(0,a.url.toLowerCase().indexOf("/rest/")+
6)+"info";f.get(e,{query:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*z.corsDetectionTimeout}).then(function(b){b?(u.canUseXhr(a.url)||z.corsEnabledServers.push(l),c.resolve()):c.reject()},function(a){c.reject()});return c.promise}}catch(d){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}}function y(b,e,d,k){function u(a){a._pendingDfd=l(d,C,x);if(a._pendingDfd)a._pendingDfd.then(function(b){var l=null;a.ioArgs=a._pendingDfd&&
a._pendingDfd.ioArgs;b.error?(l=g.mixin(Error(),b.error),l.log=m.isDebug):"error"===b.status&&(l=g.mixin(Error(),b),l.log=m.isDebug);l&&!q.isDefined(l.httpCode)&&(l.httpCode=l.code);if(l)throw l;a.callback({data:b,url:k.url,requestOptions:k.requestOptions});a._pendingDfd=null}).then(null,function(b){var l,p,e;b&&(l=b.code,p=b.subcode,e=(e=b.messageCode)&&e.toUpperCase());if(b&&403==l&&(4==p||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=
d._sslFromServer=!0;y(a,!0,d,k);return}}else if(b&&415==b.status){if(w(d.url),!d._err415){d._err415=1;y(a,!0,d,k);return}}else if(c.id&&-1!==h.indexOf(c.id._errorCodes,l)&&!c.id._isPublic(d.url)&&!s&&(403!=l||-1===h.indexOf(L,e)&&(!q.isDefined(p)||2==p&&d._token))){a._pendingDfd=c.id.getCredential(d.url,{token:d._token,error:b});a._pendingDfd.then(function(b){d._token=b.token;d._credential=b;d._ssl=d._sslFromServer||b.ssl;y(a,!0,d,k)}).then(null,function(b){a.errback(b);a._pendingDfd=null});return}a.ioArgs=
a._pendingDfd&&a._pendingDfd.ioArgs;a.errback(b);a._pendingDfd=null});else{a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;var b=Error("Deferred object is missing");b.log=m.isDebug;a.errback(b);a._pendingDfd=null}}var n=d.form,s=d.disableIdentityLookup,B=d._preLookup,t=!1;if(p("esri-workers")&&!1!==z.useWorkers)if(!0===d.useWorkers||!0===z.useWorkers)t=!0;else if(d.workerOptions){var r=d.workerOptions;if(r.callback||r.worker&&r.worker.worker instanceof Worker)t=!0}var x=n&&n.append,C=n&&(n.elements?
h.some(n.elements,function(a){return"file"===a.type}):x),E=-1!==d.url.toLowerCase().indexOf("token\x3d")||d.content&&d.content.token||C&&h.some(n.elements,function(a){return"token"===a.name})?1:0;if(!e){b.then(function(a){/\/sharing\/rest\/accounts\/self/i.test(d.url)&&(!E&&!d._token&&a.user&&a.user.username)&&z.webTierAuthServers.push(v(d.url));var b=d._credential;if(b){var l=c.id.findServerInfo(b.server);if(l=l&&l.owningSystemUrl)l=l.replace(/\/?$/,"/sharing"),(b=c.id.findCredential(l,b.userId))&&
-1===c.id._getIdenticalSvcIdx(l,b)&&b.resources.splice(0,0,l)}return a}).always(function(a){delete d._credential;a&&(a.ssl=!!d._ssl)});var H=d.load,M=d.error;H&&b.then(function(a){var l=b._pendingDfd,l=l&&l.ioArgs;return H.call(l&&l.args,a,l)});M&&b.then(null,function(a){var l=b._pendingDfd,l=l&&l.ioArgs;return M.call(l&&l.args,a,l)})}if(c.id&&!E&&!d._token&&!c.id._isPublic(d.url)&&(!s||B))if(e=c.id.findCredential(d.url))d._token=e.token,d._ssl=e.ssl;t?d.workerOptions&&d.workerOptions.worker?(f=d.workerOptions.worker,
u(b)):a(["./workers/RequestClient"],function(a){if(d.workerOptions){var l=d.workerOptions;f=a.getClient(l.callback,l.cbFunction)}else f=a.getClient();u(b)}):u(b);return b.promise}function C(a,b){"string"!==typeof a&&console.error("esri/request: the first parameter should be a url string");var l=g.mixin({},b),c={url:a,requestOptions:g.mixin({},b)};l.content=l.query;delete l.query;l.preventCache=!!l.cacheBust;delete l.cacheBust;l.handleAs=l.responseType;delete l.responseType;"array-buffer"===l.handleAs&&
(l.handleAs="arraybuffer");l.url=u.fixUrl(a);"file"!==u.appUrl.scheme&&(l.url=u.getAbsoluteUrl(l.url));l.urlObj=new k(l.url);var p=new n(t._dfdCanceller);d(B(l)).always(function(){y(p,!1,l,c)});return p.promise}var E,z=b.request,L=["COM_0056","COM_0057"],H=0;C._makeRequest=l;C._processRequest=y;C._disableCors=w;C._detectCors=B;C.setRequestPreCallback=function(a){E=a};return C})},"dojo/_base/url":function(){define(["./kernel"],function(a){var h=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,
m=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,n=function(){for(var a=arguments,k=[a[0]],f=1;f<a.length;f++)if(a[f]){var e=new n(a[f]+""),k=new n(k[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(k.fragment=e.fragment),e=k;else if(!e.scheme&&(e.scheme=k.scheme,!e.authority&&(e.authority=k.authority,"/"!=e.path.charAt(0)))){for(var k=(k.path.substring(0,k.path.lastIndexOf("/")+1)+e.path).split("/"),d=0;d<k.length;d++)"."==k[d]?d==k.length-1?k[d]="":(k.splice(d,
1),d--):0<d&&(!(1==d&&""==k[0])&&".."==k[d]&&".."!=k[d-1])&&(d==k.length-1?(k.splice(d,1),k[d-1]=""):(k.splice(d-1,2),d-=2));e.path=k.join("/")}k=[];e.scheme&&k.push(e.scheme,":");e.authority&&k.push("//",e.authority);k.push(e.path);e.query&&k.push("?",e.query);e.fragment&&k.push("#",e.fragment)}this.uri=k.join("");a=this.uri.match(h);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&
(a=this.authority.match(m),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)};n.prototype.toString=function(){return this.uri};return a._Url=n})},"dojo/request":function(){define(["./request/default!"],function(a){return a})},"dojo/request/default":function(){define(["exports","require","../has"],function(a,h,m){var n=m("config-requestProvider");n||(n="./xhr");a.getPlatformDefaultId=function(){return"./xhr"};a.load=function(a,k,f,e){h(["platform"==a?"./xhr":
n],function(a){f(a)})}})},"esri/kernel":function(){define([],function(){return{version:"4.0"}})},"esri/config":function(){define(["require","exports","dojo/_base/window"],function(a,h,m){a=m.global;return{screenDPI:96,geometryService:null,geometryServiceUrl:null,geoRSSServiceUrl:null,kmlServiceUrl:null,portalUrl:"https://www.arcgis.com",request:{corsDetection:!(a&&a.cordova),corsDetectionTimeout:15,corsEnabledServers:"dev.arcgis.com devext.arcgis.com elevation3d.arcgis.com elevation3ddev.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com geocode.arcgis.com geocodedev.arcgis.com geocodeqa.arcgis.com geoenrich.arcgis.com geoenrichdev.arcgis.com geoenrichqa.arcgis.com qaext.arcgis.com server.arcgisonline.com services.arcgis.com services.arcgisonline.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com static.arcgis.com staticdev.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com tilesdevext.arcgis.com tilesqa.arcgis.com utility.arcgisonline.com www.arcgis.com".split(" "),
corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useCors:!0,useWorkers:"on-request",webTierAuthServers:[]},useSpatialIndex:!1}})},"esri/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(a,h,m){var n=h("ff"),g=h("ie"),k=void 0===g&&7<=h("trident"),f=h("webkit"),e=h("opera"),d=h("chrome"),c=h("safari"),b=a.global;a=navigator.userAgent;var p;(p=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&h.add("esri-iphone",parseFloat(p[2].replace("_",
".")));(p=a.match(/Android\s+(\d+\.\d+)/i))&&h.add("esri-android",parseFloat(p[1]));(p=a.match(/Fennec\/(\d+\.\d+)/i))&&h.add("esri-fennec",parseFloat(p[1]));0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&h.add("esri-blackberry",1);h.add("esri-touch",h("esri-iphone")||h("esri-android")||h("esri-blackberry")||6<=h("esri-fennec")||(n||f)&&document.createTouch?!0:!1);(p=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&h.add("esri-mobile",p);h.add("esri-pointer",navigator.pointerEnabled||
navigator.msPointerEnabled);m._getDOMAccessor=function(a){var b="";n?b="Moz":f?b="Webkit":g?b="ms":e&&(b="O");return b+a.charAt(0).toUpperCase()+a.substr(1)};h.add("esri-phonegap",!!b.cordova);h.add("esri-cors",h("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);if(h("host-webworker"))return h;h.add("esri-file-upload",b.FormData&&b.FileList?!0:!1);h.add("esri-workers",b.Worker?!0:!1);h.add("esri-transforms",k||9<=g||3.5<=n||4<=d||3.1<=c||10.5<=e||3.2<=h("esri-iphone")||
2.1<=h("esri-android"));h.add("esri-transitions",k||10<=g||4<=n||4<=d||3.1<=c||10.5<=e||3.2<=h("esri-iphone")||2.1<=h("esri-android"));h.add("esri-transforms3d",k||10<=n||12<=d||4<=c||3.2<=h("esri-iphone")||3<=h("esri-android"));h.add("esri-url-encodes-apostrophe",function(){var a=b.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>h("esri-android")&&(h.add("esri-transforms",!1,!1,!0),h.add("esri-transitions",!1,!1,!0),h.add("esri-transforms3d",!1,!1,!0));m._css=function(a){var b=
h("esri-transforms3d");if(void 0!==a&&null!==a)b=a;else if(b&&(d||c&&!h("esri-iphone")))b=!1;var p=b?"translate3d(":"translate(",k=b?d?",-1px)":",0px)":")",m=b?"scale3d(":"scale(",x=b?",1)":")",v=b?"rotate3d(0,0,1,":"rotate(",l=b?"matrix3d(":"matrix(",w=b?",0,0,":",",B=b?",0,0,0,0,1,0,":",",y=b?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||n&&"MozTransition"||e&&"OTransition"||g&&"msTransition"||"transition",transform:f&&"-webkit-transform"||n&&"MozTransform"||e&&"OTransform"||g&&
"msTransform"||"transform",transformName:f&&"-webkit-transform"||n&&"-moz-transform"||e&&"-o-transform"||g&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||n&&"MozTransformOrigin"||e&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:f&&"webkitTransitionEnd"||n&&"transitionend"||e&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return p+a+"px,"+b+"px"+k},scale:function(a){return m+a+","+a+x},rotate:function(a){return v+a+"deg)"},
matrix:function(a){return a.m?(a=a.m,l+a[0].toFixed(10)+","+a[1].toFixed(10)+w+a[2].toFixed(10)+","+a[3].toFixed(10)+B+a[4].toFixed(10)+(n?"px,":",")+a[5].toFixed(10)+(n?"px":"")+y):l+a.xx.toFixed(10)+","+a.yx.toFixed(10)+w+a.xy.toFixed(10)+","+a.yy.toFixed(10)+B+a.dx.toFixed(10)+(n?"px,":",")+a.dy.toFixed(10)+(n?"px":"")+y},matrix3d:function(a){a=a.m;return"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+
",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};h.add("esri-webgl",function(){var a;try{if(!b.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(c){return!1}for(var p=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,e=0;e<p.length;++e){try{d=a.getContext(p[e])}catch(f){}if(d)break}a=d;if(!a)return!1;a=a.getParameter(a.VERSION);return!a?
!1:(a=a.match(/^WebGL\s+([\d.]*)/))&&0.91<parseFloat(a[1])});return h})},"esri/core/urlUtils":function(){define("dojo/_base/window dojo/_base/lang dojo/_base/url dojo/io-query ../config ./sniff".split(" "),function(a,h,m,n,g,k){a=new m(a.global.location);var f=a.path,e={},d=g.request,c=a.scheme+":";g=a.scheme+"://"+a.host+(null!=a.port?":"+a.port:"")+f.substring(0,f.lastIndexOf(f.split("/")[f.split("/").length-1]));"file:"===c&&(c="http:");var b={};e.corsServersUrlCache=b;e.burstUrlCache=function(){e.corsServersUrlCache=
b={}};e.appUrl=a;e._appBaseUrl=g;e._toURL=function(a){if("string"===typeof a)return new m(e.getAbsoluteUrl(a));a.scheme||(a.scheme=e.appUrl.scheme);return a};e.urlToObject=function(a){var b={},c=new m(a),d=a.indexOf("?");null===c.query?b={path:a,query:null}:(b.path=a.substring(0,d),b.query=n.queryToObject(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b};e.getProxyUrl=function(a,b){var c=h.isString(a)?0===h.trim(a).toLowerCase().indexOf("https:"):
a,f=d.proxyUrl,g,k;if(h.isString(a)&&(k=e.getProxyRule(a)))f=k.proxyUrl;if(!f)throw console.log("esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled server, please push the domain into esriConfig.request.corsEnabledServers."),Error("esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled server, please push the domain into esriConfig.request.corsEnabledServers.");c&&(!1!==b&&"https"===e.appUrl.scheme)&&(c=f,0!==c.toLowerCase().indexOf("http")&&
(c=e.getAbsoluteUrl(c)),c=c.replace(/^http:/i,"https:"),e.canUseXhr(c)&&(f=c,g=1));f=e.urlToObject(f);f._xo=g;return f};e.addProxy=function(a){var b=e.getProxyRule(a),c;b?c=e.urlToObject(b.proxyUrl):d.forceProxy&&(c=e.getProxyUrl());c&&(b=e.urlToObject(a),a=c.path+"?"+b.path,(c=n.objectToQuery(h.mixin(c.query||{},b.query)))&&(a+="?"+c));return a};e.addProxyRule=function(a){var b=e.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),c=d.proxyRules,f,g=
c.length,k,m=g;a.urlPrefix=b;for(f=0;f<g;f++){k=c[f].urlPrefix;if(0===b.indexOf(k)){if(b.length===k)return-1;m=f;break}0===k.indexOf(b)&&(m=f+1)}c.splice(m,0,a);return m};e.getProxyRule=function(a){var b=d.proxyRules,c=b.length,f=e.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),g;for(a=0;a<c;a++)if(0===f.indexOf(b[a].urlPrefix)){g=b[a];break}return g};e.hasSameOrigin=function(a,b,c){a=e._toURL(a);b=e._toURL(b);return(c||a.scheme===b.scheme)&&a.host.toUpperCase()===
b.host.toUpperCase()&&a.port===b.port};e.canUseXhr=function(a,b){var c=!!k("esri-phonegap"),f=e.hasSameOrigin,g=d.corsEnabledServers||[],n,x,v,l,w,B=-1;h.isString(a)&&(a=a.toLowerCase(),a=0===a.indexOf("http")?new m(a):e.appUrl);if(!c&&k("esri-cors")){x=0;for(v=g.length;x<v;x++){n=g[x];l=e.corsServersUrlCache;l[n]||(0!==h.trim(n).toLowerCase().indexOf("http")?l[n]=[new m("http://"+n),new m("https://"+n)]:l[n]=[new m(n)]);n=l[n];l=0;for(w=n.length;l<w;l++)if(f(a,n[l])){B=x;c=!0;break}}}return b?B:
c};e.getAbsoluteUrl=function(a){return h.isString(a)&&!/^https?:\/\//i.test(a)?0===a.indexOf("//")?c+a:0===a.indexOf("/")?c+"//"+e.appUrl.host+(e.appUrl.port?":"+e.appUrl.port:"")+a:e._appBaseUrl+a:a};e.isAbsoluteUrl=function(a){return/^[A-Za-z][A-Za-z0-9-+.]*:/.test(a)};e.fixUrl=function(a){return e._ensureProtocol(a).replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};e.normalize=function(a){a=e._ensureProtocol(a);return a=e._ensureProperProtocolForAGOResource(a)};e.join=function(a,b){if(null==
b)return a;for(var c=Array.prototype.slice.call(arguments),c=[].concat.apply([],c.map(function(a,b){return a.split("/")})),d=[],e=0;e<c.length;e++){var f=c[e];".."===f?d.pop():"."!==f&&(""!==f||1>=e)&&d.push(f)}return d.join("/")};e._ensureProtocol=function(a){var b;if(!a)return a;/^\/\//i.test(a)&&(b=e.appUrl.scheme,a=("file"===b?"https":b)+":"+a);return a};e._ensureProperProtocolForAGOResource=function(a){return"https"===e.appUrl.scheme&&(/^http\:\/\/server\.arcgisonline\.com(?!:)/i.test(a)||/^http\:\/\/services\.arcgisonline\.com(?!:)/i.test(a)||
/^http\:\/\/.+\.arcgis\.com(?!:)/i.test(a))?a.replace(/http:/i,"https:"):a};return e})},"esri/core/deferredUtils":function(){define([],function(){return{_dfdCanceller:function(a){a.canceled=!0;var h=a._pendingDfd;!a.isResolved()&&(h&&!h.isResolved())&&h.cancel();a._pendingDfd=null},_fixDfd:function(a){var h=a.then;a.then=function(a,n,g){if(a){var k=a;a=function(a){return a&&a._argsArray?k.apply(null,a):k(a)}}return h.call(this,a,n,g)};return a},_resDfd:function(a,h,m){var n=h.length;1===n?m?a.reject(h[0]):
a.resolve(h[0]):1<n?(h._argsArray=!0,a.resolve(h)):a.resolve()}}})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(a,h,m,n,g,k,f,e,d,c){h.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var b={get:function(a){var e,f=this._makeScriptDeferred(a,function(a){e&&e.cancel()}),g=f.ioArgs;k._ioAddQueryToUrl(g);k._ioNotifyStart(f);e=d.get(g.url,{timeout:a.timeout,
jsonp:g.jsonp,checkString:a.checkString,ioArgs:g,frameDoc:a.frameDoc,canAttach:function(a){g.requestId=a.id;g.scriptId=a.scriptId;g.canDelete=a.canDelete;return b._canAttach(g)}},!0);c.around(e,"isValid",function(a){return function(c){b._validCheck(f);return a.call(this,c)}});e.then(function(){f.resolve(f)}).otherwise(function(a){f.ioArgs.error=a;f.reject(a)});return f},attach:d._attach,remove:d._remove,_makeScriptDeferred:function(a,c){var e=k._ioSetArgs(a,c||this._deferredCancel,this._deferredOk,
this._deferredError),f=e.ioArgs;f.id=h._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);f.canDelete=!1;f.jsonp=a.callbackParamName||a.jsonp;f.jsonp&&(f.query=f.query||"",0<f.query.length&&(f.query+="\x26"),f.query+=f.jsonp+"\x3d"+(a.frameDoc?"parent.":"")+h._scopeName+".io.script.jsonp_"+f.id+"._jsonpCallback",f.frameDoc=a.frameDoc,f.canDelete=!0,e._jsonpCallback=this._jsonpCallback,this["jsonp_"+f.id]=e);e.addBoth(function(a){f.canDelete&&(a instanceof Error?b["jsonp_"+f.id]._jsonpCallback=
function(){delete b["jsonp_"+f.id];if(f.requestId)h.global[d._callbacksProperty][f.requestId]()}:b._addDeadScript(f))});return e},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,b){console.log("dojo.io.script error",a);return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){b._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=b._deadScripts)&&0<a.length){for(var c=
0;c<a.length;c++)b.remove(a[c].id,a[c].frameDoc),delete b["jsonp_"+a[c].id],a[c].frameDoc=null;b._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){b._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)h.global[d._callbacksProperty][this.ioArgs.requestId](a)}};
m.setObject("dojo.io.script",b);return b})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(a,h,m,n,g,k,f,e){function d(b,c,d,p,l){p=e.hitch(d,p);if(!b||!b.addEventListener&&!b.attachEvent)return n.after(b||a.global,c,p,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=a.global);if(!l)switch(c){case "keypress":c=u;break;case "mouseenter":c=k.enter;break;case "mouseleave":c=k.leave}return h(b,
c,p,l)}function c(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}f.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!f("opera")});var b={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},p=f("mac")?"metaKey":"ctrlKey",q=function(a,b){var d=
e.mixin({},a,b);c(d);d.preventDefault=function(){a.preventDefault()};d.stopPropagation=function(){a.stopPropagation()};return d},u;u=f("events-keypress-typed")?function(a,c){var e=h(a,"keydown",function(a){var e=a.keyCode,d=13!=e&&32!=e&&(27!=e||!f("ie"))&&(48>e||90<e)&&(96>e||111<e)&&(186>e||192<e)&&(219>e||222<e)&&229!=e;if(d||a.ctrlKey){d=d?0:e;if(a.ctrlKey){if(3==e||13==e)return c.call(a.currentTarget,a);d=95<d&&106>d?d-48:!a.shiftKey&&65<=d&&90>=d?d+32:b[d]||d}e=q(a,{type:"keypress",faux:!0,
charCode:d});c.call(a.currentTarget,e);if(f("ie"))try{a.keyCode=e.keyCode}catch(p){}}}),d=h(a,"keypress",function(a){var b=a.charCode;a=q(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){e.remove();d.remove()}}}:f("opera")?function(a,b){return h(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&(!a.shiftKey&&65<=c&&90>=c)&&(c+=32);return b.call(this,q(a,{charCode:c}))})}:function(a,b){return h(a,"keypress",function(a){c(a);return b.call(this,
a)})};var t={_keypress:u,connect:function(a,b,c,e,l){var p=arguments,f=[],g=0;f.push("string"==typeof p[0]?null:p[g++],p[g++]);var k=p[g+1];f.push("string"==typeof k||"function"==typeof k?p[g++]:null,p[g++]);for(k=p.length;g<k;g++)f.push(p[g]);return d.apply(this,f)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return m.subscribe(a,e.hitch(b,c))},publish:function(a,b){return m.publish.apply(m,[a].concat(b))},connectPublisher:function(a,b,c){var e=function(){t.publish(a,arguments)};
return c?t.connect(b,c,e):t.connect(b,e)},isCopyKey:function(a){return a[p]}};t.unsubscribe=t.disconnect;e.mixin(a,t);return t})},"dojo/topic":function(){define(["./Evented"],function(a){var h=new a;return{publish:function(a,n){return h.emit.apply(h,arguments)},subscribe:function(a,n){return h.on.apply(h,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(a,h,m,n){if(h._fixEvent){var g=h._fixEvent;h._fixEvent=function(a,e){(a=g(a,e))&&n.normalizeEvent(a);
return a}}var k={fix:function(a,e){return h._fixEvent?h._fixEvent(a,e):a},stop:function(a){m("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,h._preventDefault.call(a))}};a.fixEvent=k.fix;a.stopEvent=k.stop;return k})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(a,h,m,n){function g(a,b,e,d,f,g){g=g||"px";a=a.style;isNaN(b)||(a.left=b+g);isNaN(e)||(a.top=e+g);0<=d&&(a.width=
d+g);0<=f&&(a.height=f+g)}function k(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function f(a){return"border-box"==e.boxModel||"table"==a.tagName.toLowerCase()||k(a)}var e={boxModel:"content-box"};a("ie")&&(e.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");e.getPadExtents=function(a,b){a=m.byId(a);var e=b||n.getComputedStyle(a),d=n.toPixelValue,f=d(a,e.paddingLeft),g=d(a,e.paddingTop),k=d(a,
e.paddingRight),e=d(a,e.paddingBottom);return{l:f,t:g,r:k,b:e,w:f+k,h:g+e}};e.getBorderExtents=function(a,b){a=m.byId(a);var e=n.toPixelValue,d=b||n.getComputedStyle(a),f="none"!=d.borderLeftStyle?e(a,d.borderLeftWidth):0,g="none"!=d.borderTopStyle?e(a,d.borderTopWidth):0,k="none"!=d.borderRightStyle?e(a,d.borderRightWidth):0,e="none"!=d.borderBottomStyle?e(a,d.borderBottomWidth):0;return{l:f,t:g,r:k,b:e,w:f+k,h:g+e}};e.getPadBorderExtents=function(a,b){a=m.byId(a);var d=b||n.getComputedStyle(a),
f=e.getPadExtents(a,d),d=e.getBorderExtents(a,d);return{l:f.l+d.l,t:f.t+d.t,r:f.r+d.r,b:f.b+d.b,w:f.w+d.w,h:f.h+d.h}};e.getMarginExtents=function(a,b){a=m.byId(a);var e=b||n.getComputedStyle(a),d=n.toPixelValue,f=d(a,e.marginLeft),g=d(a,e.marginTop),k=d(a,e.marginRight),e=d(a,e.marginBottom);return{l:f,t:g,r:k,b:e,w:f+k,h:g+e}};e.getMarginBox=function(c,b){c=m.byId(c);var d=b||n.getComputedStyle(c),f=e.getMarginExtents(c,d),g=c.offsetLeft-f.l,k=c.offsetTop-f.t,h=c.parentNode,s=n.toPixelValue;if(a("mozilla")){var x=
parseFloat(d.left),d=parseFloat(d.top);!isNaN(x)&&!isNaN(d)?(g=x,k=d):h&&h.style&&(h=n.getComputedStyle(h),"visible"!=h.overflow&&(g+="none"!=h.borderLeftStyle?s(c,h.borderLeftWidth):0,k+="none"!=h.borderTopStyle?s(c,h.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&h)h=n.getComputedStyle(h),g-="none"!=h.borderLeftStyle?s(c,h.borderLeftWidth):0,k-="none"!=h.borderTopStyle?s(c,h.borderTopWidth):0;return{l:g,t:k,w:c.offsetWidth+f.w,h:c.offsetHeight+f.h}};e.getContentBox=function(c,
b){c=m.byId(c);var d=b||n.getComputedStyle(c),f=c.clientWidth,g=e.getPadExtents(c,d),k=e.getBorderExtents(c,d);f?(d=c.clientHeight,k.w=k.h=0):(f=c.offsetWidth,d=c.offsetHeight);a("opera")&&(g.l+=k.l,g.t+=k.t);return{l:g.l,t:g.t,w:f-g.w-k.w,h:d-g.h-k.h}};e.setContentSize=function(a,b,d){a=m.byId(a);var k=b.w;b=b.h;f(a)&&(d=e.getPadBorderExtents(a,d),0<=k&&(k+=d.w),0<=b&&(b+=d.h));g(a,NaN,NaN,k,b)};var d={l:0,t:0,w:0,h:0};e.setMarginBox=function(c,b,p){c=m.byId(c);var q=p||n.getComputedStyle(c);p=b.w;
var h=b.h,t=f(c)?d:e.getPadBorderExtents(c,q),q=e.getMarginExtents(c,q);if(a("webkit")&&k(c)){var r=c.style;0<=p&&!r.width&&(r.width="4px");0<=h&&!r.height&&(r.height="4px")}0<=p&&(p=Math.max(p-t.w-q.w,0));0<=h&&(h=Math.max(h-t.h-q.h,0));g(c,b.l,b.t,p,h)};e.isBodyLtr=function(a){a=a||h.doc;return"ltr"==(h.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};e.docScroll=function(c){c=c||h.doc;var b=h.doc.parentWindow||h.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:
(b=a("quirks")?h.body(c):c.documentElement)&&{x:e.fixIeBiDiScrollLeft(b.scrollLeft||0,c),y:b.scrollTop||0}};a("ie")&&(e.getIeDocumentElementOffset=function(c){c=c||h.doc;c=c.documentElement;if(8>a("ie")){var b=c.getBoundingClientRect(),d=b.left,b=b.top;7>a("ie")&&(d+=c.clientLeft,b+=c.clientTop);return{x:0>d?0:d,y:0>b?0:b}}return{x:0,y:0}});e.fixIeBiDiScrollLeft=function(c,b){b=b||h.doc;var d=a("ie");if(d&&!e.isBodyLtr(b)){var f=a("quirks"),g=f?h.body(b):b.documentElement,k=h.global;6==d&&(!f&&k.frameElement&&
g.scrollHeight>g.clientHeight)&&(c+=g.clientLeft);return 8>d||f?c+g.clientWidth-g.scrollWidth:-c}return c};e.position=function(c,b){c=m.byId(c);var d=h.body(c.ownerDocument),f=c.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};if(9>a("ie")){var g=e.getIeDocumentElementOffset(c.ownerDocument);f.x-=g.x+(a("quirks")?d.clientLeft+d.offsetLeft:0);f.y-=g.y+(a("quirks")?d.clientTop+d.offsetTop:0)}b&&(d=e.docScroll(c.ownerDocument),f.x+=d.x,f.y+=d.y);return f};e.getMarginSize=
function(a,b){a=m.byId(a);var d=e.getMarginExtents(a,b||n.getComputedStyle(a)),f=a.getBoundingClientRect();return{w:f.right-f.left+d.w,h:f.bottom-f.top+d.h}};e.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);if(!a("dom-addeventlistener")){var b=c.target,b=b&&b.ownerDocument||document,d=a("quirks")?b.body:b.documentElement,f=e.getIeDocumentElementOffset(b);c.pageX=c.clientX+e.fixIeBiDiScrollLeft(d.scrollLeft||0,b)-f.x;c.pageY=c.clientY+(d.scrollTop||0)-f.y}};return e})},
"dojo/dom-style":function(){define(["./sniff","./dom"],function(a,h){function m(d,e,p){e=e.toLowerCase();if(a("ie")||a("trident")){if("auto"==p){if("height"==e)return d.offsetHeight;if("width"==e)return d.offsetWidth}if("fontweight"==e)switch(p){case 700:return"bold";default:return"normal"}}e in c||(c[e]=b.test(e));return c[e]?k(d,p):p}var n,g={};n=a("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,
null))}return b||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};g.getComputedStyle=n;var k;k=a("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,p=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(f){b=0}c.left=e;d.left=p;return b}:function(a,
b){return parseFloat(b)||0};g.toPixelValue=k;var f=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},e=9>a("ie")||10>a("ie")&&a("quirks")?function(a){try{return f(a).Opacity/100}catch(b){return 1}}:function(a){return n(a).opacity},d=9>a("ie")||10>a("ie")&&a("quirks")?function(a,b){""===b&&(b=1);var c=100*b;1===b?(a.style.zoom="",f(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=
1,f(a)?f(a,1).Opacity=c:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+c+")",f(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&d(c,b);return b}:function(a,b){return a.style.opacity=b},c={left:!0,top:!0},b=/margin|padding|width|height|max|min|offset/,p={cssFloat:1,styleFloat:1,"float":1};g.get=function(a,b){var c=h.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return e(c);b=p[b]?"cssFloat"in c.style?"cssFloat":
"styleFloat":b;var f=g.getComputedStyle(c);return 1==d?f:m(c,b,f[b]||c.style[b])};g.set=function(a,b,c){var e=h.byId(a),f=arguments.length,k="opacity"==b;b=p[b]?"cssFloat"in e.style?"cssFloat":"styleFloat":b;if(3==f)return k?d(e,c):e.style[b]=c;for(var m in b)g.set(a,m,b[m]);return g.getComputedStyle(e)};return g})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(a,h,m,n,g){function k(a,e){var d=function(c,b){return h(c,a,function(a){if(e)return e(a,
b);if(!n.isDescendant(a.relatedTarget,c))return b.call(this,a)})};d.bubble=function(c){return k(a,function(a,d){var e=c(a.target),f=a.relatedTarget;if(e&&e!=(f&&1==f.nodeType&&c(f)))return d.call(e,a)})};return d}m.add("dom-quirks",g.doc&&"BackCompat"==g.doc.compatMode);m.add("events-mouseenter",g.doc&&"onmouseenter"in g.doc.createElement("div"));m.add("events-mousewheel",g.doc&&"onmousewheel"in g.doc);g=m("dom-quirks")&&m("ie")||!m("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,
e){return a.button&e},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,e){return a.button==e},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};a.mouseButtons=g;a=m("events-mousewheel")?"mousewheel":function(a,e){return h(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;e.call(this,a)})};return{_eventHandler:k,
enter:k("mouseover"),leave:k("mouseout"),wheel:a,isLeft:g.isLeft,isMiddle:g.isMiddle,isRight:g.isRight}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,h){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:h("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,
NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:h("mac")&&!h("air")?h("safari")?91:224:17}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),
function(a,h,m,n,g,k){function f(a,b){var l=b.parentNode;l&&l.insertBefore(a,b)}function e(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var l;l=a.lastChild;)a.removeChild(l)}var d={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,b={},p=0,q="__"+h._scopeName+"ToDomId",u;for(u in d)d.hasOwnProperty(u)&&
(h=d[u],h.pre="option"==u?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+h.join("\x3e\x3c")+"\x3e",h.post="\x3c/"+h.reverse().join("\x3e\x3c/")+"\x3e");var t;8>=m("ie")&&(t=function(a){a.__dojo_html5_tested="yes";var b=r("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(b){a.createElement(b)});
s(b)});a.toDom=function(a,e){e=e||n.doc;var l=e[q];l||(e[q]=l=++p+"",b[l]=e.createElement("div"));8>=m("ie")&&!e.__dojo_html5_tested&&e.body&&t(e);a+="";var f=a.match(c),g=f?f[1].toLowerCase():"",l=b[l];if(f&&d[g]){f=d[g];l.innerHTML=f.pre+a+f.post;for(f=f.length;f;--f)l=l.firstChild}else l.innerHTML=a;if(1==l.childNodes.length)return l.removeChild(l.firstChild);for(g=e.createDocumentFragment();f=l.firstChild;)g.appendChild(f);return g};a.place=function(b,c,l){c=g.byId(c);"string"==typeof b&&(b=/^\s*</.test(b)?
a.toDom(b,c.ownerDocument):g.byId(b));if("number"==typeof l){var d=c.childNodes;!d.length||d.length<=l?c.appendChild(b):f(b,d[0>l?0:l])}else switch(l){case "before":f(b,c);break;case "after":l=b;(d=c.parentNode)&&(d.lastChild==c?d.appendChild(l):d.insertBefore(l,c.nextSibling));break;case "replace":c.parentNode.replaceChild(b,c);break;case "only":a.empty(c);c.appendChild(b);break;case "first":if(c.firstChild){f(b,c.firstChild);break}default:c.appendChild(b)}return b};var r=a.create=function(b,c,l,
d){var e=n.doc;l&&(l=g.byId(l),e=l.ownerDocument);"string"==typeof b&&(b=e.createElement(b));c&&k.set(b,c);l&&a.place(b,l,d);return b};a.empty=function(a){e(g.byId(a))};var s=a.destroy=function(a){if(a=g.byId(a)){var b=a;a=a.parentNode;b.firstChild&&e(b);a&&(m("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(a,h,m,n,g,k){function f(a,b){var d=a.getAttributeNode&&
a.getAttributeNode(b);return!!d&&d.specified}var e={innerHTML:1,textContent:1,className:1,htmlFor:h("ie"),value:1},d={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};a.has=function(a,b){var p=b.toLowerCase();return e[k.names[p]||b]||f(n.byId(a),d[p]||b)};a.get=function(a,b){a=n.byId(a);var p=b.toLowerCase(),g=k.names[p]||b,h=a[g];if(e[g]&&"undefined"!=typeof h)return h;if("textContent"==g)return k.get(a,g);if("href"!=g&&("boolean"==typeof h||m.isFunction(h)))return h;p=d[p]||
b;return f(a,p)?a.getAttribute(p):null};a.set=function(c,b,p){c=n.byId(c);if(2==arguments.length){for(var f in b)a.set(c,f,b[f]);return c}f=b.toLowerCase();var h=k.names[f]||b,t=e[h];if("style"==h&&"string"!=typeof p)return g.set(c,p),c;if(t||"boolean"==typeof p||m.isFunction(p))return k.set(c,b,p);c.setAttribute(d[f]||b,p);return c};a.remove=function(a,b){n.byId(a).removeAttribute(d[b.toLowerCase()]||b)};a.getNodeProp=function(a,b){a=n.byId(a);var e=b.toLowerCase(),g=k.names[e]||b;if(g in a&&"href"!=
g)return a[g];e=d[e]||b;return f(a,e)?a.getAttribute(e):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(a,h,m,n,g,k,f,e){function d(a){var b="";a=a.childNodes;for(var c=0,e;e=a[c];c++)8!=e.nodeType&&(b=1==e.nodeType?b+d(e):b+e.nodeValue);return b}var c={},b=0,p=h._scopeName+"attrid";m.add("dom-textContent",function(a,b,c){return"textContent"in c});a.names={"class":"className","for":"htmlFor",
tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};a.get=function(b,c){b=g.byId(b);var e=c.toLowerCase(),e=a.names[e]||c;return"textContent"==e&&!m("dom-textContent")?d(b):b[e]};a.set=function(d,h,t){d=g.byId(d);if(2==arguments.length&&"string"!=typeof h){for(var r in h)a.set(d,r,h[r]);return d}r=h.toLowerCase();r=a.names[r]||h;if("style"==r&&"string"!=typeof t)return k.set(d,t),d;if("innerHTML"==r)return m("ie")&&
d.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(f.empty(d),d.appendChild(f.toDom(t,d.ownerDocument))):d[r]=t,d;if("textContent"==r&&!m("dom-textContent"))return f.empty(d),d.appendChild(d.ownerDocument.createTextNode(t)),d;if(n.isFunction(t)){var s=d[p];s||(s=b++,d[p]=s);c[s]||(c[s]={});var x=c[s][r];if(x)e.disconnect(x);else try{delete d[r]}catch(v){}t?c[s][r]=e.connect(d,r,t):d[r]=null;return d}d[r]=t;return d}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b){function p(a,b){a.canDelete&&s._remove(a.id,b.options.frameDoc,!0)}function q(a){y&&y.length&&(g.forEach(y,function(a){s._remove(a.id,a.frameDoc);a.frameDoc=null}),y=[]);return a.options.jsonp?!a.data:!0}function u(a){return!!this.scriptLoaded}function t(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var l=this.response.options;y.push({id:this.id,frameDoc:l.ioArgs?l.ioArgs.frameDoc:l.frameDoc});l.ioArgs&&
(l.ioArgs.frameDoc=null);l.frameDoc=null}b?this.reject(b):this.resolve(a)}function s(a,b,c){var d=m.parseArgs(a,m.deepCopy({},b));a=d.url;b=d.options;var e=m.deferred(d,p,q,b.jsonp?null:b.checkString?t:u,r);k.mixin(e,{id:x+v++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+x+"_callbacks."+e.id),e.canDelete=!0,B[e.id]=function(a){d.data=a;e.handleResponse(d)});m.notify&&m.notify.emit("send",d,e.promise.cancel);
if(!b.canAttach||b.canAttach(e)){var g=s._attach(e.id,a,b.frameDoc);if(!b.jsonp&&!b.checkString)var n=f(g,l,function(a){if("load"===a.type||w.test(g.readyState))n.remove(),e.scriptLoaded=a})}f.once(g,"error",function(a){e.reject(a);s._remove(e.id,b.frameDoc,!0)});h(e);return c?e:e.promise}c.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var x=a.id.replace(/[\/\.\-]/g,
"_"),v=0,l=c("script-readystatechange")?"readystatechange":"load",w=/complete|loaded/,B=n.global[x+"_callbacks"]={},y=[];s.get=s;s._attach=function(a,l,c){c=c||b.doc;var d=c.createElement("script");d.type="text/javascript";d.src=l;d.id=a;d.async=!0;d.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(d)};s._remove=function(a,b,l){d.destroy(e.byId(a,b));B[a]&&(l?B[a]=function(){delete B[a]}:delete B[a])};s._callbacksProperty=x+"_callbacks";return s})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q){m.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");k=q._iframeName;k=k.substring(0,k.lastIndexOf("_"));var u=n.delegate(q,{create:function(){return u._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(b){var c,d=g._ioSetArgs(b,function(a){c&&c.cancel()},function(a){var b=null;a=a.ioArgs;try{var l=a.handleAs;"xml"===l||"html"===l?b=c.response.data:(b=c.response.text,"json"===l?b=h.fromJson(b):"javascript"===l&&(b=m.eval(b)))}catch(d){b=
d}return b},function(a,b){b.ioArgs._hasError=!0;return a}),f=d.ioArgs,k="GET",l=e.byId(b.form);b.method&&("POST"===b.method.toUpperCase()&&l)&&(k="POST");b={method:k,handleAs:"json"===b.handleAs||"javascript"===b.handleAs?"text":b.handleAs,form:b.form,query:l?null:b.content,data:l?b.content:null,timeout:b.timeout,ioArgs:f};b.method&&(b.method=b.method.toUpperCase());if(a.ioPublish&&m.publish&&!1!==f.args.ioPublish)var w=p.after(q,"_notifyStart",function(a){a.options.ioArgs===f&&(w.remove(),g._ioNotifyStart(d))},
!0);c=q(f.url,b,!0);f._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:f.global[k+"_onload"]});n.setObject("dojo.io.iframe",u);return u})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(a,h,m,n,g,k,f,e){function d(a,b){var c=function(c,d){if("string"==typeof d&&(d=m.byId(d),!d))return new b([]);var e="string"==
typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return e.end&&e.on?e:new b(e)};c.matches=a.match||function(a,b,l){return 0<c.filter([a],b,l).length};c.filter=a.filter||function(a,b,l){return c(b,l).filter(function(b){return-1<g.indexOf(a,b)})};if("function"!=typeof a){var d=a.search;a=function(a,b){return d(b||document,a)}}return c}h.add("array-extensible",function(){return 1==k.delegate([],{length:1}).length&&!h("bug-for-in-skips-shadowed")});var c=Array.prototype,b=c.slice,p=c.concat,q=g.forEach,u=function(c,
l,d){l=[0].concat(b.call(l,0));d=d||a.global;return function(a){l[0]=a;return c.apply(d,l)}},t=function(a){var b=this instanceof r&&h("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],e=d.length=c.length,p=0;p<e;p++)d[p]=c[p];if(b)return d;c=d}k._mixin(c,s);c._NodeListCtor=function(a){return r(a)};return c},r=t,s=r.prototype=h("array-extensible")?[]:{};r._wrap=s._wrap=function(a,b,c){a=new (c||this._NodeListCtor||r)(a);return b?
a._stash(b):a};r._adaptAsMap=function(a,b){return function(){return this.map(u(a,arguments,b))}};r._adaptAsForEach=function(a,b){return function(){this.forEach(u(a,arguments,b));return this}};r._adaptAsFilter=function(a,b){return function(){return this.filter(u(a,arguments,b))}};r._adaptWithCondition=function(b,l,c){return function(){var d=arguments,e=u(b,d,c);if(l.call(c||a.global,d))return this.map(e);this.forEach(e);return this}};q(["slice","splice"],function(a){var b=c[a];s[a]=function(){return this._wrap(b.apply(this,
arguments),"slice"==a?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(c){var l=g[c];s[c]=function(){return l.apply(a,[this].concat(b.call(arguments,0)))}});k.extend(t,{constructor:r,_NodeListCtor:r,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return n(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},
concat:function(a){var c=b.call(this,0),d=g.map(arguments,function(a){return b.call(a,0)});return this._wrap(p.apply(c,d),this)},map:function(a,b){return this._wrap(g.map(this,a,b),this)},forEach:function(a,b){q(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=x._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(g.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=k.isFunction(a)?a:k.getObject(a);b=b||{};return this.forEach(function(a){new c(b,
a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var x=d(e,t);a.query=d(e,function(a){return t(a)});x.load=function(a,b,c){f.load(a,b,function(a){c(d(a,t))})};a._filterQueryResult=x._filterResult=function(a,b,c){return new t(x.filter(a,b,c))};a.NodeList=x.NodeList=t;return x})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(a,
h,m,n,g){var k=n.trim,f=m.forEach,e="BackCompat"==g.doc.compatMode,d=!1,c=function(){return!0},b=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,c){return k(a.slice(b,c))},c=[],l=-1,e=-1,p=-1,f=-1,g=-1,w=-1,q=-1,m,h="",n="",s,u=0,B=a.length,t=null,y=null,r=function(){0<=w&&(t.id=b(w,u).replace(/\\/g,""),w=-1);if(0<=q){var a=q==u?null:b(q,u);t[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;q=-1}0<=g&&(t.classes.push(b(g+1,u).replace(/\\/g,"")),g=-1)};h=n,n=a.charAt(u),u<B;u++)if("\\"!=
h)if(t||(s=u,t={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},q=u),m)n==m&&(m=null);else if("'"==n||'"'==n)m=n;else if(0<=l)if("]"==n){y.attr?y.matchFor=b(p||l+1,u):y.attr=b(l+1,u);if((l=y.matchFor)&&('"'==l.charAt(0)||"'"==l.charAt(0)))y.matchFor=l.slice(1,-1);y.matchFor&&(y.matchFor=y.matchFor.replace(/\\/g,""));t.attrs.push(y);y=null;l=p=-1}else"\x3d"==n&&(p=0<="|~^$*".indexOf(h)?h:"",y.type=p+n,y.attr=b(l+1,u-p.length),p=u+
1);else 0<=e?")"==n&&(0<=f&&(y.value=b(e+1,u)),f=e=-1):"#"==n?(r(),w=u+1):"."==n?(r(),g=u):":"==n?(r(),f=u):"["==n?(r(),l=u,y={}):"("==n?(0<=f&&(y={name:b(f+1,u),value:null},t.pseudos.push(y)),e=u):" "==n&&h!=n&&(r(),0<=f&&t.pseudos.push({name:b(f+1,u)}),t.loops=t.pseudos.length||t.attrs.length||t.classes.length,t.oquery=t.query=b(s,u),t.otag=t.tag=t.oper?null:t.tag||"*",t.tag&&(t.tag=t.tag.toUpperCase()),c.length&&c[c.length-1].oper&&(t.infixOper=c.pop(),t.query=t.infixOper.query+" "+t.query),c.push(t),
t=null);return c},p=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},q=function(a,b){var c=b||[];a&&c.push(a);return c},u=function(a){return 1==a.nodeType},t=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(d?a.getAttribute(b):a.getAttribute(b,2))||""},r={"*\x3d":function(a,b){return function(c){return 0<=t(c,a).indexOf(b)}},"^\x3d":function(a,b){return function(c){return 0==t(c,a).indexOf(b)}},
"$\x3d":function(a,b){return function(c){c=" "+t(c,a);var l=c.lastIndexOf(b);return-1<l&&l==c.length-b.length}},"~\x3d":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+t(b,a)+" ").indexOf(c)}},"|\x3d":function(a,b){var c=b+"-";return function(l){l=t(l,a);return l==b||0==l.indexOf(c)}},"\x3d":function(a,b){return function(c){return t(c,a)==b}}},s="undefined"==typeof g.doc.firstChild.nextElementSibling,x=!s?"nextElementSibling":"nextSibling",v=!s?"previousElementSibling":"previousSibling",
l=s?u:c,w=function(a){for(;a=a[v];)if(l(a))return!1;return!0},B=function(a){for(;a=a[x];)if(l(a))return!1;return!0},y=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,p=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(p==d&&0<=e&&0<=p)return e;h("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[x])l(b)&&
(h("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c));return e},C=function(a){return!(y(a)%2)},E=function(a){return y(a)%2},z={checked:function(a,b){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return w},"last-child":function(){return B},"only-child":function(a,b){return function(a){return w(a)&&B(a)}},empty:function(a,b){return function(a){var b=
a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,c){var l=b(c)[0],d={el:1};"*"!=l.tag&&(d.tag=1);l.classes.length||(d.classes=1);var e=H(l,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return E;if("even"==b)return C;if(-1!=b.indexOf("n")){var l=b.split("n",
2),d=l[0]?"-"==l[0]?-1:c(l[0]):1,e=l[1]?c(l[1]):0,p=0,f=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(p=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(f=e,e%=d));if(0<d)return function(a){a=y(a);return a>=p&&(0>f||a<=f)&&a%d==e};b=e}var g=c(b);return function(a){return y(a)==g}}},L=9>h("ie")||9==h("ie")&&h("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return d?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},H=function(a,
b){if(!a)return c;b=b||{};var l=null;"el"in b||(l=p(l,u));"tag"in b||"*"!=a.tag&&(l=p(l,function(b){return b&&(d?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in b||f(a.classes,function(a,b,c){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");l=p(l,function(a){return d.test(a.className)});l.count=b});"pseudos"in b||f(a.pseudos,function(a){var b=a.name;z[b]&&(l=p(l,z[b](b,a.value)))});"attrs"in b||f(a.attrs,function(a){var b,c=a.attr;a.type&&r[a.type]?b=r[a.type](c,a.matchFor):c.length&&(b=L(c));
b&&(l=p(l,b))});"id"in b||a.id&&(l=p(l,function(b){return!!b&&b.id==a.id}));l||"default"in b||(l=c);return l},K=function(a){return function(b,c,l){for(;b=b[x];)if(!s||u(b)){(!l||Z(b,l))&&a(b)&&c.push(b);break}return c}},$=function(a){return function(b,c,d){for(b=b[x];b;){if(l(b)){if(d&&!Z(b,d))break;a(b)&&c.push(b)}b=b[x]}return c}},R=function(a){a=a||c;return function(b,c,d){for(var e=0,p=b.children||b.childNodes;b=p[e++];)l(b)&&((!d||Z(b,d))&&a(b,e))&&c.push(b);return c}},N={},Q=function(b){var l=
N[b.query];if(l)return l;var d=b.infixOper,d=d?d.oper:"",p=H(b,{el:1}),f="*"==b.tag,k=g.doc.getElementsByClassName;if(d)k={el:1},f&&(k.tag=1),p=H(b,k),"+"==d?l=K(p):"~"==d?l=$(p):"\x3e"==d&&(l=R(p));else if(b.id)p=!b.loops&&f?c:H(b,{el:1,id:1}),l=function(c,l){var d=a.byId(b.id,c.ownerDocument||c);if(d&&p(d)){if(9==c.nodeType)return q(d,l);for(var e=d.parentNode;e&&e!=c;)e=e.parentNode;if(e)return q(d,l)}};else if(k&&/\{\s*\[native code\]\s*\}/.test(String(k))&&b.classes.length&&!e)var p=H(b,{el:1,
classes:1,id:1}),w=b.classes.join(" "),l=function(a,b,c){b=q(0,b);for(var l,d=0,e=a.getElementsByClassName(w);l=e[d++];)p(l,a)&&Z(l,c)&&b.push(l);return b};else!f&&!b.loops?l=function(a,c,l){c=q(0,c);for(var d=0,e=b.getTag(),e=e?a.getElementsByTagName(e):[];a=e[d++];)Z(a,l)&&c.push(a);return c}:(p=H(b,{el:1,tag:1,id:1}),l=function(a,c,l){c=q(0,c);for(var d,e=0,f=(d=b.getTag())?a.getElementsByTagName(d):[];d=f[e++];)p(d,a)&&Z(d,l)&&c.push(d);return c});return N[b.query]=l},F={},D={},S=function(a){var c=
b(k(a));if(1==c.length){var l=Q(c[0]);return function(a){if(a=l(a,[]))a.nozip=!0;return a}}return function(a){a=q(a);for(var b,l,d=c.length,e,p,f=0;f<d;f++){p=[];b=c[f];l=a.length-1;0<l&&(e={},p.nozip=!0);l=Q(b);for(var g=0;b=a[g];g++)l(b,p,e);if(!p.length)break;a=p}return p}},X=h("ie")?"commentStrip":"nozip",ha=!!g.doc.querySelectorAll,I=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,G=function(a,b,c,l){return c?(b?b+" ":"")+c+(l?" "+l:""):a},W=/([^[]*)([^\]]*])?/g,O=function(a,b,c){return b.replace(I,
G)+(c||"")},M=function(a,b){a=a.replace(W,O);if(ha){var c=D[a];if(c&&!b)return c}if(c=F[a])return c;var c=a.charAt(0),l=-1==a.indexOf(" ");0<=a.indexOf("#")&&l&&(b=!0);if(ha&&!b&&-1=="\x3e~+".indexOf(c)&&(!h("ie")||-1==a.indexOf(":"))&&!(e&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|\x3d")){var d=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return D[a]=function(b){try{if(!(9==b.nodeType||l))throw"";var c=b.querySelectorAll(d);c[X]=!0;return c}catch(e){return M(a,
!0)(b)}}}var p=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return F[a]=2>p.length?S(a):function(a){for(var b=0,c=[],l;l=p[b++];)c=c.concat(S(l)(a));return c}},U=0,ca=h("ie")?function(a){return d?a.getAttribute("_uid")||a.setAttribute("_uid",++U)||U:a.uniqueID}:function(a){return a._uid||(a._uid=++U)},Z=function(a,b){if(!b)return 1;var c=ca(a);return!b[c]?b[c]=1:0},ia=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];var b=[];U++;var c,l;if(h("ie")&&
d){var e=U+"";for(c=0;c<a.length;c++)if((l=a[c])&&l.getAttribute("_zipIdx")!=e)b.push(l),l.setAttribute("_zipIdx",e)}else if(h("ie")&&a.commentStrip)try{for(c=0;c<a.length;c++)(l=a[c])&&u(l)&&b.push(l)}catch(p){}else for(c=0;c<a.length;c++)if((l=a[c])&&l._zipIdx!=U)b.push(l),l._zipIdx=U;return b},ma=function(a,b){b=b||g.doc;d="div"===(b.ownerDocument||b).createElement("div").tagName;var c=M(a)(b);return c&&c.nozip?c:ia(c)};ma.filter=function(c,l,d){for(var e=[],p=b(l),p=1==p.length&&!/[^\w#\.]/.test(l)?
H(p[0]):function(b){return-1!=m.indexOf(ma(l,a.byId(d)),b)},f=0,g;g=c[f];f++)p(g)&&e.push(g);return e};return ma})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p){function q(a){return!this.isFulfilled()}function u(a){return!!this._finished}function t(a,b){if(!b)try{var c=a.options,l=s.doc(s._frame),d=c.handleAs;if("html"!==
d){if("xml"===d)if("html"===l.documentElement.tagName.toLowerCase()){e("a",l.documentElement).orphan();var p=l.documentElement.innerText,p=p.replace(/>\s+</g,"\x3e\x3c");a.text=k.trim(p)}else a.data=l;else a.text=l.getElementsByTagName("textarea")[0].value;g(a)}else a.data=l}catch(f){b=f}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(a){this._callNext()}function s(a,b,c){var d=n.parseArgs(a,n.deepCreate(l,b),!0);a=d.url;b=
d.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");s._frame||(s._frame=s.create(s._iframeName,v+"();"));a=n.deferred(d,null,q,u,t,r);a._callNext=function(){this._calledNext||(this._calledNext=!0,s._currentDfd=null,s._fireNextRequest())};a._legacy=c;s._dfdQueue.push(a);s._fireNextRequest();m(a);return c?a:a.promise}var x=a.id.replace(/[\/\.\-]/g,"_"),v=x+"_onload";p.global[v]||(p.global[v]=function(){var a=s._currentDfd;if(a){var l=c.byId(a.response.options.form)||
a._tmpForm;if(l){for(var d=a._contentToClean,e=0;e<d.length;e++)for(var p=d[e],f=0;f<l.childNodes.length;f++){var g=l.childNodes[f];if(g.name===p){b.destroy(g);break}}a._originalAction&&l.setAttribute("action",a._originalAction);a._originalMethod&&(l.setAttribute("method",a._originalMethod),l.method=a._originalMethod);a._originalTarget&&(l.setAttribute("target",a._originalTarget),l.target=a._originalTarget)}a._tmpForm&&(b.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else s._fireNextRequest()});
var l={method:"POST"};s.create=function(a,c,l){if(p.global[a])return p.global[a];if(p.global.frames[a])return p.global.frames[a];l||(d("config-useXDomain")&&!d("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),l=d("config-dojoBlankHtmlUrl")||h.toUrl("dojo/resources/blank.html"));c=b.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+
a+'" src\x3d"'+l+'" onload\x3d"'+c+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',p.body());return p.global[a]=c};s.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=p.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(p.doc.frames[b]&&p.doc.frames[b].document)return p.doc.frames[b].document}return null};s.setSrc=function(a,
b,c){a=p.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(l){console.log("dojo/request/iframe.setSrc: ",l)}};s._iframeName=x+"_IoIframe";s._notifyStart=function(){};s._dfdQueue=[];s._currentDfd=null;s._fireNextRequest=function(){var a;try{if(!s._currentDfd&&s._dfdQueue.length){do a=s._currentDfd=s._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&s._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())s._currentDfd=
null;else{var l=a.response,d=l.options,e=a._contentToClean=[],g=c.byId(d.form),q=n.notify,m=d.data||null,h;!a._legacy&&"POST"===d.method&&!g?g=a._tmpForm=b.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},p.body()):"GET"===d.method&&(g&&-1<l.url.indexOf("?"))&&(h=l.url.slice(l.url.indexOf("?")+1),m=k.mixin(f.queryToObject(h),m));if(g){if(!a._legacy){var u=g;do u=u.parentNode;while(u&&u!==p.doc.documentElement);u||(g.style.position="absolute",g.style.left="-1000px",
g.style.top="-1000px",p.body().appendChild(g));g.name||(g.name=x+"_form")}if(m){var u=function(a,c){b.create("input",{type:"hidden",name:a,value:c},g);e.push(a)},t;for(t in m){var r=m[t];if(k.isArray(r)&&1<r.length)for(h=0;h<r.length;h++)u(t,r[h]);else g[t]?g[t].value=r:u(t,r)}}var v=g.getAttributeNode("action"),Q=g.getAttributeNode("method"),F=g.getAttributeNode("target");l.url&&(a._originalAction=v?v.value:null,v?v.value=l.url:g.setAttribute("action",l.url));if(a._legacy){if(!Q||!Q.value)Q?Q.value=
d.method:g.setAttribute("method",d.method)}else a._originalMethod=Q?Q.value:null,Q?Q.value=d.method:g.setAttribute("method",d.method);a._originalTarget=F?F.value:null;F?F.value=s._iframeName:g.setAttribute("target",s._iframeName);g.target=s._iframeName;q&&q.emit("send",l,a.promise.cancel);s._notifyStart(l);g.submit()}else d="",l.options.data&&(d=l.options.data,"string"!==typeof d&&(d=f.objectToQuery(d))),u=l.url+(-1<l.url.indexOf("?")?"\x26":"?")+d,q&&q.emit("send",l,a.promise.cancel),s._notifyStart(l),
s.setSrc(s._frame,u,!0)}}}catch(D){a.reject(D)}};n.addCommonMethods(s,["GET","POST"]);return s})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(a,h,m,n,g,k,f,e,d){function c(a){return function(b,c,l){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,l)}}var b=function(a){return 1==a.length&&"string"==typeof a[0]},p=function(a){var b=a.parentNode;
b&&b.removeChild(a)},q=h.NodeList,u=q._adaptWithCondition,t=q._adaptAsForEach,r=q._adaptAsMap;n.extend(q,{_normalize:function(b,c){var d=!0===b.parse;if("string"==typeof b.template){var l=b.templateFunc||a.string&&a.string.substitute;b=l?l(b.template,b):b}l=typeof b;"string"==l||"number"==l?(b=k.toDom(b,c&&c.ownerDocument),b=11==b.nodeType?n._toArray(b.childNodes):[b]):n.isArrayLike(b)?n.isArray(b)||(b=n._toArray(b)):b=[b];d&&(b._runParse=!0);return b},_cloneNode:function(a){return a.cloneNode(!0)},
_place:function(b,c,d,l){if(!(1!=c.nodeType&&"only"==d))for(var e,p=b.length,f=p-1;0<=f;f--){var g=l?this._cloneNode(b[f]):b[f];if(b._runParse&&a.parser&&a.parser.parse){e||(e=c.ownerDocument.createElement("div"));e.appendChild(g);a.parser.parse(e);for(g=e.firstChild;e.firstChild;)e.removeChild(e.firstChild)}f==p-1?k.place(g,c,d):c.parentNode.insertBefore(g,c);c=g}},position:r(f.position),attr:u(c(e),b),style:u(c(d),b),addClass:t(g.add),removeClass:t(g.remove),toggleClass:t(g.toggle),replaceClass:t(g.replace),
empty:t(k.empty),removeAttr:t(e.remove),marginBox:r(f.getMarginBox),place:function(a,b){var c=h(a)[0];return this.forEach(function(a){k.place(a,c,b)})},orphan:function(a){return(a?h._filterResult(this,a):this).forEach(p)},adopt:function(a,b){return h(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new q;this.map(function(c){h(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,l=0;if("string"==typeof a){c=
h._filterResult(this,b[0]);if(1==b.length)return c._stash(this);l=1}return this._wrap(m.filter(c,b[l],b[l+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var c=0,l;l=this[c];c++)a.length?this._place(a,l,b,0<c):k.empty(l);return this}});return q})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(a,h,m){function n(a){if("string"==typeof a||a instanceof String){if(a&&!k.test(a))return f[0]=a,f;a=a.split(k);a.length&&!a[0]&&a.shift();a.length&&
!a[a.length-1]&&a.pop();return a}return!a?[]:h.filter(a,function(a){return a})}var g,k=/\s+/,f=[""],e={};return g={contains:function(a,c){return 0<=(" "+m.byId(a).className+" ").indexOf(" "+c+" ")},add:function(a,c){a=m.byId(a);c=n(c);var b=a.className,e,b=b?" "+b+" ":" ";e=b.length;for(var f=0,g=c.length,k;f<g;++f)(k=c[f])&&0>b.indexOf(" "+k+" ")&&(b+=k+" ");e<b.length&&(a.className=b.substr(1,b.length-2))},remove:function(d,c){d=m.byId(d);var b;if(void 0!==c){c=n(c);b=" "+d.className+" ";for(var e=
0,f=c.length;e<f;++e)b=b.replace(" "+c[e]+" "," ");b=a.trim(b)}else b="";d.className!=b&&(d.className=b)},replace:function(a,c,b){a=m.byId(a);e.className=a.className;g.remove(e,b);g.add(e,c);a.className!==e.className&&(a.className=e.className)},toggle:function(a,c,b){a=m.byId(a);if(void 0===b){c=n(c);for(var e=0,f=c.length,k;e<f;++e)k=c[e],g[g.contains(a,k)?"remove":"add"](a,k)}else g[b?"add":"remove"](a,c);return b}}})},"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred",
"./Error"],function(a,h,m,n){h.eachAlways=function(a){var k=new m,f=[],e=a.length;0===e&&k.resolve(f);a.forEach(function(a){var c={promise:a};f.push(c);a.then(function(a){c.value=a}).otherwise(function(a){c.error=a}).then(function(){--e;0===e&&k.resolve(f)})});return k.promise};h.reject=function(a){var k=new m;k.reject(a);return k.promise};h.resolve=function(a){void 0===a&&(a=null);var k=new m;k.resolve(a);return k.promise};h.after=function(a,k){void 0===k&&(k=null);var f=0,e=new m(function(){f&&
(clearTimeout(f),f=0)}),f=setTimeout(function(){e.resolve(k)},a);return e.promise};h.timeout=function(a,k,f){var e=0,d=new m(a.cancel);a.then(function(a){d.isFulfilled()||(d.resolve(a),e&&(clearTimeout(e),e=0))});a.otherwise(function(a){d.isFulfilled()||(d.reject(a),e&&(clearTimeout(e),e=0))});e=setTimeout(function(){var a=f||new n("promiseUtils:timeout","The wrapped promise did not resolve within "+k+" ms");d.reject(a)},k);return d.promise}})},"esri/core/Error":function(){define("require exports ./tsSupport/extendsHelper ./tsSupport/decorateHelper ./typescript dojo/string".split(" "),
function(a,h,m,n,g,k){return function(){function a(e,d,c){}a.prototype.dojoConstructor=function(a,d,c){this.name=a;this.message=d&&k.substitute(d,c,function(a){return null==a?"":a})||"";this.details=c};a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a=n([g.subclass()],a)}()})},"esri/core/typescript":function(){define(["./declare","dojo/_base/lang"],function(a,h){var m={declareDefinition:function(a,g){var k=[],f=Object.getPrototypeOf(a.prototype),e;if(f!==Object.prototype){var d=
f.constructor;e=d.prototype;k.push(d)}g&&(k=k.concat(g));for(var d={},c=Object.getOwnPropertyNames(a.prototype),b=0;b<c.length;b++){var p=c[b];if("constructor"!==p){var m=p;"dojoConstructor"===p&&(m="constructor");if(!e||a.prototype[p]!==e[p])d[m]=a.prototype[p]}}c=Object.getOwnPropertyNames(a);f=Object.getOwnPropertyNames(f.constructor);e={};for(b=0;b<c.length;b++)p=c[b],-1===f.indexOf(p)&&(e[p]=a[p]);return{bases:k,instanceMembers:d,classMembers:e}},subclass:function(n){return function(g){g=m.declareDefinition(g,
n);return h.mixin(a(g.bases,g.instanceMembers),g.classMembers)}},shared:function(a){return function(g,k){g[k]=a}}};return m})},"esri/geometry/SpatialReference":function(){define(["dojo/_base/lang","../core/JSONSupporter"],function(a,h){var m=[-2.0037508342788905E7,2.0037508342788905E7],n=[-2.0037508342787E7,2.0037508342787E7],g=[102113,102100,3857,3785],k=[102113,102100,3857,3785,4326],f=h.createSubclass({declaredClass:"esri.SpatialReference",classMetadata:{properties:{isWebMercator:{dependsOn:["wkid"],
readOnly:!0},isWrappable:{dependsOn:["wkid"],readOnly:!0},isWGS84:{dependsOn:["wkid"],readOnly:!0}}},_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:m,origin:n,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m,origin:n,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m,origin:n,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:m,origin:n,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},normalizeCtorArgs:function(e){var d={};if("object"===typeof e)return a.mixin(d,e);d["string"===typeof e?"wkt":"wkid"]=e;return d},isWGS84:null,_isWGS84Getter:function(){return 4326===this.wkid},isWebMercator:null,_isWebMercatorGetter:function(){return-1!==g.indexOf(this.wkid)},isWrappable:null,_isWrappableGetter:function(){return-1!==k.indexOf(this.wkid)},wkid:null,wkt:null,clone:function(){if(this===f.WGS84)return f.WGS84;if(this===f.WebMercator)return f.WebMercator;
var a=new f;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a},equals:function(a){var d=!1;a&&(this===a&&(d=!0),this.wkid||a.wkid?d=this.wkid===a.wkid||this.isWebMercator&&a.isWebMercator||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(d=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return d},
toJSON:function(){var a=null;null!=this.wkid?(a={wkid:this.wkid},null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a={wkt:this.wkt});return a},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var d=!1;a&&(d=this.isWebMercator&&4326===a.wkid||a.isWebMercator&&4326===this.wkid);return d}});f.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===
a.wkid)return f.WebMercator;if(4326===a.wkid)return f.WGS84}var d=new f;d.read(a);return d};f.WGS84=new f(4326);f.WebMercator=new f({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(f.WGS84),Object.freeze(f.WebMercator));return f})},"esri/core/JSONSupporter":function(){define(["dojo/has","dojo/_base/lang","./declare","./Accessoire","./accessoireSupport/introspect"],function(a,h,m,n,g){Function.prototype.bind.call(console.error,console);a=m(n,{declaredClass:"esri.core.JSONSupporter",read:function(a){var e=
g(this).classMetadata,d=this._accessorProps,c=e.properties,b=(e=e.reader)&&e.add,p=e&&e.exclude,k,m,e=Object.getOwnPropertyNames(a);p&&(e=e.filter(function(a){return-1===p.indexOf(a)}));b&&(e=e.concat(b));for(var h=0;b=e[h];h++)k=a[b],m=c[b]&&c[b].reader,d.setDefault(b,m?m.call(this,k,a):k);return this}});var k=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var e=new this;e.read(a);return e};m.after(function(a){if(m.hasMixin(a,"esri.core.JSONSupporter")){a.fromJSON=
k.bind(a);a=h.getObject("_esriMeta.classMetadata",!1,a);var e=a.properties,d=h.getObject("reader.add",!1,a);h.getObject("reader.exclude",!1,a);d&&e&&d.slice().filter(function(a){return!e[a]||!e[a].reader}).forEach(function(a){d.splice(d.indexOf(a),1)},this)}});return a})},"esri/layers/TiledLayer":function(){define(["./Layer","./support/TileInfo"],function(a,h){return a.createSubclass({properties:{attributionDataUrl:null,tileInfo:h},viewModulePaths:{"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"},
getTileUrl:function(a,h,g){}})})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/requireUtils ../core/promiseUtils ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u){var t=0;m=m.createSubclass([g,k,f],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded",
"parsedUrl"],get:function(){var a=this.loaded&&this.parsedUrl&&b.id&&b.id.findCredential(this.parsedUrl.path)||null;a&&a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));return a}},fullExtent:new u(-180,-90,180,90,q.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+t++}},legendEnabled:!0,listMode:"show",minScale:{value:0,type:Number,cast:function(a){return a||
0}},maxScale:{value:0,type:Number,cast:function(a){return a||0}},opacity:{value:1,type:Number,cast:function(a){return 0>a?0:1<a?1:a}},parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?e.urlToObject(a):null}},popupEnabled:!0,refreshInterval:0,attributionVisible:!0,spatialReference:q.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),b=this.get("credential.token");return a||b||null},set:function(a){a?this._override("token",
a):this._clearOverride("token")}},url:{value:null,cast:function(a){return e.normalize(a)}},visible:!0},createLayerView:function(b){var e=this.viewModulePaths[b.type];return e?d.when(a,e).then(function(a){return new a({layer:this,view:b})}.bind(this)):c.reject(new n("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:b,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var a=this.attributionDataUrl;
this.hasAttributionData&&a?a=p(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):(a=new h,a.reject(new n("Layer does not have attribution data")),a=a.promise);return a},refresh:function(){this.emit("refresh")}});m.fromArcGISServerUrl=function(b){"string"===typeof b&&(b={url:b});return d.when(a,"./support/arcgisLayers").then(function(a){return a.fromURL(b)})};m.fromPortalItem=function(b){if(b&&!b.portalItem&&"object"===typeof b&&(!b.declaredClass||"esri.portal.PortalItem"===
b.declaredClass))b={portalItem:b};return d.when(a,"../portal/loaders/support/layerUtils").then(function(a){return a.layerFromPortalItem(b)})};return m})},"esri/core/Identifiable":function(){define(["./declare"],function(a){var h=0;return a(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+h++})}})})},"esri/core/Loadable":function(){define(["./Promise","dojo/aspect","dojo/Deferred","./Error"],function(a,h,m,n){return a.createSubclass({declaredClass:"esri.core.Loadable",
"-chains-":{load:"after"},constructor:function(){var a=new m;this.addResolvingPromise(a.promise);h.around(this,"load",function(k){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",k.apply(this),a.resolve(),a=null);return this}});this.then(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,
loadStatus:"not-loaded"},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new n("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(a,h,m,n,g,k){var f=function(a){if(!a.isFulfilled()){var c=a._promiseProps,d=c.resolvingPromises,e,f;c.allPromise&&c.allPromise.cancel();var g=new n;
for(e=d.length-1;0<=e;e--)f=d[e],f.isCanceled&&f.isCanceled()?d.splice(e,1):f.then(null,null,c.resolver.progress);f=null;(c.allPromise=h(d.concat([g.promise]))).then(function(){c.resolver.resolve(a);a=c=g=c.allPromise=c.resolvingPromises=null},function(d){c.allPromise=null;if(!d||"cancel"!==d.dojoType){var e=Array.prototype.slice.call(arguments,0);c.resolver.reject(e[0]);a=c=g=c.allPromise=c.resolvingPromises=null}});g&&k.schedule(function(){g&&g.resolve()})}},e=g("CancelError",null,function(a){this.target=
a}),d=function(a){return a||new e(this.instance)},c=function(a){this.instance=a;this.canceler=d.bind(this);this.resolver=new n;this.initialized=!1;this.resolvingPromises=[]};c.prototype={canceler:null,cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var c=this.resolvingPromises.concat(),d=c.length-1;0<=d;d--)c[d].cancel(a);this.resolver.cancel(a)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new c(this),
enumerable:!1,configurable:!1,writable:!0});var a=m.after(this,"postscript",function(c,d){a.remove();a=null;f(this)},!0)},_promiseProps:null,always:function(a){return this.then(a,a)},then:function(a,c,d){var e=new n(this._promiseProps.canceler);a=e.then(a,c,d);this._promiseProps.resolver.then(e.resolve,e.reject,e.progress);return a},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},
otherwise:function(a){return this.then(null,a)},addResolvingPromise:function(a){a&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(a),f(this))}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(a,h,m){var n=a.some;return function(a){var k,f;a instanceof Array?f=a:a&&"object"===typeof a&&(k=a);var e,d=[];if(k){f=[];for(var c in k)Object.hasOwnProperty.call(k,c)&&(d.push(c),f.push(k[c]));e={}}else f&&(e=[]);if(!f||!f.length)return(new h).resolve(e);
var b=new h;b.promise.always(function(){e=d=null});var p=f.length;n(f,function(a,c){k||d.push(c);m(a,function(a){b.isFulfilled()||(e[d[c]]=a,0===--p&&b.resolve(e))},b.reject);return b.isFulfilled()});return b.promise}})},"esri/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,h,m){function n(a,k){if(Array.isArray(k)){var f=new m;a(k,function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];f.resolve(a)});return f.promise}return n(a,[k]).then(function(a){return a[0]})}
h.when=n})},"esri/geometry/Extent":function(){define("../core/declare dojo/_base/array dojo/_base/lang dojo/_base/kernel ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils".split(" "),function(a,h,m,n,g,k,f,e,d,c){var b=a(f,{declaredClass:"esri.geometry.Extent",classMetadata:{properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{dependsOn:["cache"]},extent:{dependsOn:["cache"]},hasM:{dependsOn:["mmin","mmax"]},hasZ:{dependsOn:["zmin",
"zmax"]},height:{dependsOn:["ymin","ymax"]},width:{dependsOn:["xmin","xmax"]}}},normalizeCtorArgs:function(a,b,c,d,e){return this.isSR(a)?{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}:m.isObject(a)?(a.spatialReference=a.spatialReference||k.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:e||k.WGS84}},_centerGetter:function(a){a||(a=new e({spatialReference:this.spatialReference}));a.x=0.5*(this.xmin+this.xmax);a.y=0.5*(this.ymin+this.ymax);this.hasZ&&(a.z=0.5*(this.zmin+this.zmax));this.hasM&&
(a.m=0.5*(this.mmin+this.mmax));return a},_extentGetter:function(){return this.clone()},_hasMGetter:function(){return null!=this.mmin&&null!=this.mmax},_hasZGetter:function(){return null!=this.zmin&&null!=this.zmax},_heightGetter:function(){return Math.abs(this.ymax-this.ymin)},type:"extent",_widthGetter:function(){return Math.abs(this.xmax-this.xmin)},xmin:0,ymin:0,mmin:void 0,zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0,centerAt:function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-
b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)},clone:function(){var a=new b;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var c=this.spatialReference,d=a.spatialReference,b=a.x,f=a.y;a=a.z;c&&(d&&!c.equals(d)&&c._canProject(d))&&(c=c.isWebMercator?e.lngLatToXY(b,
f):e.xyToLngLat(b,f,!0),b=c[0],f=c[1]);if(b>=this.xmin&&b<=this.xmax&&f>=this.ymin&&f<=this.ymax)return null!=a&&this.hasZ?a>=this.zmin&&a<=this.zmax:!0}else if("extent"===b)return this._containsExtent(a);return!1},equals:function(a){if(!a)return!1;var b=this.spatialReference;if(!b.equals(a.spatialReference))if(d.canProject(a.spatialReference,b))a=d.project(a,b);else return!1;return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&
this.zmax===a.zmax&&this.mmax===a.mmax},expand:function(a){a=0.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this},intersects:function(a){if(!a)return!1;var b=a.type,c=this.spatialReference,e=a.spatialReference;c&&(e&&!c.equals(e)&&c._canProject(e))&&(a=c.isWebMercator?d.geographicToWebMercator(a):d.webMercatorToGeographic(a,
!0));switch(b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);Array.isArray(a)||(a=[a]);return a},offset:function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this},shiftCentralMeridian:function(){return this._normalize(!0)},
toJSON:function(){var a=this.spatialReference,a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:a&&a.toJSON()};this.hasZ&&(a.zmin=this.zmin,a.zmax=this.zmax);this.hasM&&(a.mmax=this.mmax,a.mmin=this.mmin);return a},union:function(a){function b(a,c,d){return null==c?d:null==d?c:a(c,d)}this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=b(Math.min,
this.zmin,a.zmin),this.zmax=b(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=b(Math.min,this.mmin,a.mmin),this.mmax=b(Math.max,this.mmax,a.mmax);return this},_containsExtent:function(a){var b=a.xmin,c=a.ymin,d=a.zmin,f=a.xmax,g=a.ymax,k=a.zmax;a=a.spatialReference;return null!=d&&this.hasZ?this.contains(new e(b,c,d,a))&&this.contains(new e(b,g,d,a))&&this.contains(new e(f,g,d,a))&&this.contains(new e(f,c,d,a))&&this.contains(new e(b,c,k,a))&&this.contains(new e(b,g,k,a))&&this.contains(new e(f,
g,k,a))&&this.contains(new e(f,c,k,a)):this.contains(new e(b,c,a))&&this.contains(new e(b,g,a))&&this.contains(new e(f,g,a))&&this.contains(new e(f,c,a))},_intersectsMultipoint:function(a){var b=a.points.length,c;for(c=0;c<b;c++)if(this.contains(a.getPoint(c)))return!0;return!1},_intersectsExtent:function(a){var b,c;c=this.hasZ&&a.hasZ;if(this.xmin<=a.xmin){if(b=a.xmin,this.xmax<b)return!1}else if(b=this.xmin,a.xmax<b)return!1;if(this.ymin<=a.ymin){if(b=a.ymin,this.ymax<b)return!1}else if(b=this.ymin,
a.ymax<b)return!1;if(c)if(this.zmin<=a.zmin){if(c=a.zmin,this.zmax<c)return!1}else if(c=this.zmin,a.zmax<c)return!1;return!0},_intersectsPolygon:function(a){var b=[this.xmin,this.ymax],c=[this.xmax,this.ymax],d=[this.xmin,this.ymin],f=[this.xmax,this.ymin],g=[b,c,d,f],b=[[d,b],[b,c],[c,f],[f,d]],d=a.rings,f=d.length,k,m=new e(0,0,this.spatialReference);k=g.length;for(c=0;c<k;c++)if(m.x=g[c][0],m.y=g[c][1],a.contains(m))return!0;for(var m={x:0,y:0,spatialReference:a.spatialReference,type:"point"},
l,w,c=0;c<f;c++)if(g=d[c],k=g.length){l=g[0];m.x=l[0];m.y=l[1];if(this.contains(m))return!0;for(a=1;a<k;a++){w=g[a];m.x=w[0];m.y=w[1];if(this.contains(m)||this._intersectsLine([l,w],b))return!0;l=w}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],c,d=a.paths,e=d.length,f,g,k,l,w={x:0,y:0,spatialReference:a.spatialReference,
type:"point"};for(a=0;a<e;a++)if(f=d[a],g=f.length){k=f[0];w.x=k[0];w.y=k[1];if(this.contains(w))return!0;for(c=1;c<g;c++){l=f[c];w.x=l[0];w.y=l[1];if(this.contains(w)||this._intersectsLine([k,l],b))return!0;k=l}}return!1},_intersectsLine:function(a,b){var d=c._getLineIntersection2,e,f=b.length;for(e=0;e<f;e++)if(d(a,b[e]))return!0;return!1},_shiftCM:function(a){var b=this.spatialReference;if(a=a||b._getInfo()){var c=this._getCM(a);if(c){var e=b.isWebMercator?d.webMercatorToGeographic(c):c;this.xmin-=
c.x;this.xmax-=c.x;b.isWebMercator||(e.x=this._normalizeX(e.x,a).x);this.spatialReference=new k(g.substitute({Central_Meridian:e.x},4326===b.wkid?a.altTemplate:a.wkTemplate))}}return this},_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var d=this.xmin,e=this.xmax;if(!(d>=c&&d<=a)||!(e>=c&&e<=a))b=this.center;return b},_normalize:function(a,b,c){var d=this.spatialReference;if(d&&(c=c||d._getInfo())){var e=h.map(this._getParts(c),function(a){return a.extent});if(2<e.length)return a?this._shiftCM(c):
this.set({xmin:c.valid[0],xmax:c.valid[1]});if(2===e.length){if(a)return this._shiftCM(c);if(b)return e;var f=!0,g=!0;h.map(e,function(a){a.hasZ||(f=!1);a.hasM||(g=!1)});return{rings:h.map(e,function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(f)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);if(g){a=(a.mmax-a.mmin)/2;for(d=0;d<b.length;d++)b[d].push(a)}return b}),hasZ:f,hasM:g,spatialReference:d}}return e[0]||this}return this},_getParts:function(a){var c=
this.cache._parts;if(!c){var c=[],d=this.xmin,e=this.xmax,f=this.ymin,g=this.ymax,k=this.spatialReference,m=this.width,l=d,w=e,h=0,n=0,C,E;a=a||k._getInfo();C=a.valid[0];E=a.valid[1];n=this._normalizeX(d,a);d=n.x;h=n.frameId;n=this._normalizeX(e,a);e=n.x;n=n.frameId;a=d===e&&0<m;if(m>2*E){m=new b(l<w?d:e,f,E,g,k);d=new b(C,f,l<w?e:d,g,k);E=new b(0,f,E,g,k);f=new b(C,f,0,g,k);k=[];C=[];m.contains(E)&&k.push(h);m.contains(f)&&C.push(h);d.contains(E)&&k.push(n);d.contains(f)&&C.push(n);for(g=h+1;g<n;g++)k.push(g),
C.push(g);c.push({extent:m,frameIds:[h]},{extent:d,frameIds:[n]},{extent:E,frameIds:k},{extent:f,frameIds:C})}else d>e||a?c.push({extent:new b(d,f,E,g,k),frameIds:[h]},{extent:new b(C,f,e,g,k),frameIds:[n]}):c.push({extent:new b(d,f,e,g,k),frameIds:[h]});this.cache._parts=c}n=this.hasZ;f=this.hasM;if(n||f){h={};n&&(h.zmin=this.zmin,h.zmax=this.zmax);f&&(h.mmin=this.mmin,h.mmax=this.mmax);for(n=0;n<c.length;n++)c[n].extent.set(h)}return c},_normalizeX:function(a,b){var c=0,d=b.valid[0],e=b.valid[1],
f=2*e;a>e?(c=Math.ceil(Math.abs(a-e)/f),a-=c*f):a<d&&(c=Math.ceil(Math.abs(a-d)/f),a+=c*f,c=-c);return{x:a,frameId:c}},getWidth:function(){n.deprecated(this.declaredClass+".getWidth","Use .width instead","4.0");return this.width},getHeight:function(){n.deprecated(this.declaredClass+".getHeight","Use .height instead","4.0");return this.height},getCenter:function(){n.deprecated(this.declaredClass+".getCenter","Use .center instead","4.0");return this.center},update:function(a,b,c,d,e){n.deprecated(this.declaredClass+
".update","Use .set instead","4.0");this.set({xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:e})}});return b})},"esri/geometry/Geometry":function(){define(["dojo/_base/kernel","../core/JSONSupporter","./SpatialReference"],function(a,h,m){return h.createSubclass({declaredClass:"esri.geometry.Geometry",classMetadata:{properties:{cache:{readOnly:!0,dependsOn:["spatialReference"]},extent:{readOnly:!0,dependsOn:["spatialReference"],copy:function(a,g){a.xmin=g.xmin;a.ymin=g.ymin;a.xmax=g.xmax;a.ymax=g.ymax;
a.spatialReference=g.spatialReference;g.hasM&&(a.mmin=g.mmin,a.mmax=g.mmax);g.hasZ&&(a.zmin=g.zmin,a.zmax=g.zmax)}},spatialReference:{type:m}}},cache:null,_cacheGetter:function(){return{}},extent:null,hasM:!1,hasZ:!1,spatialReference:m.WGS84,_spatialReferenceReader:m.fromJSON,type:null,isSR:function(a){return a&&("esri.SpatialReference"===a.declaredClass||null!=a.wkid)},clone:function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null},toJSON:function(){console.warn(".toJSON() is not implemented for "+
this.declaredClass);return null},clearCache:function(){this.notifyChange("cache")},getCacheValue:function(a){return this.cache[a]},setCacheValue:function(a,g){this.cache[a]=g},getExtent:function(){a.deprecated(this.declaredClass+".getExtent","Use .extent instead","4.0");return this.extent},setSpatialReference:function(m){a.deprecated(this.declaredClass+".setSpatialReference","Use .spatialReference \x3d sr; instead","4.0");this.spatialReference=m}})})},"esri/geometry/Point":function(){define(["../core/declare",
"dojo/_base/lang","dojo/_base/kernel","./SpatialReference","./Geometry"],function(a,h,m,n,g){function k(a,c,d,f){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=b;f||(f=[0,0]);f[0]=a*b*e;f[1]=e/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return f}function f(a,b,f,p){a=a/e*c;p||(p=[0,0]);p[0]=f?a:a-360*Math.floor((a+180)/360);f=p;b=d/2-2*Math.atan(Math.exp(-1*b/e));f[1]=b*c;return p}var e=6378137,d=3.141592653589793,c=57.29577951308232,b=0.017453292519943,p=[0,0],q=a(g,{declaredClass:"esri.geometry.Point",
classMetadata:{properties:{cache:{dependsOn:["x","y","z","m"]},hasM:{dependsOn:["m"]},hasZ:{dependsOn:["z"]},longitude:{dependsOn:["x"]},latitude:{dependsOn:["y"]}}},normalizeCtorArgs:function(a,b,c,d,e){var f;Array.isArray(a)?(f=a,e=b,a=f[0],b=f[1],c=f[2],d=f[3]):h.isObject(a)?(f=a,a=null!=f.x?f.x:f.longitude,b=null!=f.y?f.y:f.latitude,c=null!=f.z?f.z:f.altitude,d=f.m,(e=f.spatialReference)&&"esri.SpatialReference"!==e.declaredClass&&(e=new n(e)),!f.declaredClass&&(e&&e.isWebMercator&&null!=f.longitude&&
null!=f.latitude)&&(b=k(f.longitude,f.latitude,!1,p),a=b[0],b=b[1])):this.isSR(c)?(e=c,c=null):this.isSR(d)&&(e=d,d=null);a={x:a,y:b};null!=e&&(a.spatialReference=e);null!=c&&(a.z=c);null!=d&&(a.m=d);return a},_latitudeGetter:function(){var a=this.spatialReference;if(a){if(a.isWebMercator)return f(this.x,this.y,!1,p)[1];if(4326===a.wkid)return this.y}return null},_latitudeSetter:function(a){var b=this.spatialReference;b&&(b.isWebMercator?this.y=k(this.x,a,!1,p)[1]:4326===b.wkid&&(this.y=a))},_longitudeGetter:function(){var a=
this.spatialReference;if(a){if(a.isWebMercator)return f(this.x,this.y,!1,p)[0];if(4326===a.wkid)return this.x}return null},_longitudeSetter:function(a){var b=this.spatialReference;b&&(b.isWebMercator?this.x=k(a,this.y,!1,p)[0]:4326===b.wkid&&(this.x=a))},_hasMGetter:function(){return void 0!==this.m},_hasMSetter:function(a,b){return a!==b?(this.m=a?0:void 0,a):b},_hasZGetter:function(){return void 0!==this.z},_hasZSetter:function(a,b){return a!==b?(this.z=a?0:void 0,a):b},x:0,y:0,z:void 0,m:void 0,
type:"point",clone:function(){var a=new q;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a},copy:function(a){q.copy(a,this);return this},equals:function(a){if(!a)return!1;var b=this.x,c=this.y,d=this.z,e=this.m,p=this.spatialReference,l=a.x,g=a.y,m=a.z,h=a.m;a=a.spatialReference;if(!p.equals(a))if(p.isWebMercator&&4326===a.wkid)g=k(l,g),l=g[0],g=g[1],a=p;else if(4326===p.wkid&&a.isWebMercator)g=f(l,g),l=g[0],g=g[1],a=p;else return!1;return b===l&&c===g&&
d===m&&e===h&&p.wkid===a.wkid},offset:function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=b._getInfo();if(c){var b=c.valid[0],d=c.valid[1],c=2*d;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c)}}this.x=a;return this},distance:function(a){return q.distance(this,a)},toArray:function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,
this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,b={x:this.x,y:this.y};this.hasZ&&(b.z=this.z);this.hasM&&(b.m=this.m);b.spatialReference=a&&a.toJSON();return b},setX:function(a){m.deprecated(this.declaredClass+".setX","Use .x \x3d value instead","4.0");this.x=a;return this},setY:function(a){m.deprecated(this.declaredClass+".setY","Use .y \x3d value instead","4.0");this.y=a;return this},setLongitude:function(a){m.deprecated(this.declaredClass+".setLongitude",
"Use .longitude \x3d value; instead","4.0");this.longitude=a;return this},setLatitude:function(a){m.deprecated(this.declaredClass+".setLatitude","Use .latitude \x3d value; instead","4.0");this.latitude=a;return this},getLongitude:function(){m.deprecated(this.declaredClass+".getLongitude","Use .longitude instead","4.0");return this.longitude},getLatitude:function(){m.deprecated(this.declaredClass+".getLatitude","Use .latitude instead","4.0");return this.latitude},update:function(a,b,c){m.deprecated(this.declaredClass+
".update","Use .x/y/z \x3d value instead","4.0");a={x:a,y:b};null!=c&&(a.z=c);return this.set(a)}});q.lngLatToXY=k;q.xyToLngLat=f;q.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};q.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+d*d+e*e)};return q})},"esri/geometry/support/webMercatorUtils":function(){define(["dojo/_base/array","../SpatialReference",
"../Point"],function(a,h,m){function n(e,d,c,b,p){if("point"===e.type){var g=d(e.x,e.y,b,k);return p?(p.x=g[0],p.y=g[1],p.spatialReference=c,p):new e.constructor(g[0],g[1],c)}if("extent"===e.type){var g=d(e.xmin,e.ymin,b,k),m=d(e.xmax,e.ymax,b,f);return p?(p.xmin=g[0],p.ymin=g[1],p.xmax=m[0],p.ymax=m[1],p.spatialReference=c,p):new e.constructor(g[0],g[1],m[0],m[1],c)}if("polyline"===e.type||"polygon"===e.type){var g="polyline"===e.type,h=[],n;a.forEach(g?e.paths:e.rings,function(c){h.push(n=[]);a.forEach(c,
function(a){n.push(d(a[0],a[1],b))})});return g?p?(p.paths=h,p.spatialReference=c,p):new e.constructor({paths:h,spatialReference:c}):p?(p.rings=h,p.spatialReference=c,p):new e.constructor({rings:h,spatialReference:c})}if("multipoint"===e.type){var s=[];a.forEach(e.points,function(a){s.push(d(a[0],a[1],b))});return p?(p.points=s,p.spatialReference=c,p):new e.constructor({points:s,spatialReference:c})}}function g(a,d){var c=a&&(null!=a.wkid?a:a.spatialReference),b=d&&(null!=d.wkid?d:d.spatialReference);
return!c||!b?!1:b.equals(c)?!0:b._canProject(c)}var k=[0,0],f=[0,0];return{canProject:g,project:function(a,d){var c=a&&a.spatialReference,b=d&&(null!=d.wkid?d:d.spatialReference);c&&b?c.equals(b)?a=a.clone():g(c,b)?b.isWebMercator?a=n(a,m.lngLatToXY,h.WebMercator):4326===b.wkid&&(a=n(a,m.xyToLngLat,h.WGS84)):a=null:a=null;return a},lngLatToXY:m.lngLatToXY,xyToLngLat:m.xyToLngLat,geographicToWebMercator:function(a,d,c){return c?n(a,m.lngLatToXY,h.WebMercator,d,c):n(a,m.lngLatToXY,h.WebMercator,d)},
webMercatorToGeographic:function(a,d,c){return c?n(a,m.xyToLngLat,h.WGS84,d,c):n(a,m.xyToLngLat,h.WGS84,d)}}})},"esri/geometry/support/mathUtils":function(){define(["../Point"],function(a){function h(g,f){var e,d,c;g instanceof a?(e=f.x-g.x,d=f.y-g.y,c=0,null!=g.z&&null!=f.z&&(c=g.z-f.z)):(e=f[0]-g[0],d=f[1]-g[1],c=0,null!=g[2]&&null!=f[2]&&(c=g[2]-f[2]));return Math.sqrt(e*e+d*d+c*c)}function m(g,f,e){var d,c,b;if(g instanceof a)return d=g.x+e*(f.x-g.x),c=g.y+e*(f.y-g.y),null!=g.z&&null!=f.z&&(b=
g.z+e*(f.z-g.z)),new a(d,c,b);d=g[0]+e*(f[0]-g[0]);c=g[1]+e*(f[1]-g[1]);return 2<g.length&&2<f.length?[d,c,g[2]+e*(f[2]-g[2])]:[d,c]}function n(a,f){return 1E-8>Math.abs(a-f)}function g(a,f,e,d){var c,b=n(a[0],f[0])?1E10:(a[1]-f[1])/(a[0]-f[0]),p=n(e[0],d[0])?1E10:(e[1]-d[1])/(e[0]-d[0]),g=a[1]-b*a[0],m=e[1]-p*e[0];if(n(b,p)){if(n(g,m)){if(n(a[0],f[0]))if(Math.min(a[1],f[1])<Math.max(e[1],d[1])||Math.max(a[1],f[1])>Math.min(e[1],d[1]))a=(a[1]+f[1]+e[1]+d[1]-Math.min(a[1],f[1],e[1],d[1])-Math.max(a[1],
f[1],e[1],d[1]))/2,c=(a-g)/b;else return null;else if(Math.min(a[0],f[0])<Math.max(e[0],d[0])||Math.max(a[0],f[0])>Math.min(e[0],d[0]))c=(a[0]+f[0]+e[0]+d[0]-Math.min(a[0],f[0],e[0],d[0])-Math.max(a[0],f[0],e[0],d[0]))/2,a=b*c+g;else return null;return[c,a]}return null}n(b,1E10)?(c=a[0],a=p*c+m):n(p,1E10)?(c=e[0],a=b*c+g):(c=-(g-m)/(b-p),a=a[1]===f[1]?a[1]:e[1]===d[1]?e[1]:b*c+g);return[c,a]}return{getLength:h,_getLength:function(a,f){var e=f[0]-a[0],d=f[1]-a[1];return Math.sqrt(e*e+d*d)},getPointOnLine:m,
getMidpoint:function(a,f){return m(a,f,0.5)},_equals:n,_getLineIntersection:g,getLineIntersection:function(k,f,e,d,c){(k=g([k.x,k.y],[f.x,f.y],[e.x,e.y],[d.x,d.y]))&&(k=new a(k[0],k[1],c));return k},_getLineIntersection2:function(a,f){var e=a[0],d=a[1],c=f[0],b=f[1],p=e[0],e=e[1],g=d[0],d=d[1],m=c[0],h=c[1],c=b[0]-m,m=p-m,n=g-p,b=b[1]-h,h=e-h,s=d-e,x=b*n-c*s;if(0===x)return!1;c=(c*h-b*m)/x;m=(n*h-s*m)/x;return 0<=c&&1>=c&&0<=m&&1>=m?[p+c*(g-p),e+c*(d-e)]:!1},_pointLineDistance:function(a,f){var e=
f[0],d=f[1],c=e[0],b=e[1],e=a[0],p=a[1],g=d[0]-c,m=d[1]-b,h=e-c,n=p-b,d=Math.sqrt,s=Math.pow,x=d(s(g,2)+s(m,2)),h=(h*g+n*m)/(x*x),b=b+h*m;return d(s(e-(c+h*g),2)+s(p-b,2))},getPathLength:function(a){for(var f=0,e=a.length,d=0;d<e-1;++d)f+=h(a[d],a[d+1]);return f},getPointOnPath:function(a,f){if(0>=f)return a[0];for(var e=0,d=a.length,c=0;c<d-1;++c){var b=h(a[c],a[c+1]);if(f-e<b)return m(a[c],a[c+1],(f-e)/b);e+=b}return a[d-1]}}})},"esri/layers/support/TileInfo":function(){define("../../core/jsonDictionary ../../core/JSONSupporter ../../core/lang ../../geometry/SpatialReference ../../geometry/Point ./LOD dojo/_base/lang".split(" "),
function(a,h,m,n,g,k,f){var e=a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"}),d=h.createSubclass({declaredClass:"esri.layers.support.TileInfo",classMetadata:{properties:{origin:{dependsOn:["spatialReference"]},spatialReference:{type:n}}},lods:null,_lodsReader:function(a){return a.map(function(a){return k.fromJSON(a)})},_lodsSetter:function(a){var b=
0,d=0,e=[];a&&(b=-Infinity,d=Infinity,a.forEach(function(a){e.push(a.scale);b=a.scale>b?a.scale:b;d=a.scale<d?a.scale:d},this));this.scales=e;this.minScale=b;this.maxScale=d;return a},origin:null,_originReader:function(a,b){return g.fromJSON(f.mixin({spatialReference:b.spatialReference},a))},spatialReference:null,_spatialReferenceReader:function(a,b){return a&&new n(a)},_spatialReferenceSetter:function(a){return a?a.clone():null},format:null,_formatReader:e.fromJSON,zoomToScale:function(a){var b=
this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var d=Math.round(a-0.5),e=Math.round(a);return b[e]+(e-a)*(b[d]-b[e])},scaleToZoom:function(a){var b=this.scales,d=0,e=b.length-1,f,g;for(d;d<e;d++){f=b[d];g=b[d+1];if(f<=a)break;if(g===a)return d+1;if(f>a&&g<a)return d+1-(a-g)/(f-g)}return d},snapScale:function(a,b){null==b&&(b=0.95);var d=this.scaleToZoom(a);return d%Math.floor(d)>=b?this.zoomToScale(Math.ceil(d)):this.zoomToScale(Math.floor(d))},clone:function(){return d.fromJSON(this.toJSON())},
toJSON:function(){return m.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:e.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})}});return d})},"esri/core/jsonDictionary":function(){define(function(){return function(a){var h={},m;for(m in a)h[a[m]]=m;return{toJSON:function(a){return h.hasOwnProperty(a)?
h[a]:a},fromJSON:function(m){return a.hasOwnProperty(m)?a[m]:m}}}})},"esri/layers/support/LOD":function(){define(["../../core/lang","../../core/JSONSupporter"],function(a,h){var m=h.createSubclass({declaredClass:"esri.layers.support.LOD",level:null,resolution:null,scale:null,clone:function(){return new m({level:this.level,resolution:this.resolution,scale:this.scale})},toJSON:function(){return a.fixJson({level:this.level,resolution:this.resolution,scale:this.scale})}});return m})},"esri/layers/mixins/ArcGISMapService":function(){define(["./ArcGISService",
"../../geometry/SpatialReference","../../geometry/Extent"],function(a,h,m){return a.createSubclass({properties:{copyright:{value:null,json:{readFrom:["copyrightText"],read:function(a,g){return g.copyrightText}}},fullExtent:m,legendEnabled:{json:{readFrom:["showLegend"],read:function(a,g){return g.showLegend}}},popupEnabled:{json:{readFrom:["disablePopup"],read:function(a,g){return!g.disablePopup}}},spatialReference:h,version:{value:null,json:{readFrom:["currentVersion","capabilities","tables","supportedImageFormatTypes"],
read:function(a,g){(a=g.currentVersion)||(a=g.hasOwnProperty("capabilities")||g.hasOwnProperty("tables")?10:g.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return a}}}}})})},"esri/layers/mixins/ArcGISService":function(){define(["../../core/MultiOriginJSONSupport","../support/arcgisLayerURL"],function(a,h){return a.createSubclass({declaredClass:"esri.layers.mixins.ArcGISService",properties:{title:{get:function(){var a=h.parse(this.url);if(a&&a.title)return a.title}}}})})},"esri/core/MultiOriginJSONSupport":function(){define(["./Accessor",
"./accessorSupport/MultiOriginStore","./accessorSupport/read","./accessorSupport/utils"],function(a,h,m,n){h=h.default;return a.createSubclass({declaredClass:"esri.core.MultiOriginJSONSupport",constructor:function(){n.getProperties(this).store=new h},read:m.read})})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(a,h,m){a=function(){function a(){this._propertyOriginMap={};this._originStores=Array(m.default.NUM);this._values={}}a.prototype.get=
function(a,k){var f=void 0===k?this._values:this._originStores[k];return f?f[a]:void 0};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,k,f){void 0===f&&(f=m.default.USER);var e=this._originStores[f];e||(e={},this._originStores[f]=e);e[a]=k;return!(a in this._values)||this._propertyOriginMap[a]<=f?(e=this._values[a],this._values[a]=k,this._propertyOriginMap[a]=f,e!==k):!1};a.prototype.clear=function(a,k){void 0===k&&(k=m.default.USER);var f=this._originStores[k];
if(f){var e=f[a];delete f[a];if(a in this._values&&this._propertyOriginMap[a]===k){delete this._values[a];for(f=k-1;0<=f;f--){var d=this._originStores[f];if(d&&a in d){this._values[a]=d[a];this._propertyOriginMap[a]=f;break}}}return e}};a.prototype.has=function(a,k){var f=void 0===k?this._values:this._originStores[k];return f?a in f:!1};a.prototype.revert=function(a,k){return this.set(a,this.get(a,k))};a.prototype.revertAll=function(a){var k=this.getAll(a),f=[],e;for(e in k)this.revert(e,a)&&f.push(e);
return f};a.prototype.getOrigin=function(a){return this._propertyOriginMap[a]};a.prototype.getValueOrigin=function(a){var k=this.getOrigin(a);if(void 0!==k){var f=this.get(a,k),e=k;for(k--;0<=k;){if(this.has(a,k)){if(this.get(a,k)!==f)break;e=k}k--}return e}};a.prototype.getAll=function(a){return this._originStores[a]};a.prototype.persist=function(a){var k={},f;for(f in this._values)this.getValueOrigin(f)>=a&&(k[f]=this._values[f]);return k};return a}();Object.defineProperty(h,"__esModule",{value:!0});
h.default=a})},"esri/core/accessorSupport/read":function(){define(["require","exports","./PropertyOrigin","./utils","./get"],function(a,h,m,n,g){function k(a,e){void 0===e&&(e=m.default.SERVICE);for(var d=n.getProperties(this),c=d.metadatas,b={},p=0,k=Object.getOwnPropertyNames(a);p<k.length;p++){var h=b,t=c,r=k[p],s=a;t[r]&&(!(t[r].json&&!0===t[r].json.ignore)&&(!t[r]||!(t[r].json&&null!=t[r].json.readFrom)))&&(h[r]=!0);for(var x=0,v=Object.getOwnPropertyNames(t);x<v.length;x++){var l=v[x],w;a:{var B=
t[l];w=r;var y=s;if(B=B&&B.json&&B.json.readFrom)for(var C=0;C<B.length;C++){var E=B[C];if(E===w||-1<E.indexOf(".")&&0===E.indexOf(w)&&g.exists(E,y)){w=!0;break a}}w=!1}w&&(h[l]=!0)}}d.setDefaultOrigin(e);p=0;for(b=Object.getOwnPropertyNames(b);p<b.length;p++)k=b[p],h=(h=(h=c[k])&&h.json&&h.json.read)?h.call(this,a[k],a):a[k],d.set(k,h);d.setDefaultOrigin(m.default.USER);return this}h.read=k;Object.defineProperty(h,"__esModule",{value:!0});h.default=k})},"esri/layers/support/arcgisLayerURL":function(){define(["require",
"exports","../../core/urlUtils"],function(a,h,m){function n(a){a=a.replace(/\s*[/_]+\s*/g," ");return a[0].toUpperCase()+a.slice(1)}h.serverTypes=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer"];h.match=RegExp("^(https?:\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+h.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");h.parse=function(a){a=m.urlToObject(a).path.match(h.match);if(!a)return null;var k=a[1],f=a[3],e=a[4];return{title:n(a[2]),serverType:f,sublayer:null!=e&&
""!==e?parseInt(e,10):null,url:{path:k}}};h.cleanTitle=n})},"esri/layers/mixins/ArcGISCachedService":function(){define("dojo/_base/lang dojo/io-query ./ArcGISService ../../core/urlUtils ../support/TileInfo ../support/TileMap".split(" "),function(a,h,m,n,g,k){return m.createSubclass({declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{value:0,json:{ignore:!0}},maxScale:{value:0,json:{ignore:!0}},resampling:!0,supportsBlankTile:{value:!1,readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=
this.version}},tileInfo:{value:null,type:g,json:{read:function(a,e){var d=e.minScale?e.minScale:Infinity,c=e.maxScale?e.maxScale:-Infinity;return a?(a.lods=a.lods.filter(function(a){return a.scale<=d&&a.scale>=c}),g.fromJSON(a)):null}}},tileMap:{value:null,json:{readFrom:["capabilities"],read:function(a,e){return e.capabilities&&-1<e.capabilities.indexOf("Tilemap")?new k({layer:this}):null}}},refreshTimestamp:null,version:{}},refresh:function(){this.refreshTimestamp=Date.now();this.inherited(arguments)},
getTileUrl:function(f,e,d){var c=a.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tileMap&&this.resampling&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});f=this.parsedUrl.path+"/tile/"+f+"/"+e+"/"+d;c=h.objectToQuery(c);return n.addProxy(f+(c?"?"+c:""))}})})},"esri/layers/support/TileMap":function(){define("../../core/declare dojo/_base/lang dojo/_base/array dojo/io-query ../../request ../../core/urlUtils ../../core/Accessoire".split(" "),function(a,h,m,n,g,k,f){var e=
function(a,b,d){this.id=[a,b,d].join("/");this.level=a;this.row=b;this.col=d},d=function(a,b,d,e,f){this.id=[a,b,d,e,f].join("/");this.level=a;this.row=b;this.col=d;this.width=e;this.height=f;this.promise=this.location=this.valid=this.dataValue=this.data=null};d.prototype={setData:function(a){var b=a?a.data:null,d=null,e;h.mixin(this,a||{});if(b&&0<b.length)if(e=b.length,1===e)d=b[0];else{d=b[0];for(a=1;a<e;a++)if(b[a]!==d){d=null;break}}null!==d&&(this.data=null,this.dataValue=d);return this},isTileAvailable:function(a,
b){var d=this.location,e=this.data,f=this.dataValue,g;this.valid?null!==f?d=f:(f=d.left,g=d.top,d=(a-g)*d.width+(b-f),d=d<e.length?e[d]:0):d=0;return!!d}};a=a(f,{declaredClass:"esri.layers.support.TileMap",constructor:function(){this._tileMapCache={}},width:8,height:8,getTileMap:function(a,b,e,f,k){var m=null!=a.level?a:new d(a,b,e,f,k);a=g(this._getTileMapUrl(m.level,m.row,m.col,m.width,m.height),{responseType:"json",callbackParamName:"callback",timeout:3E3,failOk:!0}).then(function(a){return m.setData(a.data)});
return m.promise=a},getTile:function(a,b,d,f){var g=this._getResamplingBudget(),k=null;a&&null!=a.level?(k=a,f=b):k=new e(a,b,d);0<g?this._process({tile:k,requestedTile:k,callback:f,resamplingBudget:g}):f.call(this,k,k)},statusOf:function(a,b,d){var f=this._getResamplingBudget();a=new e(a,b,d);if(0===f)return 1;for(;0<=f;){b=this._tileToTileMap(a);if(!this._tileMapCache[b.id])return-1;b=this._tileMapCache[b.id];if(!b.promise.isFulfilled())return-1;if(b.isTileAvailable(a.row,a.col))return 1;a=this._parentTile(a);
if(!a)break;f--}return 0},_process:function(a){var b=this._tileToTileMap(a.tile);this._getTileMap(b).then(function(b){var d=a.tile,e=this._parentTile(d);b.isTileAvailable(d.row,d.col)?a.callback.call(this,d,a.requestedTile):0<a.resamplingBudget&&e?(a.resamplingBudget--,a.tile=e,this._process(a)):a.callback.call(this,a.requestedTile,a.requestedTile)}.bind(this),function(){a.callback.call(this,a.requestedTile,a.requestedTile)}.bind(this))},_getTileMap:function(a){this._tileMapCache[a.id]?(a=this._tileMapCache[a.id],
a=a.promise):(this._tileMapCache[a.id]=a,a=this.getTileMap(a));return a},_parentTile:function(a){var b=this.layer.tileInfo.lods,d,f,g=null;m.some(b,function(b,e){return a.level===b.level?(d=b,f=e,!0):!1});0<f&&(b=b[f-1],g=new e(b.level,Math.floor(a.row*d.resolution/b.resolution+0.01),Math.floor(a.col*d.resolution/b.resolution+0.01)));return g},_tileToTileMap:function(a){return new d(a.level,Math.floor(a.row/this.width)*this.width,Math.floor(a.col/this.height)*this.height,this.width,this.height)},
_getTileMapUrl:function(a,b,d,e,f){var g=this.layer,m=g.tileServers,h=g.parsedUrl,g=g.token,x=h.query;a=[m&&m.length?m[b%m.length]:h.path,"tilemap",a,b,d,e,f].join("/");x&&(a+="?"+n.objectToQuery(x));if(g&&(!x||!x.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+g;return k.addProxy(a)},_getResamplingBudget:function(){var a=this.layer,b=0;a.resampling&&(b=a.tileInfo.lods.length);return b}});a.TileMapData=d;return a})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/declare ../../core/Accessor ../../core/requireUtils ../../portal/PortalItem dojo/when".split(" "),
function(a,h,m,n,g,k,f,e,d){return function(c){function b(){c.apply(this,arguments);this.portalItem=null}m(b,c);b.prototype.loadFromPortal=function(b,c){var e=this;void 0===c&&(c=!0);if(!this.portalItem||!this.portalItem.id)return d(b&&b());var g,k=c&&!this.url;b&&!k&&(g=b());return d(g).then(function(){return f.when(a,"../../"+e.portalLoaderModule).then(function(a){return(new a({instance:e,portalItem:e.portalItem,loadFromService:k?b:null})).load().otherwise(function(a){if(k)throw a;console.error(a)})})})};
n([g.shared("esri.layers.mixins.PortalLayer")],b.prototype,"declaredClass",void 0);n([g.shared(null)],b.prototype,"portalLoaderModule",void 0);n([g.property({type:e})],b.prototype,"portalItem",void 0);return b=n([g.subclass()],b)}(g.declared(k))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,h){return function(a,h){a.__bases__=h.__bases__}})},"esri/core/tsSupport/declare":function(){define(["require","exports","../declare","../lang"],function(a,h,
m,n){function g(a){var e=Object.getOwnPropertyNames(a.prototype),d=["__bases__"],c={},b=a.prototype.properties,g=[];if(b)for(var k in b){var m=b[k];m.json&&m.json.read&&g.push(m.json.read)}e.filter(function(c){return-1!==d.indexOf(c)||b&&b.hasOwnProperty(c)||-1!==g.indexOf(a.prototype[c])?!1:!0}).forEach(function(b){c[b]=a.prototype[b]});return c}function k(a){var e=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(Object.getPrototypeOf(a.prototype).constructor);d.push("__bases__");var c=
{};e.filter(function(a){return-1===d.indexOf(a)}).forEach(function(b){c[b]=a[b]});return c}h.declared=function(a){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];d=function(){return{}};d.__bases__=[a].concat(e);return d};h.shared=function(a){return function(e,d){e[d]=a}};h.property=function(a){void 0===a&&(a={});return function(e,d){var c=e.constructor.prototype,b=Object.getOwnPropertyDescriptor(e,d);if(b&&(b.get||b.set))a=n.clone(a),b.set&&(a.set=b.set),b.get&&(a.get=b.get);c.properties||
(c.properties={});b=c.properties[d];b||(b={},c.properties[d]=b);for(var g in a)c=a[g],Array.isArray(c)?b[g]=(b[g]||[]).concat(c):b[g]=c}};h.read=function(a,e){return function(d,c,b){d=d.constructor.prototype;d.properties||(d.properties={});b=d.properties[a];b||(b={},d.properties[a]=b);b.json||(b.json={});b.json.read=d[c];e&&(b.json.readFrom=(b.json.readFrom||[]).concat(e))}};h.subclass=function(){return function(a){var e=g(a),d=k(a);a=m(a.__bases__,e);for(var c in d)a[c]=d[c];return a}}})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Error ../core/lang ../geometry/Extent ../core/JSONSupporter ../core/LoadableAccessoire ./Portal ../core/promiseUtils".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){return function(a){function d(b){a.call(this);this.url=this.typeKeywords=this.type=this.title=this.thumbnailUrl=this.tags=this.snippet=this.portal=this.ownerFolder=this.name=this.modified=this.itemUrl=this.itemControl=this.isLayer=this.id=this.extent=this.description=this.created=null}m(d,a);d.prototype._isLayerGetter=function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service".split(";").indexOf(this.type)};
d.prototype._itemUrlGetter=function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:null};d.prototype._thumbnailUrlGetter=function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b):null};d.prototype.load=function(){var a=this;this.portal||(this.portal=b.getDefault());var c=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});
this.addResolvingPromise(c);return this};d.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};d.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};d.prototype.update=function(a){var b=this,c=a&&a.data;a={method:"post"};a.query=this.toJSON();for(var d in a.query)null===a.query[d]&&(a.query[d]="");a.query.clearEmptyFields=!0;"string"===typeof c?a.query.text=
c:c&&"function"===typeof c.toJSON&&(a.query.text=JSON.stringify(c));return(d=this.portal&&this.portal.user&&this.portal.user.userContentUrl)?(this.ownerFolder&&(d+="/"+this.ownerFolder),this.portal._request(d+("/items/"+this.id+"/update"),a).then(function(){return b.loaded?b._reload():b.load()})):p.reject(new k("portal:not-signed-in","Not signed in"))};d.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],
[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,ownerFolder:this.ownerFolder,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return f.fixJson(a)};d.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new d({resourceInfo:a})};d.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){a.resourceInfo=
b;a.read(b);return a})};n([g.shared("esri.portal.PortalItem")],d.prototype,"declaredClass",void 0);n([g.property({type:Date})],d.prototype,"created",void 0);n([g.property()],d.prototype,"description",void 0);n([g.property({type:e,reader:function(a){return a&&a.length?new e(a[0][0],a[0][1],a[1][0],a[1][1]):null}})],d.prototype,"extent",void 0);n([g.property()],d.prototype,"id",void 0);n([g.property({dependsOn:["type"],readOnly:!0})],d.prototype,"isLayer",void 0);n([g.property()],d.prototype,"itemControl",
void 0);n([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],d.prototype,"itemUrl",void 0);n([g.property({type:Date})],d.prototype,"modified",void 0);n([g.property()],d.prototype,"name",void 0);n([g.property()],d.prototype,"ownerFolder",void 0);n([g.property({type:b})],d.prototype,"portal",void 0);n([g.property()],d.prototype,"resourceInfo",void 0);n([g.property()],d.prototype,"snippet",void 0);n([g.property()],d.prototype,"tags",void 0);n([g.property()],d.prototype,"thumbnail",void 0);n([g.property({dependsOn:["itemUrl",
"thumbnail","portal.credential.token"],readOnly:!0})],d.prototype,"thumbnailUrl",void 0);n([g.property()],d.prototype,"title",void 0);n([g.property()],d.prototype,"type",void 0);n([g.property()],d.prototype,"typeKeywords",void 0);n([g.property()],d.prototype,"url",void 0);return d=n([g.subclass([c])],d)}(d)})},"esri/core/accessoireSupport/typescript":function(){define(["../declare","../typescript","../JSONSupporter","dojo/_base/lang"],function(a,h,m,n){function g(a,f){if(!a)return f;if(!f)return a;
for(var e in f){var d=a[e],c=f[e];Array.isArray(c)&&Array.isArray(d)?a[e]=d.concat(c):a[e]="object"===typeof c&&"object"===typeof d?g(d,c):c}return a}return{subclass:function(k,f){return function(e){e=h.declareDefinition(e,k);f&&(e.instanceMembers.classMetadata=g(f,e.instanceMembers.classMetadata));var d=e.instanceMembers.classMetadata;if(d&&d.properties)for(var c in d.properties){var b=d.properties[c];b&&(!b.reader&&b.type)&&(b.type===Date?b.reader=function(a){return null!=a?new Date(a):null}:-1!==
b.type._meta.bases.indexOf(m)&&(b.reader=function(a){return function(b){return a.fromJSON(b)}}(b.type)))}return n.mixin(a(e.bases,e.instanceMembers),e.classMembers)}},shared:h.shared,property:function(a){return function(f,e){var d=Object.getPrototypeOf(f),d=d&&d.classMetadata;if(!f.classMetadata||f.classMetadata===d)f.classMetadata={};f.classMetadata.properties=f.classMetadata.properties||{};f.classMetadata.properties[e]=a||{}}}}})},"esri/core/LoadableAccessoire":function(){define(["./AccessoirePromise",
"dojo/aspect","dojo/Deferred","./Error"],function(a,h,m,n){return a.createSubclass({declaredClass:"esri.core.LoadableAccessoire","-chains-":{load:"after"},classMetadata:{properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"]},loadStatus:{},loadError:{}}},constructor:function(){var a=new m;this.addResolvingPromise(a.promise);h.around(this,"load",function(k){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",k.apply(this),a.resolve(),a=null);return this}});this.then(function(a){this.loadStatus=
"loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},loaded:null,_loadedGetter:function(){return"loaded"===this.loadStatus},loadError:null,loadStatus:"not-loaded",load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new n("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/AccessoirePromise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),
function(a,h,m,n,g,k){var f=function(a){if(!a.isFulfilled()){var c=a._promiseProps,d=c.resolvingPromises,e,f;c.allPromise&&c.allPromise.cancel();var g=new n;for(e=d.length-1;0<=e;e--)f=d[e],f.isCanceled&&f.isCanceled()?d.splice(e,1):f.then(null,null,c.resolver.progress);f=null;(c.allPromise=h(d.concat([g.promise]))).then(function(){c.resolver.resolve(a);a=c=g=c.allPromise=c.resolvingPromises=null},function(d){c.allPromise=null;if(!d||"cancel"!==d.dojoType){var e=Array.prototype.slice.call(arguments,
0);c.resolver.reject(e[0]);a=c=g=c.allPromise=c.resolvingPromises=null}});g&&k.schedule(function(){g&&g.resolve()})}},e=g("CancelError",null,function(a){this.target=a}),d=function(a){return a||new e(this.instance)},c=function(a){this.instance=a;this.canceler=d.bind(this);this.resolver=new n;this.initialized=!1;this.resolvingPromises=[]};c.prototype={canceler:null,cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var c=this.resolvingPromises.concat(),d=c.length-1;0<=
d;d--)c[d].cancel(a);this.resolver.cancel(a)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new c(this),enumerable:!1,configurable:!1,writable:!0});var a=m.after(this,"postscript",function(c,d){a.remove();a=null;f(this)},!0)},_promiseProps:null,always:function(a){return this.then(a,a)},then:function(a,c,d){var e=new n(this._promiseProps.canceler);a=e.then(a,c,d);this._promiseProps.resolver.then(e.resolve,e.reject,e.progress);
return a},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){return this.then(null,a)},addResolvingPromise:function(a){a&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(a),f(this))}})})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Error ../config ../identity/IdentityManager ../request ../geometry/Extent ../core/JSONSupporter ../core/LoadableAccessoire ./PortalQueryParams ./PortalQueryResult ./PortalUser ../core/promiseUtils ../core/requireUtils dojo/promise/all dojo/_base/kernel dojo/_base/lang".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l){var w;return function(b){function h(a){b.call(this);this.useStandardizedQuery=this.user=this.urlKey=this.url=this.units=this.thumbnailUrl=this.templatesGroupQuery=this.symbolSetsGroupQuery=this.supportsHostedServices=this.showHomePageDescription=this.rotatorPanels=this.restUrl=this.region=this.portalProperties=this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=this.isPortal=this.isOrganization=
this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.extraQuery=this.description=this.defaultExtent=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=this.commentsEnabled=this.colorSetsGroupQuery=this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=this.canSearchPublic=this.canProvisionDirectPurchase=this.canListPreProvisionedItems=
this.canListData=this.canListApps=this.bingKey=this.authorizedCrossOriginDomains=this.authMode=this.allSSL=this.access=null}m(h,b);h.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};h.prototype.getDefaults=function(a){return l.mixin(this.inherited(arguments),{url:f.portalUrl})};h.prototype.initialize=function(){var a=this;this._esriId_credentialCreateHandle=e.on("credential-create",function(){a.loaded&&(!a.credential&&a.authMode===h.AUTH_MODE_AUTO)&&(a.credential=e.findCredential(a.restUrl),
a.credential&&a._fetchSelf().then(function(b){a.read(b)}))})};h.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};h.prototype._defaultBasemapReader=function(a){return a?w.fromJSON(a):null};h.prototype._extraQueryGetter=function(){return this.id&&!this.canSearchPublic?" AND orgid:"+this.id:null};h.prototype._isOrganizationGetter=function(){return!!this.access};h.prototype._restUrlGetter=function(){var a=
this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a};h.prototype._thumbnailUrlGetter=function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null};h.prototype._userReader=function(a){var b=null;a&&(b=t.fromJSON(a),b.portal=this);return b};h.prototype.load=function(){var b=this,c=r.resolve().then(function(){return b.authMode===h.AUTH_MODE_IMMEDIATE?e.getCredential(b.restUrl):
b.authMode===h.AUTH_MODE_AUTO?e.checkSignInStatus(b.restUrl).otherwise(function(){return null}):null}).then(function(c){b.credential=c;return s.when(a,"../Basemap")}).then(function(a){w=a}).then(function(){return b._fetchSelf()}).then(function(a){b.read(a)});this.addResolvingPromise(c);return this};h.prototype.fetchBasemaps=function(){var a=new q;a.query=this.basemapGalleryGroupQuery;return this.queryGroups(a).then(function(b){a.num=100;a.query=null;return b.total?b.results[0].queryItems(a):null}).then(function(a){return a&&
a.total?a.results.map(function(a){return new w({portalItem:a})}):[]})};h.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new q;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],l=0;l<a.length;l++){var d=a[l];c.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return r.resolve([])};h.getDefault=function(){h._default||(h._default=new h);return h._default};h.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",
a,"PortalGroup")};h.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};h.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser")};h.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};h.prototype._fetchSelf=function(){return this._request(this.restUrl+"/portals/self",{query:{culture:v.locale}})};h.prototype._queryPortal=function(b,
c,l){var d=this,e=function(a){return d._request(d.restUrl+b,c.toRequestOptions(d)).then(function(b){var l=c.clone();l.start=b.nextStart;return new u({nextQueryParams:l,queryParams:c,total:b.total,results:h._resultsToTypedArray(a,{portal:d},b)})}).then(function(a){return x(a.results).always(function(){return a})})};return l?s.when(a,"./"+l).then(function(a){return e(a)}):e()};h.prototype._normalizeSSL=function(a){var b=this.allSSL||window&&"https:"===window.location.protocol;if(this.isPortal){var c=
h._getLocation(a);if(-1<this.portalHostname.toLowerCase().indexOf(c.hostname.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port)return a=c.pathname,0!==a.indexOf("/")&&(a="/"+a),b?"https://"+c.hostname+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+a+c.search:"http://"+c.hostname+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+a+c.search}return b?a.replace("http:","https:"):a};h.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?
a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};h.prototype._requestToTypedArray=function(b,c,l){var d=this,e=function(a){return d._request(b,c).then(function(b){var c=h._resultsToTypedArray(a,{portal:d},b);return x(c).always(function(){return c})})};return l?s.when(a,"./"+l).then(function(a){return e(a)}):e()};h.prototype._request=function(a,b){var c={f:"json"},e={disableIdentityLookup:this.authMode===h.AUTH_MODE_ANONYMOUS},f;b&&(l.mixin(c,b.query),f=b.responseType,e.method=b.method);return d(this._normalizeSSL(a),
l.mixin({callbackParamName:"callback",query:c,responseType:f,timeout:0},e)).then(function(a){return a.data})};h._getLocation=function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}};h._resultsToTypedArray=function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=
l.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};h.AUTH_MODE_ANONYMOUS="anonymous";h.AUTH_MODE_AUTO="auto";h.AUTH_MODE_IMMEDIATE="immediate";n([g.shared("esri.portal.Portal")],h.prototype,"declaredClass",void 0);n([g.property()],h.prototype,"access",void 0);n([g.property()],h.prototype,"allSSL",void 0);n([g.property({value:h.AUTH_MODE_AUTO})],h.prototype,"authMode",void 0);n([g.property()],h.prototype,"authorizedCrossOriginDomains",void 0);n([g.property()],
h.prototype,"basemapGalleryGroupQuery",void 0);n([g.property()],h.prototype,"bingKey",void 0);n([g.property()],h.prototype,"canListApps",void 0);n([g.property()],h.prototype,"canListData",void 0);n([g.property()],h.prototype,"canListPreProvisionedItems",void 0);n([g.property()],h.prototype,"canProvisionDirectPurchase",void 0);n([g.property()],h.prototype,"canSearchPublic",void 0);n([g.property()],h.prototype,"canShareBingPublic",void 0);n([g.property()],h.prototype,"canSharePublic",void 0);n([g.property()],
h.prototype,"canSignInArcGIS",void 0);n([g.property()],h.prototype,"canSignInIDP",void 0);n([g.property()],h.prototype,"colorSetsGroupQuery",void 0);n([g.property()],h.prototype,"commentsEnabled",void 0);n([g.property({type:Date})],h.prototype,"created",void 0);n([g.property()],h.prototype,"credential",void 0);n([g.property()],h.prototype,"culture",void 0);n([g.property()],h.prototype,"customBaseUrl",void 0);n([g.property()],h.prototype,"defaultBasemap",void 0);n([g.property({type:c})],h.prototype,
"defaultExtent",void 0);n([g.property()],h.prototype,"description",void 0);n([g.property({dependsOn:["id","canSearchPublic"],readOnly:!0})],h.prototype,"extraQuery",void 0);n([g.property()],h.prototype,"featuredGroups",void 0);n([g.property()],h.prototype,"featuredItemsGroupQuery",void 0);n([g.property()],h.prototype,"galleryTemplatesGroupQuery",void 0);n([g.property()],h.prototype,"helpBase",void 0);n([g.property()],h.prototype,"helperServices",void 0);n([g.property()],h.prototype,"helpMap",void 0);
n([g.property()],h.prototype,"homePageFeaturedContent",void 0);n([g.property()],h.prototype,"homePageFeaturedContentCount",void 0);n([g.property()],h.prototype,"httpPort",void 0);n([g.property()],h.prototype,"httpsPort",void 0);n([g.property({value:null})],h.prototype,"id",void 0);n([g.property()],h.prototype,"ipCntryCode",void 0);n([g.property({dependsOn:["access"],readOnly:!0})],h.prototype,"isOrganization",void 0);n([g.property()],h.prototype,"isPortal",void 0);n([g.property()],h.prototype,"layerTemplatesGroupQuery",
void 0);n([g.property()],h.prototype,"maxTokenExpirationMinutes",void 0);n([g.property({type:Date})],h.prototype,"modified",void 0);n([g.property()],h.prototype,"name",void 0);n([g.property()],h.prototype,"portalHostname",void 0);n([g.property()],h.prototype,"portalMode",void 0);n([g.property()],h.prototype,"portalProperties",void 0);n([g.property()],h.prototype,"region",void 0);n([g.property({dependsOn:["url"],readOnly:!0})],h.prototype,"restUrl",void 0);n([g.property()],h.prototype,"rotatorPanels",
void 0);n([g.property()],h.prototype,"showHomePageDescription",void 0);n([g.property()],h.prototype,"stylesGroupQuery",void 0);n([g.property()],h.prototype,"supportsHostedServices",void 0);n([g.property()],h.prototype,"symbolSetsGroupQuery",void 0);n([g.property()],h.prototype,"templatesGroupQuery",void 0);n([g.property()],h.prototype,"thumbnail",void 0);n([g.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],h.prototype,"thumbnailUrl",void 0);n([g.property()],h.prototype,"units",void 0);
n([g.property()],h.prototype,"url",void 0);n([g.property()],h.prototype,"urlKey",void 0);n([g.property()],h.prototype,"user",void 0);n([g.property()],h.prototype,"useStandardizedQuery",void 0);return h=n([g.subclass([p])],h)}(b)})},"esri/identity/IdentityManager":function(){define(["./IdentityManagerDialog","../kernel","./OAuthSignInHandler","../core/declare"],function(a,h,m,n){a=new a;h.id=n.safeMixin(a,m);return h.id})},"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/ValidationTextBox".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t){return h([u],{declaredClass:"esri.IdentityManager",constructor:function(a){g.mixin(this,a)},_dialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
signIn:function(a,b,c){this._nls||(this._nls=t);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var d=this._loginDialog,l=c&&c.error,e=c&&c.token,f=new n(function(){d.onCancel()});if(d.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=m.isDebug,f.errback(a),f.promise;p.hide(d.errMsg_);l&&(403==l.code&&e)&&(k.set(d.errMsg_,"innerHTML",this._nls.forbidden),p.show(d.errMsg_));d.dfd_=f;d.serverInfo_=b;d.resUrl_=a;d.admin_=c&&c.isAdmin;
k.set(d.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});k.set(d.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "});d.txtPwd_.set("value","");d.show();return f.promise},_createLoginDialog:function(){var g=this._nls,h=b.substitute(g,this._dialogContent),h=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
h),n=new d({title:g.title,content:h,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===f.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),l=this.txtPwd_.get("value"),e=this.dfd_,f=this;if(a&&l){this.btnSubmit_.set("label",g.lblSigning);var h=c.id.findCredential(f.resUrl_,a),m=function(c){f.btnSubmit_.set("label",g.lblOk);f.btnSubmit_.set("disabled",!1);p.hide(f.errMsg_);f.hide();d._DialogLevelManager.hide(f);var l=f.serverInfo_;
f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var k,m,n=h,s;c&&(k=c.token,m=b.isDefined(c.expires)?Number(c.expires):null,s=!!c.ssl,n?(n.userId=a,n.token=k,n.expires=m,n.validity=c.validity,n.ssl=s,n.creationTime=(new Date).getTime()):n=new q({userId:a,server:l.server,token:k,expires:m,ssl:s,isAdmin:f.admin_,validity:c.validity}));e.callback(n)};h&&!h._enqueued?m():(f.btnSubmit_.set("disabled",!0),f.generateDfd_=c.id.generateToken(this.serverInfo_,{username:a,password:l},{isAdmin:this.admin_}).then(m).then(null,
function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",g.lblOk);k.set(f.errMsg_,"innerHTML",a&&a.code?g.invalidUser:g.noAuthService);p.show(f.errMsg_)}))}},cancel_:function(){n.generateDfd_&&n.generateDfd_.cancel();var a=n.dfd_,b=n.resUrl_,c=n.serverInfo_;n.btnSubmit_.set("disabled",!1);n.dfd_=n.serverInfo_=n.generateDfd_=n.resUrl_=null;p.hide(n.errMsg_);d._DialogLevelManager.hide(n);n.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:c});b=Error("ABORTED");
b.code="IdentityManager.2";b.log=m.isDebug;a.errback(b)}}),h=n.domNode;n.txtUser_=e.byNode(a.query(".esriIdUser",h)[0]);n.txtPwd_=e.byNode(a.query(".esriIdPwd",h)[0]);n.btnSubmit_=e.byNode(a.query(".esriIdSubmit",h)[0]);n.btnCancel_=e.byNode(a.query(".esriIdCancel",h)[0]);n.resLink_=a.query(".resLink",h)[0];n.serverLink_=a.query(".serverLink",h)[0];n.errMsg_=a.query(".esriErrorMsg",h)[0];n.connect(n.txtUser_,"onKeyPress",n.keypressed_);n.connect(n.txtPwd_,"onKeyPress",n.keypressed_);n.connect(n.btnSubmit_,
"onClick",n.execute_);n.connect(n.btnCancel_,"onClick",n.onCancel);n.connect(n,"onCancel",n.cancel_);return n}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,h,m){var n={},g={},k={length:0,add:function(a){if(g[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");g[a.id]=a;this.length++},remove:function(a){g[a]&&(delete g[a],this.length--)},byId:function(a){return"string"==typeof a?g[a]:a},byNode:function(a){return g[a.getAttribute("widgetId")]},
toArray:function(){var a=[],e;for(e in g)a.push(g[e]);return a},getUniqueId:function(a){var e;do e=a+"_"+(a in n?++n[a]:n[a]=0);while(g[e]);return"dijit"==m._scopeName?e:m._scopeName+"_"+e},findWidgets:function(a,e){function d(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var f=a.getAttribute("widgetId");f?(f=g[f])&&c.push(f):a!==e&&d(a)}}var c=[];d(a);return c},_destroyAll:function(){m._curFocus=null;m._prevFocus=null;m._activeStack=[];a.forEach(k.findWidgets(h.body()),function(a){a._destroyed||
(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var e=1==a.nodeType&&a.getAttribute("widgetId");if(e)return g[e];a=a.parentNode}return null},_hash:g};return m.registry=k})},"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w,B,y,C,E,z,L,H,K,$){var R=new g;R.resolve(!0);w=n("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[y,E,z,C],{templateString:$,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,
_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=b.getLocalization("dijit","common");q.mixin(this,a);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);m.after(this,"onExecute",q.hitch(this,"hide"),!0);m.after(this,"onCancel",q.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this.resize();
this._position();this.autofocus&&Q.isTop(this)&&(this._getFocusItems(),l.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();l.focus(this._firstFocusItem)},_endDrag:function(){var a=e.position(this.domNode),b=s.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?v:
x)(a,{handle:this.titleBar}),m.after(this._moveable,"onMoveStop",q.hitch(this,"_endDrag"),!0)):f.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":h.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:q.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!f.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=s.getBox(this.ownerDocument),c=this._relativePosition,l=c?null:
e.position(a);d.set(a,{left:Math.floor(b.l+(c?c.x:(b.w-l.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-l.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==p.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(l.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(l.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&
a.keyCode==p.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return R.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),Q.hide(this));var a=s.get(this.ownerDocument);this._modalconnects.push(u(a,"scroll",q.hitch(this,"resize",null)));this._modalconnects.push(u(this.domNode,"keydown",q.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});
this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new g(q.hitch(this,function(){b.stop();delete this._fadeInDeferred}));a=this._fadeInDeferred.promise;b=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:q.hitch(this,function(){Q.show(this,this.underlayAttrs)}),onEnd:q.hitch(this,function(){this.autofocus&&Q.isTop(this)&&(this._getFocusItems(),l.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();
return a},hide:function(){if(!this._alreadyInitialized||!this.open)return R.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new g(q.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(q.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:q.hitch(this,function(){this.domNode.style.display="none";Q.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();
this._scrollConnected&&(this._scrollConnected=!1);for(var l;l=this._modalconnects.pop();)l.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),h.forEach([this.domNode,this.containerNode,
this.titleBar,this.actionBarNode],function(a){a&&d.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=s.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=e.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){e.setMarginBox(this.domNode,a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,
region:"bottom"});c={domNode:this.containerNode,region:"center"};b.push(c);var l=K.marginBox2contentBox(this.domNode,a);K.layoutChildren(this.domNode,l,b);this._singleChild?(b=K.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!r("touch")&&!a&&this._position()}},_layoutChildren:function(){h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&
this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();Q.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(w=n("dijit._DialogBase",w,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var N=n("dijit.Dialog",
[H,w],{});N._DialogBase=w;var Q=N._DialogLevelManager={_beginZIndex:950,show:function(a,b){F[F.length-1].focus=l.curNode;var c=F[F.length-1].dialog?F[F.length-1].zIndex+2:N._DialogLevelManager._beginZIndex;d.set(a.domNode,"zIndex",c);L.show(b,c-1);F.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(F[F.length-1].dialog==a){F.pop();var b=F[F.length-1];1==F.length?L.hide():L.show(b.underlayAttrs,b.zIndex-1);if(a.refocus){a=b.focus;if(b.dialog&&(!a||!k.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(),
a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(c){}}}else b=h.indexOf(h.map(F,function(a){return a.dialog}),a),-1!=b&&F.splice(b,1)},isTop:function(a){return F[F.length-1].dialog==a}},F=N._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];l.watch("curNode",function(a,b,c){a=F[F.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==a.ownerDocument){do if(c==a.domNode||f.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});r("dijit-legacy-requires")&&t(0,function(){a(["dijit/TooltipDialog"])});
return N})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(a,h,m,n,g,k,f,e,d){var c=m.mixin,b={},p=b._Line=function(a,b){this.start=a;this.end=b};p.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var q=b.Animation=function(a){c(this,a);m.isArray(this.curve)&&(this.curve=new p(this.curve[0],this.curve[1]))};q.prototype=new n;m.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,
_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(h.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||
this.delay,d=m.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},
status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,
this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var u=0,t=null,r={run:function(){}};m.extend(q,{_startTimer:function(){this._timer||(this._timer=k.after(r,"run",m.hitch(this,"_cycle"),!0),u++);t||(t=setInterval(m.hitch(r,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,u--);0>=u&&(clearInterval(t),t=null,
u=0)}});var s=f("ie")?function(a){var b=a.style;!b.width.length&&"auto"==d.get(a,"width")&&(b.width="auto")}:function(){};b._fade=function(a){a.node=e.byId(a.node);var l=c({properties:{}},a);a=l.properties.opacity={};a.start=!("start"in l)?function(){return+d.get(l.node,"opacity")||0}:l.start;a.end=l.end;a=b.animateProperty(l);k.after(a,"beforeBegin",m.partial(s,l.node),!0);return a};b.fadeIn=function(a){return b._fade(c({end:1},a))};b.fadeOut=function(a){return b._fade(c({end:0},a))};b._defaultEasing=
function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var x=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof g&&(c.tempColor=new g)}};x.prototype.getValue=function(a){var b={},c;for(c in this._properties){var d=this._properties[c],e=d.start;e instanceof g?b[c]=g.blendColors(e,d.end,a,d.tempColor).toCss():m.isArray(e)||(b[c]=(d.end-e)*a+e+("opacity"!=c?d.units||"px":0))}return b};b.animateProperty=function(b){var l=b.node=e.byId(b.node);b.easing||(b.easing=a._defaultEasing);
b=new q(b);k.after(b,"beforeBegin",m.hitch(b,function(){var a={},b;for(b in this.properties){if("width"==b||"height"==b)this.node.display="block";var e=this.properties[b];m.isFunction(e)&&(e=e(l));e=a[b]=c({},m.isObject(e)?e:{end:e});m.isFunction(e.start)&&(e.start=e.start(l));m.isFunction(e.end)&&(e.end=e.end(l));var f=0<=b.toLowerCase().indexOf("color"),p=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=d.get(a,b);return"opacity"==b?+c:f?c:parseFloat(c)};
"end"in e?"start"in e||(e.start=p(l,b)):e.end=p(l,b);f?(e.start=new g(e.start),e.end=new g(e.end)):e.start="opacity"==b?+e.start:parseFloat(e.start)}this.curve=new x(a)}),!0);k.after(b,"onAnimate",m.hitch(d,"set",b.node),!0);return b};b.anim=function(a,c,d,e,f,g){return b.animateProperty({node:a,duration:d||q.prototype.duration,properties:c,easing:e,onEnd:f}).play(g||0)};c(a,b);a._Animation=q;return b})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(a,h,
m,n){var g=a.Color=function(a){a&&this.setColor(a)};g.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]};h.extend(g,{r:255,g:255,b:255,a:1,_set:function(a,f,e,d){this.r=a;this.g=f;this.b=e;this.a=d},setColor:function(a){h.isString(a)?
g.fromString(a,this):h.isArray(a)?g.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof g||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+m.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var f=this.r+", "+this.g+", "+this.b;return(a?"rgba("+f+", "+this.a:"rgb("+f)+")"},toString:function(){return this.toCss(!0)}});
g.blendColors=a.blendColors=function(a,f,e,d){var c=d||new g;m.forEach(["r","g","b","a"],function(b){c[b]=a[b]+(f[b]-a[b])*e;"a"!=b&&(c[b]=Math.round(c[b]))});return c.sanitize()};g.fromRgb=a.colorFromRgb=function(a,f){var e=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return e&&g.fromArray(e[1].split(/\s*,\s*/),f)};g.fromHex=a.colorFromHex=function(a,f){var e=f||new g,d=4==a.length?4:8,c=(1<<d)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;m.forEach(["b","g","r"],function(b){var f=a&c;
a>>=d;e[b]=4==d?17*f:f});e.a=1;return e};g.fromArray=a.colorFromArray=function(a,f){var e=f||new g;e._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(e.a)&&(e.a=1);return e.sanitize()};g.fromString=a.colorFromString=function(a,f){var e=g.named[a];return e&&g.fromArray(e,f)||g.fromRgb(a,f)||g.fromHex(a,f)};return g})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(a,h,m,n,g){var k=0,f=[],e=0;h=function(){k=1;a._postLoad=a.config.afterOnLoad=
!0;d()};var d=function(){if(!e){for(e=1;k&&(!n||0==n._Q.length)&&(m.idle?m.idle():1)&&f.length;){var a=f.shift();try{a()}catch(b){if(b.info=b.message,m.signal)m.signal("error",b);else throw b;}}e=0}};m.on&&m.on("idle",d);n&&(n._onQEmpty=d);var c=a.ready=a.addOnLoad=function(b,c,e){var k=g._toArray(arguments);"number"!=typeof b?(e=c,c=b,b=1E3):k.shift();e=e?g.hitch.apply(a,k):function(){c()};e.priority=b;for(k=0;k<f.length&&b>=f[k].priority;k++);f.splice(k,0,e);d()},b=a.config.addOnLoad;if(b)c[g.isArray(b)?
"apply":"call"](a,b);n?n(h):h();return c})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(a,h,m,n,g,k,f){h.add("rtl-adjust-position-for-verticalScrollBar",function(a,c){var b=m.body(c),e=f.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},b,"last"),k=f.create("div",{style:{overflow:"hidden",direction:"ltr"}},
e,"last"),h=0!=g.position(k).x;e.removeChild(k);b.removeChild(e);return h});h.add("position-fixed-support",function(a,c){var b=m.body(c),e=f.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},b,"last"),k=f.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),h=g.position(k).x!=g.position(e).x;e.removeChild(k);b.removeChild(e);return h});var e={getBox:function(a){a=a||m.doc;var c="BackCompat"==a.compatMode?m.body(a):a.documentElement,b=g.docScroll(a);if(h("touch")){var f=
e.get(a);a=f.innerWidth||c.clientWidth;c=f.innerHeight||c.clientHeight}else a=c.clientWidth,c=c.clientHeight;return{l:b.x,t:b.y,w:a,h:c}},get:function(a){if(h("ie")&&e!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var c=a._parentWindow;a._parentWindow=null;return c}return a.parentWindow||a.defaultView},scrollIntoView:function(a,c){try{a=n.byId(a);var b=a.ownerDocument||m.doc,e=m.body(b),f=b.documentElement||e.parentNode,u=h("ie"),t=h("webkit");
if(!(a==e||a==f))if(!h("mozilla")&&(!u&&!t&&!h("opera")&&!h("trident"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var r="BackCompat"==b.compatMode,s=Math.min(e.clientWidth||f.clientWidth,f.clientWidth||e.clientWidth),x=Math.min(e.clientHeight||f.clientHeight,f.clientHeight||e.clientHeight),b=t||r?e:f,v=c||g.position(a),l=a.parentNode,t=function(a){return 6>=u||7==u&&r?!1:h("position-fixed-support")&&"fixed"==k.get(a,"position").toLowerCase()},w=this,B=function(a,b,c){"BODY"==a.tagName||"HTML"==
a.tagName?w.get(a.ownerDocument).scrollBy(b,c):(b&&(a.scrollLeft+=b),c&&(a.scrollTop+=c))};if(!t(a))for(;l;){l==e&&(l=b);var y=g.position(l),C=t(l),E="rtl"==k.getComputedStyle(l).direction.toLowerCase();if(l==b){y.w=s;y.h=x;if(b==f&&(u||h("trident"))&&E)y.x+=b.offsetWidth-y.w;if(0>y.x||!u||9<=u||h("trident"))y.x=0;if(0>y.y||!u||9<=u||h("trident"))y.y=0}else{var z=g.getPadBorderExtents(l);y.w-=z.w;y.h-=z.h;y.x+=z.l;y.y+=z.t;var L=l.clientWidth,H=y.w-L;0<L&&0<H&&(E&&h("rtl-adjust-position-for-verticalScrollBar")&&
(y.x+=H),y.w=L);L=l.clientHeight;H=y.h-L;0<L&&0<H&&(y.h=L)}C&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>x&&(y.h=x-y.y),y.x+y.w>s&&(y.w=s-y.x));var K=v.x-y.x,$=v.y-y.y,R=K+v.w-y.w,N=$+v.h-y.h,Q,F;if(0<R*K&&(l.scrollLeft||l==b||l.scrollWidth>l.offsetHeight)){Q=Math[0>K?"max":"min"](K,R);if(E&&(8==u&&!r||9<=u||h("trident")))Q=-Q;F=l.scrollLeft;B(l,Q,0);Q=l.scrollLeft-F;v.x-=Q}if(0<N*$&&(l.scrollTop||l==b||l.scrollHeight>l.offsetHeight))Q=Math.ceil(Math[0>$?"max":"min"]($,N)),F=l.scrollTop,
B(l,0,Q),Q=l.scrollTop-F,v.y-=Q;l=l!=b&&!C&&l.parentNode}}}catch(D){console.error("scrollIntoView: "+D),a.scrollIntoView(!1)}}};a.setObject("dojo.window",e);return e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p){return h("dojo.dnd.Moveable",[k],{handle:"",delay:0,skip:!1,constructor:function(a,c){this.node=n.byId(a);c||(c={});
this.handle=c.handle?n.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:b;this.events=[f(this.handle,d.press,m.hitch(this,"onMouseDown")),f(this.handle,"dragstart",m.hitch(this,"onSelectStart")),f(this.handle,"selectstart",m.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){a.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||
!c.isFormElement(a)){if(this.delay)this.events.push(f(this.handle,d.move,m.hitch(this,"onMouseMove")),f(this.handle,d.release,m.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();
a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!c.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){e.publish("/dnd/move/start",a);g.add(p.body(),"dojoMove");g.add(this.node,"dojoMoveItem")},onMoveStop:function(a){e.publish("/dnd/move/stop",a);g.remove(p.body(),"dojoMove");g.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);
var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(a,h,m,n,g,k,f,e,d,c){function b(a,b,c){return t&&c?function(a,b){return k(a,c,b)}:s?function(c,l){var d=k(c,b,function(a){l.call(this,a);L=(new Date).getTime()}),e=k(c,a,function(a){(!L||(new Date).getTime()>L+1E3)&&l.call(this,a)});
return{remove:function(){d.remove();e.remove()}}}:function(b,c){return k(b,a,c)}}function p(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function q(a,b,d){var e=p(a.target);if(v=!a.target.disabled&&e&&e.dojoClick)if(w=(l="useTarget"==v)?e:a.target,l&&a.preventDefault(),B=a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,y=a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY,C=("object"==typeof v?v.x:"number"==typeof v?v:0)||4,E=("object"==
typeof v?v.y:"number"==typeof v?v:0)||4,!x){x=!0;var f=function(a){v=l?m.isDescendant(c.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY),w):v&&(a.changedTouches?a.changedTouches[0].target:a.target)==w&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX)-B)<=C&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY)-y)<=
E};c.doc.addEventListener(b,function(a){f(a);l&&a.preventDefault()},!0);c.doc.addEventListener(d,function(a){f(a);if(v){z=(new Date).getTime();var b=l?w:a.target;"LABEL"===b.tagName&&(b=m.byId(b.getAttribute("for"))||b);var c=a.changedTouches?a.changedTouches[0]:a,d=document.createEvent("MouseEvents");d._dojo_click=!0;d.initMouseEvent("click",!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){k.emit(b,"click",d);z=(new Date).getTime()},
0)}},!0);a=function(a){c.doc.addEventListener(a,function(b){!b._dojo_click&&((new Date).getTime()<=z+1E3&&!("INPUT"==b.target.tagName&&n.contains(b.target,"dijitOffScreen")))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==a&&(("INPUT"!=b.target.tagName||"radio"==b.target.type||"checkbox"==b.target.type)&&"TEXTAREA"!=b.target.tagName&&"AUDIO"!=b.target.tagName&&"VIDEO"!=b.target.tagName)&&b.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}var u=
5>f("ios"),t=f("pointer-events")||f("MSPointer"),r=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=f("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),s=f("touch-events"),x,v,l=!1,w,B,y,C,E,z,L,H;t?d(function(){c.doc.addEventListener(r.down,function(a){q(a,r.move,r.up)},!0)}):s&&d(function(){function a(b){var c=g.delegate(b,{bubbles:!0});6<=f("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=
b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}H=c.body();c.doc.addEventListener("touchstart",function(a){L=(new Date).getTime();var b=H;H=a.target;k.emit(b,"dojotouchout",{relatedTarget:H,bubbles:!0});k.emit(H,"dojotouchover",{relatedTarget:b,bubbles:!0});q(a,"touchmove","touchend")},!0);k(c.doc,"touchmove",function(b){L=(new Date).getTime();var l=c.doc.elementFromPoint(b.pageX-(u?0:c.global.pageXOffset),b.pageY-(u?0:c.global.pageYOffset));l&&(H!==l&&
(k.emit(H,"dojotouchout",{relatedTarget:l,bubbles:!0}),k.emit(l,"dojotouchover",{relatedTarget:H,bubbles:!0}),H=l),k.emit(l,"dojotouchmove",a(b))||b.preventDefault())});k(c.doc,"touchend",function(b){L=(new Date).getTime();var l=c.doc.elementFromPoint(b.pageX-(u?0:c.global.pageXOffset),b.pageY-(u?0:c.global.pageYOffset))||c.body();k.emit(l,"dojotouchend",a(b))})});h={press:b("mousedown","touchstart",r.down),move:b("mousemove","dojotouchmove",r.move),release:b("mouseup","dojotouchend",r.up),cancel:b(e.leave,
"touchcancel",t?r.cancel:null),over:b("mouseover","dojotouchover",r.over),out:b("mouseout","dojotouchout",r.out),enter:e._eventHandler(b("mouseover","dojotouchover",r.over)),leave:e._eventHandler(b("mouseout","dojotouchout",r.out))};return a.touch=h})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(a,h,m,n){var g=m.getObject("dojo.dnd",!0);g.getCopyKeyState=function(g){return g[a("mac")?"metaKey":"ctrlKey"]};g._uniqueId=0;g.getUniqueId=function(){var a;
do a=h._scopeName+"Unique"+ ++g._uniqueId;while(n.byId(a));return a};g._empty={};g.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};return g})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q){return h("dojo.dnd.Mover",
[d],{constructor:function(a,d,e){function f(a){a.preventDefault();a.stopPropagation()}this.node=k.byId(a);this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=d.button;d=this.host=e;a=a.ownerDocument;this.events=[c(a,b.move,m.hitch(this,"onFirstMove")),c(a,b.move,m.hitch(this,"onMouseMove")),c(a,b.release,m.hitch(this,"onMouseUp")),c(a,"dragstart",f),c(a.body,"selectstart",f)];q.autoScrollStart(a);if(d&&d.onMoveStart)d.onMoveStart(this)},onMouseMove:function(a){q.autoScroll(a);var b=this.marginBox;
this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(n("webkit")&&n("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=f.getMarginBox(this.node);
c=g.doc.body;var p=e.getComputedStyle(c),k=f.getMarginBox(c,p),p=f.getContentBox(c,p);c=b.l-(p.l-k.l);b=b.t-(p.t-k.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){a.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(a,h,m,n,g,k){var f={};a.setObject("dojo.dnd.autoscroll",f);f.getViewport=k.getBox;f.V_TRIGGER_AUTOSCROLL=32;f.H_TRIGGER_AUTOSCROLL=32;f.V_AUTOSCROLL_VALUE=16;f.H_AUTOSCROLL_VALUE=16;var e,d=m.doc,c=Infinity,b=Infinity;f.autoScrollStart=function(a){d=a;e=k.getBox(d);a=m.body(d).parentNode;c=Math.max(a.scrollHeight-e.h,0);b=Math.max(a.scrollWidth-e.w,0)};f.autoScroll=function(a){var g=e||k.getBox(d),h=m.body(d).parentNode,n=0,r=0;a.clientX<f.H_TRIGGER_AUTOSCROLL?n=-f.H_AUTOSCROLL_VALUE:a.clientX>
g.w-f.H_TRIGGER_AUTOSCROLL&&(n=Math.min(f.H_AUTOSCROLL_VALUE,b-h.scrollLeft));a.clientY<f.V_TRIGGER_AUTOSCROLL?r=-f.V_AUTOSCROLL_VALUE:a.clientY>g.h-f.V_TRIGGER_AUTOSCROLL&&(r=Math.min(f.V_AUTOSCROLL_VALUE,c-h.scrollTop));window.scrollBy(n,r)};f._validNodes={div:1,p:1,td:1};f._validOverflow={auto:1,scroll:1};f.autoScrollNodes=function(a){for(var b,c,d,e,k,x,v=0,l=0,w=a.target;w;){if(1==w.nodeType&&w.tagName.toLowerCase()in f._validNodes){d=g.getComputedStyle(w);e=d.overflow.toLowerCase()in f._validOverflow;
k=d.overflowX.toLowerCase()in f._validOverflow;x=d.overflowY.toLowerCase()in f._validOverflow;if(e||k||x)b=n.getContentBox(w,d),c=n.position(w,!0);if(e||k){d=Math.min(f.H_TRIGGER_AUTOSCROLL,b.w/2);k=a.pageX-c.x;if(h("webkit")||h("opera"))k+=m.body().scrollLeft;v=0;0<k&&k<b.w&&(k<d?v=-d:k>b.w-d&&(v=d),w.scrollLeft+=v)}if(e||x){e=Math.min(f.V_TRIGGER_AUTOSCROLL,b.h/2);x=a.pageY-c.y;if(h("webkit")||h("opera"))x+=m.body().scrollTop;l=0;0<x&&x<b.h&&(x<e?l=-e:x>b.h-e&&(l=e),w.scrollTop+=l)}if(v||l)return}try{w=
w.parentNode}catch(B){w=null}}f.autoScroll(a)};return f})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,h){var m=h.prototype.onMove;return a("dojo.dnd.TimedMoveable",h,{timeout:40,constructor:function(a,g){g||(g={});g.timeout&&("number"==typeof g.timeout&&0<=g.timeout)&&(this.timeout=g.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),m.call(this,a,a._leftTop));h.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,g){a._leftTop=
g;if(!a._timer){var k=this;a._timer=setTimeout(function(){a._timer=null;m.call(k,a,a._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s){var x,v,l=new (h([p,f],{curNode:null,activeStack:[],constructor:function(){var b=
e.hitch(this,function(a){m.isDescendant(this.curNode,a)&&this.set("curNode",null);m.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(k,"empty",b);a.before(k,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,c){var l=this,e=a.document&&a.document.body;if(e){var f=b("pointer-events")?"pointerdown":b("MSPointer")?"MSPointerDown":b("touch-events")?"mousedown, touchstart":"mousedown",g=d(a.document,f,function(a){if(!a||!(a.target&&
null==a.target.parentNode))l._onTouchNode(c||a.target,"mouse")}),p=d(e,"focusin",function(a){if(a.target.tagName){var b=a.target.tagName.toLowerCase();"#document"==b||"body"==b||(t.isFocusable(a.target)?l._onFocusNode(c||a.target):l._onTouchNode(c||a.target))}}),k=d(e,"focusout",function(a){l._onBlurNode(c||a.target)});return{remove:function(){g.remove();p.remove();k.remove();e=g=p=k=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<x+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),
this._clearFocusTimer=setTimeout(e.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<v+100||(this._clearActiveWidgetsTimer=setTimeout(e.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){v=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);g.contains(a,
"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var l=n.get(a,"dijitPopupParent");if(l)a=r.byId(l).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===q.body())break;a=u.get(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId"),e=d&&r.byId(d);e&&!("mouse"==b&&e.get("disabled"))&&c.unshift(d);a=a.parentNode}}}catch(f){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(x=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),
delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,l=c.length-1,d=a.length-1;if(a[d]!=c[l]){this.set("activeStack",a);var e;for(e=l;0<=e&&c[e]!=a[e];e--)if(l=r.byId(c[e]))l._hasBeenBlurred=!0,l.set("focused",!1),l._focusManager==this&&l._onBlur(b),this.emit("widget-blur",l,b);for(e++;e<=d;e++)if(l=r.byId(a[e]))l.set("focused",!0),l._focusManager==this&&l._onFocus(b),this.emit("widget-focus",
l,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var a=l.registerWin(u.get(document));b("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});s.focus=function(a){l.focus(a)};for(var w in l)/^_/.test(w)||(s.focus[w]="function"==typeof l[w]?e.hitch(l,w):l[w]);l.watch(function(a,b,c){s.focus[a]=c});return l})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(a,h,m,n){return a("dojo.Stateful",null,{_attrPairNames:{},
_getAttrNames:function(a){var k=this._attrPairNames;return k[a]?k[a]:k[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,k){return"function"===typeof this[k.g]?this[k.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,k){if("object"===typeof a){for(var f in a)a.hasOwnProperty(f)&&"_watchCallbacks"!=f&&this.set(f,a[f]);return this}f=this._getAttrNames(a);var e=this._get(a,f);f=this[f.s];var d;"function"===typeof f?d=
f.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=k;if(this._watchCallbacks){var c=this;n(d,function(){c._watchCallbacks(a,e,k)})}return this},_changeAttrValue:function(a,k){var f=this.get(a);this[a]=k;this._watchCallbacks&&this._watchCallbacks(a,f,k);return this},watch:function(a,k){var f=this._watchCallbacks;if(!f)var e=this,f=this._watchCallbacks=function(a,c,d,g){var k=function(f){if(f){f=f.slice();for(var g=0,k=f.length;g<k;g++)f[g].call(e,a,c,d)}};k(f["_"+a]);g||k(f["*"])};!k&&"function"===
typeof a?(k=a,a="*"):a="_"+a;var d=f[a];"object"!==typeof d&&(d=f[a]=[]);d.push(k);var c={};c.unwatch=c.remove=function(){var a=m.indexOf(d,k);-1<a&&d.splice(a,1)};return c}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(a,h,m,n,g,k,f){var e={_isElementShown:function(a){var c=n.get(a);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=m.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return m.has(a,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var b=a.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;c=b.body}catch(e){try{c=a.contentWindow.document.body}catch(f){return!1}}return c&&("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return m.get(a,"disabled")?void 0:m.has(a,"tabIndex")?+m.get(a,"tabIndex"):
e.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=e.effectiveTabIndex(a)},isFocusable:function(a){return-1<=e.effectiveTabIndex(a)},_getTabNavigable:function(a){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var b,f,g,h,n,r,s={},x=e._isElementShown,v=e.effectiveTabIndex,l=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=k("ie")&&"HTML"!==a.scopeName||!x(a))){var d=v(a);if(0<=d){if(0==
d)b||(b=a),f=a;else if(0<d){if(!g||d<h)h=d,g=a;if(!n||d>=r)r=d,n=a}d=c(a);m.get(a,"checked")&&d&&(s[d]=a)}"SELECT"!=a.nodeName.toUpperCase()&&l(a)}};x(a)&&l(a);return{first:s[c(b)]||b,last:s[c(f)]||f,lowest:s[c(g)]||g,highest:s[c(n)]||n}},getFirstInTabbingOrder:function(a,c){var b=e._getTabNavigable(h.byId(a,c));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(a,c){var b=e._getTabNavigable(h.byId(a,c));return b.last?b.last:b.highest}};g.mixin(f,e);return e})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,h,m,n,g){var k={};a.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){k[a]=n[a]});m.mixin(k,{defaultDuration:h.defaultDuration||200});m.mixin(g,k);return g})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q){function u(){}function t(a){return function(b,c,d,l){return b&&"string"==typeof c&&b[c]==u?b.on(c.substring(2).toLowerCase(),f.hitch(d,l)):a.apply(m,arguments)}}a.around(m,"connect",t);k.connect&&a.around(k,"connect",t);a=n("dijit._Widget",[b,p,q],{onClick:u,onDblClick:u,onKeyDown:u,onKeyPress:u,onKeyUp:u,onMouseDown:u,onMouseMove:u,onMouseOut:u,onMouseOver:u,onMouseLeave:u,onMouseEnter:u,onMouseUp:u,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
u&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===u?m.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){k.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){k.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});g("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return a})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w,B,y){function C(a){return function(b){e[b?
"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!u.isAsync);q.add("dojo-bidi",!1);q("dijit-legacy-requires")&&s(0,function(){a(["dijit/_base/manager"])});var E={};n=k("dijit._WidgetBase",[x,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:C("lang"),dir:"",_setDirAttr:C("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:n.blankGif||a.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},l;for(l in b.attributeMap)c.push(l);for(l in b)/^on/.test(l)&&(a[l.substring(2).toLowerCase()]=l),/^_set[A-Z](.*)Attr$/.test(l)&&(l=l.charAt(4).toLowerCase()+l.substr(5,l.length-9),(!b.attributeMap||!(l in b.attributeMap))&&c.push(l))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();
this.srcNodeRef=f.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,t.mixin(this,a));this.postMixInProperties();this.id||(this.id=y.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=l.body(this.ownerDocument);y.add(this);this.buildRendering();
var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);h.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},
buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));d.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,h.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&t.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=
!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,t.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,b);this.domNode&&h.forEach(y.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);y.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);
this.domNode&&(a?e.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;t.isObject(a)?p.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=
arguments.length?c:this.attributeMap[a];h.forEach(t.isArray(c)?c:[c],function(c){var l=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":t.isFunction(b)&&(b=t.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;l.tagName?e.set(l,c,b):l.set(c,b);break;case "innerText":l.innerHTML="";l.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":l.innerHTML=b;break;case "class":d.replace(l,b,this[a])}},this)},get:function(a){var b=
this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var l=this[c.s];if(t.isFunction(l))var d=l.apply(this,Array.prototype.slice.call(arguments,1));else{var l=this.focusNode&&!t.isFunction(this.focusNode)?"focusNode":"domNode",e=this[l]&&this[l].tagName,f;if(f=e)if(!(f=E[e])){f=this[l];var g={},p;for(p in f)g[p.toLowerCase()]=!0;f=E[e]=g}p=f;c=a in this.attributeMap?this.attributeMap[a]:
c.s in this?this[c.s]:p&&c.l in p&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?l:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==
b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var l,d=this["on"+a];d&&(l=d.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&r.emit(this.domNode,a.toLowerCase(),b);return l},on:function(a,b){var c=this._onMap(a);return c?m.after(this,c,b,
!0):this.own(r(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},l;for(l in b.prototype)/^on/.test(l)&&(c[l.replace(/^on/,"").toLowerCase()]=l)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?y.findWidgets(this.containerNode):[]},getParent:function(){return y.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,
b,c){return this.own(g.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(v.subscribe(a,t.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=p.get(this.domNode,"display")},placeAt:function(a,b){var l=!a.tagName&&y.byId(a);l&&l.addChild&&(!b||"number"===typeof b)?l.addChild(this,b):(l=l&&"domNode"in
l?l.containerNode&&!/after|before|replace/.test(b||"")?l.containerNode:l.domNode:f.byId(a,this.ownerDocument),c.place(this.domNode,l,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(t.hitch(this,function(){c&&(c=null,this._destroyed||t.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});q("dojo-bidi")&&n.extend(B);return n})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect",
"dojo/_base/declare"],function(a,h,m){return m("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var m=["destroyRecursive","destroy","remove"];a.forEach(arguments,function(g){function k(){e.remove();a.forEach(d,function(a){a.remove()})}var f,e=h.before(this,"destroy",function(a){g[f](a)}),d=[];g.then?(f="cancel",g.then(k,k)):a.forEach(m,function(a){"function"===typeof g[a]&&(f||(f=a),d.push(h.after(g,a,k,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(a,h,m,n,g,k){a=n("dijit._OnDijitClickMixin",null,{connect:function(a,e,d){return this.inherited(arguments,[a,"ondijitclick"==e?k:e,d])}});a.a11yclick=k;return a})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,h,m,n){function g(e){if((e.keyCode===a.ENTER||e.keyCode===a.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName))for(e=e.target;e;e=e.parentNode)if(e.dojoClick)return!0}var k;m(document,"keydown",function(a){g(a)?(k=a.target,a.preventDefault()):
k=null});m(document,"keyup",function(a){g(a)&&a.target==k&&(k=null,m.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var f=function(a,d){a.dojoClick=!0;return m(a,"click",d)};f.click=f;f.press=function(e,d){var c=m(e,n.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&d(a)}),b=m(e,"keydown",function(b){(b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&d(b)});return{remove:function(){c.remove();b.remove()}}};
f.release=function(e,d){var c=m(e,n.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&d(a)}),b=m(e,"keyup",function(b){(b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&d(b)});return{remove:function(){c.remove();b.remove()}}};f.move=n.move;return f})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,h,m,n){n.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return m("dijit._FocusMixin",null,{_focusManager:a})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,h,m,n,g){var k=g.doc.documentElement;g=n("ie");var f=n("opera"),e=Math.floor,d=n("ff"),c=a.boxModel.replace(/-/,""),f={dj_quirks:n("quirks"),dj_opera:f,dj_khtml:n("khtml"),dj_webkit:n("webkit"),dj_safari:n("safari"),dj_chrome:n("chrome"),dj_gecko:n("mozilla"),dj_ios:n("ios"),dj_android:n("android")};g&&(f.dj_ie=!0,f["dj_ie"+e(g)]=
!0,f.dj_iequirks=n("quirks"));d&&(f["dj_ff"+e(d)]=!0);f["dj_"+c]=!0;var b="",p;for(p in f)f[p]&&(b+=p+" ");k.className=h.trim(k.className+" "+b);m(function(){if(!a.isBodyLtr()){var c="dj_rtl dijitRtl "+b.replace(/ /g,"-rtl ");k.className=h.trim(k.className+" "+c+"dj_rtl dijitRtl "+b.replace(/ /g,"-rtl "))}});return n})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,h,m,n){m(function(){h("highcontrast")&&a.add(n.body(),"dijit_a11y")});
return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(a,h,m,n,g,k,f){g.add("highcontrast",function(){var e=f.doc.createElement("div");e.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(h.blankGif||a.toUrl("./resources/blank.gif"))+'");';f.body().appendChild(e);var d=n.getComputedStyle(e),c=d.backgroundImage,d=d.borderTopColor==d.borderRightColor||
c&&("none"==c||"url(invalid-url:)"==c);8>=g("ie")?e.outerHTML="":f.body().removeChild(e);return d});k(function(){g("highcontrast")&&m.add(f.body(),"dj_a11y")});return g})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(a,h,m,n,g,k,f,e){var d=h("dijit._TemplatedMixin",e,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=
this.declaredClass,d=this;return f.substitute(a,this,function(a,c){"!"==c.charAt(0)&&(a=n.getObject(c.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,
{sanitize:!0}));var c=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(n.isString(c)){if(b=m.toDom(this._stringRepl(c),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+c);}else b=c.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});d._templateCache={};d.getCachedTemplate=
function(a,b,e){var g=d._templateCache,k=a,h=g[k];if(h){try{if(!h.ownerDocument||h.ownerDocument==(e||document))return h}catch(n){}m.destroy(h)}a=f.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[k]=a;b=m.toDom(a,e);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[k]=b};k("ie")&&g(window,"unload",function(){var a=d._templateCache,b;for(b in a){var e=a[b];"object"==typeof e&&m.destroy(e);delete a[b]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},
"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(a,h,m,n){var g;g=function(a,b,d){n(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(d)};var k={},f=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},e={},d={};a.cache=function(a,b,d){var e;"string"==typeof a?/\//.test(a)?(e=a,d=b):e=h.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(e=a+
"",d=b);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return k[e]=a,d?f(a):a;if(null===a)return delete k[e],null;e in k||g(e,!0,function(a){k[e]=a});return d?f(k[e]):k[e]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),e=d[0];return(/^\./.test(e)?b(e):e)+(d[1]?"!"+d[1]:"")},load:function(a,b,p){a=a.split("!");var h=1<a.length,m=a[0],n=b.toUrl(a[0]);a="url:"+n;var r=e,s=function(a){p(h?f(a):a)};m in k?r=k[m]:b.cache&&a in b.cache?r=b.cache[a]:n in k&&
(r=k[n]);if(r===e)if(d[n])d[n].push(s);else{var x=d[n]=[s];g(n,!b.async,function(a){k[m]=k[n]=a;for(var b=0;b<x.length;)x[b++](a);delete d[n]})}else s(r)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(a,h,m,n,g,k,f,e,d){var c=g.delegate(e,{mouseenter:k.enter,mouseleave:k.leave,keypress:m._keypress}),b;m=n("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=
[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,
b,c){var d=!0,e=this.attachScope||this,f=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(f)for(var k=f.split(/\s*,\s*/);f=k.shift();)g.isArray(e[f])?e[f].push(a):e[f]=a,d="containerNode"!=f,this._attachPoints.push(f);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){f=b.split(/\s*,\s*/);for(k=g.trim;b=f.shift();)if(b){var h=null;-1!=b.indexOf(":")?(h=b.split(":"),b=k(h[0]),h=k(h[1])):b=k(b);h||(h=b);this._attachEvents.push(c(a,b,g.hitch(e,h)))}}return d},_attach:function(d,e,g){e=
e.replace(/^on/,"").toLowerCase();e="dijitclick"==e?b||(b=a("./a11yclick")):c[e]||e;return f(d,e,g)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});g.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return m})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);a.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,k.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(d){c=c.concat(a.map(c,function(a){return a+d}),"dijit"+d)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,e={};a.forEach(d.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete e[a]});a.forEach(c,
function(a){e[a]=!0});var f=[],g;for(g in e)f.push(g);d.className=f.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,b,c){function d(c){n.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":n.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":n.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":n.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":n.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});e(function(){function a(b,c,d){if(!d||!m.isDescendant(d,c))for(;c&&c!=d;c=c.parentNode)if(c._cssState){var e=p.getEnclosingWidget(c);e&&(c==e.domNode?e._cssMouseEvent(b):e._subnodeCssMouseEvent(c,c._cssState,b))}}var e=c.body(),g;f(e,
d.over,function(b){a(b,b.target,b.relatedTarget)});f(e,d.out,function(b){a(b,b.target,b.relatedTarget)});f(e,b.press,function(b){g=b.target;a(b,g)});f(e,b.release,function(b){a(b,g);g=null});f(e,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=p.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(a,h,m,n,g,k){return h("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(f){var e=[];a.forEach(f||this.getChildren(),function(a){"value"in a?e.push(a):e=e.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return e},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var f=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var d=a.disabled||!a.validate||
a.validate();!d&&!f&&(k.scrollIntoView(a.containerNode||a.domNode),a.focus(),f=!0);return d}),function(a){return a})},setValues:function(a){m.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(f){var e={};a.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(e[a.name]||(e[a.name]=[])).push(a)});for(var d in e)if(e.hasOwnProperty(d)){var c=e[d],b=n.getObject(d,!1,f);void 0!==b&&(b=[].concat(b),
"boolean"==typeof c[0].checked?a.forEach(c,function(c){c.set("value",-1!=a.indexOf(b,c._get("value")))}):c[0].multiple?c[0].set("value",b):a.forEach(c,function(a,c){a.set("value",b[c])}))}},getValues:function(){m.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var f={};a.forEach(this._getDescendantFormWidgets(),function(a){var d=a.name;if(d&&!a.disabled){var c=a.get("value");"boolean"==typeof a.checked?
/Radio/.test(a.declaredClass)?!1!==c?n.setObject(d,c,f):(c=n.getObject(d,!1,f),void 0===c&&n.setObject(d,null,f)):(a=n.getObject(d,!1,f),a||(a=[],n.setObject(d,a,f)),!1!==c&&a.push(c)):(a=n.getObject(d,!1,f),"undefined"!=typeof a?n.isArray(a)?a.push(c):n.setObject(d,[a,c],f):n.setObject(d,c,f))}});return f},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var f=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(f,"Error")?
"Error":0<=a.indexOf(f,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(f){this._descendants=this._getDescendantFormWidgets();a.forEach(this._descendants,function(a){a._started||a.startup()});f||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(g(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(e){e.target!=a.domNode&&a._onChildChange(e.type.replace("attrmodified-",""))}));this.watch("state",function(a,d,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,h){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=h._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){var q=a("dijit.DialogUnderlay",[e,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){n.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(k(this.domNode,"keydown",h.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=f.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new c(this.domNode);var a=f.get(this.ownerDocument);this._modalConnects=[b.on("resize",h.hitch(this,"layout")),k(a,"scroll",
h.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});q.show=function(a,b){var c=q._singleton;!c||c._destroyed?c=p._underlay=q._singleton=new q(a):a&&c.set(a);g.set(c.domNode,"zIndex",b);c.open||c.show()};q.hide=function(){var a=
q._singleton;a&&!a._destroyed&&a.hide()};return q})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(a,h,m,n,g,k,f,e){e.add("config-bgIframe",e("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||e("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var d=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>e("ie")?(b="\x3ciframe src\x3d'"+
(m.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",b=document.createElement(b)):(b=n.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),g.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(a){a.style.display="none";c.push(a)}};h.BackgroundIframe=function(a){if(!a.id)throw Error("no id");
if(e("config-bgIframe")){var b=this.iframe=d.pop();a.appendChild(b);7>e("ie")||e("quirks")?(this.resize(a),this._conn=f(a,"resize",k.hitch(this,"resize",a))):g.set(b,{width:"100%",height:"100%"})}};k.extend(h.BackgroundIframe,{resize:function(a){this.iframe&&g.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});
return h.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,h,m,n,g){var k=new a,f;m(function(){var a=g.getBox();k._rlh=h(window,"resize",function(){var c=g.getBox();a.h==c.h&&a.w==c.w||(a=c,k.emit("resize"))});if(8==n("ie")){var d=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,k.emit("resize"))},500)}n("ios")&&(h(document,"focusin",function(a){f=a.target}),h(document,"focusout",
function(a){f=null}))});k.getEffectiveBox=function(a){a=g.getBox(a);var d=f&&f.tagName&&f.tagName.toLowerCase();if(n("ios")&&f&&!f.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(f.type)))a.h*=0==orientation||180==orientation?0.66:0.4,d=f.getBoundingClientRect(),a.h=Math.max(a.h,d.top+d.height);return a};return k})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s){return c("dijit.layout.ContentPane",[m,n,g],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=p.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);
a=h.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=r.getLocalization("dijit","loading",this.lang);this.loadingMessage=k.substitute(this.loadingMessage,a);this.errorMessage=k.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&h.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&h.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&h.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
h.isObject(this.ioArgs)&&h.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||t.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;d.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(d.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||u.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;c&&c instanceof f._ContentSetter||(c=this._contentSetter=new f._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+
" could not change content due to "+b.message,b)}})}));var d=h.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(h.isObject(a)&&a.domNode?a.domNode:a,d),e=this;return s(d&&d.then?d:c.parseDeferred,function(){delete e._contentSetterParams;b||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},
_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(a,h,m,n){return h("dijit._Container",
null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,k){var f=this.containerNode;if(0<k){for(f=f.firstChild;0<k;)1==f.nodeType&&k--,f=f.nextSibling;f?k="before":(f=this.containerNode,k="last")}m.place(a.domNode,f,k);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},
_getSiblingOfChild:function(g,k){n.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var f=this.getChildren(),e=a.indexOf(f,g);return f[e+k]},getIndexOfChild:function(g){return a.indexOf(this.getChildren(),g)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(a,
h,m,n,g,k,f,e,d,c){return h("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",k.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],c=!1;f("\x3e *",this.containerNode).some(function(d){var f=
e.byNode(d);f&&f.resize?a.push(f):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1==a.length&&!c?a[0]:null;m.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,c){this._resizeCalled=!0;this._scheduleLayout(a,c)},_scheduleLayout:function(a,c){this._isShown()?this._layout(a,c):(this._needLayout=!0,this._changeSize=a,this._resultSize=c)},_layout:function(a,d){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();
a&&n.setMarginBox(this.domNode,a);var e=this.containerNode;if(e===this.domNode){var f=d||{};k.mixin(f,a||{});if(!("h"in f)||!("w"in f))f=k.mixin(n.getMarginBox(e),f);this._contentBox=c.marginBox2contentBox(e,f)}else this._contentBox=n.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||n.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),
c,d=0;c=a[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,c=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!m.contains(a,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(a,h,m,n,g){function k(a,d){var c=a.resize?a.resize(d):m.setMarginBox(a.domNode,d);c?g.mixin(a,c):(g.mixin(a,m.getMarginBox(a.domNode)),g.mixin(a,d))}var f={marginBox2contentBox:function(a,d){var c=n.getComputedStyle(a),b=m.getMarginExtents(a,c),f=m.getPadBorderExtents(a,c);return{l:n.toPixelValue(a,c.paddingLeft),t:n.toPixelValue(a,c.paddingTop),w:d.w-(b.w+f.w),h:d.h-(b.h+f.h)}},layoutChildren:function(e,d,c,b,f){d=
g.mixin({},d);h.add(e,"dijitLayoutContainer");c=a.filter(c,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(c,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(c,function(a){var c=a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var g=c.style;g.left=d.l+"px";g.top=d.t+"px";g.position="absolute";h.add(c,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));c={};b&&b==a.id&&(c["top"==a.region||"bottom"==
a.region?"h":"w"]=f);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(c.w=d.w,k(a,c),d.h-=a.h,"top"==e?d.t+=a.h:g.top=d.t+d.h+"px"):"left"==e||"right"==e?(c.h=d.h,k(a,c),d.w-=a.w,"left"==e?d.l+=a.w:g.left=d.l+d.w+"px"):("client"==e||"center"==e)&&k(a,d)})}};g.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(a,h,m,n,g,k,f){var e=0,d={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:k.empty,_setNodeContent:function(a,b){k.empty(a);if(b)if("string"==typeof b&&(b=k.toDom(b,a.ownerDocument)),!b.nodeType&&h.isArrayLike(b))for(var d=b.length,e=0;e<b.length;e=d==b.length?e+1:0)k.place(b[e],a,"last");else k.place(b,a,"last");return a},_ContentSetter:n("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,
parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,b){h.mixin(this,a||{});b=this.node=g.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",e++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=d._setNodeContent(a,this.content)}catch(b){var e=
this.onContentError(b);try{a.innerHTML=e}catch(f){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(m.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);k.empty(this.node)},onBegin:function(){var a=this.content;if(h.isString(a)&&
(this.cleanContent&&(a=d._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},
_mixin:function(a){var b={},d;for(d in a)d in b||(this[d]=a[d])},_parse:function(){var a=this.node;try{var b={};m.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=f.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(a,b,e){a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&d._setNodeContent(this.node,a,!0)}}),set:function(a,b,e){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");return e?(new d._ContentSetter(h.mixin(e,{content:b,node:a}))).set():d._setNodeContent(a,b,!0)}};h.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r){function s(a){return eval("("+a+")")}function x(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<l){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=l}return b}function v(b,c){var l=b.join();if(!w[l]){for(var d=[],e=0,f=b.length;e<f;e++){var g=b[e];d[d.length]=w[g]=w[g]||m.getObject(g)||~g.indexOf("/")&&(c?c(g):a(g))}e=d.shift();w[l]=d.length?e.createSubclass?e.createSubclass(d):e.extend.apply(e,d):e}return w[l]}
new Date("X");var l=0;d.after(m,"extend",function(){l++},!0);var w={},B={_clearCache:function(){l++;w={}},_functionFromScript:function(a,b){var c="",l="",d=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);e&&e.length&&n.forEach(e.split(/\s*,\s*/),function(a){c+="with("+a+"){";l+="}"});return new Function(d,c+a.innerHTML+l)},instantiate:function(a,b,c){b=b||{};c=c||{};var l=(c.scope||h._scopeName)+"Type",d="data-"+(c.scope||h._scopeName)+"-",e=d+
"type",f=d+"mixins",g=[];n.forEach(a,function(a){var c=l in b?b[l]:a.getAttribute(e)||a.getAttribute(l);if(c){var d=a.getAttribute(f),c=d?[c].concat(d.split(/\s*,\s*/)):[c];g.push({node:a,types:c})}});return this._instantiate(g,b,c)},_instantiate:function(a,b,l,d){function e(a){!b._started&&!l.noStart&&n.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=n.map(a,function(a){var c=a.ctor||v(a.types,l.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(c,a.node,b,l,a.scripts,a.inherited)},this);return d?c(a).then(e):e(a)},construct:function(a,c,l,f,g,k){function p(a){X&&m.setObject(X,a);for(D=0;D<O.length;D++)d[O[D].advice||"after"](a,O[D].method,m.hitch(a,O[D].func),!0);for(D=0;D<M.length;D++)M[D].call(a);for(D=0;D<U.length;D++)a.watch(U[D].prop,U[D].func);for(D=0;D<ca.length;D++)t(a,ca[D].event,ca[D].func);return a}var w=a&&a.prototype;f=f||{};var B={};f.defaults&&m.mixin(B,f.defaults);k&&m.mixin(B,k);
var v;q("dom-attributes-explicit")?v=c.attributes:q("dom-attributes-specified-flag")?v=n.filter(c.attributes,function(a){return a.specified}):(k=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=n.map(k.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var r=f.scope||h._scopeName;
k="data-"+r+"-";var F={};"dojo"!==r&&(F[k+"props"]="data-dojo-props",F[k+"type"]="data-dojo-type",F[k+"mixins"]="data-dojo-mixins",F[r+"type"]="dojoType",F[k+"id"]="data-dojo-id");for(var D=0,S,r=[],X,ha;S=v[D++];){var I=S.name,G=I.toLowerCase();S=S.value;switch(F[G]||G){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ha=S;break;case "data-dojo-id":case "jsid":X=S;break;case "data-dojo-attach-point":case "dojoattachpoint":B.dojoAttachPoint=S;break;case "data-dojo-attach-event":case "dojoattachevent":B.dojoAttachEvent=
S;break;case "class":B["class"]=c.className;break;case "style":B.style=c.style&&c.style.cssText;break;default:if(I in w||(I=x(a)[G]||I),I in w)switch(typeof w[I]){case "string":B[I]=S;break;case "number":B[I]=S.length?Number(S):NaN;break;case "boolean":B[I]="false"!=S.toLowerCase();break;case "function":""===S||-1!=S.search(/[^\w\.]+/i)?B[I]=new Function(S):B[I]=m.getObject(S,!1)||new Function(S);r.push(I);break;default:G=w[I],B[I]=G&&"length"in G?S?S.split(/\s*,\s*/):[]:G instanceof Date?""==S?new Date(""):
"now"==S?new Date:b.fromISOString(S):G instanceof e?h.baseUrl+S:s(S)}else B[I]=S}}for(v=0;v<r.length;v++)F=r[v].toLowerCase(),c.removeAttribute(F),c[F]=null;if(ha)try{ha=s.call(f.propsThis,"{"+ha+"}"),m.mixin(B,ha)}catch(W){throw Error(W.toString()+" in data-dojo-props\x3d'"+ha+"'");}m.mixin(B,l);g||(g=a&&(a._noScript||w._noScript)?[]:u("\x3e script[type^\x3d'dojo/']",c));var O=[],M=[],U=[],ca=[];if(g)for(D=0;D<g.length;D++)F=g[D],c.removeChild(F),l=F.getAttribute(k+"event")||F.getAttribute("event"),
f=F.getAttribute(k+"prop"),ha=F.getAttribute(k+"method"),r=F.getAttribute(k+"advice"),v=F.getAttribute("type"),F=this._functionFromScript(F,k),l?"dojo/connect"==v?O.push({method:l,func:F}):"dojo/on"==v?ca.push({event:l,func:F}):B[l]=F:"dojo/aspect"==v?O.push({method:ha,advice:r,func:F}):"dojo/watch"==v?U.push({prop:f,func:F}):M.push(F);a=(g=a.markupFactory||w.markupFactory)?g(B,c,a):new a(B,c);return a.then?a.then(p):p(a)},scan:function(b,c){function l(a){if(!a.inherited){a.inherited={};var b=a.node,
c=l(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(w)||c.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var d=[],e=[],f={},g=(c.scope||h._scopeName)+"Type",k="data-"+(c.scope||h._scopeName)+"-",m=k+"type",w=k+"textdir",k=k+"mixins",q=b.firstChild,s=c.inherited;if(!s){var B=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&B(a.parentNode,b)},s={dir:B(b,"dir"),lang:B(b,"lang"),textDir:B(b,w)},u;for(u in s)s[u]||
delete s[u]}for(var s={inherited:s},x,r;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(x&&"script"==q.nodeName.toLowerCase())(t=q.getAttribute("type"))&&/^dojo\/\w/i.test(t)&&x.push(q),q=q.nextSibling;else if(r)q=q.nextSibling;else{var t=q.getAttribute(m)||q.getAttribute(g);u=q.firstChild;if(!t&&(!u||3==u.nodeType&&!u.nextSibling))q=q.nextSibling;else{r=null;if(t){var G=q.getAttribute(k);x=G?[t].concat(G.split(/\s*,\s*/)):[t];try{r=v(x,c.contextRequire)}catch(W){}r||n.forEach(x,function(a){~a.indexOf("/")&&
!f[a]&&(f[a]=!0,e[e.length]=a)});G=r&&!r.prototype._noScript?[]:null;s={types:x,ctor:r,parent:s,node:q,scripts:G};s.inherited=l(s);d.push(s)}else s={node:q,scripts:x,parent:s};x=G;r=q.stopParser||r&&r.prototype.stopParser&&!c.template;q=u}}else{if(!s||!s.node)break;q=s.node.nextSibling;r=!1;s=s.parent;x=s.scripts}var O=new p;e.length?(c.contextRequire||a)(e,function(){O.resolve(n.filter(d,function(a){if(!a.ctor)try{a.ctor=v(a.types,c.contextRequire)}catch(b){}for(var l=a.parent;l&&!l.types;)l=l.parent;
var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!c.template);a.instantiate=!l||l.instantiate&&l.instantiateChildren;return a.instantiate}))}):O.resolve(d);return O.promise},_require:function(b,c){var l=s("{"+b.innerHTML+"}"),d=[],e=[],f=new p,g=c&&c.contextRequire||a,k;for(k in l)d.push(k),e.push(l[k]);g(e,function(){for(var a=0;a<d.length;a++)m.setObject(d[a],arguments[a]);f.resolve(arguments)});return f.promise},_scanAmd:function(a,b){var c=new p,l=c.promise;c.resolve(!0);
var d=this;u("script[type\x3d'dojo/require']",a).forEach(function(a){l=l.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return l},parse:function(a,b){var c;!b&&a&&a.rootNode?(b=a,c=b.rootNode):a&&m.isObject(a)&&!("nodeType"in a)?b=a:c=a;c=c?k.byId(c):f.body();b=b||{};var l=b.template?{template:!0}:{},d=[],e=this,g=this._scanAmd(c,b).then(function(){return e.scan(c,b)}).then(function(a){return e._instantiate(a,l,b,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});m.mixin(d,g);return d}};h.parser=B;g.parseOnLoad&&r(100,B,"parse");return B})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(a,h){var m={};a.setObject("dojo.date.stamp",m);m.fromISOString=function(a,g){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var k=m._isoRegExp.exec(a),f=null;if(k){k.shift();k[1]&&k[1]--;k[6]&&(k[6]*=1E3);g&&(g=new Date(g),h.forEach(h.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return g["get"+a]()}),function(a,b){k[b]=k[b]||a}));f=new Date(k[0]||1970,k[1]||0,k[2]||1,k[3]||0,k[4]||0,k[5]||0,k[6]||0);100>k[0]&&f.setFullYear(k[0]||1970);var e=0,d=k[7]&&k[7].charAt(0);"Z"!=d&&(e=60*(k[8]||0)+(Number(k[9])||0),"-"!=d&&(e*=-1));d&&(e-=f.getTimezoneOffset());e&&f.setTime(f.getTime()+6E4*e)}return f};m.toISOString=function(a,g){var k=function(a){return 10>a?"0"+a:a};g=g||{};var f=[],e=g.zulu?"getUTC":"get",d="";"time"!=g.selector&&(d=a[e+"FullYear"](),d=["0000".substr((d+
"").length)+d,k(a[e+"Month"]()+1),k(a[e+"Date"]())].join("-"));f.push(d);if("date"!=g.selector){d=[k(a[e+"Hours"]()),k(a[e+"Minutes"]()),k(a[e+"Seconds"]())].join(":");e=a[e+"Milliseconds"]();g.milliseconds&&(d+="."+(100>e?"0":"")+k(e));if(g.zulu)d+="Z";else if("time"!=g.selector)var e=a.getTimezoneOffset(),c=Math.abs(e),d=d+((0<e?"-":"+")+k(Math.floor(c/60))+":"+k(c%60));f.push(d)}return f.join("T")};return m})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(a,
h,m){var n={show:function(a){if(a=n.getNode(a))a.style.display="block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=n.getNode(a))a.style.display="none"},toggle:function(a){if(a=n.getNode(a))a.style.display="none"===a.style.display?"block":"none"},documentBox:8>=m("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(g){if(g=this.getNode(g)){var k=0,f=0,e=0,d=0,c=0,b=0;return[a(g,
"touchstart",function(a){k=a.touches[0].screenX;f=a.touches[0].screenY;e=g.scrollWidth;d=g.scrollHeight;c=g.clientWidth;b=g.clientHeight}),a(g,"touchmove",function(a){a.preventDefault();var m=g.firstChild;m instanceof Text&&(m=g.childNodes[1]);var n=m._currentX||0,t=m._currentY||0,n=n+(a.touches[0].screenX-k);0<n?n=0:0>n&&Math.abs(n)+c>e&&(n=-1*(e-c));m._currentX=n;t+=a.touches[0].screenY-f;0<t?t=0:0>t&&Math.abs(t)+b>d&&(t=-1*(d-b));m._currentY=t;h.set(m,{"-webkit-transition-property":"-webkit-transform",
"-webkit-transform":"translate("+n+"px, "+t+"px)"});k=a.touches[0].screenX;f=a.touches[0].screenY})]}}};return n})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(a){return a.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessoire ../request ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w){var B={},y=function(a){var b=(new k(a.owningSystemUrl)).host;a=(new k(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},C=function(a,b){return!(!y(a)||!b||!n.some(b,function(b){return b.test(a.server)}))},E,z=a(v,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=m.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,
tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],registerServers:function(a){var b=this.serverInfos;b?(a=n.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):this.serverInfos=a;n.forEach(a,function(a){a.owningSystemUrl&&
this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=p.request.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);t.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));t.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=n.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):this.oAuthInfos=a},registerToken:function(a){var b=this._sanitizeUrl(a.server),
c=this.findServerInfo(b),l=!0,d;c||(c=new u,c.server=this._getServerInstanceRoot(b),c.tokenServiceUrl=this._getTokenSvcUrl(b),c.hasPortal=!0,this.registerServers([c]));(d=this.findCredential(b,a.userId))?(m.mixin(d,a),l=!1):(d=new E({userId:a.userId,server:c.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(b)?"server":"portal"}),d.resources=[b],this.credentials.push(d));d.emitTokenChange(!1);l||d.refreshServerTokens()},toJSON:function(){return q.fixJson({serverInfos:n.map(this.serverInfos,
function(a){return a.toJSON()}),oAuthInfos:n.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:n.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){m.isString(a)&&(a=JSON.parse(a));var b=a.serverInfos,c=a.oAuthInfos;a=a.credentials;if(b){var l=[];n.forEach(b,function(a){a.server&&a.tokenServiceUrl&&l.push(a.declaredClass?a:new u(a))});l.length&&this.registerServers(l)}if(c){var d=[];n.forEach(c,function(a){a.appId&&d.push(a.declaredClass?a:new w(a))});
d.length&&this.registerOAuthInfos(d)}a&&n.forEach(a,function(a){a.userId&&(a.server&&a.token&&a.expires&&a.expires>(new Date).getTime())&&(a=a.declaredClass?a:new E(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);n.some(this.serverInfos,function(c){this._hasSameServerInstance(c.server,a)&&(b=c);return!!b},this);return b},findOAuthInfo:function(a){var b;a=this._sanitizeUrl(a);n.some(this.oAuthInfos,function(c){this._hasSameServerInstance(c.portalUrl,
a)&&(b=c);return!!b},this);return b},findCredential:function(a,b){var c,l;a=this._sanitizeUrl(a);l=this._isServerRsrc(a)?"server":"portal";b?n.some(this.credentials,function(d){this._hasSameServerInstance(d.server,a)&&(b===d.userId&&d.scope===l)&&(c=d);return!!c},this):n.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&(-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===l)&&(c=b);return!!c},this);return c},getCredential:function(a,b){var c,l,d=!0;q.isDefined(b)&&(m.isObject(b)?
(c=!!b.token,l=b.error,d=!1!==b.prompt):c=b);a=this._sanitizeUrl(a);var e=new g(r._dfdCanceller),f=this._isAdminResource(a),k=c&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;c=c?this.findCredential(a):null;if(k||c)return d=Error("You are currently signed in as: '"+(k&&k.email||c&&c.userId)+"'. You do not have access to this resource: "+a),d.code="IdentityManagerBase.1",d.httpCode=l&&l.httpCode,d.messageCode=l?l.messageCode:null,d.subcode=l?l.subcode:null,d.details=l?l.details:null,d.log=
h.isDebug,e.errback(d),e.promise;if(l=this._findCredential(a,b))return e.callback(l),e.promise;if(l=this.findServerInfo(a))!l.hasServer&&this._isServerRsrc(a)&&(l._restInfoDfd=this._getTokenSvcUrl(a,!0),l.hasServer=!0);else{k=this._getTokenSvcUrl(a);if(!k)return d=Error("Unknown resource - could not find token service endpoint."),d.code="IdentityManagerBase.2",d.log=h.isDebug,e.errback(d),e.promise;l=new u;l.server=this._getServerInstanceRoot(a);m.isString(k)?(l.tokenServiceUrl=k,d&&!this._findOAuthInfo(a)&&
(l._selfDfd=this._getPortalSelf(k.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)),l.hasPortal=!0):(l._restInfoDfd=k,l.hasServer=!0);this.registerServers([l])}return this._enqueue(a,l,b,e,f)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,
c,l){var d,e,f,g,p,w,n=new k(window.location.href.toLowerCase()),q=this._getEsriAuthCookie(),s,u=!c;g=a.shortLivedTokenValidity;var y;c&&(y=b.id.tokenValidity||g||b.id.defaultTokenValidity,y>g&&(y=g));l&&(d=l.isAdmin,e=l.serverUrl,f=l.token,w=l.ssl,a.customParameters=l.customParameters);if(d)g=a.adminTokenServiceUrl;else{g=a.tokenServiceUrl;p=new k(g.toLowerCase());q&&(s=(s=q.auth_tier)&&s.toLowerCase());if(("web"===s||a.webTierAuth)&&l&&l.serverUrl&&!w&&"http"===n.scheme&&(t.hasSameOrigin(n.uri,
g,!0)||"https"===p.scheme&&n.host===p.host&&"7080"===n.port&&"7443"===p.port))g=g.replace(/^https:/i,"http:").replace(/:7443/i,":7080");u&&this._rePortalTokenSvc.test(a.tokenServiceUrl)&&(g=g.replace(/\/rest/i,""))}return x(g,m.mixin({query:m.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:e,token:f,expiration:y,referer:d||this._rePortalTokenSvc.test(a.tokenServiceUrl)?window.location.host:null,client:d?"referer":null,f:"json"},a.customParameters),method:!u?"post":
"auto",disableIdentityLookup:!0,useProxy:this._useProxy(a,l),responseType:"json",callbackParamName:u?"callback":void 0},l&&l.ioArgs)).then(function(b){b=b.data;if(!b||!b.token)return b=Error("Unable to generate token"),b.code="IdentityManagerBase.3",b.log=h.isDebug,b;var l=a.server;B[l]||(B[l]={});c&&(B[l][c.username]=c.password);b.validity=y;return b})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1})},setRedirectionHandler:function(a){this._redirectFunc=
a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();n.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=d.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,
b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));if(b&&(!f("ie")||8<f("ie")))window.location.hash=""}},_findCredential:function(a,b){var c=-1,l,d,e,f,g=b&&b.token;l=b&&b.resource;var k=this._isServerRsrc(a)?"server":"portal",p=n.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,a)&&b.scope===k},this);a=l||a;if(p.length)if(1===p.length)if(l=p[0],e=(d=(f=this.findServerInfo(l.server))&&
f.owningSystemUrl)&&this.findCredential(d,l.userId),c=this._getIdenticalSvcIdx(a,l),g)-1!==c&&(l.resources.splice(c,1),this._removeResource(a,e));else return-1===c&&l.resources.push(a),this._addResource(a,e),l;else{var h,m;n.some(p,function(b){m=this._getIdenticalSvcIdx(a,b);return-1!==m?(h=b,e=(d=(f=this.findServerInfo(h.server))&&f.owningSystemUrl)&&this.findCredential(d,h.userId),c=m,!0):!1},this);if(g)h&&(h.resources.splice(c,1),this._removeResource(a,e));else if(h)return this._addResource(a,
e),h}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||n.some(this.oAuthInfos,function(c){this._isIdProvider(c.portalUrl,a)&&(b=c);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&b.isAdmin&&!t.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&
10.1==a.currentVersion&&!t.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new k(a);return a.scheme+"://"+a.host+(q.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&(c=b.length-1);return-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();
a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(a){a=t.fixUrl(m.trim(a));var b=(p.request.proxyUrl||"").toLowerCase(),c=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==c&&(a=a.substring(c+b.length+1));return t.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,
b){var c;if(this._isRESTService(a)&&this._isRESTService(b)){var l=this._getSuffix(a).toLowerCase(),d=this._getSuffix(b).toLowerCase();c=l===d;c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=l.replace(c,"$1")===d.replace(c,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:!this._isServerRsrc(a)&&(!this._isServerRsrc(b)&&this._isPortalDomain(a))&&(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var b=(new k(a)).authority,c=this._portalConfig,l=-1!==b.indexOf(this._agolSuffix);
!l&&c&&(l=this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a));if(!l){if(!this._arcgisUrl&&(c=m.getObject("esri.arcgis.utils.arcgisUrl")))this._arcgisUrl=(new k(c)).authority;this._arcgisUrl&&(l=this._arcgisUrl.toLowerCase()===b)}l||(l=n.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this));return l=l||this._agsPortal.test(a)},_isIdProvider:function(a,b){var c=-1,l=-1;n.forEach(this._gwDomains,function(d,e){-1===c&&d.regex.test(a)&&(c=e);-1===l&&d.regex.test(b)&&
(l=e)});var d=!1;if(-1<c&&-1<l)if(0===c||4===c){if(0===l||4===l)d=!0}else if(1===c){if(1===l||2===l)d=!0}else 2===c?2===l&&(d=!0):3===c&&3===l&&(d=!0);if(!d){var e=this.findServerInfo(b),f=e&&e.owningSystemUrl;f&&(y(e)&&this._isPortalDomain(f)&&this._isIdProvider(a,f))&&(d=!0)}return d},_isPublic:function(a){a=this._sanitizeUrl(a);return n.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var c=-1;n.some(b.resources,function(b,l){return this._isIdenticalService(a,
b)?(c=l,!0):!1},this);return c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,c;if((b=this._isRESTService(a))||this._isAdminResource(a))return c=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,c)+"/admin/generateToken",a=a.substring(0,c)+"/rest/info",c=x(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),c.adminUrl_=b,c;if(this._isPortalDomain(a)){var l=
"";n.some(this._gwDomains,function(b){b.regex.test(a)&&(l=b.tokenServiceUrl);return!!l});l||n.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(l=b+this._gwTokenUrl);return!!l},this);l||(c=a.toLowerCase().indexOf("/sharing"),-1!==c&&(l=a.substring(0,c)+this._gwTokenUrl));l||(l=this._getOrigin(a)+this._gwTokenUrl);l&&(b=(new k(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(l=l.replace(/:7080/i,":7443")),l=l.replace(/http:/i,"https:"));return l}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return x(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback",crossOrigin:!1,disableIdentityLookup:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(e.isSupported()){var b=this._getAllCookies("esri_auth"),
c;for(c=0;c<b.length;c++){var l=JSON.parse(b[c]);if(l.portalApp){a=l;break}}}return a},_getAllCookies:function(a){var b=[],l=document.cookie.match(RegExp("(?:^|; )"+c.escapeString(a)+"\x3d([^;]*)","g"));if(l)for(a=0;a<l.length;a++){var d=l[a],e=d.indexOf("\x3d");-1<e&&(d=d.substring(e+1),b.push(decodeURIComponent(d)))}return b},_doPortalSignIn:function(a){if(e.isSupported()){var b=this._getEsriAuthCookie(),c=this._portalConfig,l=window.location.href,d=this.findServerInfo(a);if(this.useSignInPage&&
(c||this._isPortalDomain(l)||b)&&(d?d.hasPortal||d.owningSystemUrl&&this._isPortalDomain(d.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(l,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||t.hasSameOrigin(l,a,!0)))return!0}return!1},_checkProtocol:function(a,b,c,l){var d=!0;l=l?b.adminTokenServiceUrl:b.tokenServiceUrl;if(0===m.trim(l).toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&
(!p.request.useCors||!t.canUseXhr(l)&&!t.canUseXhr(t.getProxyUrl(!0).path)))d=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,d||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=h.isDebug,console.log(a.message),c(a));return d},_enqueue:function(a,b,c,l,d,e){l||(l=new g(r._dfdCanceller));l.resUrl_=a;l.sinfo_=b;l.options_=c;l.admin_=d;l.refresh_=e;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),
this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(l)):this._xoReqs.push(l):this._doSignIn(l);return l.promise},_doSignIn:function(a){this._busy=a;var b=this,c=function(c){var l=a.options_&&a.options_.resource,d=a.resUrl_,e=a.refresh_,f=!1;-1===n.indexOf(b.credentials,c)&&(e&&-1!==n.indexOf(b.credentials,e)?(e.userId=c.userId,e.token=c.token,e.expires=c.expires,e.validity=c.validity,e.ssl=c.ssl,e.creationTime=c.creationTime,f=!0,c=e):
b.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(l||d);c.scope=b._isServerRsrc(d)?"server":"portal";c.emitTokenChange();var l=b._soReqs,g={};b._soReqs=[];n.forEach(l,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var b=this._getSuffix(a.resUrl_);g[b]||(g[b]=!0,c.resources.push(a.resUrl_))}},b);a.callback(c);n.forEach(l,function(a){a.callback(c)});b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;f||b.emit("credential-create",{credential:c});b._soReqs.length&&b._doSignIn(b._soReqs.shift());
b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(c){a.errback(c);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length&&b._doSignIn(b._soReqs.shift());b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},e=function(e,f,g,k){var p=a.sinfo_,m=!a.options_||!1!==a.options_.prompt;b._doPortalSignIn(a.resUrl_)?(f=b._getEsriAuthCookie(),e=b._portalConfig,f?c(new E({userId:f.email,server:p.server,token:f.token,expires:null})):m?(m="",f=window.location.href,m=b.signInPage?b.signInPage:e?e.baseUrl+
e.signin:b._isIdProvider(f,a.resUrl_)?b._getOrigin(f)+"/home/signin.html":p.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,"https:"),e&&!1===e.useSSL&&(m=m.replace(/https:/i,"http:")),0===f.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(p=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),p.code="IdentityManagerBase.5",p.log=h.isDebug,d(p)):
b._redirectFunc?b._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:f,resourceUrl:a.resUrl_,serverInfo:p}):window.location=m+"?returnUrl\x3d"+window.escape(f)):(p=Error("User is not signed in."),p.code="IdentityManagerBase.6",p.log=h.isDebug,d(p))):e?c(new E({userId:e,server:p.server,token:g,expires:q.isDefined(k)?Number(k):null,ssl:!!f})):w?(e=w._oAuthCred,e||(f=new l(w,window.localStorage),g=new l(w,window.sessionStorage),f.isValid()&&g.isValid()?f.expires>g.expires?(e=f,g.destroy()):
(e=g,f.destroy()):e=f.isValid()?f:g,w._oAuthCred=e),e.isValid()?c(new E({userId:e.userId,server:p.server,token:e.token,expires:e.expires,ssl:e.ssl,_oAuthCred:e})):b._oAuthHash&&b._oAuthHash.state.portalUrl===w.portalUrl?(m=b._oAuthHash,p=new E({userId:m.username,server:p.server,token:m.access_token,expires:(new Date).getTime()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:e}),e.storage=m.persist?window.localStorage:window.sessionStorage,e.token=p.token,e.expires=p.expires,
e.userId=p.userId,e.ssl=p.ssl,e.save(),b._oAuthHash=null,c(p)):m?a._pendingDfd=b.oAuthSignIn(a.resUrl_,p,w,a.options_).then(c,d):(p=Error("User is not signed in."),p.code="IdentityManagerBase.6",p.log=h.isDebug,d(p))):m?b._checkProtocol(a.resUrl_,p,d,a.admin_)&&(m=a.options_,a.admin_&&(m=m||{},m.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,p,m).then(c,d)):(p=Error("User is not signed in."),p.code="IdentityManagerBase.6",p.log=h.isDebug,d(p))},f=function(){var l=a.sinfo_,e=l.owningSystemUrl,f=a.options_,
g,k,p;f&&(g=f.token,k=f.error);p=b._findCredential(e,{token:g,resource:a.resUrl_});!p&&y(l)&&n.some(b.credentials,function(a){this._isIdProvider(e,a.server)&&(p=a);return!!p},b);p?(f=b.findCredential(a.resUrl_,p.userId))?c(f):C(l,b._legacyFed)?(f=p.toJSON(),f.server=l.server,f.resources=null,c(new E(f))):(a._pendingDfd=b.generateToken(b.findServerInfo(p.server),null,{serverUrl:a.resUrl_,token:p.token,ssl:p.ssl})).then(function(b){c(new E({userId:p.userId,server:l.server,token:b.token,expires:q.isDefined(b.expires)?
Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},d):(b._busy=null,g&&(a.options_.token=null),(a._pendingDfd=b.getCredential(e.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,token:g,error:k})).then(function(c){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){d(a)}))},g=a.sinfo_.owningSystemUrl,k=this._isServerRsrc(a.resUrl_),p=a.sinfo_._restInfoDfd,w=this._findOAuthInfo(a.resUrl_);p?p.then(function(c){var l=a.sinfo_;l.adminTokenServiceUrl=l._restInfoDfd.adminUrl_;
l._restInfoDfd=null;l.tokenServiceUrl=m.getObject("authInfo.tokenServicesUrl",!1,c)||m.getObject("authInfo.tokenServiceUrl",!1,c)||m.getObject("tokenServiceUrl",!1,c);l.shortLivedTokenValidity=m.getObject("authInfo.shortLivedTokenValidity",!1,c);l.currentVersion=c.currentVersion;l.owningTenant=c.owningTenant;(c=l.owningSystemUrl=c.owningSystemUrl)&&b._portals.push(c);k&&c?f():e()},function(){a.sinfo_._restInfoDfd=null;var b=Error("Unknown resource - could not find token service endpoint.");b.code=
"IdentityManagerBase.2";b.log=h.isDebug;d(b)}):k&&g?f():a.sinfo_._selfDfd?(g=function(c){a.sinfo_._selfDfd=null;var l=c&&c.user&&c.user.username,d=c&&c.allSSL;a.sinfo_.webTierAuth=!!l;l&&b.normalizeWebTierAuth?(a.sinfo_._tokenDfd=b.generateToken(a.sinfo_,null,{ssl:d}),c=function(b){a.sinfo_._tokenDfd=null;e(l,d,b&&b.token,b&&b.expires)},a.sinfo_._tokenDfd.then(c,c)):e(l,d)},a.sinfo_._selfDfd.then(g,g)):e()}});E=a([s,v],{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(a){m.mixin(this,
a);this.resources=this.resources||[];q.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,c=this.resources&&this.resources[0],l=b.id.findServerInfo(this.server),d=l&&l.owningSystemUrl,e=!!d&&"server"===this.scope,f=e&&C(l,b.id._legacyFed),g=e&&b.id.findServerInfo(d),k,p=(k=l.webTierAuth)&&b.id.normalizeWebTierAuth,h=B[this.server],h=h&&h[this.userId],m={username:this.userId,password:h},w;if(!k||p)if(e&&!g&&n.some(b.id.serverInfos,
function(a){b.id._isIdProvider(d,a.server)&&(g=a);return!!g}),k=g&&b.id.findCredential(g.server,this.userId),!e||k)if(f)k.refreshToken();else{if(e)w={serverUrl:c,token:k&&k.token,ssl:k&&k.ssl};else if(p)m=null,w={ssl:this.ssl};else if(h)this.isAdmin&&(w={isAdmin:!0});else{var s;c&&(c=b.id._sanitizeUrl(c),this._enqueued=1,s=b.id._enqueue(c,l,null,null,this.isAdmin,this),s.then(function(){a._enqueued=0;a.refreshServerTokens()}).then(null,function(){a._enqueued=0}));return s}return b.id.generateToken(e?
g:l,e?null:m,w).then(function(b){a.token=b.token;a.expires=q.isDefined(b.expires)?Number(b.expires):null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.emitTokenChange();a.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&n.forEach(b.id.credentials,function(a){var c=b.id.findServerInfo(a.server),l=c&&c.owningSystemUrl;if(a!==this&&a.userId===this.userId&&l&&"server"===a.scope&&(b.id._hasSameServerInstance(this.server,l)||b.id._isIdProvider(l,
this.server)))C(c,b.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken()},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var c=this.server&&b.id.findServerInfo(this.server),l=(c=c&&c.owningSystemUrl)&&b.id.findServerInfo(c);!1!==a&&((!c||"portal"===this.scope||l&&l.webTierAuth&&!b.id.normalizeWebTierAuth)&&(q.isDefined(this.expires)||q.isDefined(this.validity)))&&this._startRefreshTimer();
this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=n.indexOf(b.id.credentials,this);-1<a&&b.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=q.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b);return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(m.hitch(this,this.refreshToken),b>a?b-a:b)}});z.Credential=E;return z})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,h){a.cookie=function(a,n,g){var k=document.cookie,f;
if(1==arguments.length)f=(f=k.match(RegExp("(?:^|; )"+h.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(f[1]):void 0;else{g=g||{};k=g.expires;if("number"==typeof k){var e=new Date;e.setTime(e.getTime()+864E5*k);k=g.expires=e}k&&k.toUTCString&&(g.expires=k.toUTCString());n=encodeURIComponent(n);var k=a+"\x3d"+n,d;for(d in g)k+="; "+d,e=g[d],!0!==e&&(k+="\x3d"+e);document.cookie=k}return f};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=
"CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return a.cookie})},"esri/identity/ServerInfo":function(){define(["../core/declare","dojo/_base/lang","../core/lang"],function(a,h,m){return a(null,{declaredClass:"esri.ServerInfo",constructor:function(a){h.mixin(this,a)},toJSON:function(){return m.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,
shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}})})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],function(a){return a(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,m){this.oAuthInfo=a;this.storage=
m;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var m=(new Date).getTime();this.expires>m&&(this.expires-m)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl){var n=a[m.authNamespace];n||(n=a[m.authNamespace]={});n[m.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(g){console.log(g)}}}},
destroy:function(){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl&&this.storage){var n=a[m.authNamespace];if(n){delete n[m.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(g){console.log(g)}}}m&&(this.oAuthInfo=m._oAuthCred=null)},_init:function(){var a=this._load(),m=this.oAuthInfo;if(m&&(m.authNamespace&&m.portalUrl)&&(a=a[m.authNamespace]))if(a=a[m.portalUrl])this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId},_load:function(){var a=
{};if(this.storage){var m=this.storage.getItem("esriJSAPIOAuth");if(m)try{a=JSON.parse(m)}catch(n){console.log(n)}}return a}})})},"esri/identity/OAuthInfo":function(){define(["../core/lang","../core/declare","dojo/_base/lang"],function(a,h,m){return h(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(a){m.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,showSocialLogins:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",
popupWindowFeatures:"height\x3d480,width\x3d800,location,resizable,scrollbars,status"},a)},_oAuthCred:null,toJSON:function(){return a.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,showSocialLogins:this.showSocialLogins,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(a,h,m,n,g,k,f,e,d,c){n("dijit-legacy-requires")&&f(0,function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});f=h("dijit.form.Button"+(n("dojo-bidi")?"_NoBidi":""),[e,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},_fillContent:function(a){if(a&&(!this.params||!("label"in
this.params)))if(a=k.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&m.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){g.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=k.trim(this.containerNode.innerText||this.containerNode.textContent||
""))}});n("dojo-bidi")&&(f=h("dijit.form.Button",f,{_setLabelAttr:function(a){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return f})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(a,
h,m,n,g,k,f,e){h("dijit-legacy-requires")&&n(0,function(){require(["dijit/form/_FormValueWidget"])});return a("dijit.form._FormWidget",[g,f,k,e],{setDisabled:function(a){m.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){m.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){m.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!h("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(a,h,m,n,g,k,f,e,d,c){return h("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",
"aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);m.set(this.focusNode,"disabled",b);this.valueNode&&m.set(this.valueNode,"disabled",b);this.focusNode.setAttribute("aria-disabled",b?"true":"false");b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:
"focusNode",a.forEach(g.isArray(b)?b:[b],function(a){a=this[a];e("webkit")||c.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.own(f(this.focusNode,"focus",function(){h.remove();c.remove()}))[0],k=e("pointer-events")?"pointerup":e("MSPointer")?"MSPointerUp":e("touch-events")?"touchend, mouseup":"mouseup",h=this.own(f(this.ownerDocumentBody,
k,g.hitch(this,function(a){h.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=n.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,c){return"number"==typeof a&&"number"==typeof c?isNaN(a)&&isNaN(c)?
0:a-c:a>c?1:a<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,c){if(void 0==this._lastValueReported&&(null===c||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||c||void 0===c)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(a,h,m,n){var g=a("dijit.form._ButtonMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var f=a.defaultPrevented;if(!f&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var d=n.byNode(e);if(d&&"function"==typeof d._onSubmit){d._onSubmit(a);a.preventDefault();f=!0;break}}return!f},
postCreate:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a}});m("dojo-bidi")&&(g=a("dijit.form._ButtonMixin",g,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return g})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(a,h,m,n,g,k,f){var e;return e=a("dijit.form.ValidationTextBox",g,{templateString:f,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,c){c!=e.prototype[a]&&(h.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,c){return RegExp("^(?:"+this._computeRegexp(c)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?c:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var c=
"",b=this.disabled||this.isValid(a);b&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),f=!b&&a&&this._isValidSubset();this._set("state",b?"":((!this._hasBeenBlurred||a)&&e||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&f,c=this.getErrorMessage(a)):"Incomplete"==this.state?(c=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):e&&(c=this.getPromptMessage(a));this.set("message",c);return b},displayMessage:function(a){a&&this.focused?k.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):k.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=m.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var c=this.pattern;"function"==typeof c&&(c=c.call(this,a));if(c!=this._lastRegExp){var b="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=a;break;case ")":b+="|$)";break;default:b+=
"(?:"+a+"|$)"}});try{"".search(b)}catch(e){b=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+b+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",
a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){k.hide(this.domNode);this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b){e=a("dijit.form.TextBox"+(f("dojo-bidi")?"_NoBidi":""),[e,d],{templateString:c,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:f("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>f("ie")&&this.defer(function(){try{var a=m.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=h.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(k(this._phspan,"mousedown",function(a){a.preventDefault()}),k(this._phspan,"touchend, pointerup, MSPointerUp",g.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){n.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){n.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),f("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>f("ie")&&(e.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},b._setSelectionRange=d._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});f("dojo-bidi")&&(e=a("dijit.form.TextBox",e,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return e})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,h,m,n){return a("dijit.form._FormValueWidget",[m,n],{_layoutHackIE7:function(){if(7==
h("ie"))for(var a=this.domNode,k=a.parentNode,f=a.firstChild||a,e=f.style.filter,d=this;k&&0==k.clientHeight;)(function(){var a=d.connect(k,"onscroll",function(){d.disconnect(a);f.style.filter=(new Date).getMilliseconds();d.defer(function(){f.style.filter=e})})})(),k=k.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(a,h,m,n,g,k){return a("dijit.form._FormValueMixin",k,{readOnly:!1,
_setReadOnlyAttr:function(a){h.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,e){this._handleOnChange(a,e)},_handleOnChange:function(a,e){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},
"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(a,h,m,n,g,k,f,e){var d=h("dijit.form._TextBoxMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,d){var e;void 0!==a&&(e=this.filter(a),"string"!=
typeof d&&(d=null!==e&&("number"!=typeof e||!isNaN(e))?this.filter(this.format(e,this.constraints)):"",0!=this.compare(e,this.filter(this.parse(d,this.constraints)))&&(d=null)));if(null!=d&&("number"!=typeof d||!isNaN(d))&&this.textbox.value!=d)this.textbox.value=d,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=
typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){this._processInput(a);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(a){this._refreshState();this._set("displayedValue",
this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(f(this.textbox,"keydown, keypress, paste, cut, input, compositionend",k.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;switch(b){case g.SHIFT:case g.ALT:case g.CTRL:case g.META:case g.CAPS_LOCK:case g.NUM_LOCK:case g.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case g.NUMPAD_0:case g.NUMPAD_1:case g.NUMPAD_2:case g.NUMPAD_3:case g.NUMPAD_4:case g.NUMPAD_5:case g.NUMPAD_6:case g.NUMPAD_7:case g.NUMPAD_8:case g.NUMPAD_9:case g.NUMPAD_MULTIPLY:case g.NUMPAD_PLUS:case g.NUMPAD_ENTER:case g.NUMPAD_MINUS:case g.NUMPAD_PERIOD:case g.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==g.SPACE)return;b=!1;for(var d in g)if(g[d]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==g.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var e={faux:!0},f;for(f in a)/^(layer[XY]|returnValue|keyLocation)$/.test(f)||(d=a[f],"function"!=typeof d&&"undefined"!=typeof d&&(e[f]=d));k.mixin(e,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());e._wasConsumed||this.defer(function(){this._onInput(e)})})),f(this.domNode,"keypress",function(a){a.stopPropagation()}))},
_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=k.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=
this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=f.once(this.domNode,"mouseup, touchend",k.hitch(this,function(a){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value=
"";this.inherited(arguments)}});n("dojo-bidi")&&(d=h("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=e._setSelectionRange=function(a,b,d){a.setSelectionRange&&a.setSelectionRange(b,d)};d.selectInputText=e.selectInputText=function(a,b,
e){a=m.byId(a);isNaN(b)&&(b=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),d._setSelectionRange(a,b,e)}catch(f){}};return d})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x){function v(){}
var l=h("dijit._MasterTooltip",[u,t],{duration:p.defaultDuration,templateString:s,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new r(this.domNode);this.fadeIn=m.fadeIn({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onShow")});this.fadeOut=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onHide")})},show:function(a,b,c,l,d,g,k){if(!this.aroundNode||!(this.aroundNode===b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=
arguments;else{this.containerNode.innerHTML=a;d&&this.set("textDir",d);this.containerNode.align=l?"right":"left";var p=q.around(this.domNode,b,c&&c.length?c:w.defaultPosition,!l,e.hitch(this,"orient")),h=p.aroundNodePos;"M"==p.corner.charAt(0)&&"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=h.y+(h.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=h.x+(h.w-this.connectorNode.offsetWidth>>
1)-p.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");f.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=g||v;this.onMouseLeave=k||v}},orient:function(a,c,l,d,e){this.connectorNode.style.top="";var f=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft",
"BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[c+"-"+l];this.domNode.style.width="auto";var g=k.position(this.domNode);if(b("ie")||b("trident"))g.w+=2;var p=Math.min(Math.max(d,1),g.w);k.setMarginBox(this.domNode,{w:p});"B"==l.charAt(0)&&"B"==c.charAt(0)?(a=k.position(a),c=this.connectorNode.offsetHeight,a.h>f?(this.connectorNode.style.top=f-(e.h+c>>1)+"px",this.connectorNode.style.bottom=""):
(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-c/2,0),a.h-c)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-d)},_onShow:function(){b("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=v},_onHide:function(){this.domNode.style.cssText=
"";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});b("dojo-bidi")&&l.extend({_setAutoTextDir:function(b){this.applyTextDir(b);a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});x.showTooltip=function(b,c,d,e,f,g,k){d&&(d=a.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||
a}));w._masterTT||(x._masterTT=w._masterTT=new l);return w._masterTT.show(b,c,d,e,f,g,k)};x.hideTooltip=function(a){return w._masterTT&&w._masterTT.hide(a)};var w=h("dijit.Tooltip",u,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this._connectIds=a.filter(e.isArrayLike(b)?b:b?[b]:[],function(a){return n.byId(a,this.ownerDocument)},this);this._connections=
a.map(this._connectIds,function(a){a=n.byId(a,this.ownerDocument);var b=this.selector,l=b?function(a){return c.selector(b,a)}:function(a){return a},f=this;return[c(a,l(d.enter),function(){f._onHover(this)}),c(a,l("focusin"),function(){f._onHover(this)}),c(a,l(d.leave),e.hitch(f,"_onUnHover")),c(a,l("focusout"),e.hitch(f,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(b){b=b.id||b;-1==a.indexOf(this._connectIds,b)&&this.set("connectId",this._connectIds.concat(b))},removeTarget:function(b){b=
a.indexOf(this._connectIds,b.id||b);0<=b&&(this._connectIds.splice(b,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);g.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(e.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==
a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(w.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");
return}w.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,e.hitch(this,"set","state","SHOWING"),e.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state",
"HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this.inherited(arguments)}});w._MasterTooltip=l;w.show=x.showTooltip;w.hide=x.hideTooltip;w.defaultPosition=["after-centered","before-centered"];return w})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),
function(a,h,m,n,g,k,f){function e(c,b,d,e){var f=k.getEffectiveBox(c.ownerDocument);(!c.parentNode||"body"!=String(c.parentNode.tagName).toLowerCase())&&g.body(c.ownerDocument).appendChild(c);var n=null;a.some(b,function(a){var b=a.corner,l=a.pos,g=0,k={w:{L:f.l+f.w-l.x,R:l.x-f.l,M:f.w}[b.charAt(1)],h:{T:f.t+f.h-l.y,B:l.y-f.t,M:f.h}[b.charAt(0)]},m=c.style;m.left=m.right="auto";d&&(g=d(c,a.aroundCorner,b,k,e),g="undefined"==typeof g?0:g);var s=c.style,r=s.display,z=s.visibility;"none"==s.display&&
(s.visibility="hidden",s.display="");m=h.position(c);s.display=r;s.visibility=z;r={L:l.x,R:l.x-m.w,M:Math.max(f.l,Math.min(f.l+f.w,l.x+(m.w>>1))-m.w)}[b.charAt(1)];z={T:l.y,B:l.y-m.h,M:Math.max(f.t,Math.min(f.t+f.h,l.y+(m.h>>1))-m.h)}[b.charAt(0)];l=Math.max(f.l,r);s=Math.max(f.t,z);r=Math.min(f.l+f.w,r+m.w);z=Math.min(f.t+f.h,z+m.h);r-=l;z-=s;g+=m.w-r+(m.h-z);if(null==n||g<n.overflow)n={corner:b,aroundCorner:a.aroundCorner,x:l,y:s,w:r,h:z,overflow:g,spaceAvailable:k};return!g});n.overflow&&d&&d(c,
n.aroundCorner,n.corner,n.spaceAvailable,e);b=n.y;var r=n.x,s=g.body(c.ownerDocument);/relative|absolute/.test(m.get(s,"position"))&&(b-=m.get(s,"marginTop"),r-=m.get(s,"marginLeft"));s=c.style;s.top=b+"px";s.left=r+"px";s.right="auto";return n}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return f.place={at:function(c,b,f,g,k){f=a.map(f,function(a){var c={corner:a,aroundCorner:d[a],pos:{x:b.x,y:b.y}};g&&(c.pos.x+="L"==a.charAt(1)?g.x:-g.x,c.pos.y+="T"==a.charAt(0)?g.y:-g.y);return c});return e(c,f,k)},
around:function(c,b,d,f,g){function k(a,b){z.push({aroundCorner:a,corner:b,pos:{x:{L:B,R:B+C,M:B+(C>>1)}[a.charAt(1)],y:{T:y,B:y+E,M:y+(E>>1)}[a.charAt(0)]}})}var r;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(r=h.position(b,!0),/^(above|below)/.test(d[0])){var s=h.getBorderExtents(b),x=b.firstChild?h.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},v=h.getBorderExtents(c),l=c.firstChild?h.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};r.y+=Math.min(s.t+x.t,v.t+l.t);r.h-=
Math.min(s.t+x.t,v.t+l.t)+Math.min(s.b+x.b,v.b+l.b)}}else r=b;if(b.parentNode){s="absolute"==m.getComputedStyle(b).position;for(b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){x=h.position(b,!0);v=m.getComputedStyle(b);/relative|absolute/.test(v.position)&&(s=!1);if(!s&&/hidden|auto|scroll/.test(v.overflow)){var l=Math.min(r.y+r.h,x.y+x.h),w=Math.min(r.x+r.w,x.x+x.w);r.x=Math.max(r.x,x.x);r.y=Math.max(r.y,x.y);r.h=l-r.y;r.w=w-r.x}"absolute"==v.position&&(s=!0);b=b.parentNode}}var B=r.x,y=r.y,
C="w"in r?r.w:r.w=r.width,E="h"in r?r.h:(n.deprecated("place.around: dijit/place.__Rectangle: { x:"+B+", y:"+y+", height:"+r.height+", width:"+C+" } has been deprecated.  Please use { x:"+B+", y:"+y+", h:"+r.height+", w:"+C+" }","","2.0"),r.h=r.height),z=[];a.forEach(d,function(a){var b=f;switch(a){case "above-centered":k("TM","BM");break;case "below-centered":k("BM","TM");break;case "after-centered":b=!b;case "before-centered":k(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":k(b?
"TL":"TR",b?"TR":"TL");k(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":k(b?"BL":"BR",b?"TL":"TR");k(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":k(b?"TL":"TR",b?"BL":"BR");k(b?"TR":"TL",b?"BR":"BL");break;default:k(a.aroundCorner,a.corner)}});c=e(c,z,g,{w:C,h:E});c.aroundNodePos=r;return c}}})},"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,d,f,g){var k=this._oAuthDfd=new e;k.resUrl_=a;k.sinfo_=d;k.oinfo_=f;var p=!g||!1!==g.oAuthPopupConfirmation;if(!f.popup||!p)return this._doOAuthSignIn(a,d,f),k.promise;this._nls||(this._nls=b);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;d=g&&g.error;g=g&&g.token;h.hide(a.errMsg_);d&&(403==d.code&&g)&&(c.set(a.errMsg_,"innerHTML",this._nls.forbidden),h.show(a.errMsg_));a.show();
return k.promise},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=p.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=f.isDebug,c.errback(b);else{var d=c.oinfo_._oAuthCred,e=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:d});d.storage=b.persist?window.localStorage:window.sessionStorage;d.token=e.token;d.expires=e.expires;d.userId=e.userId;d.ssl=e.ssl;d.save();c.callback(e)}},_createOAuthDialog:function(){var a=this._nls,b=m.substitute(a,this._oAuthDialogContent),c=new g({title:a.title,content:b,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=c.esriIdMgr_._oAuthDfd;c.hide_();c.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
c.esriIdMgr_._oAuthDfd;c.esriIdMgr_._oAuthDfd=null;c.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=f.isDebug;a.errback(b)},hide_:function(){h.hide(c.errMsg_);c.hide();g._DialogLevelManager.hide(c)}}),a=c.domNode;c.btnSubmit_=k.byNode(d.query(".esriIdSubmit",a)[0]);c.btnCancel_=k.byNode(d.query(".esriIdCancel",a)[0]);c.errMsg_=d.query(".esriErrorMsg",a)[0];c.connect(c.btnSubmit_,"onClick",c.execute_);c.connect(c.btnCancel_,"onClick",c.onCancel);c.connect(c,"onCancel",c.cancel_);return c},
_doOAuthSignIn:function(a,b,c){var d=this,e={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?n.getAbsoluteUrl(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(e.force_login=!0);c.showSocialLogins&&(e.showSocialLogins=!0);var g=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",l=g+"?"+p.objectToQuery(e);if(c.popup){var k;7===q("ie")?(k=window.open(c.popupCallbackUrl,
"esriJSAPIOAuth",c.popupWindowFeatures),k.location=l):k=window.open(l,"esriJSAPIOAuth",c.popupWindowFeatures);k?(k.focus(),this._oAuthDfd.oAuthWin_=k,this._oAuthIntervalId=setInterval(function(){if(k.closed){clearInterval(d._oAuthIntervalId);var a=d._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=f.isDebug;a.errback(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=f.isDebug,this._oAuthDfd.errback(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:e,
authorizeUrl:g,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=l}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Accessoire ../core/jsonDictionary ../geometry/Extent ../geometry/support/webMercatorUtils ../geometry/SpatialReference dojo/_base/lang".split(" "),function(a,h,m,n,g,k,f,e,d,c,b){var p=f({title:"title",created:"created",type:"type",owner:"owner",
avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function f(b){a.call(this);this.start=this.sortOrder=this.sortField=this.query=this.num=this.extent=this.disableExtraQuery=null}m(f,a);f.prototype._sortOrderSetter=function(a,b){return"asc"===a||"desc"===a?a:b};f.prototype.clone=function(){return new f({disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,
sortOrder:this.sortOrder,start:this.start})};f.prototype.toRequestOptions=function(a,e){var f;if(this.extent){var g=d.project(this.extent,c.WGS84);g&&(f=g.xmin+","+g.ymin+","+g.xmax+","+g.ymax)}g=this.query;!this.disableExtraQuery&&a.extraQuery&&(g="("+g+")"+a.extraQuery);f={bbox:f,q:g,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(f.sortField=p.toJSON(this.sortField),f.sortOrder=this.sortOrder);return{query:b.mixin(e,f)}};n([g.shared("esri.portal.PortalQueryParams")],
f.prototype,"declaredClass",void 0);n([g.property({value:!1})],f.prototype,"disableExtraQuery",void 0);n([g.property({type:e})],f.prototype,"extent",void 0);n([g.property({value:10})],f.prototype,"num",void 0);n([g.property()],f.prototype,"query",void 0);n([g.property()],f.prototype,"sortField",void 0);n([g.property({value:"asc"})],f.prototype,"sortOrder",void 0);n([g.property({value:1})],f.prototype,"start",void 0);return f=n([g.subclass()],f)}(k)})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Accessoire".split(" "),
function(a,h,m,n,g,k){return function(a){function e(d){a.call(this);this.total=this.results=this.queryParams=this.nextQueryParams=null}m(e,a);n([g.shared("esri.portal.PortalQueryResult")],e.prototype,"declaredClass",void 0);n([g.property()],e.prototype,"nextQueryParams",void 0);n([g.property()],e.prototype,"queryParams",void 0);n([g.property()],e.prototype,"results",void 0);n([g.property()],e.prototype,"total",void 0);return e=n([g.subclass()],e)}(k)})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Error ../core/JSONSupporter ./PortalFolder ./PortalGroup ../core/promiseUtils ../core/requireUtils dojo/promise/all".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){return function(f){function h(){f.call(this);this.username=this.url=this.userContentUrl=this.thumbnailUrl=this.portal=this.modified=this.created=null}m(h,f);h.prototype._thumbnailUrlGetter=function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b):null};h.prototype._userContentUrlGetter=function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null};h.prototype._urlGetter=function(){var a=this.get("portal.restUrl");
return a?a+"/community/users/"+this.username:null};h.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e={method:"post"};c&&(e.query=c.toJSON(),"string"===typeof d?e.query.text=d:d&&"function"===typeof d.toJSON&&(e.query.text=JSON.stringify(d)));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};h.prototype.deleteItem=function(a){var b=this.userContentUrl;
a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=null})};h.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=e.fromJSON(b);b.portal=a.portal;return b}):[]})};h.prototype.fetchItems=function(c){var d=this;c||(c={});var e=this.userContentUrl;c.folder&&(e+="/"+c.folder.id);var f;return b.when(a,
"./PortalItem").then(function(a){f=a;return d.portal._request(e,{query:{folders:!1,num:c.num||10,start:c.start||1}})}).then(function(a){var b;return a&&a.items?(b=a.items.map(function(a){a=f.fromJSON(a);a.portal=d.portal;a.load();return a}),p(b).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};h.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new d({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):
c.reject(new k("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};h.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};n([g.shared("esri.portal.PortalUser")],h.prototype,"declaredClass",void 0);n([g.property({type:Date})],h.prototype,"created",void 0);n([g.property()],h.prototype,"favGroupId",void 0);n([g.property({type:Date})],h.prototype,"modified",void 0);n([g.property()],h.prototype,"portal",void 0);
n([g.property()],h.prototype,"thumbnail",void 0);n([g.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",void 0);n([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"userContentUrl",void 0);n([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"url",void 0);n([g.property()],h.prototype,"username",void 0);return h=n([g.subclass()],h)}(f)})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Error ../core/JSONSupporter".split(" "),
function(a,h,m,n,g,k,f){return function(a){function d(c){a.call(this);this.username=this.url=this.title=this.portal=this.id=this.created=null}m(d,a);d.prototype._urlGetter=function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null};d.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};n([g.shared("esri.portal.PortalFolder")],d.prototype,"declaredClass",void 0);n([g.property({type:Date})],
d.prototype,"created",void 0);n([g.property()],d.prototype,"id",void 0);n([g.property()],d.prototype,"portal",void 0);n([g.property()],d.prototype,"title",void 0);n([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],d.prototype,"url",void 0);n([g.property()],d.prototype,"username",void 0);return d=n([g.subclass()],d)}(f)})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessoireSupport/typescript ../core/Error ../core/JSONSupporter ./PortalQueryParams".split(" "),
function(a,h,m,n,g,k,f,e){return function(a){function c(b){a.call(this);this.url=this.title=this.tags=this.snippet=this.portal=this.owner=this.modified=this.isInvitationOnly=this.id=this.description=this.created=this.access=null}m(c,a);c.prototype._urlGetter=function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null};c.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};c.prototype.toJSON=function(){throw new k("internal:not-yet-implemented",
"PortalGroup.toJSON is not yet implemented");};c.prototype.queryItems=function(a){a=a?a.clone():new e;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};n([g.shared("esri.portal.PortalGroup")],c.prototype,"declaredClass",void 0);n([g.property()],c.prototype,"access",void 0);n([g.property({type:Date})],c.prototype,"created",void 0);n([g.property()],c.prototype,"description",void 0);n([g.property()],c.prototype,"id",void 0);n([g.property()],c.prototype,"isInvitationOnly",
void 0);n([g.property({type:Date})],c.prototype,"modified",void 0);n([g.property()],c.prototype,"owner",void 0);n([g.property()],c.prototype,"portal",void 0);n([g.property()],c.prototype,"snippet",void 0);n([g.property()],c.prototype,"tags",void 0);n([g.property()],c.prototype,"title",void 0);n([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,"url",void 0);return c=n([g.subclass()],c)}(f)})},"esri/Basemap":function(){define("require exports ./core/tsSupport/extendsHelper ./core/tsSupport/decorateHelper ./core/accessoireSupport/typescript ./support/basemapDefinitions ./core/Collection ./core/collectionUtils ./core/Error ./core/Evented ./core/JSONSupporter ./core/LoadableAccessoire ./core/promiseUtils ./core/requireUtils ./portal/PortalItem".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t){var r=0;return function(b){function h(a){b.call(this);this.title=this.thumbnailUrl=this.resourceInfo=this.referenceLayers=this.portalItem=this.id=this.baseLayers=null}m(h,b);h.prototype.getDefaults=function(){return{id:Date.now().toString(16)+"-basemap-"+r++,baseLayers:new f,referenceLayers:new f}};h.prototype.initialize=function(){this.resourceInfo&&this.read(this.resourceInfo)};h.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this};
h.prototype.clone=function(){var a={id:this.id,title:this.title};this.resourceInfo||this.portalItem?(a.portalItem=this.portalItem,a.resourceInfo=this.resourceInfo):(a.baseLayers=this.baseLayers.clone(),a.referenceLayers=this.referenceLayers.clone());return new h(a)};h.prototype.toJSON=function(){throw new d("internal:not-yet-implemented","Basemap.toJSON is not yet implemented");};h.prototype._loadFromSource=function(){var a=this.resourceInfo,b=this.portalItem;return a?this._loadFromJSON(a):b?this._loadFromItem(b):
q.resolve(null)};h.prototype._loadFromJSON=function(b){var c=this,d=this.portalItem&&this.portalItem.portal;return u.when(a,"./portal/creators/layersCreator").then(function(a){var e=[];if(b.baseMapLayers&&Array.isArray(b.baseMapLayers)){var f={defaultLayerType:"DefaultTiledLayer",portal:d},g=a.populateOperationalLayers(c.baseLayers,b.baseMapLayers.filter(function(a){return!a.isReference}),f);e.push.apply(e,g);a=a.populateOperationalLayers(c.referenceLayers,b.baseMapLayers.filter(function(a){return a.isReference}),
f);e.push.apply(e,a)}return q.eachAlways(e)}).then(function(){})};h.prototype._loadFromItem=function(a){var b=this;return a.load().then(function(a){return a.fetchData()}).then(function(a){b.resourceInfo=a.baseMap;b.read(b.resourceInfo);return b._loadFromJSON(b.resourceInfo)})};h.fromJSON=function(a){return!a?null:new h({resourceInfo:a})};h.fromId=function(a){return(a=k[a])?h.fromJSON(a):null};n([g.shared("esri.Basemap")],h.prototype,"declaredClass",void 0);n([g.shared({reader:{exclude:["baseMapLayers"]}})],
h.prototype,"classMetadata",void 0);n([g.property({setter:e.referenceSetter})],h.prototype,"baseLayers",void 0);n([g.property()],h.prototype,"id",void 0);n([g.property({type:t})],h.prototype,"portalItem",void 0);n([g.property({setter:e.referenceSetter})],h.prototype,"referenceLayers",void 0);n([g.property()],h.prototype,"resourceInfo",void 0);n([g.property({value:null})],h.prototype,"thumbnailUrl",void 0);n([g.property({value:""})],h.prototype,"title",void 0);return h=n([g.subclass([c,p])],h)}(b)})},
"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(a,h,m){h.referenceSetter=function(a,g){return g?(g.removeAll(),g.addMany(a),g):new m(a)}})},"esri/support/groundUtils":function(){define(["require","exports","../core/accessorSupport/ensureType","../Ground","../layers/ElevationLayer"],function(a,h,m,n,g){var k={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};h.ensureType=function(a){var e;
"string"===typeof a?a in k?(a=k[a],a=new g({id:a.id,url:a.url}),e=new n({layers:[a]})):console.warn("Unable to find ground definition for: "+a+'. Try "world-elevation"'):e=m.default(n,a);return e}})},"esri/Ground":function(){define("require exports ./core/tsSupport/extendsHelper ./core/tsSupport/decorateHelper ./core/Accessoire ./core/Collection ./core/collectionUtils ./layers/Layer ./core/accessoireSupport/typescript".split(" "),function(a,h,m,n,g,k,f,e,d){return function(a){function b(b){a.call(this);
this.layers=null}m(b,a);b.prototype.getDefaults=function(a){return{layers:[]}};n([d.shared("esri.Ground")],b.prototype,"declaredClass",void 0);n([d.property({type:k.ofType(e),setter:f.referenceSetter})],b.prototype,"layers",void 0);return b=n([d.subclass()],b)}(g)})},"esri/layers/ElevationLayer":function(){define("dojo/_base/lang ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/PortalLayer ../request ../core/promiseUtils".split(" "),function(a,h,m,n,g,k,f){return h.createSubclass([m,
n,g],{declaredClass:"esri.layers.ElevationLayer",portalLoaderModule:"portal/loaders/ElevationLayerLoader",viewModulePaths:{"3d":"../views/3d/layers/ElevationLayerView3D"},normalizeCtorArgs:function(e,d){return"string"===typeof e?a.mixin({},{url:e},d):e},load:function(){this.addResolvingPromise(this.loadFromPortal(this._fetchImageService.bind(this)))},_fetchImageService:function(){return f.resolve().then(function(){return this.resourceInfo||k(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),
responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data)}.bind(this))}})})},"esri/Viewpoint":function(){define(["./core/JSONSupporter","./Camera","./core/lang","./geometry/support/jsonUtils"],function(a,h,m,n){var g=a.createSubclass({declaredClass:"esri.Viewpoint",classMetadata:{properties:{camera:{type:h}}},rotation:0,_rotationSetter:function(a){a%=360;0>a&&(a+=360);return a},scale:0,targetGeometry:null,
_targetGeometryReader:function(a){return n.fromJSON(a)},camera:null,_cameraReader:function(a){return h.fromJSON(a)},toJSON:function(){var a={scale:this.scale,rotation:this.rotation,targetGeometry:this.targetGeometry?this.targetGeometry.toJSON():void 0,camera:this.camera?this.camera.toJSON():void 0};a.camera&&delete a.camera.fov;return m.fixJson(a)},clone:function(){return new g({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?
this.camera.clone():null})}});return g})},"esri/Camera":function(){define(["dojo/_base/lang","./core/JSONSupporter","./core/lang","./geometry/Point","./views/3d/support/mathUtils"],function(a,h,m,n,g){var k=h.createSubclass({declaredClass:"esri.Camera",classMetadata:{reader:{exclude:["fov"]}},getDefaults:function(a){if(!a.position)return{position:new n([0,0,0])}},normalizeCtorArgs:function(f,e,d,c){var b={};if(a.isObject(f)&&m.isDefined(f))if(m.isDefined(f.position)||m.isDefined(f.tilt)||m.isDefined(f.heading)||
m.isDefined(f.fov))m.isDefined(f.position)&&(b.position=new n(f.position)),m.isDefined(f.heading)&&(b.heading=f.heading),m.isDefined(f.tilt)&&(b.tilt=f.tilt),m.isDefined(f.fov)&&(b.fov=f.fov);else if(m.isDefined(f)&&(m.isDefined(f.x)||Array.isArray(f)))b.position=new n(f);m.isDefined(e)&&(b.heading=e);m.isDefined(d)&&(b.tilt=d);m.isDefined(c)&&(b.fov=c);return b},position:null,_positionReader:function(a,e){return n.fromJSON(a)},heading:0,_headingSetter:function(a){return g.cyclicalDeg.normalize(a)},
tilt:0,_tiltSetter:function(a){return Math.min(180,Math.max(-180,a))},fov:55,equals:function(a){return!a?!1:this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position)},clone:function(){return new k({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})},toJSON:function(){var a={position:this.position.toJSON(),heading:this.heading,tilt:this.tilt};return m.fixJson(a)}});return k})},"esri/views/3d/support/mathUtils":function(){define(["../lib/glMatrix"],
function(a){var h=a.vec3d,m=a.mat4d,n=h.create(),g=m.create(),k={deg2rad:function(a){return a*Math.PI/180},rad2deg:function(a){return 180*a/Math.PI},asin:function(a){return Math.asin(1<a?1:-1>a?-1:a)},acos:function(a){return Math.acos(1<a?1:-1>a?-1:a)},log2:Math.log2||function(a){return Math.log(a)/Math.LN2},fovx2fovy:function(a,e,d){return 2*Math.atan(d*Math.tan(0.5*a)/e)},fovy2fovx:function(a,e,d){return 2*Math.atan(e*Math.tan(0.5*a)/d)},lerp:function(a,e,d){return a+(e-a)*d},slerp:function(a,e,
d,c){c||(c=a);var b=h.length(a),k=h.length(e),q=h.dot(a,e)/b/k;0.999999999999>q&&(h.cross(a,e,n),m.identity(g),m.rotate(g,d*Math.acos(q),n),m.multiplyVec3(g,a,c));h.scale(c,((1-d)*b+d*k)/b)},slerpOrLerp:function(a,e,d,c,b){var k=h.length(a),q=h.length(e);h.cross(a,e,n);h.length(n)/k/q>b?(e=Math.acos(h.dot(a,e)/k/q),m.identity(g),m.rotate(g,d*e,n),m.multiplyVec3(g,a,c),h.scale(c,((1-d)*k+d*q)/k)):h.lerp(a,e,d,c)},clamp:function(a,e,d){return a<e?e:a>d?d:a},isFinite:Number.isFinite||function(a){return"number"===
typeof a&&isFinite(a)},isNaN:Number.isNaN||function(a){return a!==a},makePiecewiseLinearFunction:function(a){var e=a.length;return function(d){var c=0;if(d<=a[0][0])return a[0][1];if(d>=a[e-1][0])return a[e-1][1];for(;d>a[c][0];)c++;var b=a[c][0];d=(b-d)/(b-a[c-1][0]);return d*a[c-1][1]+(1-d)*a[c][1]}},vectorEquals:function(a,e){if(null==a||null==e)return a!==e;if(a.length!==e.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==e[d])return!1;return!0},floatEqualRelative:function(a,e,d){void 0===
d&&(d=1E-6);if(isNaN(a)||isNaN(e))return!1;if(a===e)return!0;var c=Math.abs(a-e),b=Math.abs(a),g=Math.abs(e);if(0===a||0===e||1E-12>b&&1E-12>g){if(c>0.01*d)return!1}else if(c/(b+g)>d)return!1;return!0},floatEqualAbsolute:function(a,e,d){void 0===d&&(d=1E-6);return isNaN(a)||isNaN(e)?!1:(a>e?a-e:e-a)<=d},Cyclical:function(a,e){this.min=a;this.max=e;this.range=e-a;this.ndiff=function(a,c){c=c||0;return Math.ceil((a-c)/this.range)*this.range+c};this._normalize=function(a,c,b,e){e=e||0;b-=e;b<a?b+=this.ndiff(a-
b):b>c&&(b-=this.ndiff(b-c));return b+e};this.normalize=function(a,c){return this._normalize(this.min,this.max,a,c)};this.clamp=function(d,c){c=c||0;return k.clamp(d-c,a,e)+c};this.monotonic=function(a,c,b){return a<c?c:c+this.ndiff(a-c,b)};this.minimalMonotonic=function(a,c,b){return this._normalize(a,a+this.range,c,b)};this.center=function(a,c,b){c=this.monotonic(a,c,b);return this.normalize((a+c)/2,b)};this.diff=function(a,c,b){return this.monotonic(a,c,b)-a};this.contains=function(a,c,b){c=this.minimalMonotonic(a,
c);b=this.minimalMonotonic(a,b);return b>a&&b<c}}};k.cyclical2PI=new k.Cyclical(0,2*Math.PI);k.cyclicalPI=new k.Cyclical(-Math.PI,Math.PI);k.cyclicalDeg=new k.Cyclical(0,360);return k})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var a={};(function(a,m){m(a,!0);m(a,!1)})(a,function(a,m){var n={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);n.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-0.5*
c*d*d)}}else n.invsqrt=function(a){return 1/Math.sqrt(a)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=m?Float32Array:Array);var k={create:function(a){var b=new g(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var d=new g(3);d[0]=a;d[1]=b;d[2]=c;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+
b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],
b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(1===f)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=e*b-a*
g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+
c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e}},f=null,e=new g(4);k.unproject=function(a,b,c,d,g){g||(g=a);f||(f=t.create());var k=f;e[0]=2*(a[0]-d[0])/d[2]-1;e[1]=2*(a[1]-d[1])/d[3]-1;e[2]=2*a[2]-1;e[3]=1;t.multiply(c,b,k);if(!t.inverse(k))return null;t.multiplyVec4(k,e);if(0===e[3])return null;g[0]=e[0]/e[3];g[1]=e[1]/e[3];g[2]=e[2]/e[3];return g};var d=
k.createFrom(1,0,0),c=k.createFrom(0,1,0),b=k.createFrom(0,0,1);k.rotationTo=function(a,e,f){f||(f=r.create());var g=k.dot(a,e),p=k.create();if(1<=g)r.set(s,f);else if(-0.999999>g)k.cross(d,a,p),1E-6>p.length&&k.cross(c,a,p),1E-6>p.length&&k.cross(b,a,p),k.normalize(p),r.fromAxisAngle(p,Math.PI,f);else{var g=Math.sqrt(2*(1+g)),h=1/g;k.cross(a,e,p);f[0]=p[0]*h;f[1]=p[1]*h;f[2]=p[2]*h;f[3]=0.5*g;r.normalize(f)}1<f[3]?f[3]=1:-1>f[3]&&(f[3]=-1);return f};var p=k.create(),q=k.create();k.project=function(a,
b,c,d){d||(d=a);k.direction(b,c,p);k.subtract(a,b,q);a=k.dot(p,q);k.scale(p,a,d);k.add(d,b,d)};k.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var u={create:function(a){var b=new g(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,e,f,k,p,h){var m=new g(9);m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=e;m[5]=f;m[6]=k;m[7]=p;m[8]=h;return m},determinant:function(a){var b=
a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},inverse:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],p=a[6],h=a[7],m=a[8],n=m*g-k*h,q=-m*f+k*p,s=h*f-g*p,v=c*n+d*q+e*s;if(!v)return null;v=1/v;b||(b=u.create());b[0]=n*v;b[1]=(-m*d+e*h)*v;b[2]=(k*d-e*g)*v;b[3]=q*v;b[4]=(m*c-e*p)*v;b[5]=(-k*c+e*f)*v;b[6]=s*v;b[7]=(-h*c+d*p)*v;b[8]=(g*c-d*f)*v;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],p=a[5],h=a[6],m=
a[7];a=a[8];var n=b[0],q=b[1],s=b[2],u=b[3],v=b[4],x=b[5],r=b[6],t=b[7];b=b[8];c[0]=n*d+q*g+s*h;c[1]=n*e+q*k+s*m;c[2]=n*f+q*p+s*a;c[3]=u*d+v*g+x*h;c[4]=u*e+v*k+x*m;c[5]=u*f+v*p+x*a;c[6]=r*d+t*g+b*h;c[7]=r*e+t*k+b*m;c[8]=r*f+t*p+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[3]+b*a[6];c[1]=d*a[1]+e*a[4]+b*a[7];c[2]=d*a[2]+e*a[5]+b*a[8];return c},
set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=u.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=t.create());b[15]=1;b[14]=
0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},t={create:function(a){var b=new g(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=
arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,e,f,k,p,h,m,n,q,s,u,v,x){var r=new g(16);r[0]=a;r[1]=b;r[2]=c;r[3]=d;r[4]=e;r[5]=f;r[6]=k;r[7]=p;r[8]=h;r[9]=m;r[10]=n;r[11]=q;r[12]=s;r[13]=u;r[14]=v;r[15]=x;return r},createFromMatrixRowMajor:function(a){var b=
new g(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new g(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=
a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=t.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,
b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],k=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=g;a[14]=k;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],k=a[6],p=a[7],h=a[8],m=a[9],n=a[10],q=a[11],s=a[12],u=a[13],v=a[14];
a=a[15];return s*m*k*e-h*u*k*e-s*g*n*e+f*u*n*e+h*g*v*e-f*m*v*e-s*m*d*p+h*u*d*p+s*c*n*p-b*u*n*p-h*c*v*p+b*m*v*p+s*g*d*q-f*u*d*q-s*c*k*q+b*u*k*q+f*c*v*q-b*g*v*q-h*g*d*a+f*m*d*a+h*c*k*a-b*m*k*a-f*c*n*a+b*g*n*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],p=a[6],h=a[7],m=a[8],n=a[9],q=a[10],s=a[11],u=a[12],v=a[13],r=a[14],x=a[15],t=c*k-d*g,I=c*p-e*g,G=c*h-f*g,W=d*p-e*k,O=d*h-f*k,M=e*h-f*p,U=m*v-n*u,ca=m*r-q*u,Z=m*x-s*u,ia=n*r-q*v,ma=n*x-s*v,ra=q*x-s*r,la=t*ra-I*ma+G*ia+
W*Z-O*ca+M*U;if(!la)return null;la=1/la;b[0]=(k*ra-p*ma+h*ia)*la;b[1]=(-d*ra+e*ma-f*ia)*la;b[2]=(v*M-r*O+x*W)*la;b[3]=(-n*M+q*O-s*W)*la;b[4]=(-g*ra+p*Z-h*ca)*la;b[5]=(c*ra-e*Z+f*ca)*la;b[6]=(-u*M+r*G-x*I)*la;b[7]=(m*M-q*G+s*I)*la;b[8]=(g*ma-k*Z+h*U)*la;b[9]=(-c*ma+d*Z-f*U)*la;b[10]=(u*O-v*G+x*t)*la;b[11]=(-m*O+n*G-s*t)*la;b[12]=(-g*ia+k*ca-p*U)*la;b[13]=(c*ia-d*ca+e*U)*la;b[14]=(-u*W+v*I-r*t)*la;b[15]=(m*W-n*I+q*t)*la;return b},toRotationMat:function(a,b){b||(b=t.create());b[0]=a[0];b[1]=a[1];b[2]=
a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=u.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],k=a[6],p=a[8],h=a[9],m=a[10],n=m*g-k*h,q=-m*f+k*p,s=h*f-g*p,v=c*n+d*q+e*s;if(!v)return null;v=1/v;b||(b=u.create());b[0]=n*v;b[1]=(-m*d+e*h)*v;b[2]=(k*d-
e*g)*v;b[3]=q*v;b[4]=(m*c-e*p)*v;b[5]=(-k*c+e*f)*v;b[6]=s*v;b[7]=(-h*c+d*p)*v;b[8]=(g*c-d*f)*v;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],p=a[5],h=a[6],m=a[7],n=a[8],q=a[9],s=a[10],u=a[11],v=a[12],r=a[13],x=a[14];a=a[15];var t=b[0],I=b[1],G=b[2],W=b[3],O=b[4],M=b[5],U=b[6],ca=b[7],Z=b[8],ia=b[9],ma=b[10],ra=b[11],la=b[12],wa=b[13],qa=b[14];b=b[15];c[0]=t*d+I*k+G*n+W*v;c[1]=t*e+I*p+G*q+W*r;c[2]=t*f+I*h+G*s+W*x;c[3]=t*g+I*m+G*u+W*a;c[4]=O*d+M*k+U*n+ca*v;c[5]=
O*e+M*p+U*q+ca*r;c[6]=O*f+M*h+U*s+ca*x;c[7]=O*g+M*m+U*u+ca*a;c[8]=Z*d+ia*k+ma*n+ra*v;c[9]=Z*e+ia*p+ma*q+ra*r;c[10]=Z*f+ia*h+ma*s+ra*x;c[11]=Z*g+ia*m+ma*u+ra*a;c[12]=la*d+wa*k+qa*n+b*v;c[13]=la*e+wa*p+qa*q+b*r;c[14]=la*f+wa*h+qa*s+b*x;c[15]=la*g+wa*m+qa*u+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];
b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b;return c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var f,g,k,p,h,m,n,q,s,u,v,r;if(!c||a===c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;f=a[0];g=a[1];k=a[2];p=a[3];h=a[4];m=a[5];n=a[6];q=a[7];s=a[8];u=a[9];v=a[10];r=a[11];c[0]=f;c[1]=g;c[2]=k;c[3]=
p;c[4]=h;c[5]=m;c[6]=n;c[7]=q;c[8]=s;c[9]=u;c[10]=v;c[11]=r;c[12]=f*d+h*e+s*b+a[12];c[13]=g*d+m*e+u*b+a[13];c[14]=k*d+n*e+v*b+a[14];c[15]=p*d+q*e+r*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];
c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){var b=Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),c=Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9]);a=Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]);return Math.max(Math.max(b,c),a)},rotate:function(a,b,c,d){var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c),k,p,h,m,n,q,s,u,v,r,x,t,I,G,W,O,M,U,ca,Z;if(!g)return null;1!==g&&(g=1/g,e*=g,f*=g,c*=g);k=Math.sin(b);p=Math.cos(b);h=1-p;b=a[0];g=a[1];m=a[2];n=a[3];q=a[4];s=a[5];u=a[6];v=a[7];r=a[8];x=a[9];t=a[10];
I=a[11];G=e*e*h+p;W=f*e*h+c*k;O=c*e*h-f*k;M=e*f*h-c*k;U=f*f*h+p;ca=c*f*h+e*k;Z=e*c*h+f*k;e=f*c*h-e*k;f=c*c*h+p;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*G+q*W+r*O;d[1]=g*G+s*W+x*O;d[2]=m*G+u*W+t*O;d[3]=n*G+v*W+I*O;d[4]=b*M+q*U+r*ca;d[5]=g*M+s*U+x*ca;d[6]=m*M+u*U+t*ca;d[7]=n*M+v*U+I*ca;d[8]=b*Z+q*e+r*f;d[9]=g*Z+s*e+x*f;d[10]=m*Z+u*e+t*f;d[11]=n*Z+v*e+I*f;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],k=a[7],p=a[8],h=a[9],m=a[10],
n=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+p*d;c[5]=f*b+h*d;c[6]=g*b+m*d;c[7]=k*b+n*d;c[8]=e*-d+p*b;c[9]=f*-d+h*b;c[10]=g*-d+m*b;c[11]=k*-d+n*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],k=a[3],p=a[8],h=a[9],m=a[10],n=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+p*-d;c[1]=f*b+h*-d;c[2]=g*b+m*-d;c[3]=k*
b+n*-d;c[8]=e*d+p*b;c[9]=f*d+h*b;c[10]=g*d+m*b;c[11]=k*d+n*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],k=a[3],p=a[4],h=a[5],m=a[6],n=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+p*d;c[1]=f*b+h*d;c[2]=g*b+m*d;c[3]=k*b+n*d;c[4]=e*-d+p*b;c[5]=f*-d+h*b;c[6]=g*-d+m*b;c[7]=k*-d+n*b;return c},frustum:function(a,b,c,d,e,f,g){g||(g=t.create());var k=b-a,p=d-c,h=f-e;g[0]=2*e/k;g[1]=0;
g[2]=0;g[3]=0;g[4]=0;g[5]=2*e/p;g[6]=0;g[7]=0;g[8]=(b+a)/k;g[9]=(d+c)/p;g[10]=-(f+e)/h;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(2*f*e)/h;g[15]=0;return g},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return t.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,g){g||(g=t.create());var k=b-a,p=d-c,h=f-e;g[0]=2/k;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/p;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/h;g[11]=0;g[12]=-(a+b)/k;g[13]=-(d+c)/p;g[14]=-(f+e)/h;g[15]=1;return g},lookAt:function(a,b,c,d){d||
(d=t.create());var e,f,g,k,p,h,m,n,q=a[0],s=a[1];a=a[2];g=c[0];k=c[1];f=c[2];m=b[0];c=b[1];e=b[2];if(q===m&&s===c&&a===e)return t.identity(d);b=q-m;c=s-c;m=a-e;n=1/Math.sqrt(b*b+c*c+m*m);b*=n;c*=n;m*=n;e=k*m-f*c;f=f*b-g*m;g=g*c-k*b;(n=Math.sqrt(e*e+f*f+g*g))?(n=1/n,e*=n,f*=n,g*=n):g=f=e=0;k=c*g-m*f;p=m*e-b*g;h=b*f-c*e;(n=Math.sqrt(k*k+p*p+h*h))?(n=1/n,k*=n,p*=n,h*=n):h=p=k=0;d[0]=e;d[1]=k;d[2]=b;d[3]=0;d[4]=f;d[5]=p;d[6]=c;d[7]=0;d[8]=g;d[9]=h;d[10]=m;d[11]=0;d[12]=-(e*q+f*s+g*a);d[13]=-(k*q+p*s+
h*a);d[14]=-(b*q+c*s+m*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=t.create());var d=a[0],e=a[1],f=a[2],g=a[3],k=d+d,p=e+e,h=f+f;a=d*k;var m=d*p,d=d*h,n=e*p,e=e*h,f=f*h,k=g*k,p=g*p,g=g*h;c[0]=1-(n+f);c[1]=m+g;c[2]=d-p;c[3]=0;c[4]=m-g;c[5]=1-(a+f);c[6]=e+k;c[7]=0;c[8]=d+p;c[9]=e-k;c[10]=1-(a+n);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+
a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var b=new g(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new g(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},s=r.identity();r.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-
c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};r.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};r.length=function(a){var b=
a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};r.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);if(0===g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=f*g;return b};r.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};r.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],k=b[1],p=
b[2];b=b[3];c[0]=d*b+a*g+e*p-f*k;c[1]=e*b+a*k+f*g-d*p;c[2]=f*b+a*p+d*k-e*g;c[3]=a*b-d*g-e*k-f*p;return c};r.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var g=a[1],k=a[2];a=a[3];var p=a*d+g*f-k*e,h=a*e+k*d-b*f,m=a*f+b*e-g*d,d=-b*d-g*e-k*f;c[0]=p*a+d*-b+h*-k-m*-g;c[1]=h*a+d*-g+m*-b-p*-k;c[2]=m*a+d*-k+p*-g-h*-b;return c};r.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};r.toMat3=function(a,
b){b||(b=u.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,k=d+d,p=e+e,h=c*g,m=c*k,c=c*p,n=d*k,d=d*p,e=e*p,g=f*g,k=f*k,f=f*p;b[0]=1-(n+e);b[1]=m+f;b[2]=c-k;b[3]=m-f;b[4]=1-(h+e);b[5]=d+g;b[6]=c+k;b[7]=d-g;b[8]=1-(h+n);return b};r.toMat4=function(a,b){b||(b=t.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,k=d+d,p=e+e,h=c*g,m=c*k,c=c*p,n=d*k,d=d*p,e=e*p,g=f*g,k=f*k,f=f*p;b[0]=1-(n+e);b[1]=m+f;b[2]=c-k;b[3]=0;b[4]=m-f;b[5]=1-(h+e);b[6]=d+g;b[7]=0;b[8]=c+k;b[9]=d-g;b[10]=1-(h+n);b[11]=0;b[12]=0;b[13]=
0;b[14]=0;b[15]=1;return b};r.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,g;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;f=Math.acos(e);g=Math.sqrt(1-e*e);if(0.0010>Math.abs(g))return d[0]=0.5*a[0]+0.5*b[0],d[1]=0.5*a[1]+0.5*b[1],d[2]=0.5*a[2]+0.5*b[2],d[3]=0.5*a[3]+0.5*b[3],d;e=Math.sin((1-c)*f)/g;c=Math.sin(c*f)/g;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};r.fromRotationMatrix=function(a,
b){b||(b=r.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=0.5*d,d=0.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],f=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*f+f]+1);b[c]=0.5*d;d=0.5/d;b[3]=(a[3*f+e]-a[3*e+f])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[f]=(a[3*f+c]+a[3*c+f])*d}return b};u.toQuat4=r.fromRotationMatrix;(function(){var a=u.create();r.fromAxes=
function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return r.fromRotationMatrix(a,e)}})();r.identity=function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.fromAngleAxis=function(a,b,c){c||(c=r.create());a*=0.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};r.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=n.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*
c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};r.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var b=new g(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new g(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===
b){var c=a[1];a[1]=a[2];a[2]=c;return a}b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=c*f-e*d;if(!g)return null;g=1/g;b[0]=f*g;b[1]=-d*g;b[2]=-e*g;b[3]=c*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=f*b[0]+a*b[2];c[3]=f*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];
var g=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*g;c[1]=d*-g+e*b;c[2]=f*b+a*g;c[3]=f*-g+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],f=a[3],g=b[0];b=b[1];c[0]=a[0]*g;c[1]=d*b;c[2]=e*g;c[3]=f*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}},v=m?"":"d";a["glMath"+v]=n;a["vec2"+v]={create:function(a){var b=new g(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},
createFrom:function(a,b){var c=new g(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},dist2:function(a,
b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*
b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+v]=k;a["vec4"+v]={create:function(a){var b=new g(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var e=new g(4);e[0]=
a;e[1]=b;e[2]=c;e[3]=d;return e},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=
a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+"]"}};a["mat2"+v]=x;a["mat3"+v]=u;a["mat4"+v]=t;a["quat4"+v]=r});return a})},"esri/geometry/support/jsonUtils":function(){define(["../Point","../Polyline","../Polygon","../Multipoint","../Extent"],function(a,h,m,n,g){function k(e){if(!e)return null;if(e){if(void 0!==e.x&&void 0!==e.y)return a.fromJSON(e);if(void 0!==e.paths)return h.fromJSON(e);if(void 0!==e.rings)return m.fromJSON(e);if(void 0!==e.points)return n.fromJSON(e);if(void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax)return g.fromJSON(e)}return null}
var f={esriGeometryPoint:a,esriGeometryPolyline:h,esriGeometryPolygon:m,esriGeometryEnvelope:g,esriGeometryMultipoint:n};return{fromJSON:k,fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(d){console.warn(d.stack)}return k(a)},getJsonType:function(e){return e instanceof a?"esriGeometryPoint":e instanceof h?"esriGeometryPolyline":e instanceof m?"esriGeometryPolygon":e instanceof g?"esriGeometryEnvelope":e instanceof n?"esriGeometryMultipoint":null},getGeometryType:function(a){return a&&
f[a]||null}}})},"esri/geometry/Polyline":function(){define("../core/declare dojo/_base/array dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(a,h,m,n,g,k,f,e,d){var c=a(k,{declaredClass:"esri.geometry.Polyline",classMetadata:{properties:{cache:{dependsOn:["hasM","hasZ","paths"]},extent:{dependsOn:["cache"]}}},getDefaults:function(a){return{paths:[]}},normalizeCtorArgs:function(a,c){var d=null,e=void 0,f=void 0,k=null;a&&!Array.isArray(a)?
(d=a.paths?a.paths:null,c||(a.spatialReference?c=a.spatialReference:a.paths||(c=a)),e=a.hasZ,f=a.hasM):d=a;d=d||[];c=c||g.WGS84;d.length&&(d[0]&&null!=d[0][0]&&"number"==typeof d[0][0])&&(d=[d]);if(k=d[0]&&d[0][0])void 0===e&&void 0===f?(e=2<k.length,f=!1):void 0===e?e=!f&&3<k.length:void 0===f&&(f=!e&&3<k.length);return{paths:d,spatialReference:c,hasZ:e,hasM:f}},_extent:null,_path:0,_extentGetter:function(){function a(b){return function(a,c){return void 0===a?c:void 0===c?a:b(a,c)}}var c=this.paths,
d=c.length;if(!d||!c[0].length)return null;var f,g,k,h,m,n,l,w,B,y,C,E,z=n=c[0][0][0],L=l=c[0][0][1],H,K,$=a(Math.min),R=a(Math.max),N=this.spatialReference,Q=[],F,D,S,X,ha,I,G,W,O=this.hasZ,M=this.hasM,U=O?3:2;for(y=0;y<d;y++){f=c[y];F=D=f[0]&&f[0][0];S=X=f[0]&&f[0][1];E=f.length;G=W=ha=I=void 0;for(C=0;C<E;C++)g=f[C],k=g[0],h=g[1],z=$(z,k),L=$(L,h),n=R(n,k),l=R(l,h),F=$(F,k),S=$(S,h),D=R(D,k),X=R(X,h),O&&2<g.length&&(m=g[2],H=$(H,m),w=R(w,m),ha=$(ha,m),I=R(I,m)),M&&g.length>U&&(g=g[U],K=$(K,m),
B=R(B,m),G=$(G,g),W=R(W,g));Q.push(new e({xmin:F,ymin:S,zmin:ha,mmin:G,xmax:D,ymax:X,zmax:I,mmax:W,spatialReference:N?N.clone():null}))}c=new e({xmin:z,ymin:L,xmax:n,ymax:l,spatialReference:N?N.toJSON():null});O&&(c.zmin=H,c.zmax=w);M&&(c.mmin=K,c.mmax=B);c._partwise=1<Q.length?Q:null;return c},paths:null,type:"polyline",addPath:function(a){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];h.forEach(a,this._addPoint,this);return this},clone:function(){var a=new c;a.spatialReference=
this.spatialReference;a.paths=m.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a},getPoint:function(a,c){if(this._validateInputs(a,c)){var d=this.paths[a][c],e=this.hasZ,g=this.hasM;return e&&g?new f(d[0],d[1],d[2],d[3],this.spatialReference):e?new f(d[0],d[1],d[2],void 0,this.spatialReference):g?new f(d[0],d[1],void 0,d[2],this.spatialReference):new f(d[0],d[1],this.spatialReference)}},insertPoint:function(a,c,e){if(this._validateInputs(a)&&n.isDefined(c)&&0<=c&&c<=this.paths[a].length)return this.clearCache(),
d.updateSupportFromPoint(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[a].splice(c,0,e),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var c,d=a.length,e=this.spatialReference;for(c=0;c<d;c++)a[c]=new f(a[c],e);return a}},removePoint:function(a,c){if(this._validateInputs(a,c))return this.clearCache(),new f(this.paths[a].splice(c,1)[0],this.spatialReference)},setPoint:function(a,c,e){if(this._validateInputs(a,c))return this.clearCache(),
d.updateSupportFromPoint(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[a][c]=e,this},toJSON:function(){var a=this.spatialReference,a={paths:this.paths,spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_initPathPointsToArray:function(a){for(var c=0;c<a.paths.length;c++)a.paths[c]=h.map(a.paths[c],function(c){d.updateSupportFromPoint(a,c,!0);Array.isArray(c)||(a.spatialReference||(a.spatialReference=c.spatialReference),c=c.toArray());return c});return a},
_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());d.updateSupportFromPoint(this,a)},_insertPoints:function(a,c){this.clearCache();this._path=c;this.paths[this._path]||(this.paths[this._path]=[]);h.forEach(a,this._addPoint,this)},_validateInputs:function(a,c){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==c&&void 0!==a&&(0>c||c>=this.paths[a].length)?!1:!0}});return c})},"esri/geometry/support/zmUtils":function(){define([],
function(){return{updateSupportFromPoint:function(a,h,m){var n=a.hasZ,g=a.hasM;Array.isArray(h)?4===h.length&&!g&&!n?n=g=!0:3===h.length&&m&&!g?(n=!0,g=!1):3===h.length&&(g&&n)&&(n=g=!1):(n=!(!n&&h.hasZ&&(!g||h.hasM)),g=!(!g&&h.hasM&&(!n||h.hasZ)));a.hasZ=n;a.hasM=g}}})},"esri/geometry/Polygon":function(){define("dojo/_base/array dojo/_base/lang ../core/declare ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/coordsUtils ./support/mathUtils ./support/webMercatorUtils".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b){var p=function(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}},q=p(Math.min),u=p(Math.max),t=m(k,{declaredClass:"esri.geometry.Polygon",classMetadata:{properties:{cache:{dependsOn:["hasM","hasZ","rings"]},extent:{dependsOn:["cache"]},centroid:{dependsOn:["cache"]},isSelfIntersecting:{dependsOn:["cache"]}}},type:"polygon",getDefaults:function(a){return{rings:[]}},normalizeCtorArgs:function(a,b){var c=null,d=void 0,e=void 0,f=null;a&&!Array.isArray(a)?(c=
a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||g.WGS84;c.length&&(c[0]&&null!=c[0][0]&&"number"==typeof c[0][0])&&(c=[c]);if(f=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<f.length,e=!1):void 0===d?d=!e&&3<f.length:void 0===e&&(e=!d&&3<f.length);return{rings:c,spatialReference:b,hasZ:d,hasM:e}},_ring:0,_centroidGetter:function(a){var b=d.centroid([],this.rings,this.hasZ);if(isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2]))return null;
a=a||new f;a.x=b[0];a.y=b[1];a.spatialReference=this.spatialReference;this.hasZ&&(a.z=b[2]);return a},_extentGetter:function(a){var b=this.rings,c=b.length;if(!c||!b[0].length)return null;var d,f,g,k,p,h,m,n,t,H,K,$=p=b[0][0][0],R=h=b[0][0][1],N,Q,F=this.spatialReference,D=[],S,X,ha,I,G,W,O,M,U=this.hasZ,ca=this.hasM,Z=U?3:2;for(t=0;t<c;t++){d=b[t];S=X=d[0]&&d[0][0];ha=I=d[0]&&d[0][1];K=d.length;O=M=G=W=void 0;for(H=0;H<K;H++)f=d[H],g=f[0],k=f[1],$=q($,g),R=q(R,k),p=u(p,g),h=u(h,k),S=q(S,g),ha=q(ha,
k),X=u(X,g),I=u(I,k),U&&2<f.length&&(g=f[2],N=q(N,g),m=u(m,g),G=q(G,g),W=u(W,g)),ca&&f.length>Z&&(f=f[Z],Q=q(N,f),n=u(m,f),O=q(G,f),M=u(W,f));D.push(new e({xmin:S,ymin:ha,zmin:G,mmin:O,xmax:X,ymax:I,zmax:W,mmax:M,spatialReference:F}))}a=a||new e;a.xmin=$;a.ymin=R;a.xmax=p;a.ymax=h;a.spatialReference=F;U&&(a.zmin=N,a.zmax=m);ca&&(a.mmin=Q,a.mmax=n);a._partwise=1<D.length?D:null;return a},_isSelfIntersectingGetter:function(){var a=this.rings,b=a.length,d,e,f,g,k,p,h,m,n;for(g=0;g<b;g++){d=a[g];for(e=
0;e<d.length-1;e++){p=[[d[e][0],d[e][1]],[d[e+1][0],d[e+1][1]]];for(f=g+1;f<b;f++)for(k=0;k<a[f].length-1;k++)if(h=[[a[f][k][0],a[f][k][1]],[a[f][k+1][0],a[f][k+1][1]]],(m=c._getLineIntersection2(p,h))&&!(m[0]===p[0][0]&&m[1]===p[0][1]||m[0]===h[0][0]&&m[1]===h[0][1]||m[0]===p[1][0]&&m[1]===p[1][1]||m[0]===h[1][0]&&m[1]===h[1][1]))return!0}k=d.length;if(!(4>=k))for(e=0;e<k-3;e++){n=k-1;0===e&&(n=k-2);p=[[d[e][0],d[e][1]],[d[e+1][0],d[e+1][1]]];for(f=e+2;f<n;f++)if(h=[[d[f][0],d[f][1]],[d[f+1][0],
d[f+1][1]]],(m=c._getLineIntersection2(p,h))&&!(m[0]===p[0][0]&&m[1]===p[0][1]||m[0]===h[0][0]&&m[1]===h[0][1]||m[0]===p[1][0]&&m[1]===p[1][1]||m[0]===h[1][0]&&m[1]===h[1][1]))return!0}}return!1},rings:null,addRing:function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{var d=[];b[c]=d;b=0;for(c=a.length;b<c;b++)d[b]=a[b].toArray()}return this}},clone:function(){var a=new t;a.spatialReference=this.spatialReference;a.rings=h.clone(this.rings);a.hasZ=
this.hasZ;a.hasM=this.hasM;return a},contains:function(a){if(!a)return!1;b.canProject(a,this.spatialReference)&&(a=b.project(a,this.spatialReference));return d.contains(this.rings,d.fromGeom(a))},isClockwise:function(a){var b=0,c=0,d=0,e,f=a.length,g,k,p,h=this.hasZ,m=this.hasM;for(e=0;e<f;e++)g=a[e],k=a[(e+1)%f],Array.isArray(g)?(b+=g[0]*k[1]-k[0]*g[1],p=2,2<g.length&&(2<k.length&&h)&&(c+=g[0]*k[2]-k[0]*g[2],p=3),g.length>p&&(k.length>p&&m)&&(d+=g[0]*k[p]-k[0]*g[p])):(b+=g.x*k.y-k.x*g.y,g.hasZ&&
k.hasZ&&(c+=g.x*k.z-k.x*g.z),g.hasM&&k.hasM&&(d+=g.x*k.m-k.x*g.m));return 0>=b&&0>=c&&0>=d},getPoint:function(a,b){if(this._validateInputs(a,b)){var c=this.rings[a][b],d=this.hasZ,e=this.hasM;return d&&!e?new f(c[0],c[1],c[2],void 0,this.spatialReference):e&&d?new f(c[0],c[1],void 0,c[2],this.spatialReference):d&&e?new f(c[0],c[1],c[2],c[3],this.spatialReference):new f(c[0],c[1],this.spatialReference)}},insertPoint:function(a,b,c){if(this._validateInputs(a)&&n.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),
this.rings[a].splice(b,0,c),this},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new f(this.rings[a].splice(b,1)[0],this.spatialReference)},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new f(a[b],d);return a}},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),Array.isArray(c)||(c=c.toArray()),this.rings[a][b]=c,this},toJSON:function(){var a=
this.spatialReference,a={rings:this.rings,spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_insertPoints:function(b,c){this.clearCache();this._ring=c;this.rings[this._ring]||(this.rings[this._ring]=[]);a.forEach(b,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0}});t.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,e=a.center.m,
f=a.longAxis,g=a.shortAxis,k=a.numberOfPoints;a=a.map;var p,h,m,n=[],q=2*Math.PI/k;for(h=0;h<k;h++)p=Math.cos(h*q),m=Math.sin(h*q),p=a.toMap({x:f*p+b,y:g*m+c}),null!=d&&!p.hasZ&&(p.z=d),null!=e&&!p.hasM&&(p.m=e),n.push(p);n.push(n[0]);return new t({rings:[n],spatialReference:a.spatialReference})};t.createCircle=function(a){return t.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};t.fromExtent=function(b){var c=b.clone().normalize();b=b.spatialReference;
var d=!1,e=!1;a.map(c,function(a){a.hasZ&&(d=!0);a.hasM&&(e=!0)});c={rings:a.map(c,function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var c=(a.zmax-a.zmin)/2,f=0;f<b.length;f++)b[f].push(c);if(e&&a.hasM){a=(a.mmax-a.mmin)/2;for(f=0;f<b.length;f++)b[f].push(a)}return b}),spatialReference:b?b.toJSON():null};d&&(c.hasZ=!0);e&&(c.hasM=!0);return new t(c)};return t})},"esri/geometry/support/coordsUtils":function(){define([],function(){var a=
function(a,g,k){var f=k[0];k=k[1];for(var e=0,d,c,b,p,h=0,m=g.length;h<m;h++)if(e++,e===m&&(e=0),d=g[h][0],c=g[e][0],b=g[h][1],p=g[e][1],(b<k&&p>=k||p<k&&b>=k)&&d+(k-b)/(p-b)*(c-d)<f)a=!a;return a},h=function(a,g,k){for(var f=0,e=0,d=0,c,b,p,h,m,t,r,s,x,v=0,l=0,w=0,B=g.length-1;w<B;w++)c=g[w],b=c[0],p=c[1],h=c[2],m=g[w+1],t=m[0],r=m[1],s=m[2],x=b*r-t*p,v+=x,f+=(b+t)*x,e+=(p+r)*x,k&&(2<c.length&&2<m.length)&&(x=b*s-t*h,d+=(h+s)*x,l+=x);0<v&&(v*=-1);0<l&&(l*=-1);v?(a[0]=f,a[1]=e,a[2]=0.5*v,k?(a[3]=
d,a[4]=0.5*l):a.length=3):a.length=0;return a},m=function(a,g){for(var k=0,f=0,e=0,d=0,c=g?[0,0,0]:[0,0],b=g?[0,0,0]:[0,0],p,h,m,t=0,r=a.length;t<r-1;t++)if(p=a[t],h=a[t+1],p&&h){c[0]=p[0];c[0]=p[1];b[0]=h[0];b[0]=h[1];g&&(2<p.length&&2<h.length)&&(c[2]=p[2],b[2]=h[2]);m=b[0]-c[0];var s=b[1]-c[1],x=0;1<c.length&&1<b.length&&(x=c[2]-b[2]);if(m=Math.sqrt(m*m+s*s+x*x))k+=m,s=p[0]+0.5*(h[0]-p[0]),x=p[1]+0.5*(h[1]-p[1]),p=2<p.length&&2<h.length?[s,x,p[2]+0.5*(h[2]-p[2])]:[s,x],f+=m*p[0],e+=m*p[1],g&&2<
p.length&&(d+=m*p[2])}return 0<k?g?[f/k,e/k,d/k]:[f/k,e/k]:a.length?a[0]:null};return{fromGeom:function(a){if(!a)return null;if(Array.isArray(a))return a;var g=a.hasZ,k=a.hasM;if("point"===a.type)return k&&g?[a.x,a.y,a.z,a.m]:g?[a.x,a.y,a.z]:k?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.path.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;g=k=!1;a.map(function(a){a.hasZ&&
(g=!0);a.hasM&&(k=!0)});return a.map(function(a){var e=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(g&&a.hasZ)for(var d=0.5*(a.zmax-a.zmin),c=0;c<e.length;c++)e[c].push(d);if(k&&a.hasM){a=0.5*(a.mmax-a.mmin);for(c=0;c<e.length;c++)e[c].push(a)}return e})}return null},contains:function(h,g){if(!h)return!1;if(!Array.isArray(h[0][0]))return a(!1,h,g);for(var k=!1,f=0,e=h.length;f<e;f++)k=a(k,h[f],g);return k},centroid:function(a,g,k){for(var f=[],e,d=0,c=g.length;d<
c;d++)e=h([],g[d],k),e.length&&f.push(e);f.sort(function(a,c){var d=a[2]-c[2];0===d&&k&&(d=a[4]-c[4]);return d});a.length=k?3:2;if(f.length)g=6*f[0][2],a[0]=f[0][0]/g,a[1]=f[0][1]/g,k&&(a[2]=f[0][3]/(6*f[0][4]));else if(f=g[0]&&g[0].length?m(g[0]):null)a[0]=f[0],a[1]=f[1],k&&2<f.length&&(a[2]=f[2]);return a},isClockwise:function(a){for(var g=0,k=0,f=k+1,e=a.length;k<e;k++,f+=1%e)g+=a[k][0]*a[f][1]-a[f][0]*a[k][1];return 0>=0.5*g}}})},"esri/geometry/Multipoint":function(){define("../core/declare dojo/_base/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),
function(a,h,m,n,g,k,f){var e=a(n,{declaredClass:"esri.geometry.Multipoint",classMetadata:{properties:{cache:{dependsOn:["points","hasZ","hasM"]},extent:{dependsOn:["cache"]}}},getDefaults:function(a){return{points:[]}},normalizeCtorArgs:function(a,c){var b=null,e=void 0,f=void 0,g=null;a&&!Array.isArray(a)?(b=a.points?a.points:null,c=c||(b?a.spatialReference:a),e=a.hasZ,f=a.hasM):b=a;b=b||[];c=c||m.WGS84;if(g=b[0])void 0===e&&void 0===f?(e=2<g.length,f=!1):void 0===e?e=3<g.length:void 0===f&&(f=
3<g.length);return{points:b,spatialReference:c,hasZ:e,hasM:f}},type:"multipoint",_extentGetter:function(a){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}if(!this.points.length)return null;a=a||new k;var b=this.points,e=this.hasZ,f=this.hasM,g=b[0],h=c(Math.min),m=c(Math.max),n=w=g[0],x=B=g[1],v,l,w,B,y,C,E,z,L,H,K=e?3:2;L=0;for(H=b.length;L<H;L++)g=b[L],E=g[0],z=g[1],n=h(n,E),x=h(x,z),w=m(w,E),B=m(B,z),e&&2<g.length&&(E=g[2],v=h(v,E),y=m(y,E)),f&&g.length>K&&(g=g[K],l=h(l,
g),C=m(C,g));a.xmin=n;a.ymin=x;a.xmax=w;a.ymax=B;a.spatialReference=this.spatialReference;e?(a.zmin=v,a.zmax=y):(a.zmin=null,a.zmax=null);f?(a.mmin=l,a.mmax=C):(a.mmin=null,a.mmax=null);return a},points:null,addPoint:function(a){this.clearCache();f.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this},clone:function(){var a={points:h.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new e(a)},
getPoint:function(a){if(this._validateInputs(a)){a=this.points[a];var c,b,e=2;this.hasZ&&(c=a[2],e=3);this.hasM&&(b=a[e]);return new g({x:a[0],y:a[1],z:c,m:b,spatialReference:this.spatialReference})}},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new g(this.points.splice(a,1)[0],this.spatialReference)},setPoint:function(a,c){if(this._validateInputs(a))return this.clearCache(),f.updateSupportFromPoint(c),this.points[a]=c.toArray(),this},toJSON:function(){var a=this.spatialReference,
a={points:h.clone(this.points),spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_pointsToArrays:function(a){for(var c=0;c<a.points.length;c++){var b=a.points[c];f.updateSupportFromPoint(a,b,!0);Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),a.points[c]=b.toArray())}return a},_validateInputs:function(a){return null!=a&&0<=a&&a<this.points.length}});return e})},"esri/layers/graphics/controllers/AutoController":function(){define("require ../../../core/declare dojo/Deferred ../../../request ../../../core/Accessoire ../../../core/AccessoirePromise".split(" "),
function(a,h,m,n,g,k){return h([g,k],{initialize:function(){var a=this,e=this.layer.then(function(){return a._getFeatureCount().then(function(d){d=a._canUseSnapshot(d&&d.count)?0:1;return a._createController(d)})}).then(function(d){a.activeController=d});this.addResolvingPromise(e)},controllerModulePaths:{"0":"./SnapshotController",1:"./OnDemandController"},_getFeatureCount:function(){var a=this.layer,e=a.timeDefinition;return n(a.source.parsedUrl.path+"/query",{query:{f:"json",where:a.definitionExpression||
"1\x3d1",timeExtent:e&&e.toJSON(),returnCountOnly:!0},callbackParamName:"callback"}).then(function(a){return a.data})},_canUseSnapshot:function(a){var e=this.layer,d=e.geometryType;return("polyline"===d||"polygon"===d||"multipoint"===d)&&a<=e.maxRecordCountForAuto||"point"===d&&a<=e.maxPointCountForAuto},_createController:function(f){var e=new m;(f=this.controllerModulePaths[f])?a([f],function(a){var c=new a({layer:this.layer,layerView:this.layerView});c.then(function(){e.resolve(c)},function(a){e.reject(a)})}.bind(this)):
e.reject(Error('Module path not found for controller type: "'+this.mode+'"'));return e.promise}})})},"esri/layers/graphics/controllers/SnapshotController":function(){define("dojo/_base/lang dojo/promise/all dojo/Deferred ../../support/GraphicsManager ../../../Graphic ../../../core/Accessoire ../../../core/AccessoirePromise ../../../core/Evented ../../../core/Collection ../../../core/HandleRegistry ../../../geometry/support/scaleUtils".split(" "),function(a,h,m,n,g,k,f,e,d,c,b){return k.createSubclass([f,
e],{declaredClass:"esri.layers.graphics.controllers.SnapshotController",classMetadata:{properties:{isQueryInProgress:{dependsOn:["_queryDfd"]},graphics:{type:d.ofType(g)},extent:{},hasFeatures:{},hasAllFeatures:{}}},constructor:function(){this._queryError=this._queryError.bind(this);this._queryCanceller=this._queryCanceller.bind(this);this._collectionChanged=this._collectionChanged.bind(this);this.refresh=this.refresh.bind(this);this._handles=new c},initialize:function(){this.addResolvingPromise(h([this.layer,
this.layerView]));this.then(this._startup.bind(this))},destroy:function(){this.cancelQuery();this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._handles=null},graphics:null,_graphicsSetter:function(a,b){if(b===a)return b;this._handles.remove("graphics");a&&(this._collectionChanged({added:a.toArray()}),this._handles.add(a.on("change",this._collectionChanged),"graphics"));return a},hasAllFeatures:!1,hasFeatures:!1,isQueryInProgress:!1,_isQueryInProgressGetter:function(){return!(!this._queryDfd||
this._queryDfd.isFulfilled())},layer:null,layerView:null,maxPageSize:null,pageSize:null,paginationEnabled:!1,_cancelErrorMsg:"SnapshotController: query cancelled",_currentPageDfd:null,_featureResolution:{value:1,scale:3780},_gManager:null,_handles:null,_maxFeatures:{point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},_queryDfd:null,_source:null,refresh:function(){this.isResolved()&&this._queryFeatures()},cancelQuery:function(){this.isQueryInProgress&&(this._queryDfd.cancel(Error(this._cancelErrorMsg)),
this._queryDfd=null)},_startup:function(){var a=this.layer,b=a.advancedQueryCapabilities;this.paginationEnabled=!(!b||!b.supportsPagination);this._source=a.source;this.pageSize=null==this.maxPageSize?a.maxRecordCount:Math.min(a.maxRecordCount,this.maxPageSize);this._resolutionParams=this._getResolutionParams();this._gManager=new n({graphics:this.graphics,objectIdField:a.objectIdField});this._setupStateWatchers();this._queryFeatures()},_getResolutionParams:function(){var a=this.layer,c=a.supportsCoordinatesQuantization,
d;if(!a.editable&&("polyline"===a.geometryType||"polygon"===a.geometryType)){var e=b.getUnitValue(this.layerView.view.spatialReference);null!=e&&(d=this._featureResolution.scale,e=this._featureResolution.value/e,d=a.maxScale?a.maxScale:a.minScale?Math.min(d,a.minScale):Math.min(d,b.getScale(this.layerView.view,a.fullExtent)),d*=e/this._featureResolution.scale)}return!d?null:{maxAllowableOffset:c?null:d,quantizationParameters:c?{mode:"view",originPosition:"upperLeft",tolerance:d,extent:a.fullExtent}:
null}},_setupStateWatchers:function(){this._handles.add([this.watch("extent",this.refresh),this.layer.watch("definitionExpression",this.refresh)])},_createQueryParams:function(){var b=this.layerView,c=this.layer.createQueryParameters();c.outSpatialReference=b.view.spatialReference;c.geometry=this.extent;a.mixin(c,this._resolutionParams);this.paginationEnabled&&(c.start=0,c.num=this.pageSize);return c},_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._queryDfd=
new m(this._queryCanceller);this._gManager.beginUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},_executeQuery:function(a){this._currentPageDfd=this._source.queryFeatures(a).then(this._processFeatureSet.bind(this,a),this._queryError)},_processFeatureSet:function(a,b){var c=b.exceededTransferLimit,d=b.features,e=this.layer.geometryType.toLowerCase().replace(/^esriGeometry/i,""),f=this._maxFeatures[e]||0,e=d?d.length:0,g=this._gManager.graphics.length+e,k=g>=f;k&&(f=
g-f)&&d.splice(e-f,f);e=c&&this.paginationEnabled&&!k?this._queryNextPage(a):!1;d&&this._gManager.add(d);this.hasFeatures=!0;e||(this._gManager.endUpdate(),this.hasAllFeatures=!c,this._queryDfd.resolve(),this._queryDfd=null,this.emit("query-end",{success:!0}));return b},_queryNextPage:function(a){a.start+=this.pageSize;this._executeQuery(a);return!0},_queryError:function(a){a&&"cancel"===a.dojoType&&!this.hasFeatures?this._gManager.revertUpdate():this._gManager.endUpdate();this._queryDfd.reject(a);
this._queryDfd=null;this.emit("query-end",{success:!1})},_queryCanceller:function(a){var b=this._currentPageDfd;b&&!b.isFulfilled()&&b.cancel(a)},_collectionChanged:function(a){var b,c,d;if(d=a.added)for(b=0;c=d[b];b++)c.layer=this.layer;if(d=a.removed)for(b=0;c=d[b];b++)c.layer=null}})})},"esri/layers/support/GraphicsManager":function(){define(["../../core/Accessoire"],function(a){return a.createSubclass({classMetadata:{properties:{indexById:{dependsOn:["graphics","objectIdField"]}}},destroy:function(){this.removeAll()},
graphics:null,objectIdField:null,indexById:null,_indexByIdGetter:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)},_oldIndex:null,beginUpdate:function(){this._oldIndex=this.indexById;this.indexById=null},add:function(a){a&&a.length&&(this.indexById=this.indexById||{},a=this._updateAndExtractNew(a,this.indexById,this._oldIndex),this.graphics.addMany(a))},revertUpdate:function(){var a=this._extractLeftOnly(this.indexById,this._oldIndex);this.indexById=
this._oldIndex;this._oldIndex=null;this.graphics.removeMany(a)},endUpdate:function(){var a=this._extractLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(a)},find:function(a){return null!=a&&this.indexById&&this.indexById[a]},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll()},_createIndexById:function(a,m){var n;if(a&&a.length&&m){var g,k,f;n={};for(g=0;k=a[g];g++)f=k.attributes&&k.attributes[m],null!=f&&(n[f]=k)}return n},_updateAndExtractNew:function(a,
m,n){var g,k,f,e,d=[],c=a?a.length:0,b=this.objectIdField;for(g=0;g<c;g++)k=a[g],f=k.attributes&&k.attributes[b],null!=f?(e=n&&n[f])?(m[f]=e,e.geometry=k.geometry,e.attributes=k.attributes):(m[f]=k,d.push(k)):d.push(k);return d},_extractLeftOnly:function(a,m){var n,g,k=[];for(n in a)(g=a[n])&&(!m||!m[n])&&k.push(g);return k}})})},"esri/Graphic":function(){define("dojo/_base/lang ./core/JSONSupporter ./core/lang ./PopupTemplate ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(a,
h,m,n,g,k){var f=0,e=h.createSubclass({declaredClass:"esri.Graphic",classMetadata:{properties:{popupTemplate:{type:n}}},constructor:function(a){this.id=f++},normalizeCtorArgs:function(a,c,b,e){return a&&!a.declaredClass?a:{geometry:a,symbol:c,attributes:b,popupTemplate:e}},attributes:null,_attributesSetter:function(a,c){if(c===a)return c;this._notifyLayer("attributes",c,a);return a},geometry:null,_geometrySetter:function(a,c){if(c===a)return c;this._notifyLayer("geometry",c,a);return a},_geometryReader:function(a){return g.fromJSON(a)},
popupTemplate:null,symbol:null,_symbolSetter:function(a,c){if(c===a)return c;this._notifyLayer("symbol",c,a);return a},_symbolReader:function(a){return k.fromJSON(a)},visible:!0,_visibleSetter:function(a,c){if(c===a)return c;this._notifyLayer("visible",c,a);return a},getAttribute:function(a){return this.attributes&&this.attributes[a]},setAttribute:function(a,c){var b;b=this.getAttribute(a);this.attributes?(this.attributes[a]=c,this._notifyLayer("attributes",b,c,a)):(b={},b[a]=c,this.attributes=b)},
getEffectivePopupTemplate:function(){return this.popupTemplate||this.layer&&this.layer.popupTemplate},toJSON:function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:a.mixin({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}},clone:function(){return new e({attributes:a.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),symbol:this.symbol&&
this.symbol.clone()||null,visible:this.visible})},_notifyLayer:function(a,c,b,e){this.layer&&(a={graphic:this,property:a,oldValue:c,newValue:b},e&&(a.attributeName=e),this.layer.graphicChanged(a))}});return e})},"esri/PopupTemplate":function(){define("./core/Accessor ./core/JSONSupporter ./core/jsonDictionary ./core/Collection ./core/lang dojo/_base/lang".split(" "),function(a,h,m,n,g,k){var f=m({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),e=m({shortDate:"short-date",shortDateLE:"short-date-le",
longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"}),d=m({image:"image",barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});a=a.createSubclass({properties:{className:{},temporary:{},image:{},id:{},title:{},visible:{}},className:"",temporary:!1,image:"",id:"",title:"",visible:!0,clone:function(){return new this.constructor({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})}});var c=h.createSubclass({classMetadata:{properties:{actions:{type:n.ofType(a)}},
reader:{add:["content"],exclude:["popupElements","description","mediaInfos","showAttachments"]}},declaredClass:"esri.PopupTemplate",actions:null,content:"",fieldInfos:null,_fieldInfosReader:function(a){return this._readFieldInfos(a)},overwriteActions:!1,title:"",relatedRecordsInfo:null,_relatedRecordsInfoReader:function(a){return a?g.clone(a):a},getDefaults:function(){return k.mixin(this.inherited(arguments),{actions:[],content:"",fieldInfos:null,overwriteActions:!1,relatedRecordsInfo:null,title:""})},
_dateFormatJsonDict:e,clone:function(){var a=this.actions;a&&(a=g.clone(a.toArray()));return new c({actions:a||[],content:Array.isArray(this.content)?g.clone(this.content):this.content,fieldInfos:this.fieldInfos?g.clone(this.fieldInfos):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?g.clone(this.relatedRecordsInfo):null,title:this.title})},toJSON:function(){var a={fieldInfos:this.fieldInfos?g.clone(this.fieldInfos):null,relatedRecordsInfo:this.relatedRecordsInfo?
g.clone(this.relatedRecordsInfo):null,showAttachments:!1,title:this.title};a.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(a.fieldInfos));var c=this.content;"string"===typeof c?a.description=c:Array.isArray(c)&&(a.popupElements=g.clone(c),a.popupElements.forEach(function(c){"attachments"===c.type&&!a.showAttachments?a.showAttachments=!0:"media"===c.type&&!a.mediaInfos?(c.mediaInfos&&(a.mediaInfos=g.clone(c.mediaInfos),a.mediaInfos.forEach(function(a){a.type=d.toJSON(a.type)})),delete c.mediaInfos):
"text"===c.type&&!a.description?(c.text&&(a.description=c.text),delete c.text):"fields"===c.type&&!a.fieldInfos&&(c.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(g.clone(c.fieldInfos))),delete c.fieldInfos);return c}.bind(this)));return a},_contentReader:function(a,c){var d=c.description,e=[],f=c.popupElements;f&&f.length?e=f.map(function(a){if("text"===a.type&&!a.text)a.text=c.description;else if("media"===a.type&&(a.mediaInfos||c.mediaInfos))a.mediaInfos||(a.mediaInfos=c.mediaInfos),a.mediaInfos=
this._readMediaInfos(a.mediaInfos);return a}.bind(this)):(c.description?e.push({type:"text",text:c.description}):e.push({type:"fields"}),c.mediaInfos&&c.mediaInfos.length&&e.push({type:"media",mediaInfos:this._readMediaInfos(c.mediaInfos)}),c.showAttachments&&e.push({type:"attachments",displayType:"list"}));e.length&&(d=e);return d},_readFieldInfos:function(a){a&&a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=e.fromJSON(b));c&&(a.stringFieldOption=
f.fromJSON(c))});return a},_writeFieldInfos:function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=e.toJSON(b));c&&(a.stringFieldOption=f.toJSON(c))});return a},_readMediaInfos:function(a){a.forEach(function(a){a.type=d.fromJSON(a.type)});return a}});c.Action=a;return c})},"esri/symbols/support/jsonUtils":function(){define("../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleLineSymbol ../CartographicLineSymbol ../SimpleFillSymbol ../PictureFillSymbol ../TextSymbol ../PointSymbol3D ../LineSymbol3D ../PolygonSymbol3D ../MeshSymbol3D ../LabelSymbol3D".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){var q={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(b){console.warn(b.stack)}return q.fromJSON(a)},fromJSON:function(q){var t=null;if(!q)return null;switch(q.type){case "esriSMS":t=a.fromJSON(q);break;case "esriPMS":t=h.fromJSON(q);break;case "esriTS":t=f.fromJSON(q);break;case "esriSLS":t=void 0!==q.cap?n.fromJSON(q):m.fromJSON(q);break;case "esriCLS":t=n.fromJSON(q);break;case "esriSFS":t=g.fromJSON(q);break;case "esriPFS":t=
k.fromJSON(q);break;case "PointSymbol3D":t=e.fromJSON(q);break;case "LineSymbol3D":t=d.fromJSON(q);break;case "PolygonSymbol3D":t=c.fromJSON(q);break;case "MeshSymbol3D":t=b.fromJSON(q);break;case "LabelSymbol3D":t=p.fromJSON(q)}return t}};return q})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(a,h,m,n,g,k){var f={style:"circle",color:[255,255,255,0.25],outline:new k,size:12,
angle:0,xoffset:0,yoffset:0},e=a(g,{declaredClass:"esri.symbol.SimpleMarkerSymbol",classMetadata:{properties:{outline:{type:k}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return h.mixin(this.inherited(arguments),f)},normalizeCtorArgs:function(a,c,b,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=c&&(f.size=n.toPt(c));b&&(f.outline=b);e&&(f.color=e);return f},type:"simple-marker-symbol",
_styleReader:function(a,c){return m.valueOf(this._styles,a)},_pathSetter:function(a){this.style="path";return a},_outlineReader:k.fromJSON,toJSON:function(){var a=h.mixin(this.inherited(arguments),{style:this._styles[this.style]}),c=this.outline;c&&(a.outline=c.toJSON());a.path=this.path;return m.fixJson(a)},clone:function(){return new e({angle:this.angle,color:m.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},
_setDim:function(a,c,b){this._targetWidth=n.toPt(a);this._targetHeight=n.toPt(c);this._spikeSize=n.toPt(b)}});h.mixin(e,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});e.defaultProps=f;return e})},"esri/core/screenUtils":function(){define([],function(){var a=/^(\d+(\.\d+)?)\s*((px)|(pt))?$/i,h={DPI:96,pt2px:function(a){return a/72*h.DPI},px2pt:function(a){return 72*a/h.DPI},toPt:function(m){if("string"===
typeof m)if(a.test(m)){m=m.match(a);var n=Number(m[1]);m="px"===(m[3]&&m[3].toLowerCase())?h.px2pt(n):n}else console.warn("screenUtils.toPt: input not recognized!"),m=null;return m}};return h})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/screenUtils","./Symbol"],function(a,h,m,n){return a(n,{declaredClass:"esri.symbols.MarkerSymbol",angle:0,_angleReader:function(a){return a&&-1*a},type:null,xoffset:0,_xoffsetSetter:m.toPt,yoffset:0,_yoffsetSetter:m.toPt,
size:9,_sizeSetter:function(a){return"auto"===a?a:m.toPt(a)},toJSON:function(){return h.mixin(this.inherited(arguments),{size:this.size,angle:this.angle&&-1*this.angle,xoffset:this.xoffset,yoffset:this.yoffset})}})})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/jsonDictionary","../core/JSONSupporter","../Color"],function(a,h,m,n){var g=h({esriSMS:"simple-marker-symbol",esriPMS:"picture-marker-symbol",esriSLS:"simple-line-symbol",esriCLS:"cartographic-line-symbol",esriSFS:"simple-fill-symbol",
esriPFS:"picture-fill-symbol",esriTS:"text-symbol",esriSHD:"shield-label-symbol",PointSymbol3D:"point-symbol-3d",LineSymbol3D:"line-symbol-3d",PolygonSymbol3D:"polygon-symbol-3d",MeshSymbol3D:"mesh-symbol-3d",LabelSymbol3D:"label-symbol-3d"}),k=0;return m.createSubclass({declaredClass:"esri.symbols.Symbol",classMetadata:{properties:{color:{type:n}}},constructor:function(){this.id="sym"+k++},type:null,_typeReader:g.fromJSON,color:new n([0,0,0,1]),_colorReader:function(f){if(f&&a.isDefined(f[0]))return[f[0],
f[1],f[2],f[3]/255]},toJSON:function(){return{color:n.toJSON(this.color),type:g.toJSON(this.type)}}})})},"esri/Color":function(){define(["./core/declare","dojo/colors"],function(a,h){var m=a([h],{declaredClass:"esri.Color",toJSON:function(){return[this.r,this.g,this.b,1<this.a?this.a:Math.round(255*this.a)]},clone:function(){return new m(this.toRgba())}});m.toJSON=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};m.fromJSON=function(a){return a&&new m([a[0],a[1],a[2],a[3]/255])};
m.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};var n,g="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(n=0;n<g.length;n++)m[g[n]]=h[g[n]];m.named.rebeccapurple=[102,51,153];return m})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(a,h,m,n){var g={};h.setObject("dojo.colors",g);var k=function(a,d,c){0>c&&++c;1<c&&--c;var b=6*c;return 1>b?a+(d-a)*b:1>2*c?d:2>3*c?a+6*(d-a)*(2/3-c):a};a.colorFromRgb=m.fromRgb=
function(a,d){var c=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(c){var b=c[2].split(/\s*,\s*/),f=b.length,c=c[1];if("rgb"==c&&3==f||"rgba"==c&&4==f)return c=b[0],"%"==c.charAt(c.length-1)?(c=n.map(b,function(a){return 2.56*parseFloat(a)}),4==f&&(c[3]=b[3]),m.fromArray(c,d)):m.fromArray(b,d);if("hsl"==c&&3==f||"hsla"==c&&4==f){var c=(parseFloat(b[0])%360+360)%360/360,g=parseFloat(b[1])/100,h=parseFloat(b[2])/100,g=0.5>=h?h*(g+1):h+g-h*g,h=2*h-g,c=[256*k(h,g,c+1/3),256*k(h,g,c),256*
k(h,g,c-1/3),1];4==f&&(c[3]=b[3]);return m.fromArray(c,d)}}return null};var f=function(a,d,c){a=Number(a);return isNaN(a)?c:a<d?d:a>c?c:a};m.prototype.sanitize=function(){this.r=Math.round(f(this.r,0,255));this.g=Math.round(f(this.g,0,255));this.b=Math.round(f(this.b,0,255));this.a=f(this.a,0,1);return this};g.makeGrey=m.makeGrey=function(a,d){return m.fromArray([a,a,a,d])};h.mixin(m.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,
245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],
goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,
69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return m})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(a,h,m,n,g){var k={color:[0,0,0,1],style:"solid",width:0.75},f=a(g,{declaredClass:"esri.symbols.SimpleLineSymbol",_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot",
"long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return h.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(a,d,c){if(a&&"string"!==typeof a)return a;var b={};null!=a&&(b.style=a);null!=d&&(b.color=d);null!=c&&(b.width=n.toPt(c));return b},type:"simple-line-symbol",_styleReader:function(a,d){return m.valueOf(this._jsonStyles,a)||"solid"},toJSON:function(){return m.fixJson(h.mixin(this.inherited(arguments),{style:this._jsonStyles[this.style]}))},
clone:function(){return new f({color:m.clone(this.color),style:this.style,width:this.width})}});h.mixin(f,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot"});f.defaultProps=k;return f})},"esri/symbols/LineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/screenUtils","./Symbol"],function(a,h,m,n){return a(n,{declaredClass:"esri.symbols.LineSymbol",type:null,width:0.75,_widthSetter:m.toPt,toJSON:function(){return h.mixin(this.inherited(arguments),{width:this.width})}})})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../core/urlUtils ./MarkerSymbol".split(" "),function(a,h,m,n,g,k){var f={width:12,height:12,angle:0,xoffset:0,yoffset:0},e=a(k,{declaredClass:"esri.symbols.PictureMarkerSymbol",
type:"picture-marker-symbol",classMetadata:{properties:{url:{dependsOn:["source"]}},reader:{exclude:["contentType","imageData","size","url","color"],add:["source"]}},getDefaults:function(){return h.mixin(this.inherited(arguments),f)},normalizeCtorArgs:function(a,c,b){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=c&&(e.width=n.toPt(c));null!=b&&(e.height=n.toPt(b));return e},_urlGetter:function(){return this.source?this.source.url:void 0},_urlSetter:function(a){var c;
a&&0===a.indexOf("data:")?(c=a.substring(5,a.indexOf(";")),this.source={url:a,contentType:c,imageData:a.substring(13+c.length)}):this.source={url:a};return a},_sourceReader:function(a,c){return c.imageData?{url:c.url,contentType:c.contentType,imageData:c.imageData}:{url:c.url}},_heightReader:function(a,c){return c.size||a},_heightSetter:n.toPt,_widthReader:function(a,c){return c.size||a},_widthSetter:n.toPt,toJSON:function(){var a=this.source,c=this.url,b=a&&a.imageData,a=a&&a.contentType;if(h.isString(c)&&
(0===c.indexOf("/")||0===c.indexOf("//")||0===c.indexOf("./")||0===c.indexOf("../")))c=g.getAbsoluteUrl(c);c=m.fixJson(h.mixin(this.inherited(arguments),{url:c,imageData:b,contentType:a,width:this.width,height:this.height}));delete c.color;delete c.size;return c},clone:function(){return new e({angle:this.angle,height:this.height,source:m.clone(this.source),width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});e.defaultProps=f;return e})},"esri/symbols/CartographicLineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/lang","../core/screenUtils","./SimpleLineSymbol"],function(a,h,m,n,g){var k={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"inside-frame",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",
CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},f={color:[0,0,0,1],style:k.STYLE_SOLID,width:0.75,cap:k.CAP_BUTT,join:k.JOIN_MITER,miterLimit:7.5},e={butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},d={miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},c=a(g,{declaredClass:"esri.symbols.CartographicLineSymbol",type:"cartographic-line-symbol",getDefaults:function(){return h.mixin(this.inherited(arguments),f)},normalizeCtorArgs:function(a,c,
d,e,f,g){if(a&&"string"!==typeof a)return a;var k={};a&&(k.style=a);c&&(k.color=c);null!=d&&(k.width=n.toPt(d));e&&(k.cap=e);f&&(k.join=f);null!=g&&(k.miterLimit=n.toPt(g));return k},_capReader:function(a){return m.valueOf(e,a)},_joinReader:function(a){return m.valueOf(d,a)},_miterLimitSetter:n.toPt,toJSON:function(){return m.fixJson(h.mixin(this.inherited(arguments),{cap:e[this.cap],join:d[this.join],miterLimit:this.miterLimit}))},clone:function(){return new c({cap:this.cap,color:m.clone(this.color),
join:this.join,miterLimit:this.miterLimit,style:this.style,width:this.width})}});h.mixin(c,k);c.defaultProps=f;return c})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(a,h,m,n,g){var k={style:"solid",outline:new g,color:[0,0,0,0.25]},f=a(n,{declaredClass:"esri.symbols.SimpleFillSymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal",
"backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return h.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(a,d,c){if(a&&"string"!==typeof a)return a;var b={};a&&(b.style=a);d&&(b.outline=d);c&&(b.color=c);return b},type:"simple-fill-symbol",_styleReader:function(a){return m.valueOf(this._styles,a)},toJSON:function(){return m.fixJson(h.mixin(this.inherited(arguments),{style:this._styles[this.style]}))},
clone:function(){return new f({color:m.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});h.mixin(f,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});f.defaultProps=k;return f})},"esri/symbols/FillSymbol":function(){define(["../core/declare","./Symbol","./SimpleLineSymbol"],function(a,
h,m){return a(h,{declaredClass:"esri.symbols.FillSymbol",classMetadata:{properties:{outline:{type:m}}},type:null,_outlineReader:m.fromJSON,toJSON:function(){var a=this.inherited(arguments);this.outline&&(a.outline=this.outline.toJSON());return a}})})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../core/urlUtils ./FillSymbol".split(" "),function(a,h,m,n,g,k){var f={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},e=a(k,
{declaredClass:"esri.symbols.PictureFillSymbol",type:"picture-fill-symbol",classMetadata:{properties:{url:{dependsOn:["source"]}},reader:{exclude:["contentType","imageData","size","url"],add:["source"]}},getDefaults:function(){return h.mixin(this.inherited(arguments),f)},normalizeCtorArgs:function(a,c,b,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);c&&(f.outline=c);null!=b&&(f.width=n.toPt(b));null!=e&&(f.height=n.toPt(e));return f},_widthSetter:n.toPt,_heightSetter:n.toPt,
xoffset:0,_xoffsetSetter:n.toPt,yoffset:0,_yoffsetSetter:n.toPt,_urlGetter:function(){return this.source?this.source.url:void 0},_urlSetter:function(a){var c;a&&0===a.indexOf("data:")?(c=a.substring(5,a.indexOf(";")),this.source={url:a,contentType:c,imageData:a.substring(13+c.length)}):this.source={url:a};return a},_sourceReader:function(a,c){return c.imageData?{url:c.url,contentType:c.contentType,imageData:c.imageData}:{url:c.url}},toJSON:function(){var a=this.source,c=this.url,b=a&&a.imageData,
a=a&&a.contentType;if(h.isString(c)&&(0===c.indexOf("/")||0===c.indexOf("//")||0===c.indexOf("./")||0===c.indexOf("../")))c=g.getAbsoluteUrl(c);return m.fixJson(h.mixin(this.inherited(arguments),{url:c,imageData:b,contentType:a,width:this.width,height:this.height,xoffset:this.xoffset,yoffset:this.yoffset,xscale:this.xscale,yscale:this.yscale}))},clone:function(){return new e({color:m.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),source:m.clone(this.source),width:this.width,
xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale})}});e.defaultProps=f;return e})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./Symbol ./Font".split(" "),function(a,h,m,n,g,k){var f={x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e=a(g,{declaredClass:"esri.symbols.TextSymbol",classMetadata:{properties:{font:{type:k}}},getDefaults:function(){return h.mixin(this.inherited(arguments),
f)},normalizeCtorArgs:function(a,c,b){if(a&&"string"!==typeof a)return a;var e={};a&&(e.text=a);c&&(e.font=c);b&&(e.color=b);return e},_fontReader:k.fromJSON,_haloSizeSetter:n.toPt,type:"text-symbol",xoffset:0,_xoffsetSetter:n.toPt,yoffset:0,_yoffsetSetter:n.toPt,angle:0,_angleReader:function(a){return a&&-1*a},toJSON:function(){return m.fixJson(h.mixin(this.inherited(arguments),{backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:this.haloSize,
haloColor:this.haloColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:this.xoffset,yoffset:this.yoffset,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font&&this.font.toJSON()}))},clone:function(){return new e({angle:this.angle,backgroundColor:m.clone(this.backgroundColor),borderLineColor:m.clone(this.borderLineColor),borderLineSize:this.borderLineSize,
color:m.clone(this.color),font:this.font&&this.font.clone(),haloColor:m.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});h.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",
DECORATION_LINETHROUGH:"line-through"});e.defaultProps=f;return e})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupporter","../core/lang","../core/screenUtils"],function(a,h,m,n){var g={style:"normal",variant:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},k=h.createSubclass({declaredClass:"esri.symbols.Font",getDefaults:function(){return g},normalizeCtorArgs:function(a,e,d,c,b){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.size=n.toPt(a));null!=
e&&(g.style=e);null!=d&&(g.variant=d);null!=c&&(g.weight=c);b&&(g.family=b);return g},_sizeSetter:n.toPt,toJSON:function(){return m.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new k({decoration:this.decoration,family:this.family,size:this.size,style:this.style,variant:this.variant,weight:this.weight})}});k.defaultProps=g;a.mixin(k,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",
VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return k})},"esri/symbols/PointSymbol3D":function(){define(["../core/declare","../core/lang","./Symbol3D"],function(a,h,m){var n=a(m,{declaredClass:"esri.symbol.PointSymbol3D",type:"point-symbol-3d",_allowedLayerTypes:["Icon","Object","Text"],clone:function(){return new n({symbolLayers:h.clone(this.symbolLayers)})}});return n})},"esri/symbols/Symbol3D":function(){define("../core/declare ../core/lang ../core/Collection ../core/Logger dojo/_base/lang ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u){var t={Icon:e,Object:d,Line:c,Path:b,Fill:p,Extrude:q,Text:u},r=m.ofType(f),s=n.getLogger("esri.symbols.Symbol3D");return a(k,{classMetadata:{properties:{symbolLayers:{type:r}}},_createSymbolLayersCollection:function(a){a=new r(a);a.on("before-add",this._onSymbolLayersBeforeAdd.bind(this));return a},normalizeCtorArgs:function(a){return a instanceof f?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:
a},getDefaults:function(){return g.mixin(this.inherited(arguments),{symbolLayers:this._createSymbolLayersCollection()})},type:null,symbolLayers:null,_symbolLayersSetter:function(a,b){b||(b=this._createSymbolLayersCollection());b.removeAll();b.addMany(a);return b},_symbolLayersReader:function(a){for(var b=this._createSymbolLayersCollection(),c=0;c<a.length;c++){var d=a[c],e=d.type,f=t[e];f?b.push(f.fromJSON(d)):s.warn("Unknown symbol layer type: "+e)}return b},toJSON:function(){return h.fixJson(g.mixin(this.inherited(arguments),
{symbolLayers:this.symbolLayers.map(function(a){return a.toJSON()}).toArray()}))},_onSymbolLayersBeforeAdd:function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(s.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())},_allowedLayerTypes:[]})})},"esri/core/Logger":function(){define(["require","exports"],function(a,h){var m={info:0,warn:1,error:2},n=function(){function a(k){void 0===k&&(k={});this.module=k.module||"";this.writer=
k.writer||null;this.level=k.level||null;null!=k.enabled&&(this.enabled=!!k.enabled);a._loggers[this.module]=this;k=this.module.lastIndexOf(".");-1!==k&&(this.parent=a.getLogger(this.module.slice(0,k)))}a.prototype.log=function(a){for(var f=[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];this._isEnabled()&&this._matchLevel(a)&&(e=this._inheritedWriter())&&e.apply(void 0,[a,this.module].concat(f))};a.prototype.error=function(){for(var a=[],f=0;f<arguments.length;f++)a[f-0]=arguments[f];this.log.apply(this,
["error"].concat(a))};a.prototype.warn=function(){for(var a=[],f=0;f<arguments.length;f++)a[f-0]=arguments[f];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],f=0;f<arguments.length;f++)a[f-0]=arguments[f];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(k){return a.getLogger(this.module+"."+k)};a.getLogger=function(k){var f=a._loggers[k];f||(f=new a({module:k}));return f};a.prototype._parentWithMember=function(a,f){for(var e=this;e&&null==e[a];)e=
e.parent;return e?e[a]:f};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,f){for(var e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];console[a].apply(console,["["+f+"]"].concat(e))};a.prototype._matchLevel=function(a){return m[this._parentWithMember("level","error")]<=m[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();n.getLogger("esri").level=
"error";return n})},"esri/symbols/Symbol3DLayer":function(){define(["dojo/_base/lang","../core/lang","../core/JSONSupporter","../Color"],function(a,h,m,n){var g=m.createSubclass({classMetadata:{properties:{color:{type:n}},reader:{exclude:["transparency"]}},color:void 0,toJSON:function(){return{color:this.color?[this.color.r,this.color.g,this.color.b]:void 0,transparency:this.color?100*(1-this.color.a):void 0}},_colorReader:function(a,f){var e=null!=f.transparency?1-0.01*f.transparency:1;if(a&&h.isDefined(a[0]))return[a[0],
a[1],a[2],e]},clone:function(){return new g(h.clone({color:this.color}))}});return m.createSubclass({classMetadata:{properties:{material:{type:g},enable:{}}},enable:!0,type:null,material:void 0,_materialReader:function(a){var f=new g;f.read(a);return f},toJSON:function(){return{type:this.type,enable:this.enable,material:this.material?this.material.toJSON():void 0,elevationInfo:this.elevationInfo?a.clone(this.elevationInfo):void 0}}})})},"esri/symbols/IconSymbol3DLayer":function(){define("dojo/_base/lang ./Symbol3DLayer ./support/Symbol3DOutline ../core/jsonDictionary ../core/lang ../core/screenUtils".split(" "),
function(a,h,m,n,g,k){var f=n({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"}),e=h.createSubclass({classMetadata:{properties:{outline:{type:m}}},type:"Icon",material:void 0,resource:void 0,size:void 0,_sizeSetter:k.toPt,anchor:void 0,_anchorReader:f.fromJSON,outline:void 0,_outlineReader:function(a){return m.fromJSON(a)},toJSON:function(){var d={resource:g.clone(this.resource),size:this.size,
anchor:f.toJSON(this.anchor),outline:this.outline?this.outline.toJSON():void 0};a.mixin(d,this.inherited(arguments));return g.fixJson(d,!0)},clone:function(){return new e({anchor:this.anchor,enable:this.enable,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:g.clone(this.resource),size:this.size})}});return e})},"esri/symbols/support/Symbol3DOutline":function(){define(["../../core/JSONSupporter","../../core/screenUtils","../../core/lang","../../Color"],
function(a,h,m,n){var g=a.createSubclass({classMetadata:{properties:{color:{type:n},size:{value:1}},reader:{exclude:["transparency"]}},getDefaults:function(){return{color:new n([0,0,0,1])}},toJSON:function(){return{color:this.color?[this.color.r,this.color.g,this.color.b]:void 0,transparency:this.color?100*(1-this.color.a):void 0,size:this.size}},clone:function(){return new g({color:m.clone(this.color),size:this.size})},_colorReader:function(a,f){var e=null!=f.transparency?1-0.01*f.transparency:1;
if(a&&m.isDefined(a[0]))return[a[0],a[1],a[2],e]},_sizeSetter:h.toPt});return g})},"esri/symbols/ObjectSymbol3DLayer":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./Symbol3DLayer"],function(a,h,m,n){var g=a(n,{type:"Object",material:void 0,resource:void 0,width:void 0,height:void 0,depth:void 0,anchor:void 0,toJSON:function(){var a={width:this.width,height:this.height,depth:this.depth,anchor:this.anchor,resource:h.clone(this.resource)};h.mixin(a,this.inherited(arguments));
return m.fixJson(a,!0)},clone:function(){return new g({anchor:this.anchor,depth:this.depth,enable:this.enable,height:this.height,material:this.material&&this.material.clone(),resource:m.clone(this.resource),width:this.width})}});return g})},"esri/symbols/LineSymbol3DLayer":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./Symbol3DLayer"],function(a,h,m,n,g){var k=a(g,{type:"Line",size:1,_sizeSetter:n.toPt,material:null,toJSON:function(){var a={size:this.size};
h.mixin(a,this.inherited(arguments));return m.fixJson(a,!0)},clone:function(){return new k({enable:this.enable,material:this.material&&this.material.clone(),size:this.size})}});return k})},"esri/symbols/PathSymbol3DLayer":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./Symbol3DLayer"],function(a,h,m,n){var g=a(n,{classMetadata:{reader:{exclude:["width"],add:["size"]}},type:"Path",size:0,_sizeReader:function(a,f){return a||f.width||0},material:null,toJSON:function(){var a=
{size:this.size};h.mixin(a,this.inherited(arguments));return m.fixJson(a,!0)},clone:function(){return new g({enable:this.enable,material:this.material&&this.material.clone(),size:this.size})}});return g})},"esri/symbols/FillSymbol3DLayer":function(){define(["./Symbol3DLayer","./support/Symbol3DOutline","../core/lang"],function(a,h,m){var n=a.createSubclass({classMetadata:{properties:{outline:{type:h}}},type:"Fill",material:null,outline:null,_outlineReader:function(a){var k=new h;k.read(a);return k},
toJSON:function(){return m.fixJson(this.inherited(arguments),!0)},clone:function(){return new n({enable:this.enable,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})}});return n})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./Symbol3DLayer"],function(a,h,m,n){var g=a(n,{type:"Extrude",size:0,material:null,toJSON:function(){var a={size:this.size};h.mixin(a,this.inherited(arguments));return m.fixJson(a,
!0)},clone:function(){return new g({enable:this.enable,material:this.material&&this.material.clone(),size:this.size})}});return g})},"esri/symbols/TextSymbol3DLayer":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./Symbol3DLayer"],function(a,h,m,n,g){var k=a(g,{type:"Text",material:void 0,size:void 0,_sizeSetter:n.toPt,text:void 0,font:void 0,toJSON:function(){var a={font:this.font?h.clone(this.font):void 0,size:null!=this.size?this.size:void 0};h.mixin(a,
this.inherited(arguments));return m.fixJson(a,!0)},clone:function(){return new k({enable:this.enable,font:this.font&&this.font.clone(),material:this.material&&this.material.clone(),size:this.size,text:this.text})}});return k})},"esri/symbols/LineSymbol3D":function(){define(["../core/declare","../core/lang","./Symbol3D"],function(a,h,m){var n=a(m,{declaredClass:"esri.symbol.LineSymbol3D",type:"line-symbol-3d",_allowedLayerTypes:["Line","Path","Text"],clone:function(){return new n({symbolLayers:h.clone(this.symbolLayers)})}});
return n})},"esri/symbols/PolygonSymbol3D":function(){define(["../core/declare","../core/lang","./Symbol3D","dojo/_base/lang"],function(a,h,m,n){var g=a(m,{declaredClass:"esri.symbol.PolygonSymbol3D",type:"polygon-symbol-3d",_allowedLayerTypes:"Extrude Fill Line Icon Object Text".split(" "),toJSON:function(){var a=[];this.symbolLayers.forEach(function(f){var e=f.toJSON();a.push(e);if("Fill"===f.type&&f.outline&&0<f.outline.size&&f.outline.color){var d=f.outline.size,c=f.outline.color;a.push({type:"Line",
enable:f.enable,material:{color:[c.r,c.g,c.b],transparency:100*(1-c.a)},elevationInfo:h.clone(e.elevationInfo),size:d})}});return h.fixJson(n.mixin(this.inherited(arguments),{symbolLayers:a}))},clone:function(){return new g({symbolLayers:h.clone(this.symbolLayers)})}});g.fromJSON=function(a){var f=new g;f.read(a);if(2===f.symbolLayers.length&&"Fill"===f.symbolLayers.getItemAt(0).type&&"Line"===f.symbolLayers.getItemAt(1).type){a=f.symbolLayers.getItemAt(0);var e=f.symbolLayers.getItemAt(1);a.outline=
{size:e.size,color:e.material.color};f.symbolLayers.removeAt(1)}return f};return g})},"esri/symbols/MeshSymbol3D":function(){define(["../core/declare","../core/lang","./Symbol3D"],function(a,h,m){var n=a(m,{declaredClass:"esri.symbol.MeshSymbol3D",type:"mesh-symbol-3d",_allowedLayerTypes:["Fill"],clone:function(){return new n({symbolLayers:h.clone(this.symbolLayers)})}});return n})},"esri/symbols/LabelSymbol3D":function(){define(["../core/declare","../core/lang","./Symbol3D"],function(a,h,m){var n=
a(m,{declaredClass:"esri.symbol.LabelSymbol3D",type:"label-symbol-3d",_allowedLayerTypes:["Text"],clone:function(){return new n({symbolLayers:h.clone(this.symbolLayers)})}});return n})},"esri/geometry/support/scaleUtils":function(){define(["../../config","../../core/lang","./WKIDUnitConversion"],function(a,h,m){var n=20015077/180,g={getUnitValueForSR:function(a){return this.getUnitValue(a)||n},getUnitValue:function(a){var f,e,d;a&&("object"===typeof a?(f=a.wkid,e=a.wkt):"number"===typeof a?f=a:"string"===
typeof a&&(e=a));f?d=m.values[m[f]]:e&&-1!==e.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(e))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d},getScale:function(k,f,e){var d,c,b;1<arguments.length&&h.isDefined(f)&&!f.declaredClass?(d=k,c=f,f=null,b=g.getUnitValue(e)):(d=f||k.extent,c=k.width,b=g.getUnitValue(d&&d.spatialReference));return d&&c?39.37*(d.width/c*(b||n))*a.screenDPI:0},getExtentForScale:function(k,f){var e=k.extent,d=k.width,c=g.getUnitValue(e.get("spatialReference"));return e.clone().expand(f*
d/(39.37*(c||n)*a.screenDPI)/e.get("width"))}};return g})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,h={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,
2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,
3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,
3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,
3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,
5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,
6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,
6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,
6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,
6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6984:0,6991:0,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,
7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,
7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,
27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,
65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,
103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,
103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,
103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,
103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)h[a]=0;for(a=2056;2065>=a;a++)h[a]=0;for(a=2067;2135>=a;a++)h[a]=0;for(a=2137;2154>=a;a++)h[a]=0;for(a=2161;2170>=a;a++)h[a]=0;for(a=2172;2193>=a;a++)h[a]=0;for(a=2195;2198>=a;a++)h[a]=0;for(a=2200;2203>=a;a++)h[a]=0;for(a=2205;2217>=a;a++)h[a]=0;for(a=2222;2224>=a;a++)h[a]=1;for(a=2225;2250>=a;a++)h[a]=2;for(a=2251;2253>=a;a++)h[a]=
1;for(a=2257;2264>=a;a++)h[a]=2;for(a=2274;2279>=a;a++)h[a]=2;for(a=2280;2282>=a;a++)h[a]=1;for(a=2283;2289>=a;a++)h[a]=2;for(a=2290;2292>=a;a++)h[a]=0;for(a=2308;2313>=a;a++)h[a]=0;for(a=2315;2491>=a;a++)h[a]=0;for(a=2494;2866>=a;a++)h[a]=0;for(a=2867;2869>=a;a++)h[a]=1;for(a=2870;2888>=a;a++)h[a]=2;for(a=2891;2895>=a;a++)h[a]=2;for(a=2896;2898>=a;a++)h[a]=1;for(a=2902;2908>=a;a++)h[a]=2;for(a=2915;2920>=a;a++)h[a]=2;for(a=2921;2923>=a;a++)h[a]=1;for(a=2924;2930>=a;a++)h[a]=2;for(a=2931;2962>=a;a++)h[a]=
0;for(a=2964;2968>=a;a++)h[a]=2;for(a=2969;2973>=a;a++)h[a]=0;for(a=2975;2991>=a;a++)h[a]=0;for(a=2995;3051>=a;a++)h[a]=0;for(a=3054;3079>=a;a++)h[a]=0;for(a=3081;3088>=a;a++)h[a]=0;for(a=3092;3101>=a;a++)h[a]=0;for(a=3106;3138>=a;a++)h[a]=0;for(a=3146;3151>=a;a++)h[a]=0;for(a=3153;3166>=a;a++)h[a]=0;for(a=3168;3172>=a;a++)h[a]=0;for(a=3174;3203>=a;a++)h[a]=0;for(a=3294;3358>=a;a++)h[a]=0;for(a=3367;3403>=a;a++)h[a]=0;for(a=3408;3416>=a;a++)h[a]=0;for(a=3417;3438>=a;a++)h[a]=2;for(a=3441;3446>=a;a++)h[a]=
2;for(a=3447;3450>=a;a++)h[a]=0;for(a=3451;3459>=a;a++)h[a]=2;for(a=3460;3478>=a;a++)h[a]=0;for(a=3554;3559>=a;a++)h[a]=0;for(a=3560;3570>=a;a++)h[a]=2;for(a=3571;3581>=a;a++)h[a]=0;for(a=3594;3597>=a;a++)h[a]=0;for(a=3601;3604>=a;a++)h[a]=0;for(a=3637;3639>=a;a++)h[a]=0;for(a=3665;3667>=a;a++)h[a]=0;for(a=3693;3695>=a;a++)h[a]=0;for(a=3701;3727>=a;a++)h[a]=0;for(a=3728;3739>=a;a++)h[a]=2;for(a=3740;3751>=a;a++)h[a]=0;for(a=3753;3760>=a;a++)h[a]=2;for(a=3761;3773>=a;a++)h[a]=0;for(a=3775;3777>=a;a++)h[a]=
0;for(a=3779;3781>=a;a++)h[a]=0;for(a=3783;3785>=a;a++)h[a]=0;for(a=3788;3791>=a;a++)h[a]=0;for(a=3797;3802>=a;a++)h[a]=0;for(a=3814;3816>=a;a++)h[a]=0;for(a=3825;3829>=a;a++)h[a]=0;for(a=3832;3841>=a;a++)h[a]=0;for(a=3844;3852>=a;a++)h[a]=0;for(a=3873;3885>=a;a++)h[a]=0;for(a=3890;3893>=a;a++)h[a]=0;for(a=3907;3912>=a;a++)h[a]=0;for(a=3942;3950>=a;a++)h[a]=0;for(a=3968;3970>=a;a++)h[a]=0;for(a=3973;3976>=a;a++)h[a]=0;for(a=3986;3989>=a;a++)h[a]=0;for(a=3994;3997>=a;a++)h[a]=0;for(a=4048;4051>=a;a++)h[a]=
0;for(a=4056;4063>=a;a++)h[a]=0;for(a=4093;4096>=a;a++)h[a]=0;for(a=4390;4398>=a;a++)h[a]=0;for(a=4399;4413>=a;a++)h[a]=2;for(a=4418;4433>=a;a++)h[a]=2;for(a=4455;4457>=a;a++)h[a]=2;for(a=4484;4489>=a;a++)h[a]=0;for(a=4491;4554>=a;a++)h[a]=0;for(a=4568;4589>=a;a++)h[a]=0;for(a=4652;4656>=a;a++)h[a]=0;for(a=4766;4800>=a;a++)h[a]=0;for(a=5014;5016>=a;a++)h[a]=0;for(a=5069;5072>=a;a++)h[a]=0;for(a=5105;5130>=a;a++)h[a]=0;for(a=5173;5188>=a;a++)h[a]=0;for(a=5253;5259>=a;a++)h[a]=0;for(a=5269;5275>=a;a++)h[a]=
0;for(a=5292;5311>=a;a++)h[a]=0;for(a=5329;5331>=a;a++)h[a]=0;for(a=5343;5349>=a;a++)h[a]=0;for(a=5355;5357>=a;a++)h[a]=0;for(a=5387;5389>=a;a++)h[a]=0;for(a=5459;5463>=a;a++)h[a]=0;for(a=5479;5482>=a;a++)h[a]=0;for(a=5518;5520>=a;a++)h[a]=0;for(a=5530;5539>=a;a++)h[a]=0;for(a=5550;5552>=a;a++)h[a]=0;for(a=5562;5583>=a;a++)h[a]=0;for(a=5623;5625>=a;a++)h[a]=2;for(a=5631;5639>=a;a++)h[a]=0;for(a=5649;5653>=a;a++)h[a]=0;for(a=5663;5680>=a;a++)h[a]=0;for(a=5682;5685>=a;a++)h[a]=0;for(a=5875;5877>=a;a++)h[a]=
0;for(a=5921;5940>=a;a++)h[a]=0;for(a=6050;6125>=a;a++)h[a]=0;for(a=6244;6275>=a;a++)h[a]=0;for(a=6328;6348>=a;a++)h[a]=0;for(a=6350;6356>=a;a++)h[a]=0;for(a=6366;6372>=a;a++)h[a]=0;for(a=6381;6387>=a;a++)h[a]=0;for(a=6393;6404>=a;a++)h[a]=0;for(a=6480;6483>=a;a++)h[a]=0;for(a=6511;6514>=a;a++)h[a]=0;for(a=6579;6581>=a;a++)h[a]=0;for(a=6619;6624>=a;a++)h[a]=0;for(a=6625;6627>=a;a++)h[a]=2;for(a=6628;6632>=a;a++)h[a]=0;for(a=6634;6637>=a;a++)h[a]=0;for(a=6669;6692>=a;a++)h[a]=0;for(a=6707;6709>=a;a++)h[a]=
0;for(a=6720;6723>=a;a++)h[a]=0;for(a=6732;6738>=a;a++)h[a]=0;for(a=6931;6933>=a;a++)h[a]=0;for(a=7374;7376>=a;a++)h[a]=0;for(a=7528;7586>=a;a++)h[a]=0;for(a=7587;7645>=a;a++)h[a]=2;for(a=20002;20032>=a;a++)h[a]=0;for(a=20062;20092>=a;a++)h[a]=0;for(a=20135;20138>=a;a++)h[a]=0;for(a=20248;20258>=a;a++)h[a]=0;for(a=20348;20358>=a;a++)h[a]=0;for(a=20436;20440>=a;a++)h[a]=0;for(a=20822;20824>=a;a++)h[a]=0;for(a=20934;20936>=a;a++)h[a]=0;for(a=21035;21037>=a;a++)h[a]=0;for(a=21095;21097>=a;a++)h[a]=0;
for(a=21148;21150>=a;a++)h[a]=0;for(a=21413;21423>=a;a++)h[a]=0;for(a=21473;21483>=a;a++)h[a]=0;for(a=21780;21782>=a;a++)h[a]=0;for(a=21891;21894>=a;a++)h[a]=0;for(a=21896;21899>=a;a++)h[a]=0;for(a=22171;22177>=a;a++)h[a]=0;for(a=22181;22187>=a;a++)h[a]=0;for(a=22191;22197>=a;a++)h[a]=0;for(a=22234;22236>=a;a++)h[a]=0;for(a=22521;22525>=a;a++)h[a]=0;for(a=22991;22994>=a;a++)h[a]=0;for(a=23028;23038>=a;a++)h[a]=0;for(a=23830;23853>=a;a++)h[a]=0;for(a=23866;23872>=a;a++)h[a]=0;for(a=23877;23884>=a;a++)h[a]=
0;for(a=23886;23894>=a;a++)h[a]=0;for(a=23946;23948>=a;a++)h[a]=0;for(a=24311;24313>=a;a++)h[a]=0;for(a=24342;24347>=a;a++)h[a]=0;for(a=24370;24374>=a;a++)h[a]=10;for(a=24375;24381>=a;a++)h[a]=0;for(a=24718;24721>=a;a++)h[a]=0;for(a=24817;24821>=a;a++)h[a]=0;for(a=24877;24882>=a;a++)h[a]=0;for(a=24891;24893>=a;a++)h[a]=0;for(a=25391;25395>=a;a++)h[a]=0;for(a=25828;25838>=a;a++)h[a]=0;for(a=26191;26195>=a;a++)h[a]=0;for(a=26391;26393>=a;a++)h[a]=0;for(a=26701;26722>=a;a++)h[a]=0;for(a=26729;26799>=
a;a++)h[a]=2;for(a=26801;26803>=a;a++)h[a]=2;for(a=26811;26813>=a;a++)h[a]=2;for(a=26847;26870>=a;a++)h[a]=2;for(a=26891;26899>=a;a++)h[a]=0;for(a=26901;26923>=a;a++)h[a]=0;for(a=26929;26946>=a;a++)h[a]=0;for(a=26948;26998>=a;a++)h[a]=0;for(a=27037;27040>=a;a++)h[a]=0;for(a=27205;27232>=a;a++)h[a]=0;for(a=27258;27260>=a;a++)h[a]=0;for(a=27391;27398>=a;a++)h[a]=0;for(a=27561;27564>=a;a++)h[a]=0;for(a=27571;27574>=a;a++)h[a]=0;for(a=27581;27584>=a;a++)h[a]=0;for(a=27591;27594>=a;a++)h[a]=0;for(a=28191;28193>=
a;a++)h[a]=0;for(a=28348;28358>=a;a++)h[a]=0;for(a=28402;28432>=a;a++)h[a]=0;for(a=28462;28492>=a;a++)h[a]=0;for(a=29118;29122>=a;a++)h[a]=0;for(a=29168;29172>=a;a++)h[a]=0;for(a=29177;29185>=a;a++)h[a]=0;for(a=29187;29195>=a;a++)h[a]=0;for(a=29900;29903>=a;a++)h[a]=0;for(a=30161;30179>=a;a++)h[a]=0;for(a=30491;30494>=a;a++)h[a]=0;for(a=30729;30732>=a;a++)h[a]=0;for(a=31251;31259>=a;a++)h[a]=0;for(a=31265;31268>=a;a++)h[a]=0;for(a=31275;31279>=a;a++)h[a]=0;for(a=31281;31297>=a;a++)h[a]=0;for(a=31461;31469>=
a;a++)h[a]=0;for(a=31491;31495>=a;a++)h[a]=0;for(a=31917;31922>=a;a++)h[a]=0;for(a=31965;32E3>=a;a++)h[a]=0;for(a=32001;32003>=a;a++)h[a]=2;for(a=32005;32031>=a;a++)h[a]=2;for(a=32033;32060>=a;a++)h[a]=2;for(a=32064;32067>=a;a++)h[a]=2;for(a=32074;32077>=a;a++)h[a]=2;for(a=32081;32086>=a;a++)h[a]=0;for(a=32107;32130>=a;a++)h[a]=0;for(a=32133;32158>=a;a++)h[a]=0;for(a=32164;32167>=a;a++)h[a]=2;for(a=32180;32199>=a;a++)h[a]=0;for(a=32201;32260>=a;a++)h[a]=0;for(a=32301;32360>=a;a++)h[a]=0;for(a=32601;32662>=
a;a++)h[a]=0;for(a=32664;32667>=a;a++)h[a]=2;for(a=32701;32761>=a;a++)h[a]=0;for(a=53001;53004>=a;a++)h[a]=0;for(a=53008;53019>=a;a++)h[a]=0;for(a=53021;53032>=a;a++)h[a]=0;for(a=53042;53046>=a;a++)h[a]=0;for(a=53074;53080>=a;a++)h[a]=0;for(a=54001;54004>=a;a++)h[a]=0;for(a=54008;54019>=a;a++)h[a]=0;for(a=54021;54032>=a;a++)h[a]=0;for(a=54042;54046>=a;a++)h[a]=0;for(a=54048;54053>=a;a++)h[a]=0;for(a=54074;54080>=a;a++)h[a]=0;for(a=102001;102040>=a;a++)h[a]=0;for(a=102042;102063>=a;a++)h[a]=0;for(a=
102065;102067>=a;a++)h[a]=0;for(a=102070;102117>=a;a++)h[a]=0;for(a=102122;102216>=a;a++)h[a]=0;for(a=102221;102377>=a;a++)h[a]=0;for(a=102382;102388>=a;a++)h[a]=0;for(a=102389;102398>=a;a++)h[a]=2;for(a=102400;102444>=a;a++)h[a]=0;for(a=102445;102447>=a;a++)h[a]=2;for(a=102448;102458>=a;a++)h[a]=0;for(a=102459;102468>=a;a++)h[a]=2;for(a=102469;102496>=a;a++)h[a]=0;for(a=102500;102519>=a;a++)h[a]=1;for(a=102520;102524>=a;a++)h[a]=0;for(a=102525;102529>=a;a++)h[a]=2;for(a=102530;102561>=a;a++)h[a]=
0;for(a=102570;102588>=a;a++)h[a]=0;for(a=102590;102598>=a;a++)h[a]=0;for(a=102601;102603>=a;a++)h[a]=0;for(a=102605;102628>=a;a++)h[a]=0;for(a=102629;102646>=a;a++)h[a]=2;for(a=102648;102700>=a;a++)h[a]=2;for(a=102701;102703>=a;a++)h[a]=0;for(a=102707;102730>=a;a++)h[a]=2;for(a=102733;102758>=a;a++)h[a]=2;for(a=102767;102798>=a;a++)h[a]=0;for(a=102965;102969>=a;a++)h[a]=0;for(a=102971;102973>=a;a++)h[a]=0;for(a=102975;102989>=a;a++)h[a]=0;for(a=102990;102992>=a;a++)h[a]=1;for(a=102997;103002>=a;a++)h[a]=
0;for(a=103003;103008>=a;a++)h[a]=2;for(a=103009;103011>=a;a++)h[a]=0;for(a=103012;103014>=a;a++)h[a]=2;for(a=103019;103021>=a;a++)h[a]=0;for(a=103022;103024>=a;a++)h[a]=2;for(a=103029;103031>=a;a++)h[a]=0;for(a=103032;103034>=a;a++)h[a]=2;for(a=103065;103068>=a;a++)h[a]=0;for(a=103074;103076>=a;a++)h[a]=0;for(a=103077;103079>=a;a++)h[a]=1;for(a=103080;103082>=a;a++)h[a]=0;for(a=103083;103085>=a;a++)h[a]=2;for(a=103090;103093>=a;a++)h[a]=0;for(a=103097;103099>=a;a++)h[a]=0;for(a=103100;103102>=a;a++)h[a]=
2;for(a=103107;103109>=a;a++)h[a]=0;for(a=103110;103112>=a;a++)h[a]=2;for(a=103113;103116>=a;a++)h[a]=0;for(a=103117;103120>=a;a++)h[a]=2;for(a=103153;103157>=a;a++)h[a]=0;for(a=103158;103162>=a;a++)h[a]=2;for(a=103163;103165>=a;a++)h[a]=0;for(a=103166;103168>=a;a++)h[a]=1;for(a=103169;103171>=a;a++)h[a]=2;for(a=103186;103188>=a;a++)h[a]=0;for(a=103189;103191>=a;a++)h[a]=2;for(a=103192;103195>=a;a++)h[a]=0;for(a=103196;103199>=a;a++)h[a]=2;for(a=103200;103224>=a;a++)h[a]=0;for(a=103225;103227>=a;a++)h[a]=
1;for(a=103232;103237>=a;a++)h[a]=0;for(a=103238;103243>=a;a++)h[a]=2;for(a=103244;103246>=a;a++)h[a]=0;for(a=103247;103249>=a;a++)h[a]=2;for(a=103254;103256>=a;a++)h[a]=0;for(a=103257;103259>=a;a++)h[a]=2;for(a=103264;103266>=a;a++)h[a]=0;for(a=103267;103269>=a;a++)h[a]=2;for(a=103300;103375>=a;a++)h[a]=0;for(a=103381;103383>=a;a++)h[a]=0;for(a=103384;103386>=a;a++)h[a]=1;for(a=103387;103389>=a;a++)h[a]=0;for(a=103390;103392>=a;a++)h[a]=2;for(a=103397;103399>=a;a++)h[a]=0;for(a=103400;103471>=a;a++)h[a]=
2;for(a=103476;103478>=a;a++)h[a]=0;for(a=103479;103481>=a;a++)h[a]=2;for(a=103486;103488>=a;a++)h[a]=0;for(a=103489;103491>=a;a++)h[a]=2;for(a=103492;103495>=a;a++)h[a]=0;for(a=103496;103499>=a;a++)h[a]=2;for(a=103528;103543>=a;a++)h[a]=0;for(a=103544;103548>=a;a++)h[a]=2;for(a=103549;103551>=a;a++)h[a]=0;for(a=103552;103554>=a;a++)h[a]=1;for(a=103555;103557>=a;a++)h[a]=2;for(a=103558;103560>=a;a++)h[a]=0;for(a=103571;103573>=a;a++)h[a]=0;for(a=103574;103576>=a;a++)h[a]=2;for(a=103577;103580>=a;a++)h[a]=
0;for(a=103581;103583>=a;a++)h[a]=2;for(a=103600;103694>=a;a++)h[a]=0;for(a=103700;103793>=a;a++)h[a]=2;for(a=103794;103871>=a;a++)h[a]=0;for(a=103900;103971>=a;a++)h[a]=2;return h})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("dojo/_base/lang ../../../core/declare ../../../core/Accessoire ../../../core/AccessoirePromise ../../../core/urlUtils ../../../request ../../../tasks/QueryTask".split(" "),function(a,h,m,n,g,k,f){return h([m,n],{classMetadata:{properties:{parsedUrl:{dependsOn:["url",
"layerId"]},queryTask:{dependsOn:["parsedUrl","gdbVersion"]}}},getDefaults:function(e){var d=this.inherited(arguments),c=e.layer;c&&(d=a.mixin(d,{url:c.url,layerId:c.layerId,gdbVersion:c.gdbVersion}));return d},initialize:function(){this.addResolvingPromise(this._fetchService())},_parsedUrlGetter:function(){var a=this.url?g.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=g.join(a.path,this.layerId.toString()));return a},_queryTaskGetter:function(){return new f({url:this.parsedUrl.path,
gdbVersion:this.gdbVersion})},queryFeatures:function(a){return this.queryTask.execute(a)},queryObjectIds:function(a){return this.queryTask.executeForIds(a)},queryFeatureCount:function(a){return this.queryTask.executeForCount(a)},queryExtent:function(a){return this.queryTask.executeForExtent(a)},_fixSymbolUrls:function(a){if(a){var d=this.parsedUrl.path+"/images/",c=[a.symbol,a.defaultSymbol];(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){c.push(a.symbol)});c.forEach(function(a){var c=
a&&a.url;c&&-1===c.search(/https?\:/i)&&(a.url=d+c)})}},_updateUrl:function(a){a&&(this.url=this.url.replace(/^http:/i,"https:"))},_fetchService:function(){return null==this.layerId?k(this.url,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);if((a=a.data)&&a.layers&&a.layers[0])this.layerId=a.layers[0].id;return this._fetchServiceLayer()}.bind(this)):this._fetchServiceLayer()},_fetchServiceLayer:function(){return k(this.parsedUrl.path,{query:a.mixin({f:"json"},
this.parsedUrl.query),responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);a=a.data;this._fixSymbolUrls(a.drawingInfo&&a.drawingInfo.renderer);this.layerDefinition=a}.bind(this))}})})},"esri/tasks/QueryTask":function(){define("dojo/_base/array ../core/declare dojo/_base/lang ../request ../geometry/Extent ../geometry/support/normalizeUtils ./Task ./support/FeatureSet".split(" "),function(a,h,m,n,g,k,f,e){h=h(f,{declaredClass:"esri.tasks.QueryTask",source:null,
gdbVersion:null,__msigns:[{n:"execute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:1,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:1,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:1,a:[{i:0,p:["geometry"]}],e:2}],execute:function(a,c,b){b=b.assembly;a=this._encode(m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON(b&&b[0])));this.source&&(b={source:this.source.toJSON()},a.layer=JSON.stringify(b));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+
"/query",m.mixin({query:a,callbackParamName:"callback",callbackSuffix:c},this.requestOptions)).then(this._handleExecuteResponse)},executeRelationshipQuery:function(a){a=this._encode(m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/queryRelatedRecords",m.mixin({query:a,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteRelationshipQueryResponse)},executeForIds:function(a,c){var b=c.assembly,
b=this._encode(m.mixin({},this.parsedUrl.query,{f:"json",returnIdsOnly:!0},a.toJSON(b&&b[0])));if(this.source){var e={source:this.source.toJSON()};b.layer=JSON.stringify(e)}this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",m.mixin({query:b,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForIdsResponse)},executeForCount:function(a,c){var b=c.assembly,b=this._encode(m.mixin({},this.parsedUrl.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},
a.toJSON(b&&b[0])));if(this.source){var e={source:this.source.toJSON()};b.layer=JSON.stringify(e)}this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",m.mixin({query:b,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForCountResponse)},executeForExtent:function(a,c){var b=c.assembly,b=this._encode(m.mixin({},this.parsedUrl.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJSON(b&&b[0])));if(this.source){var e={source:this.source.toJSON()};
b.layer=JSON.stringify(e)}this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",m.mixin({query:b,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForExtentResponse)},_handleExecuteResponse:function(a){return e.fromJSON(a.data)},_handleExecuteRelationshipQueryResponse:function(d){d=d.data;var c=d.geometryType,b=d.spatialReference,f={};a.forEach(d.relatedRecordGroups,function(a){var d={};d.geometryType=c;d.spatialReference=b;d.features=a.relatedRecords;
d=e.fromJSON(d);if(null!=a.objectId)f[a.objectId]=d;else for(var g in a)a.hasOwnProperty(g)&&"relatedRecords"!==g&&(f[a[g]]=d)});return f},_handleExecuteForIdsResponse:function(a){return a.data.objectIds},_handleExecuteForCountResponse:function(a){a=a.data;var c=a.features,b=a.objectIds;if(b)a=b.length;else{if(c)throw Error("Unable to perform query. Please check your parameters.");a=a.count}return a},_handleExecuteForExtentResponse:function(a){a=a.data;if(a.hasOwnProperty("extent"))a.extent=g.fromJSON(a.extent);
else{if(a.features)throw Error("Layer does not support extent calculation.");if(a.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a}});k._createWrappers(h);return h})},"esri/geometry/support/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred ../../config ../Polyline ../Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(a,h,m,n,g,k,f,e){function d(a,b){return Math.ceil((a-b)/(2*b))}function c(a,b){var c=a.paths||
a.rings,d,e,f=c.length,g;for(d=0;d<f;d++){g=c[d].length;for(e=0;e<g;e++){var k=a.getPoint(d,e);a.setPoint(d,e,k.clone().offset(b,0))}}return a}function b(b,c){if(!(b instanceof g||b instanceof k))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var d=b instanceof g,e=[],f;a.forEach(d?b.paths:b.rings,function(a){e.push(f=[]);f.push([a[0][0],a[0][1]]);var b,d,g,k,h,m,p,n,
s,q,v,u;for(h=0;h<a.length-1;h++){b=a[h][0];d=a[h][1];g=a[h+1][0];k=a[h+1][1];p=Math.sqrt((g-b)*(g-b)+(k-d)*(k-d));n=(k-d)/p;s=(g-b)/p;q=p/c;if(1<q){for(m=1;m<=q-1;m++)u=m*c,v=s*u+b,u=n*u+d,f.push([v,u]);m=(p+Math.floor(q-1)*c)/2;v=s*m+b;u=n*m+d;f.push([v,u])}f.push([g,k])}});return d?new g({paths:e,spatialReference:b.spatialReference}):new k({rings:e,spatialReference:b.spatialReference})}function p(a,d,e){d&&(a=b(a,1E6),a=f.webMercatorToGeographic(a,!0));e&&(a=c(a,e));return a}function q(a,b,c){var e=
a.x||a[0],f;e>b?(f=d(e,b),a.x?a=a.clone().offset(f*-2*b,0):a[0]=e+f*-2*b):e<c&&(f=d(e,c),a.x?a=a.clone().offset(f*-2*c,0):a[0]=e+f*-2*c);return a}function u(b,c){var e=-1;a.forEach(c.cutIndexes,function(f,g){var k=c.geometries[g];a.forEach(k.rings||k.paths,function(b,c){a.some(b,function(a){if(!(180>a[0])){a=0;var e,f=b.length,g;for(e=0;e<f;e++)g=b[e][0],a=g>a?g:a;a=Number(a.toFixed(9));a=-360*d(a,180);f=b.length;for(e=0;e<f;e++)g=k.getPoint(c,e),k.setPoint(c,e,g.clone().offset(a,0))}return!0})});
f===e?k.rings?a.forEach(k.rings,function(a){b[f]=b[f].addRing(a)}):a.forEach(k.paths,function(a){b[f]=b[f].addPath(a)}):(e=f,b[f]=k)});return b}function t(b,l,h,s){var t=new m;t.then(h,s);l=l||n.geometryService;var x=[],r=[],z,L,H,K,$,R,N,Q,F=0;a.forEach(b,function(b){if(b)if(z||(z=b.spatialReference,L=z._getInfo(),K=(H=z.isWebMercator)?2.0037508342788905E7:180,$=H?-2.0037508342788905E7:-180,R=H?102100:4326,N=new g({paths:[[[K,$],[K,K]]],spatialReference:{wkid:R}}),Q=new g({paths:[[[$,$],[$,K]]],
spatialReference:{wkid:R}})),L){var f=e.fromJSON(b.toJSON()),l=b.getExtent();"point"===b.type?x.push(q(f,K,$)):"multipoint"===b.type?(f.points=a.map(f.points,function(a){return q(a,K,$)}),x.push(f)):"extent"===b.type?(f=l.clone()._normalize(null,null,L),x.push(f.rings?new k(f):f)):l?(b=d(l.xmin,$)*2*K,f=0===b?f:c(f,b),l=l.clone().offset(b,0),l.intersects(N)&&l.xmax!==K?(F=l.xmax>F?l.xmax:F,f=p(f,H),r.push(f),x.push("cut")):l.intersects(Q)&&l.xmin!==$?(F=l.xmax*2*K>F?l.xmax*2*K:F,f=p(f,H,360),r.push(f),
x.push("cut")):x.push(f)):x.push(f)}else x.push(b);else x.push(b)});h=new g;s=d(F,K);for(var D=-90,S=s;0<s;){var X=-180+360*s;h.addPath([[X,D],[X,-1*D]]);D*=-1;s--}0<r.length&&0<S?l?l.cut(r,h,function(c){r=u(r,c);var d=[];a.forEach(x,function(a,c){if("cut"===a){var e=r.shift();b[c].rings&&1<b[c].rings.length&&e.rings.length>=b[c].rings.length?(x[c]="simplify",d.push(e)):x[c]=!0===H?f.geographicToWebMercator(e):e}});0<d.length?l.simplify(d,function(b){a.forEach(x,function(a,c){"simplify"===a&&(x[c]=
!0===H?f.geographicToWebMercator(b.shift()):b.shift())});t.callback(x)},function(a){t.errback(a)}):t.callback(x)},function(a){t.errback(a)}):t.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(a.forEach(x,function(a,b){if("cut"===a){var c=r.shift();x[b]=!0===H?f.geographicToWebMercator(c):c}}),t.callback(x));return t.promise}function r(b,c,d,e){var f=!1,g;h.isObject(b)&&b&&(h.isArray(b)?b.length&&((g=b[0]&&b[0].declaredClass)&&-1!==g.indexOf("Graphic")?
(b=a.map(b,function(a){return a.geometry}),f=b.length?!0:!1):g&&-1!==g.indexOf("esri.geometry.")&&(f=!0)):(g=b.declaredClass)&&-1!==g.indexOf("FeatureSet")?(b=a.map(b.features||[],function(a){return a.geometry}),f=b.length?!0:!1):g&&-1!==g.indexOf("esri.geometry.")&&(f=!0));f&&c.push({index:d,property:e,value:b})}function s(b,c){var d=[];a.forEach(c,function(c){var e=c.i,f=b[e];c=c.p;var g;if(h.isObject(f)&&f)if(c)if("*"===c[0])for(g in f)f.hasOwnProperty(g)&&r(f[g],d,e,g);else a.forEach(c,function(a){r(h.getObject(a,
!1,f),d,e,a)});else r(f,d,e)});return d}function x(b,c){var d=0,e={};a.forEach(c,function(a){var c=a.index,f=a.property,g=a.value,l=g.length||1,k=b.slice(d,d+l);h.isArray(g)||(k=k[0]);d+=l;delete a.value;f?(e[c]=e[c]||{},e[c][f]=k):e[c]=k});return e}return{normalizeCentralMeridian:t,_foldCutResults:u,_prepareGeometryForCut:p,_offsetMagnitude:d,_pointNormalization:q,_updatePolyGeometry:c,_straightLineDensify:b,_createWrappers:function(b){var c=h.isObject(b)?b.prototype:h.getObject(b+".prototype");
a.forEach(c.__msigns,function(b){var d=c[b.n];c[b.n]=function(){var c=this,e=[],f;for(f=0;f<b.c;f++)e[f]=arguments[f];var g={};e.push(g);var l,k=[],h;c.normalization&&!c._isTable&&(l=s(e,b.a),a.forEach(l,function(a){k=k.concat(a.value)}),k.length&&(h=t(k)));return h?h.then(function(a){g.assembly=x(a,l);return d.apply(c,e)}):d.apply(c,e)}})},_disassemble:s,_addToBucket:r,_reassemble:x}})},"esri/tasks/Task":function(){define(["../core/declare","dojo/_base/lang","../core/Accessoire","../core/urlUtils"],
function(a,h,m,n){return a(m,{declaredClass:"esri.tasks._Task",classMetadata:{properties:{parsedUrl:{readOnly:!0,dependsOn:["url"]}}},normalizeCtorArgs:function(a,k){if("string"!==typeof a)return a;var f={};a&&(f.url=a);k&&h.mixin(f,k);return f},url:null,parsedUrl:null,_parsedUrlGetter:function(){return this.url?n.urlToObject(this.url):null},requestOptions:null,normalization:!0,_useSSL:function(){var a=this.parsedUrl,k=/^http:/i;this.url&&this.set("url",this.url.replace(k,"https:"));a&&a.path&&(a.path=
a.path.replace(k,"https:"))},_encode:function(a,k,f){var e,d,c={},b,m;for(b in a)if("declaredClass"!==b&&(e=a[b],d=typeof e,null!==e&&void 0!==e&&"function"!==d))if(h.isArray(e)){c[b]=[];m=e.length;for(d=0;d<m;d++)c[b][d]=this._encode(e[d])}else"object"===d?e.toJSON&&(d=e.toJSON(f&&f[b]),"esri.tasks.support.FeatureSet"===e.declaredClass&&d.spatialReference&&(d.sr=d.spatialReference,delete d.spatialReference),c[b]=k?d:JSON.stringify(d)):c[b]=e;return c}})})},"esri/tasks/support/FeatureSet":function(){define("../../core/jsonDictionary ../../core/JSONSupporter ../../core/lang ../../Graphic ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),
function(a,h,m,n,g,k,f,e){a=a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return h.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",classMetadata:{reader:{exclude:["transform"]}},getDefaults:function(){return e.mixin(this.inherited(arguments),{features:[]})},displayFieldName:null,exceededTransferLimit:null,features:null,_featuresReader:function(a,c){var b=g.fromJSON(c.spatialReference),
e;e=a.map(function(a){var c=n.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;c.geometry&&!a&&(c.geometry.spatialReference=b);return c});c.transform&&this._hydrate(c.transform,c.geometryType,e);return e},fieldAliases:null,geometryType:null,_geometryTypeReader:a.fromJSON,spatialReference:null,_spatialReferenceReader:function(a){return g.fromJSON(a)},toJSON:function(a){var c={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(c.displayFieldName=this.displayFieldName);this.fields&&(c.fields=
this.fields);this.spatialReference?c.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(c.spatialReference=this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(c.geometryType=f.getJsonType(this.features[0].geometry)),c.features=k._encodeGraphics(this.features,a));c.exceededTransferLimit=this.exceededTransferLimit;c.transform=this.transform;return m.fixJson(c)},quantize:function(a){var c=a.translate[0],b=a.translate[1],
e=a.scale[0],f=a.scale[1],g=this.features,k=function(a,b,c){var d,e,f,g,k,h,m=[];d=0;for(e=a.length;d<e;d++)if(f=a[d],0<d){if(h=b(f[0]),f=c(f[1]),h!==g||f!==k)m.push([h-g,f-k]),g=h,k=f}else g=b(f[0]),k=c(f[1]),m.push([g,k]);return 0<m.length?m:null},h=function(a,b,c){if("point"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var d,e,f,g,h;f=a.rings||a.paths;h=[];d=0;for(e=f.length;d<e;d++)g=f[d],(g=k(g,b,c))&&h.push(g);return 0<h.length?(a.rings?
a.rings=h:a.paths=h,a):null};if("multipoint"===a)return function(a){var d;d=k(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("extent"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-c)/e)},function(a){return Math.round((b-a)/f)}),m,n;m=0;for(n=g.length;m<n;m++)h(g[m].geometry)||(g.splice(m,1),m--,n--);this.transform=a;return this},_hydrate:function(a,c,b){if(a){var e=a.translate[0],f=a.translate[1],g=a.scale[0],k=a.scale[1],h=function(a,b,c){if("esriGeometryPoint"===
a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,e,f,g,k,h,m,p;d=0;for(e=a.length;d<e;d++){k=a[d];f=0;for(g=k.length;f<g;f++)h=k[f],0<f?(m+=h[0],p+=h[1]):(m=h[0],p=h[1]),h[0]=b(m),h[1]=c(p)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,f,g,k;d=0;for(e=a.length;d<
e;d++)f=a[d],0<d?(g+=f[0],k+=f[1]):(g=f[0],k=f[1]),f[0]=b(g),f[1]=c(k)}}(c,function(a){return a*g+e},function(a){return f-a*k});a=0;for(c=b.length;a<c;a++)b[a].geometry&&h(b[a].geometry)}}})})},"esri/geometry/support/graphicsUtils":function(){define(["dojo/_base/array","../Extent"],function(a,h){return{graphicsExtent:function(a){var n=a[0].geometry,g=n.extent,k,f,e=a.length;null===g&&(g=new h(n.x,n.y,n.x,n.y,n.spatialReference));for(f=1;f<e;f++)k=(n=a[f].geometry).extent,null===k&&(k=new h(n.x,n.y,
n.x,n.y,n.spatialReference)),g=g.clone().union(k);return 0>g.width&&0>g.height?null:g},getGeometries:function(h){return a.map(h,function(a){return a.geometry})},_encodeGraphics:function(h,n){var g=[],k,f,e;a.forEach(h,function(a,c){k=a.toJSON();f={};k.geometry&&(e=n&&n[c],f.geometry=e&&e.toJSON()||k.geometry);k.attributes&&(f.attributes=k.attributes);g[c]=f});return g}}})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),
function(a,h,m,n,g,k,f){return a.ofType(k).createSubclass([h],{properties:{layer:{value:null},_queryEngine:{value:null,dependsOn:["layer.loaded"],get:function(){return this.get("layer.loaded")?new f({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(a){return this._queryEngine?this._queryEngine.queryFeatures(a).then(function(a){var c=new g;c.features=a;return c}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(a){return this._queryEngine?
this._queryEngine.queryObjectIds(a):this._rejectQuery("Not ready to execute query")},queryFeatureCount:function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery("Not ready to execute query")},queryExtent:function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(a){return m.reject(new n("MemorySource",a))}})})},"esri/layers/graphics/QueryEngine":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../../core/promiseUtils ../../core/Error ../../geometry/support/graphicsUtils".split(" "),
function(a,h,m,n,g,k){return a(null,{constructor:function(a){h.mixin(this,a)},features:null,objectIdField:null,queryFeatures:function(a){if(this.features)if(a)if(this._isSupportedQuery(a)){var e=this._createFilters(a);a=e.length?this._executeQuery(a,e):this._rejectQuery("Invalid query")}else a=this._rejectQuery("Unsupported query");else a=this._returnAllFeatures();else a=this._rejectQuery("Engine not initialized");return a},queryObjectIds:function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):
this._rejectQuery("Unsupported query")},queryFeatureCount:function(a){return this.queryFeatures(a).then(function(a){return a.length}.bind(this))},queryExtent:function(a){return this.queryFeatures(a).then(function(a){return{count:a.length,extent:this._getExtent(a)}}.bind(this))},_returnAllFeatures:function(){return n.resolve(this.features.toArray())},_executeQuery:function(a,e){var d=new m,c;c=this.features.filter(function(b){return e.every(function(c){return c.call(this,b,a)},this)},this);d.resolve(c.toArray());
return d.promise},_isSupportedQuery:function(a){return null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&a.outStatistics.length||a.pixelSize||a.quantizationParameters||a.relationParam||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&
a.objectIds.length&&!this.objectIdField?!1:!0},_createFilters:function(a){var e=[];a.objectIds&&a.objectIds.length&&e.push(this._createObjectIdFilter());a.geometry&&("extent"===a.geometry.type&&"intersects"===a.spatialRelationship)&&e.push(this._createExtentFilter());return e},_createExtentFilter:function(){return function(a,e){var d=a.geometry,c=e.geometry;return d&&c.intersects(d)}},_createObjectIdFilter:function(){return function(a,e){var d=a.attributes;return-1<e.objectIds.indexOf(d&&d[this.objectIdField])}},
_rejectQuery:function(a){return n.reject(new g("QueryEngine",a))},_getObjectIds:function(a){var e=this.objectIdField,d=[];a.forEach(function(a){a=(a=a.attributes)&&a[e];null!=a&&d.push(a)});return d},_getExtent:function(a){return a.length?k.graphicsExtent(a):null}})})},"esri/layers/FeatureLayer":function(){define("require dojo/_base/lang dojo/io-query ../Graphic ../PopupTemplate ../core/lang ../core/jsonDictionary ../core/MultiOriginJSONSupport ../core/sniff ../core/Collection ../core/Error ../core/HandleRegistry ../core/promiseUtils ../core/requireUtils ../core/urlUtils ../geometry/Extent ../geometry/SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/support/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/jsonUtils ../tasks/support/Query ./Layer ./mixins/PortalLayer ./graphics/sources/MemorySource ./support/Field ./support/FeatureType ./support/LabelClass ./support/arcgisLayerURL".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w,B,y,C,E,z,L,H,K,$,R,N){var Q=f({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",absoluteHeight:"absolute-height"});f=f({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});var F=z.createSubclass([L,e],{declaredClass:"esri.layers.FeatureLayer",viewModulePaths:{"2d":"../views/2d/layers/GraphicsLayerView2D","3d":"../views/3d/layers/FeatureLayerView3D"},
constructor:function(){this._handles=new p},normalizeCtorArgs:function(a,b){return"string"===typeof a?h.mixin({},{url:a},b):a},load:function(){var a=this.loadFromPortal(function(){if(this.url)return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this),!this._hasMemorySource()).then(function(){if(!this.url)return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this));this.addResolvingPromise(a)},_handles:null,_rndProps:"field field2 field3 rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
_visVariableProps:["field","normalizationField"],controllerModulePaths:{"0":"./graphics/controllers/SnapshotController",1:{"2d":"./graphics/controllers/OnDemandController","3d":"./graphics/controllers/OnDemandController"},2:"./graphics/controllers/SelectionController",6:"./graphics/controllers/AutoController"},properties:{advancedQueryCapabilities:null,allowGeometryUpdates:{json:{read:function(a){return null==a?!0:a}}},allRenderers:{readOnly:!0,dependsOn:["loaded","renderer","fields"],get:function(){return this._getAllRenderers(this.renderer)}},
capabilities:{json:{read:function(a){return a&&a.split(",").map(function(a){return a.trim()})}}},copyright:{value:null,json:{readFrom:["copyrightText"],read:function(a,b){return b.copyrightText}}},definitionExpression:{value:null,json:{ignore:!0}},defaultSymbol:{json:{read:w.fromJSON}},editable:{value:!1,get:function(){return this.userIsAdmin||this._hasMemorySource()||this._get("editable")},json:{readFrom:["capabilities"],read:function(a,b){b.capabilities&&(a=-1!==b.capabilities.toLowerCase().indexOf("editing"));
return!!a}}},elevationInfo:{value:null,json:{read:function(a){a=k.clone(a);a.mode=Q.fromJSON(a.mode);return a}}},fields:{value:null,type:[K]},fullExtent:{value:null,type:r,json:{readFrom:["extent"],read:function(a,b){return b.extent&&r.fromJSON(b.extent)}}},generalizeForScale:4E3,geometryType:{json:{read:f.fromJSON}},hasAttachments:{value:!1,readOnly:!0,get:function(){return!this._hasMemorySource()&&this._get("hasAttachments")}},hasM:!1,hasZ:!1,id:{json:{ignore:!0}},isTable:{value:!1,readOnly:!0,
json:{readFrom:["type"],read:function(a,b){return"Table"===b.type}}},labelsVisible:{value:!1,json:{readFrom:["showLabels"],read:function(a,b){return b.showLabels}}},labelingInfo:{value:null,json:{readFrom:["drawingInfo.labelingInfo"],read:function(a,b){a=b.drawingInfo&&b.drawingInfo.labelingInfo;if(!a)return null;var c=/\[([^\[\]]+)\]/ig,d,e=function(a,c){var d=this.getField(c,b.fields);return"["+(d&&d.name||c)+"]"}.bind(this);return a.map(function(a){a=R.fromJSON(a);if(d=a.labelExpression)a.labelExpression=
d.replace(c,e);return a})}}},layerId:{json:{readFrom:["id"],read:function(a,b){return b.id}}},legendEnabled:{value:!0,json:{readFrom:["showLegend"],read:function(a,b){return null!=b.showLegend?b.showLegend:!0}}},maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxRecordCount:null,maxVertexCountForAuto:25E4,minScale:{value:0,json:{readFrom:["minScale","effectiveMinScale"],read:function(a,b){return b.effectiveMinScale||a}}},maxScale:{value:0,json:{readFrom:["maxScale","effectiveMaxScale"],read:function(a,
b){return b.effectiveMaxScale||a}}},mode:{dependsOn:["source"],get:function(){var a=this._get("mode");null==a&&(a=(this.source.isInstanceOf(c),F.MODE_SNAPSHOT));return a}},objectIdField:{json:{readFrom:["fields"],read:function(a,b){a||b.fields.some(function(b){"esriFieldTypeOID"===b.type&&(a=b.name);return!!a});return a}}},opacity:{value:1,json:{readFrom:["drawingInfo.transparency"],read:function(a,b){return 1-b.drawingInfo.transparency/100}}},outFields:{value:null,dependsOn:["requiredFields"],get:function(){var a=
this._get("outFields"),b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));return a},set:function(a){var b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===
a?a:this.getField(a).name},this));this._set("outFields",a)}},parsedUrl:{dependsOn:["layerId"],get:function(){var a=this.url?t.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=t.join(a.path,this.layerId.toString()));return a}},popupEnabled:{value:!0,json:{readFrom:["disablePopup"],read:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0}}},popupTemplate:{value:null,type:g,json:{readFrom:["popupInfo"],read:function(a,b){return b.popupInfo?g.fromJSON(b.popupInfo):null}}},portalLoaderModule:{dependsOn:["source"],
get:function(){return this._hasMemorySource()?"portal/loaders/FeatureCollectionLoader":"portal/loaders/FeatureLayerLoader"}},relationships:null,renderer:{set:function(a){var b=this._getAllRenderers(a);this._fixRendererFields(b);this._set("renderer",a)},json:{readFrom:["drawingInfo.renderer","defaultSymbol","type"],read:function(a,b){var c;if(a=b.drawingInfo&&b.drawingInfo.renderer)a=C.fromJSON(a);else if(b.defaultSymbol)w.fromJSON(b.defaultSymbol),b.types&&b.types.length?(a=new y({defaultSymbol:c,
field:b.typeIdField}),b.types.forEach(function(b){a.addUniqueValueInfo(b.id,w.fromJSON(b.symbol))})):a=new B({symbol:c});else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":c=new x;break;case "esriGeometryPolyline":c=new v;break;case "esriGeometryPolygon":c=new l}a=c&&new B({symbol:c})}return a}}},requiredFields:{dependsOn:["allRenderers"],get:function(){var a=this.timeInfo,b=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,
a&&a.startTimeField,a&&a.endTimeField,this.trackIdField],c=this._rndProps;this.allRenderers.forEach(function(a){c.forEach(function(c){b.push(h.getObject(c,!1,a))});a.visualVariables&&a.visualVariables.forEach(function(a){this._visVariableProps.forEach(function(c){b.push(a[c])})},this)},this);b=b.concat(this.dataAttributes);return b.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})}},returnM:!1,returnZ:!1,source:{cast:function(a){return a&&(Array.isArray(a)||a.isInstanceOf&&
a.isInstanceOf(c))?new H({layer:this,items:a}):a},set:function(a){var b=this._get("source");b!==a&&(b&&(b.isInstanceOf&&b.isInstanceOf(H))&&this._resetMemorySource(b),a&&(a.isInstanceOf&&a.isInstanceOf(H))&&this._initMemorySource(a),this._set("source",a))}},supportsCoordinatesQuantization:!1,serviceDefinitionExpression:{json:{readFrom:["definitionExpression"],read:function(a,b){return b.definitionExpression}}},spatialReference:{json:{readFrom:["extent"],read:function(a,b){return(a=b.extent&&b.extent.spatialReference)&&
s.fromJSON(a)}}},title:{get:function(){if(this.url){var a=N.parse(this.url);if(a&&a.title)return a.title}return""},json:{readFrom:["name"],read:function(a,b){if(null!=a)return a;var c=[];if(this.titleIncludesUrl&&this.url){var d=N.parse(this.url);d&&d.title&&c.push(d.title)}b.name&&(d=N.cleanTitle(b.name),(0===c.length||-1===c[0].toLowerCase().indexOf(d.toLowerCase()))&&c.push(d));return c.join(" - ")}}},titleIncludesUrl:!0,trackIdField:{json:{readFrom:["timeInfo.trackIdField"],read:function(a,b){return b.timeInfo.trackIdField}}},
typeIdField:{json:{read:function(a,b){if(a){var c=this.getField(a,b.fields);c&&(a=c.name)}return a}}},types:{json:{read:function(a,b){var c=b.editFieldsInfo,d=c&&c.creatorField,e=c&&c.editorField;return a&&a.map(function(a){a=new $(a);this._fixTemplates(a.templates,d);this._fixTemplates(a.templates,e);return a},this)}}},url:{set:function(a){var b=t.urlToObject(a),c=N.parse(b.path);c&&null!=c.sublayer&&(null==this.layerId&&(this.layerId=c.sublayer),b=m.objectToQuery(b.query),a=c.url.path,b&&(a=a+"?"+
b));this._set("url",t.normalize(a))}},userIsAdmin:!1,version:{json:{readFrom:"currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "),read:function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||b.hasOwnProperty("types")?
10:9.3);return a}}}},createGraphicsSource:function(){return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),q.resolve(this.source)):u.when(a,"./graphics/sources/FeatureLayerSource").then(function(a){return new a({layer:this})}.bind(this)).then(function(a){this.emit("graphics-source-create",{graphicsSource:a});return a}.bind(this))},createGraphicsController:function(d){var e=this.controllerModulePaths[this.mode],f=d.layerView,g=c.ofType(n),k=this.source,l=
k&&k.isInstanceOf&&k.isInstanceOf(c),m=h.mixin(d.options||{},{layer:this,layerView:f,graphics:l?k:new g});if(l)return q.resolve(m);"object"===typeof e&&(e=e[f.view.type]);return e?u.when(a,e).then(function(a){return new a(m)}.bind(this)).then(function(a){this.emit("graphics-controller-create",{graphicsController:a});return a}.bind(this)):q.reject(new b("Layer mode",'Module path not found for controller type: "'+this.mode+'"'))},createQueryParameters:function(){var a=new E;a.returnGeometry=!0;a.returnZ=
this.hasZ&&this.returnZ||null;a.returnM=this.hasM&&this.returnM||null;a.outFields=this.outFields;a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a},getField:function(a,b){var c;if(b=b||this.fields)a=a.toLowerCase(),b.some(function(b){b&&b.name.toLowerCase()===a&&(c=b);return!!c});return c},graphicChanged:function(a){this.emit("graphic-update",a)},queryFeatures:function(a){a=a||this.createQueryParameters();if(!this.source.queryFeatures)return q.reject(new b("FeatureLayer",
"Layer source does not support queryFeatures capability"));var c=this.popupTemplate;return this.source.queryFeatures(a).then(function(a){a&&a.features&&a.features.forEach(function(a){a.popupTemplate=c});return a})},queryObjectIds:function(a){a=a||this.createQueryParameters();return this.source.queryObjectIds?this.source.queryObjectIds(a):q.reject(new b("FeatureLayer","Layer source does not support queryObjectIds capability"))},queryFeatureCount:function(a){a=a||this.createQueryParameters();return this.source.queryFeatureCount?
this.source.queryFeatureCount(a):q.reject(new b("FeatureLayer","Layer source does not support queryFeatureCount capability"))},queryExtent:function(a){a=a||this.createQueryParameters();return this.source.queryExtent?this.source.queryExtent(a):q.reject(new b("FeatureLayer","Layer source does not support queryExtent capability"))},_initLayerProperties:function(a){this.source||(this.source=a);a.url&&(this.url=a.url,this.elevationInfo&&(this.elevationInfo=this.properties.elevationInfo.json.read(this.elevationInfo)));
a.layerDefinition&&this.read(a.layerDefinition);this._verifySource();this._verifyFields();this._fixSymbolUrls();this.useQueryTimestamp=(d("ie")||d("safari"))&&this.editable&&10.02>this.version;this.watch("token",function(){this._fixSymbolUrls()}.bind(this))},_fixSymbolUrls:function(){var a=this.renderer;if(!this._hasMemorySource()){var b=this.token,c=[a.symbol,a.defaultSymbol];(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){c.push(a.symbol)});c.forEach(function(a){var c=a&&a.url;
c&&(b&&-1!==c.search(/https?\:/i)&&-1===c.indexOf("?token\x3d"))&&(a.url+="?token\x3d"+b)})}},_getAllRenderers:function(a){var b=[];a&&[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b},_fixRendererFields:function(a){var b=this.fields;a&&b&&a.forEach(function(a){this._fixFieldName(this._rndProps,a);a.visualVariables&&a.visualVariables.forEach(function(a){this._fixFieldName(this._visVariableProps,
a)},this)},this)},_fixFieldName:function(a,b){a&&a.forEach(function(a){var c=h.getObject(a,!1,b);(c=c&&"function"!==typeof c&&this.getField(c))&&h.setObject(a,c.name,b)},this)},_verifyFields:function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");!this.isTable&&(!this._hasMemorySource()&&-1===a.search(/\/FeatureServer\//i)&&(!this.fields||!this.fields.some(function(a){return"geometry"===
a.type})))&&console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")},_fixTemplates:function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})},_verifySource:function(){if(this._hasMemorySource()){if(this.url)throw new b("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url");var a=["geometryType",
"fields","objectIdField"];if(!a.every(function(a){return this.hasOwnProperty(a)},this))throw new b("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+a.join(),{requiredProperties:a});}else if(!this.url)throw new b("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");},_initMemorySource:function(a){a.forEach(function(a){a.layer=this}.bind(this));this._handles.add([a.on("after-add",function(a){a.item.layer=
this}.bind(this)),a.on("after-remove",function(a){a.item.layer=null}.bind(this))],"fl-source")},_resetMemorySource:function(a){a.forEach(function(a){a.layer=null}.bind(this));this._handles.remove("fl-source")},_hasMemorySource:function(){return!this.url&&this.source}});h.mixin(F,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,MODE_AUTO:6});return F})},"esri/renderers/SimpleRenderer":function(){define(["../core/declare","../core/lang","dojo/_base/lang","../symbols/support/jsonUtils","./Renderer"],
function(a,h,m,n,g){var k=a(g,{declaredClass:"esri.renderer.SimpleRenderer",type:"simple",getDefaults:function(){return m.mixin(this.inherited(arguments),{description:null,label:null,symbol:null})},_symbolReader:n.fromJSON,getSymbol:function(a){return this.symbol},toJSON:function(){var a=m.mixin(this.inherited(arguments),{type:this.type,label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJSON()});return h.fixJson(a)},clone:function(){return new k({description:this.description,
label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:h.clone(this.visualVariables)})}});return k})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessoire ../core/JSONSupporter ../core/jsonDictionary ../core/screenUtils dojo/_base/lang dojo/_base/array ../Color ../arcade/arcade".split(" "),function(a,h,m,n,g,k,f,e,d){var c=n({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),b=n({width:"width",depth:"depth",height:"height",
widthAndDepth:"width-and-depth",all:"all"}),p=Math.PI;return a([h,m],{declaredClass:"esri.renderer.Renderer",classMetadata:{properties:{requiredFields:{dependsOn:["visualVariables"]}},reader:{exclude:["rotationType","rotationExpression"]}},constructor:function(){this._ipDataCache={}},getDefaults:function(){return k.mixin(this.inherited(arguments),{authoringInfo:null})},_rotationRE:/^\[([^\]]+)\]$/i,_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,
centimeters:100,decimeters:10,meters:1,kilometers:0.0010,"decimal-degrees":180/20015077},_scaleExpr:"view.scale",_requiredFieldsGetter:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a)},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&b.field&&(a[b.field]=!0);b&&b.normalizationField&&(a[b.normalizationField]=!0)})},_visualVariablesReader:function(a,b){return this._readVariables(a,b)},
_visualVariablesSetter:function(a){var b=this._ipDataCache;f.forEach(this.visualVariables,function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);f.some(a,function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});f.forEach(a,function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type&&(b[c]=this._processSizeInfo(a))},this);return a},getSymbol:function(a){},getVisualVariableValues:function(a,
b){var c=this.visualVariables,d;c&&(d=f.map(c,function(c){var d,e=c.type,f=e+"Info";b=k.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this));return d},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!(!this.getVisualVariablesForType("size",b)&&!this.getVisualVariablesForType("color",b)&&!this.getVisualVariablesForType("opacity",
b)&&!this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=f.filter(c,function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._ipDataCache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?
this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c,d=this._getVarInfo(a,"size"),e=this._ipDataCache[d.cacheKey],f={scale:b};if((a=d.variable)&&b){var g=a.minSize,d=a.maxSize,g="object"===typeof g&&g?this._getSize({},g,e&&e.minSize,f):g,e="object"===typeof d&&d?this._getSize({},d,e&&e.maxSize,f):d;if(null!=g||null!=e)c={minSize:g,maxSize:e}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,
c.variable,this._ipDataCache[c.cacheKey])},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._ipDataCache[c.cacheKey],!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation").variable,d="arithmetic"===c.rotationType,c=c.field,e=a.attributes,f=0;c&&(k.isFunction(c)?f=c.apply(this,arguments):e&&(f=e[c]||0),f=(f+(d?-90:0))*(d?-1:1));return f},toJSON:function(){var a,b=this.visualVariables,d=k.clone(this.authoringInfo),
e=this.getVisualVariablesForType("rotation",!1),g=e&&e[0],e=(e=g&&g.field)&&(k.isFunction(e)?e:"["+e+"]");b&&(a=[],f.forEach(b,function(b){"size"===b.type?a.push(this._writeSizeInfo(b)):"color"===b.type?a.push(this._writeColorInfo(b)):"opacity"===b.type?a.push(this._writeOpacityInfo(b)):"rotation"===b.type&&!g&&a.push(this._writeRotationInfo(b))},this));d&&f.forEach(d.visualVariables,function(a){"opacity"===a.type&&(a.type=c.toJSON(a.type))});return{rotationType:e&&(g.rotationType||"geographic"),
rotationExpression:e,visualVariables:a,authoringInfo:d}},_getVarInfo:function(a,b){var c;a&&a.type===b?(c=f.indexOf(this.visualVariables,a),a=this.visualVariables[c]):(a=(c=this.getVisualVariablesForType(b))&&c[0],c=f.indexOf(this.visualVariables,a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=b.fromJSON(a.axis));return a},_readColorInfo:function(a){a&&(f.forEach(a.colors,function(b,c){k.isArray(b)?a.colors[c]=e.fromJSON(b):a.colors[c]=new e(b)}),f.forEach(a.stops,function(b,
c){b.color&&k.isArray(b.color)?a.stops[c].color=e.fromJSON(b.color):b.color&&(a.stops[c].color=new e(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=k.mixin({},a),b.transparencyValues&&(b.opacityValues=f.map(b.transparencyValues,function(a){return 1-a/100}),delete b.transparencyValues),b.stops&&(b.stops=f.map(b.stops,function(a){a=k.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=f.map(a,function(a){a.type=
c.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var d=b.rotationType,e=b.rotationExpression;if(e)if(d={type:"rotation",rotationType:d},k.isFunction(e))d.field=e,a.push(d);else if((e=e.match(this._rotationRE))&&e[1])d.field=e[1],a.push(d);return a},_processColorInfo:function(a){a&&(f.forEach(a.colors,function(b,c){b instanceof e||(a.colors[c]=new e(b))}),f.forEach(a.stops,function(b,
c){b.color&&!(b.color instanceof e)&&(a.stops[c].color=new e(b.color))}));return this._interpolateData(a)},_processOpacityInfo:function(a){return this._interpolateData(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._interpolateData(a),minSize:this._interpolateData(a.minSize),maxSize:this._interpolateData(a.maxSize)}},
_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=g.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&a.forEach(function(a){a.size=g.toPt(a.size)});return a},_getSize:function(a,b,c,d,e){var f=a.attributes,g=b.field,l=b.expression,h=b.stops,m=0,n="number"===typeof a,C=n?a:null;if(g||l){var E=d&&d.scale,z=e?e[0]:b.minSize,L=e?e[1]:b.maxSize,H=b.minDataValue,K=b.maxDataValue,$=b.valueUnit||"unknown",R=b.valueRepresentation,m=b.scaleBy,
N=b.normalizationField,Q=f?parseFloat(f[N]):void 0,F=d&&d.shape;l&&(C=l.toLowerCase()===this._scaleExpr?null==E?this._getAverageValue(b):E:null);"number"!==typeof C&&(k.isFunction(g)?C=g.apply(this,arguments):f&&(C=f[g]));if(null==C||N&&!n&&(isNaN(Q)||0===Q))return null;!isNaN(Q)&&!n&&(C/=Q);if(h)L=this._lookupData(C,c),C=L[0],z=L[1],C===z?m=h[C].size:(C=h[C].size,h=h[z].size,m=C+(h-C)*L[2]);else if(null!=z&&null!=L&&null!=H&&null!=K)C<=H?m=z:C>=K?m=L:(h=(C-H)/(K-H),"area"===m&&F?(z=(C="circle"===
F)?p*Math.pow(z/2,2):z*z,L=C?p*Math.pow(L/2,2):L*L,h=z+h*(L-z),m=C?2*Math.sqrt(h/p):Math.sqrt(h)):m=z+h*(L-z));else if("unknown"===$)null!=z&&null!=H?(z&&H?(h=C/H,m="circle"===F?2*Math.sqrt(h*Math.pow(z/2,2)):"square"===F||"diamond"===F||"image"===F?Math.sqrt(h*Math.pow(z,2)):h*z):m=C+(z||H),m=m<z?z:m,null!=L&&m>L&&(m=L)):m=C;else{h=(d&&d.resolution?d.resolution:1)*this._meterIn[$];if("area"===R)m=Math.sqrt(C/p)/h,m*=2;else if(m=C/h,"radius"===R||"distance"===R)m*=2;null!=z&&m<z&&(m=z);null!=L&&m>
L&&(m=L)}}else b&&(m=h&&h[0]&&h[0].size,null==m&&(m=b.minSize));return m=isNaN(m)?0:m},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||0);return(c+a)/2},_getColorComponent:function(a,b,c,d,e){var f=a.attributes,g=b&&b.field,l="number"===typeof a?a:null,h;if(g){var m=b.normalizationField,p=f?parseFloat(f[m]):void 0;"number"!==typeof l&&(k.isFunction(g)?l=g.apply(this,arguments):f&&(l=f[g]));null!=l&&(m&&(!isNaN(p)&&0!==p)&&
(l/=p),h=d?this._getOpacity(l,b,c):this._getColor(l,b,c))}else b&&(f=b.stops,d?(h=f&&f[0]&&f[0].opacity,null==h&&(h=b.opacityValues&&b.opacityValues[0])):h=f&&f[0]&&f[0].color||b.colors&&b.colors[0]);e&&(e.data=l,e.value=h);return e||h},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=f.map(a.stops,function(a){return a.value}));return b},_getOpacity:function(a,
b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):e.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new e(d));return d},_getColorObj:function(a,
b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;f.some(b,function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_writeRotationInfo:function(a){a&&(a=k.mixin({},a),a.type=c.toJSON(a.type));return a},_writeSizeInfo:function(a){if(a){a=k.mixin({},a);var d=a.legendOptions,e=a.axis;a.type=c.toJSON(a.type);e&&(a.axis=b.toJSON(e));if(d&&(a.legendOptions=k.mixin({},d),d=d.customValues))a.legendOptions.customValues=
d.slice(0)}return a},_writeColorInfo:function(a){a&&(a=k.mixin({},a),a.type=c.toJSON(a.type),a.colors&&(a.colors=f.map(a.colors,function(a){return e.toJSON(a)})),a.stops&&(a.stops=f.map(a.stops,function(a){a=k.mixin({},a);a.color&&(a.color=e.toJSON(a.color));return a})));return a},_writeOpacityInfo:function(a){var b;a&&(b=k.mixin({},a),b.type=c.toJSON(b.type),b.opacityValues&&(b.transparencyValues=f.map(b.opacityValues,function(a){return 100*(1-a)}),delete b.opacityValues),b.stops&&(b.stops=f.map(b.stops,
function(a){a=k.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})));return b},_createExprContext:function(a){return{vars:{$feature:d.constructFeature(a)}}},_parseExpr:function(a,b){return d.parseScript(a,b)},_executeExpr:function(a,b){return d.executeScript(a,b,-1)}})})},"esri/arcade/arcade":function(){define(["require","exports","./arcadeRuntime","./parser","./Feature"],function(a,h,m,n,g){h.constructFeature=function(a){return g.fromFeature(a)};h.parseScript=function(a){return n.parseScript(a)};
h.validateScript=function(a,f){return n.validateScript(a,f,"simple")};h.scriptCheck=function(a,f,e){return n.scriptCheck(a,f,e,"full")};h.parseAndExecuteScript=function(a,f,e){return m.executeScript(n.parseScript(a),f,e)};h.executeScript=function(a,f,e){return m.executeScript(a,f,e)};h.referencesMember=function(a,f){return m.referencesMember(a,f)};h.referencesFunction=function(a,f){return m.referencesFunction(a,f)};h.extractFieldLiterals=function(a,f){void 0===f&&(f=!1);return n.extractFieldLiterals(a,
f)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,
w,B){function y(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(z(a,b.arguments[d]));return c}function C(a,b,c){try{return c(a,b,y(a,b))}catch(d){throw d;}}function E(a){return a instanceof O||a instanceof u}function z(a,d){try{switch(d.type){case "EmptyStatement":return M;case "VariableDeclarator":var e=null===d.init?null:z(a,d.init),f=d.id.name.toLowerCase();null!==a.localScope?a.localScope[f]={value:e,valueset:!0,node:d.init}:a.globalScope[f]={value:e,valueset:!0,node:d.init};return M;case "VariableDeclaration":for(var g=
0;g<d.declarations.length;g++)z(a,d.declarations[g]);return M;case "BlockStatement":var l;a:{for(var g=M,k=0;k<d.body.length;k++)if(g=z(a,d.body[k]),g instanceof G||g===U||g===ca){l=g;break a}l=g}return l;case "FunctionDeclaration":var h=d.id.name.toLowerCase();a.globalScope[h]={valueset:!0,node:null,value:new u(d,a)};return M;case "ReturnStatement":var m;if(null===d.argument)m=new G(M);else{var n=z(a,d.argument);m=new G(n)}return m;case "IfStatement":var s;if("AssignmentExpression"===d.test.type||
"UpdateExpression"===d.test.type)throw Error(b.nodeErrorMessage(d.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var v=z(a,d.test);if(!0===v)s=z(a,d.consequent);else if(!1===v)s=null!==d.alternate?z(a,d.alternate):M;else throw Error(b.nodeErrorMessage(d,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return s;case "ExpressionStatement":var x;if("AssignmentExpression"===d.expression.type||"UpdateExpression"===d.expression.type)x=z(a,d.expression);else{var w=z(a,d.expression);x=w===M?M:new W(w)}return x;
case "AssignmentExpression":var r=z(a,d.right),g=null;l="";if("MemberExpression"===d.left.type){g=z(a,d.left.object);l=!0===d.left.computed?z(a,d.left.property):d.left.property.name;if(c.isArray(g))if(c.isNumber(l)){if(0>l||l>g.length)throw Error("Assignment outside of array bounds");if(l===g.length&&"\x3d"!==d.operator)throw Error("Invalid Parameter");g[l]=H(r,d.operator,g[l],d)}else throw Error("Invalid Parameter");else if(g instanceof p){if(!1===c.isString(l))throw Error("Dictionary accessor must be a string");
if(!0===g.hasField(l))g.setField(l,H(r,d.operator,g.field(l),d));else{if("\x3d"!==d.operator)throw Error("Invalid Parameter");g.setField(l,H(r,d.operator,null,d))}}else if(g instanceof q){if(!1===c.isString(l))throw Error("Feature accessor must be a string");if(!0===g.hasField(l))g.setField(l,H(r,d.operator,g.field(l),d));else{if("\x3d"!==d.operator)throw Error("Invalid Parameter");g.setField(l,H(r,d.operator,null,d))}}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}k=M}else if(g=d.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])a.localScope[g]={value:H(r,d.operator,a.localScope[g].value,d),valueset:!0,node:d.right},k=M;else if(void 0!==a.globalScope[g])a.globalScope[g]={value:H(r,d.operator,a.globalScope[g].value,d),valueset:!0,node:d.right},k=M;else throw Error("Variable not recognised");return k;case "UpdateExpression":var t;var y,g=null;l="";if("MemberExpression"===d.argument.type){g=z(a,d.argument.object);l=!0===d.argument.computed?
z(a,d.argument.property):d.argument.property.name;if(c.isArray(g))if(c.isNumber(l)){if(0>l||l>=g.length)throw Error("Assignment outside of array bounds");y=g[l];g[l]=!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1}else throw Error("Invalid Parameter");else if(g instanceof p){if(!1===c.isString(l))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(l))y=g.field(l),g.setField(l,!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1);else throw Error("Invalid Parameter");}else if(g instanceof
q){if(!1===c.isString(l))throw Error("Feature accessor must be a string");if(!0===g.hasField(l))y=g.field(l),g.setField(l,!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");}t=!1===d.prefix?!1===c.isNumber(y)?NaN:y:!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1}else if(g=d.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])y=a.localScope[g].value,
a.localScope[g]={value:!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1,valueset:!0,node:d},t=!1===d.prefix?!1===c.isNumber(y)?NaN:y:!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1;else if(void 0!==a.globalScope[g])y=a.globalScope[g].value,a.globalScope[g]={value:!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1,valueset:!0,node:d},t=!1===d.prefix?!1===c.isNumber(y)?NaN:y:!1===c.isNumber(y)?NaN:"++"===d.operator?y+1:y-1;else throw Error("Variable not recognised");return t;case "BreakStatement":return U;
case "ContinueStatement":return ca;case "ForStatement":null!==d.init&&z(a,d.init);l={testResult:!0,lastAction:M};do b:{k=a;r=d;t=l;if(null!==r.test){t.testResult=z(k,r.test);if(!1===t.testResult)break b;if(!0!==t.testResult)throw Error(b.nodeErrorMessage(r,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}t.lastAction=z(k,r.body);t.lastAction===U?t.testResult=!1:t.lastAction instanceof G?t.testResult=!1:null!==r.update&&z(k,r.update)}while(!0===l.testResult);g=l.lastAction instanceof G?l.lastAction:
M;return g;case "ForInStatement":return L(a,d);case "Identifier":var B;var C;try{var D=d.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[D])C=a.localScope[D],!0!==C.valueset&&(C.value=z(a,C.node),C.valueset=!0),B=C.value;else if(void 0!==a.globalScope[D])C=a.globalScope[D],!0!==C.valueset&&(C.value=z(a,C.node),C.valueset=!0),B=C.value;else throw Error(b.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(K){throw K;}return B;case "MemberExpression":return $(a,d);case "Literal":return d.value;
case "ThisExpression":throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return N(a,d);case "UnaryExpression":var Q;try{var F=z(a,d.argument);if(c.isBoolean(F))if("!"===d.operator)Q=!F;else throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));else if(c.isNumber(F))if("-"===d.operator)Q=-1*F;else if("+"===d.operator)Q=1*F;else throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));else throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTEDTYPE"));
}catch(Z){throw Z;}return Q;case "BinaryExpression":return R(a,d);case "LogicalExpression":var ia;a:try{if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)throw Error(b.nodeErrorMessage(d.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type)throw Error(b.nodeErrorMessage(d.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var I=[z(a,d.left),z(a,d.right)],S=I[0],X=I[1];if(c.isBoolean(S)&&c.isBoolean(X))switch(d.operator){case "||":ia=
S||X;break a;case "\x26\x26":ia=S&&X;break a;default:throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));}else throw Error(b.nodeErrorMessage(d,"RUNTIME","ONLYBOOLEAN"));}catch(O){throw O;}return ia;case "ConditionalExpression":throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{g=[];for(l=0;l<d.elements.length;l++){var ha=z(a,d.elements[l]);if(E(ha))throw Error(b.nodeErrorMessage(d,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));g.push(ha)}}catch(P){throw P;}return g;
case "ObjectExpression":g={};for(l=0;l<d.properties.length;l++){var fa=z(a,d.properties[l]);if(E(fa.value))throw Error("Illegal Argument");if(!1===c.isString(fa.key))throw Error("Illegal Argument");g[fa.key.toString()]=fa.value}var A=new p(g);A.immutable=!1;return A;case "Property":return{key:"Identifier"===d.key.type?d.key.name:z(a,d.key),value:z(a,d.value)};case "Array":throw Error(b.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));default:throw Error(b.nodeErrorMessage(d,"RUNTIME","UNREOGNISED"));
}}catch(da){throw da;}}function L(a,d){var e=z(a,d.right);"VariableDeclaration"===d.left.type&&z(a,d.left);var f=null,g="VariableDeclaration"===d.left.type?d.left.declarations[0].id.name:d.left.name;null!==a.localScope&&void 0!==a.localScope[g]&&(f=a.localScope[g]);null===f&&void 0!==a.globalScope[g]&&(f=a.globalScope[g]);if(null===f)throw Error(b.nodeErrorMessage(d,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(e)||c.isString(e)){for(var e=e.length,l=0;l<e&&!(f.value=l,g=z(a,d.body),g===U);l++)if(g instanceof
G)return g;return M}if(c.isImmutableArray(e)){for(l=0;l<e.length()&&!(f.value=l,g=z(a,d.body),g===U);l++)if(g instanceof G)return g;return M}if(e instanceof p||e instanceof q){e=e.keys();for(l=0;l<e.length&&!(f.value=e[l],g=z(a,d.body),g===U);l++)if(g instanceof G)return g}else return M}function H(a,d,e,f){switch(d){case "\x3d":return a;case "/\x3d":return c.toNumber(e)/c.toNumber(a);case "*\x3d":return c.toNumber(e)*c.toNumber(a);case "-\x3d":return c.toNumber(e)-c.toNumber(a);case "+\x3d":return c.isString(e)||
c.isString(a)?c.toString(e)+c.toString(a):c.toNumber(e)+c.toNumber(a);case "%\x3d":return c.toNumber(e)%c.toNumber(a);default:throw Error(b.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}function K(a,d,e,f){d=d.toLowerCase();switch(d){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return d=a.spatialReference._arcadeCacheId,void 0===d&&(e=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(e=!1),e&&(Z++,d=a.spatialReference._arcadeCacheId=
Z)),a=new p({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==d&&(a._arcadeCacheId="SPREF"+d.toString()),a}switch(a.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[d],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(Z++,d=Z,c.isVersion4?a.cache._arcadeCacheId=d:
a.setCacheValue("_arcadeCacheId",d)),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==a[d]?a[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(Z++,d=Z,c.isVersion4?a.cache._arcadeCacheId=d:a.setCacheValue("_arcadeCacheId",d)),a=new l(a.paths,a.spatialReference,
!0===a.hasZ,!0===a.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(Z++,d=Z,c.isVersion4?a.cache._arcadeCacheId=d:a.setCacheValue("_arcadeCacheId",d)),a=new w(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,d,1);case "type":return"Multipoint"}}throw Error(b.nodeErrorMessage(f,"RUNTIME","PROPERTYNOTFOUND"));}function $(a,d){try{var e=z(a,d.object);if(null===e)throw Error(b.nodeErrorMessage(d,
"RUNTIME","NOTFOUND"));if(!1===d.computed){if(e instanceof p||e instanceof q)return e.field(d.property.name);if(e instanceof B)return K(e,d.property.name,a,d);throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}var f=z(a,d.property);if(e instanceof p||e instanceof q){if(c.isString(f))return e.field(f)}else if(e instanceof B){if(c.isString(f))return K(e,f,a,d)}else if(c.isArray(e)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(f>=e.length||0>f)throw Error(b.nodeErrorMessage(d,"RUNTIME",
"OUTOFBOUNDS"));return e[f]}}else if(c.isString(e)){if(c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(f>=e.length||0>f)throw Error(b.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return e[f]}}else if(c.isImmutableArray(e)&&c.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(f>=e.length()||0>f)throw Error(b.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return e.get(f)}throw Error(b.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}catch(g){throw g;}}function R(a,d){try{var e=[z(a,d.left),z(a,d.right)],
f=e[0],g=e[1];switch(d.operator){case "\x3d\x3d":return c.equalityTest(f,g);case "\x3d":return c.equalityTest(f,g);case "!\x3d":return!c.equalityTest(f,g);case "\x3c":return f<g;case "\x3e":return f>g;case "\x3c\x3d":return f<=g;case "\x3e\x3d":return f>=g;case "+":return c.isString(f)||c.isString(g)?c.toString(f)+c.toString(g):c.toNumber(f)+c.toNumber(g);case "-":return c.toNumber(f)-c.toNumber(g);case "*":return c.toNumber(f)*c.toNumber(g);case "/":return c.toNumber(f)/c.toNumber(g);case "%":return c.toNumber(f)%
c.toNumber(g);default:throw Error(b.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(l){throw l;}}function N(a,c){try{if("Identifier"!==c.callee.type)throw Error(b.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[c.callee.name.toLowerCase()]){var d=a.localScope[c.callee.name.toLowerCase()];if(d.value instanceof O)return d.value.fn(a,c);if(d.value instanceof u)return ha(a,c,d.value.definition);throw Error(b.nodeErrorMessage(c,"RUNTIME",
"NOTAFUNCTION"));}if(void 0!==a.globalScope[c.callee.name.toLowerCase()]){d=a.globalScope[c.callee.name.toLowerCase()];if(d.value instanceof O)return d.value.fn(a,c);if(d.value instanceof u)return ha(a,c,d.value.definition);throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(e){throw e;}}function Q(a){return null==a?"":c.isArray(a)||c.isImmutableArray(a)?"Array":c.isDate(a)?"Date":c.isString(a)?"String":c.isBoolean(a)?"Boolean":
c.isNumber(a)?"Number":a instanceof p?"Dictionary":a instanceof q?"Feature":a instanceof k?"Point":a instanceof m?"Polygon":a instanceof g?"Polyline":a instanceof e?"Multipoint":a instanceof f?"Extent":E(a)?"Function":a===M?"Void":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function F(a,b,d,e){try{var f=z(a,b.arguments[d]);if(c.equalityTest(f,e))return z(a,b.arguments[d+1]);var g=b.arguments.length-d;return 1===g?z(a,b.arguments[d]):2===g?null:F(a,b,d+2,e)}catch(l){throw l;}}function D(a,
b,d,e){try{if(!0===e)return z(a,b.arguments[d+1]);if(3===b.arguments.length-d)return z(a,b.arguments[d+2]);var f=z(a,b.arguments[d+2]);if(!1===c.isBoolean(f))throw Error("WHEN needs boolean test conditions");return D(a,b,d+2,f)}catch(g){throw g;}}function S(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];for(var e=S(a.slice(0,d),b),c=S(a.slice(d,c),b),d=[];0<e.length||0<c.length;)if(0<e.length&&0<c.length){var f=b(e[0],c[0]);isNaN(f)&&(f=0);0>=f?(d.push(e[0]),e=e.slice(1)):
(d.push(c[0]),c=c.slice(1))}else 0<e.length?(d.push(e[0]),e=e.slice(1)):0<c.length&&(d.push(c[0]),c=c.slice(1));return d}function X(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={d:null,value:c[e],valueset:!0,node:null};var f=z(b,d);if(f instanceof G)return f.value;if(f===U)throw Error("Cannot Break from a Function");if(f===ca)throw Error("Cannot Continue from a Function");
return f instanceof W?f.value:f}catch(g){throw g;}}function ha(a,b,c){return C(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return X(c,b,e)})}function I(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,
localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return X(a.definition,b,arguments)}}var G=function(){return function(a){this.value=a}}(),W=function(){return function(a){this.value=a}}(),O=function(){return function(a){this.fn=a}}(),M={type:"VOID"},U={type:"BREAK"},ca={type:"CONTINUE"},Z=0,ia={};t.registerFunctions(ia,C);r.registerFunctions(ia,C);s.registerFunctions(ia,C);x.registerFunctions(ia,
C,E);v.registerFunctions(ia,C);ia["typeof"]=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,1);a=Q(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};ia.iif=function(a,b){try{c.pcCheck(null===b.arguments?[]:b.arguments,3,3);var d=z(a,b.arguments[0]);if(!1===c.isBoolean(d))throw Error("IF Function must have a boolean test condition");return!0===d?z(a,b.arguments[1]):z(a,b.arguments[2])}catch(e){throw e;}};ia.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");
if(2===b.arguments.length)return z(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=z(a,b.arguments[0]);return F(a,b,1,c)}catch(d){throw d;}};ia.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var d=z(a,b.arguments[0]);if(!1===c.isBoolean(d))throw Error("WHEN needs boolean test conditions");return D(a,b,0,d)}catch(e){throw e;}};ia.top=
function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,2,2);if(c.isArray(d[0]))return c.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));if(c.isImmutableArray(d[0]))return c.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,c.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};ia.first=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.isArray(d[0])?0===d[0].length?null:d[0][0]:c.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):
null})};ia.sort=function(a,b){return C(a,b,function(a,b,d){c.pcCheck(d,1,2);a=d[0];c.isImmutableArray(a)&&(a=a.toArray());if(!1===c.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===E(d[1]))throw Error("Illegal Argument");var e=I(d[1]);a=S(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];d={};for(b=0;b<a.length;b++){var f=Q(a[b]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===
d.Extent||!0===d.Function)return a.slice(0);b=0;var f="",g;for(g in d)b++,f=g;a=1<b||"String"===f?S(a,function(a,b){return null===a||void 0===a?null===b||void 0===b?0:1:null===b||void 0===b?-1:a.toString()<b.toString()?-1:a.toString()===b.toString()?0:1}):"Number"===f?S(a,function(a,b){return a-b}):"Boolean"===f?S(a,function(a,b){return a===b?0:b?-1:1}):"Date"===f?S(a,function(a,b){return b-a}):a.slice(0)}return a})};h.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:y,standardFunction:C};
h.executeScript=function(a,b,c){c||(c=new d(102100));var e=b.vars,f=b.customfunctions,g={};e||(e={});f||(f={});var l=new p({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});l.immutable=!1;g.textformatting={value:l,valueset:!0,node:null};g.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};g.pi={value:Math.PI,valueset:!0,node:null};for(var k in ia)g[k]={value:new O(ia[k]),valueset:!0,node:null};for(k in f)g[k]={value:new O(f[k]),"native":!0,valueset:!0,
node:null};for(k in e)g[k]=e[k]instanceof n?{value:new q(e[k]),valueset:!0,node:null}:{value:e[k],valueset:!0,node:null};a=z({spatialReference:c,globalScope:g,localScope:null,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof G&&(a=a.value);a instanceof W&&(a=a.value);if(a===M)throw Error("Cannot return VOID");if(a===U)throw Error("Cannot return BREAK");if(a===ca)throw Error("Cannot return CONTINUE");if(a instanceof u)throw Error("Cannot return FUNCTION");
if(a instanceof O)throw Error("Cannot return FUNCTION");return a};h.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return b.findFieldLiterals(a,c)};h.validateScript=function(a,c){return b.validateScript(a,c,"simple")};h.referencesMember=function(a,c){return b.referencesMember(a,c)};h.referencesFunction=function(a,c){return b.referencesFunction(a,c)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray ../geometry/Point".split(" "),
function(a,h,m,n,g,k,f,e,d,c){function b(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function p(a){return"string"===typeof a||a instanceof String}function q(a){return"boolean"===typeof a}function u(a){return"number"===typeof a}function t(a){return a instanceof Array}function r(a){return a instanceof Date}function s(a,c){if(!1===isNaN(a)){if(void 0===c||null===c||""===c)return a.toString();c=b(c,"\u2030","");c=b(c,"\u00a4","");
return g.format(a,{pattern:c})}return a.toString()}function x(a,b){var c=n(a);return void 0===b||null===b||""===b?c.format():c.format(b)}function v(a,b){if(p(a))return a;if(null===a)return"";if(u(a))return s(a,b);if(q(a))return a.toString();if(r(a))return x(a,b);if(a instanceof m)return JSON.stringify(a.toJSON());if(t(a)){for(var c=[],d=0;d<a.length;d++)c[d]=l(a[d]);return"["+c.join(",")+"]"}if(a instanceof k){c=[];for(d=0;d<a.length();d++)c[d]=l(a.get(d));return"["+c.join(",")+"]"}return null!==
a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():""}function l(a){if(null!==a){if(q(a)||u(a)||p(a))return JSON.stringify(a);if(a instanceof m||a instanceof k||a instanceof Array)return v(a);if(a instanceof Date)return JSON.stringify(a);if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}h.isVersion4=0===f.version.indexOf("4.");h.multiReplace=b;h.defaultUndefined=function(a,b){return void 0===a?b:a};h.isString=p;h.isBoolean=q;h.isNumber=u;h.isArray=
t;h.isImmutableArray=function(a){return a instanceof k};h.isDate=r;h.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};h.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};h.formatNumber=s;h.formatDate=x;h.equalityTest=function(a,b){if(a===b)return!0;if(r(a)&&r(b))return a.getTime()===
b.getTime();if(a instanceof d||a instanceof e)return a.equalityTest(b);if(a instanceof c&&b instanceof c){var f=void 0,g=void 0;h.isVersion4?(f=a.cache._arcadeCacheId,g=b.cache._arcadeCacheId):(f=a.getCacheValue("_arcadeCacheId"),g=b.getCacheValue("_arcadeCacheId"));if(void 0!==f&&null!==f)return f===g}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId?!0:!1};h.toString=
function(a,b){return p(a)?a:null===a?"":u(a)?s(a,b):q(a)?a.toString():r(a)?x(a,b):""};h.toStringExplicit=v;h.toNumber=function(a,c){return u(a)?a:null===a||r(a)||q(a)||""===a||void 0===a?NaN:void 0!==c&&p(a)?(c=b(c,"\u2030",""),c=b(c,"\u00a4",""),g.parse(a,{pattern:c})):Number(a)};h.toDate=function(a,b){if(r(a))return a;if(p(a)){var c=n(a,[void 0===b||null===b||""===b?n.ISO_8601:b]);if(c.isValid())return c.toDate()}return null};h.toDateM=function(a,b){if(r(a))return n(a);if(p(a)){var c=n(a,[void 0===
b||null===b||""===b?n.ISO_8601:b]);if(c.isValid())return c}return null};h.toBoolean=function(a){if(q(a))return a;p(a)&&(a=a.toLowerCase());switch(a){case !0:case "true":case 1:case "1":case "on":case "yes":return!0;default:return!1}};h.fixSpatialReference=function(a,b){if(null===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(a,h,m){return m})},"esri/plugins/moment":function(){define(["require",
"exports","dojo/_base/kernel","moment/moment"],function(a,h,m,n){var g={ar:1,"ar-ma":1,"ar-sa":1,"ar-tn":1,cs:1,da:1,de:1,"de-at":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1};h.load=function(a,f,e){a=m.locale;"zh-hk"===a&&(a="zh-tw");var d=a in g;if(!d){var c=a.split("-");1<c.length&&c[0]in g&&(a=c[0],d=!0)}d?f(["moment/locale/"+
a],function(){e(n)}):e(n)}})},"moment/moment":function(){(function(a,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define(h):a.moment=h()})(this,function(){function a(){return mb.apply(null,arguments)}function h(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function m(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function n(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],
d));return c}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){for(var c in b)g(b,c)&&(a[c]=b[c]);g(b,"toString")&&(a.toString=b.toString);g(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function f(a,b,c,d){return Na(a,b,c,d,!0).utc()}function e(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1});return a._pf}function d(a){if(null==a._isValid){var b=e(a);
a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function c(a){var b=f(NaN);null!=a?k(e(b),a):e(b).userInvalidated=!0;return b}function b(a){return void 0===a}function p(a,c){var d,f,g;b(c._isAMomentObject)||(a._isAMomentObject=c._isAMomentObject);b(c._i)||(a._i=c._i);b(c._f)||(a._f=
c._f);b(c._l)||(a._l=c._l);b(c._strict)||(a._strict=c._strict);b(c._tzm)||(a._tzm=c._tzm);b(c._isUTC)||(a._isUTC=c._isUTC);b(c._offset)||(a._offset=c._offset);b(c._pf)||(a._pf=e(c));b(c._locale)||(a._locale=c._locale);if(0<sb.length)for(d in sb)f=sb[d],g=c[f],b(g)||(a[f]=g);return a}function q(b){p(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===tb&&(tb=!0,a.updateOffset(this),tb=!1)}function u(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function t(a){return 0>a?Math.ceil(a):
Math.floor(a)}function r(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=t(a));return b}function s(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&r(a[g])!==r(b[g]))&&f++;return f+e}function x(b){!1===a.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+b)}function v(a,b){var c=!0;return k(function(){c&&(x(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),
c=!1);return b.apply(this,arguments)},b)}function l(a,b){Cb[a]||(x(b),Cb[a]=!0)}function w(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a,b){var c=k({},a),d;for(d in b)g(b,d)&&("[object Object]"===Object.prototype.toString.call(a[d])&&"[object Object]"===Object.prototype.toString.call(b[d])?(c[d]={},k(c[d],a[d]),k(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);return c}function y(a){null!=a&&this.set(a)}function C(a){var b=null;if(!ua[a]&&"undefined"!==
typeof module&&module&&module.exports)try{b=ib._abbr,require("./locale/"+a),E(b)}catch(c){}return ua[a]}function E(a,c){var d;a&&(d=b(c)?L(a):z(a,c))&&(ib=d);return ib._abbr}function z(a,b){if(null!==b)return b.abbr=a,null!=ua[a]?(l("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),b=B(ua[a]._config,b)):null!=b.parentLocale&&(null!=ua[b.parentLocale]?b=B(ua[b.parentLocale]._config,
b):l("parentLocaleUndefined","specified parentLocale is not defined yet")),ua[a]=new y(b),E(a),ua[a];delete ua[a];return null}function L(a){var b;a&&(a._locale&&a._locale._abbr)&&(a=a._locale._abbr);if(!a)return ib;if(!h(a)){if(b=C(a))return b;a=[a]}a:{b=0;for(var c,d,e,f;b<a.length;){f=(a[b]?a[b].toLowerCase().replace("_","-"):a[b]).split("-");c=f.length;for(d=(d=a[b+1]?a[b+1].toLowerCase().replace("_","-"):a[b+1])?d.split("-"):null;0<c;){if(e=C(f.slice(0,c).join("-"))){a=e;break a}if(d&&d.length>=
c&&s(f,d,!0)>=c-1)break;c--}b++}a=null}return a}function H(a,b){var c=a.toLowerCase();gb[c]=gb[c+"s"]=gb[b]=a}function K(a){return"string"===typeof a?gb[a]||gb[a.toLowerCase()]:void 0}function $(a){var b={},c,d;for(d in a)g(a,d)&&(c=K(d))&&(b[c]=a[d]);return b}function R(b,c){return function(d){if(null!=d){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](d);a.updateOffset(this,c);return this}return N(this,b)}}function N(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,
b){var c;if("object"===typeof a)for(c in a)this.set(c,a[c]);else if(a=K(a),w(this[a]))return this[a](b);return this}function F(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function D(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(cb[a]=e);b&&(cb[b[0]]=function(){return F(e.apply(this,arguments),b[1],b[2])});c&&(cb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function S(a){var b=
a.match(Db),c,d;c=0;for(d=b.length;c<d;c++)b[c]=cb[b[c]]?cb[b[c]]:b[c].match(/\[[\s\S]/)?b[c].replace(/^\[|\]$/g,""):b[c].replace(/\\/g,"");return function(e){var f="";for(c=0;c<d;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function X(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ha(b,a.localeData());ub[b]=ub[b]||S(b);return ub[b](a)}function ha(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(jb.lastIndex=0;0<=d&&jb.test(a);)a=a.replace(jb,c),jb.lastIndex=
0,d-=1;return a}function I(a,b,c){xb[a]=w(b)?b:function(a,d){return a&&c?c:b}}function G(a){return W(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function W(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function O(a,b){var c,d=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(d=function(a,c){c[b]=r(a)});for(c=0;c<a.length;c++)yb[a[c]]=d}function M(a,b){O(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function U(a,b){return(new Date(Date.UTC(a,
b+1,0))).getUTCDate()}function ca(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=r(b);else if(b=a.localeData().monthsParse(b),"number"!==typeof b)return a;c=Math.min(a.date(),U(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function Z(b){return null!=b?(ca(this,b),a.updateOffset(this,!0),this):N(this,"Month")}function ia(){function a(b,c){return c.length-b.length}var b=[],c=[],d=[],e,g;for(e=0;12>e;e++)g=f([2E3,e]),b.push(this.monthsShort(g,"")),
c.push(this.months(g,"")),d.push(this.months(g,"")),d.push(this.monthsShort(g,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=W(b[e]),c[e]=W(c[e]),d[e]=W(d[e]);this._monthsShortRegex=this._monthsRegex=RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=RegExp("^("+c.join("|")+")$","i");this._monthsShortStrictRegex=RegExp("^("+b.join("|")+")$","i")}function ma(a){var b;if((b=a._a)&&-2===e(a).overflow){b=0>b[Ua]||11<b[Ua]?Ua:1>b[Qa]||b[Qa]>U(b[Ia],b[Ua])?Qa:0>b[za]||24<b[za]||24===b[za]&&
(0!==b[Ja]||0!==b[Va]||0!==b[bb])?za:0>b[Ja]||59<b[Ja]?Ja:0>b[Va]||59<b[Va]?Va:0>b[bb]||999<b[bb]?bb:-1;if(e(a)._overflowDayOfYear&&(b<Ia||b>Qa))b=Qa;e(a)._overflowWeeks&&-1===b&&(b=Mb);e(a)._overflowWeekday&&-1===b&&(b=Nb);e(a).overflow=b}return a}function ra(a){var b,c;b=a._i;var d=Ob.exec(b)||Pb.exec(b),f,g,l,k;if(d){e(a).iso=!0;b=0;for(c=nb.length;b<c;b++)if(nb[b][1].exec(d[1])){g=nb[b][0];f=!1!==nb[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=zb.length;b<c;b++)if(zb[b][1].exec(d[3])){l=
(d[2]||" ")+zb[b][0];break}if(null==l){a._isValid=!1;return}}if(!f&&null!=l)a._isValid=!1;else{if(d[4])if(Qb.exec(d[4]))k="Z";else{a._isValid=!1;return}a._f=g+(l||"")+(k||"");Ca(a)}}}else a._isValid=!1}function la(b){var c=Rb.exec(b._i);null!==c?b._d=new Date(+c[1]):(ra(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function wa(a,b,c,d,e,f,g){b=new Date(a,b,c,d,e,f,g);100>a&&(0<=a&&isFinite(b.getFullYear()))&&b.setFullYear(a);return b}function qa(a){var b=new Date(Date.UTC.apply(null,
arguments));100>a&&(0<=a&&isFinite(b.getUTCFullYear()))&&b.setUTCFullYear(a);return b}function va(a){return 0===a%4&&0!==a%100||0===a%400}function pa(a,b,c){c=7+b-c;return-((7+qa(a,0,c).getUTCDay()-b)%7)+c-1}function Sa(a,b,c,d,e){c=(7+c-d)%7;d=pa(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(va(b)?366:365)+d):d>(va(a)?366:365)?(b=a+1,a=d-(va(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Da(a,b,c){var d=pa(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Aa(a,b,c)):d>
Aa(a.year(),b,c)?(b=d-Aa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Aa(a,b,c){var d=pa(a,b,c);b=pa(a+1,b,c);return((va(a)?366:365)-d+b)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function xa(b){var c,d=[],f;if(!b._d){f=new Date(a.now());f=b._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()];if(b._w&&null==b._a[Qa]&&null==b._a[Ua]){var g,l,k,h,m,p;g=b._w;if(null!=g.GG||null!=g.W||null!=g.E){if(m=1,p=4,l=sa(g.GG,
b._a[Ia],Da(ka(),1,4).year),k=sa(g.W,1),h=sa(g.E,1),1>h||7<h)c=!0}else if(m=b._locale._week.dow,p=b._locale._week.doy,l=sa(g.gg,b._a[Ia],Da(ka(),m,p).year),k=sa(g.w,1),null!=g.d){if(h=g.d,0>h||6<h)c=!0}else if(null!=g.e){if(h=g.e+m,0>g.e||6<g.e)c=!0}else h=m;1>k||k>Aa(l,m,p)?e(b)._overflowWeeks=!0:null!=c?e(b)._overflowWeekday=!0:(c=Sa(l,k,h,m,p),b._a[Ia]=c.year,b._dayOfYear=c.dayOfYear)}if(b._dayOfYear){c=sa(b._a[Ia],f[Ia]);if(b._dayOfYear>(va(c)?366:365))e(b)._overflowDayOfYear=!0;c=qa(c,0,b._dayOfYear);
b._a[Ua]=c.getUTCMonth();b._a[Qa]=c.getUTCDate()}for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=f[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[za]&&(0===b._a[Ja]&&0===b._a[Va]&&0===b._a[bb])&&(b._nextDay=!0,b._a[za]=0);b._d=(b._useUTC?qa:wa).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[za]=24)}}function Ca(b){if(b._f===a.ISO_8601)ra(b);else{b._a=[];e(b).empty=!0;var c=""+b._i,d,f,l,k,h,m=c.length,p=0;l=ha(b._f,b._locale).match(Db)||
[];for(d=0;d<l.length;d++){k=l[d];if(f=(c.match(!g(xb,k)?RegExp(G(k)):xb[k](b._strict,b._locale))||[])[0])h=c.substr(0,c.indexOf(f)),0<h.length&&e(b).unusedInput.push(h),c=c.slice(c.indexOf(f)+f.length),p+=f.length;if(cb[k]){if(f?e(b).empty=!1:e(b).unusedTokens.push(k),h=b,null!=f&&g(yb,k))yb[k](f,h._a,h,k)}else b._strict&&!f&&e(b).unusedTokens.push(k)}e(b).charsLeftOver=m-p;0<c.length&&e(b).unusedInput.push(c);!0===e(b).bigHour&&(12>=b._a[za]&&0<b._a[za])&&(e(b).bigHour=void 0);c=b._a;d=za;m=b._locale;
l=b._a[za];p=b._meridiem;null!=p&&(null!=m.meridiemHour?l=m.meridiemHour(l,p):null!=m.isPM&&((m=m.isPM(p))&&12>l&&(l+=12),!m&&12===l&&(l=0)));c[d]=l;xa(b);ma(b)}}function db(a){if(!a._d){var b=$(a._i);a._a=n([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});xa(a)}}function La(a){var b=a._i,f=a._f;a._locale=a._locale||L(a._l);if(null===b||void 0===f&&""===b)return c({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(u(b))return new q(ma(b));
if(h(f)){var g,l,n;if(0===a._f.length)e(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++)if(f=0,g=p({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[b],Ca(g),d(g)&&(f+=e(g).charsLeftOver,f+=10*e(g).unusedTokens.length,e(g).score=f,null==n||f<n))n=f,l=g;k(a,l||g)}}else f?Ca(a):m(b)?a._d=b:Ha(a);d(a)||(a._d=null);return a}function Ha(b){var c=b._i;void 0===c?b._d=new Date(a.now()):m(c)?b._d=new Date(+c):"string"===typeof c?la(b):h(c)?(b._a=n(c.slice(0),function(a){return parseInt(a,
10)}),xa(b)):"object"===typeof c?db(b):"number"===typeof c?b._d=new Date(c):a.createFromInputFallback(b)}function Na(a,b,c,d,e){var f={};"boolean"===typeof c&&(d=c,c=void 0);f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new q(ma(La(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ka(a,b,c,d){return Na(a,b,c,d,!1)}function Ma(a,b){var c,d;1===b.length&&h(b[0])&&(b=b[0]);if(!b.length)return ka();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=
b[d];return c}function Ka(a){a=$(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=L();this._bubble()}function Ga(a){return a instanceof Ka}function ab(a,b){D(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+F(~~(a/60),2)+b+F(~~a%60,2)})}function T(a,b){var c=(b||"").match(a)||[],c=((c[c.length-
1]||[])+"").match(Sb)||["-",0,0],d=+(60*c[1])+r(c[2]);return"+"===c[0]?d:-d}function Ba(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(u(b)||m(b)?+b:+ka(b))-+d,d._d.setTime(+d._d+e),a.updateOffset(d,!1),d):ka(b).local()}function Oa(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ba(a,b){var c=a,d=null;if(Ga(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Tb.exec(a))c="-"===d[1]?-1:1,c={y:0,d:r(d[Qa])*c,h:r(d[za])*
c,m:r(d[Ja])*c,s:r(d[Va])*c,ms:r(d[bb])*c};else if(d=Ub.exec(a))c="-"===d[1]?-1:1,c={y:ya(d[2],c),M:ya(d[3],c),w:ya(d[4],c),d:ya(d[5],c),h:ya(d[6],c),m:ya(d[7],c),s:ya(d[8],c)};else if(null==c)c={};else if("object"===typeof c&&("from"in c||"to"in c))d=ka(c.from),c=ka(c.to),!d.isValid()||!c.isValid()?d={milliseconds:0,months:0}:(c=Ba(c,d),d.isBefore(c)?c=Ea(d,c):(c=Ea(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c),c={},c.ms=d.milliseconds,c.M=d.months;c=new Ka(c);Ga(a)&&g(a,"_locale")&&
(c._locale=a._locale);return c}function ya(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Ea(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function ea(a,b){return function(c,d){var e;null!==d&&!isNaN(+d)&&(l(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),e=c,c=d,d=e);e=ba("string"===
typeof c?+c:c,d);Ya(this,e,a);return this}}function Ya(b,c,d,e){var f=c._milliseconds,g=0>c._days?-1*Math.round(-1*c._days):Math.round(c._days);c=0>c._months?-1*Math.round(-1*c._months):Math.round(c._months);if(b.isValid()){e=null==e?!0:e;f&&b._d.setTime(+b._d+f*d);if(g&&(f=N(b,"Date")+g*d,b.isValid()))b._d["set"+(b._isUTC?"UTC":"")+"Date"](f);c&&ca(b,N(b,"Month")+c*d);e&&a.updateOffset(b,g||c)}}function P(a){if(void 0===a)return this._locale._abbr;a=L(a);null!=a&&(this._locale=a);return this}function fa(){return this._locale}
function A(a,b){D(0,[a,a.length],0,b)}function da(a,b,c,d,e){var f;if(null==a)return Da(this,d,e).year;f=Aa(a,d,e);b>f&&(b=f);a=Sa(a,b,c,d,e);a=qa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function ga(){return this.hours()%12||12}function na(a,b){D(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Y(a,b){return b._meridiemParse}function aa(a,b){b[bb]=r(1E3*("0."+a))}function J(a){return a}
function lb(a,b,c,d){var e=L();b=f().set(d,b);return e[c](b,a)}function Xa(a,b,c,d,e){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return lb(a,b,c,e);var f=[];for(b=0;b<d;b++)f[b]=lb(a,b,c,e);return f}function eb(a,b,c,d){b=ba(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Pa(a){return function(){return this.as(a)}}function Ta(a){return function(){return this._data[a]}}function vb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,
d)}function Za(){var a=Ab(this._milliseconds)/1E3,b=Ab(this._days),c=Ab(this._months),d,e,f;d=t(a/60);e=t(d/60);a%=60;d%=60;f=t(c/12);var c=c%12,g=this.asSeconds();return!g?"P0D":(0>g?"-":"")+"P"+(f?f+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(e||d||a?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(a?a+"S":"")}var mb,sb=a.momentProperties=[],tb=!1,Cb={};a.suppressDeprecationWarnings=!1;var ua={},ib,gb={},Db=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
jb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ub={},cb={},Eb=/\d/,Fa=/\d\d/,Fb=/\d{3}/,wb=/\d{4}/,kb=/[+-]?\d{6}/,ta=/\d\d?/,Gb=/\d\d\d\d?/,Hb=/\d\d\d\d\d\d?/,ob=/\d{1,3}/,Bb=/\d{1,4}/,pb=/[+-]?\d{1,6}/,Vb=/\d+/,qb=/[+-]?\d+/,Wb=/Z|[+-]\d\d:?\d\d/gi,rb=/Z|[+-]\d\d(?::?\d\d)?/gi,hb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,xb={},yb={},Ia=0,Ua=1,Qa=2,za=3,Ja=4,Va=5,bb=6,Mb=7,Nb=8;D("M",["MM",2],"Mo",function(){return this.month()+
1});D("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});D("MMMM",0,0,function(a){return this.localeData().months(this,a)});H("month","M");I("M",ta);I("MM",ta,Fa);I("MMM",function(a,b){return b.monthsShortRegex(a)});I("MMMM",function(a,b){return b.monthsRegex(a)});O(["M","MM"],function(a,b){b[Ua]=r(a)-1});O(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Ua]=d:e(c).invalidMonth=a});var Ib=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ob=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
Pb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Qb=/Z|[+-]\d\d(?::?\d\d)?/,nb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],zb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rb=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=v("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});D("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});D(0,["YY",2],0,function(){return this.year()%100});D(0,["YYYY",4],0,"year");D(0,["YYYYY",5],0,"year");D(0,["YYYYYY",6,!0],0,"year");H("year","y");I("Y",qb);I("YY",ta,Fa);I("YYYY",Bb,wb);I("YYYYY",pb,kb);I("YYYYYY",pb,kb);O(["YYYYY","YYYYYY"],Ia);O("YYYY",function(b,c){c[Ia]=2===b.length?a.parseTwoDigitYear(b):r(b)});O("YY",function(b,c){c[Ia]=a.parseTwoDigitYear(b)});O("Y",function(a,
b){b[Ia]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return r(a)+(68<r(a)?1900:2E3)};var Jb=R("FullYear",!1);a.ISO_8601=function(){};var Xb=v("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=ka.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:c()}),Yb=v("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=ka.apply(null,arguments);return this.isValid()&&
a.isValid()?a>this?this:a:c()});ab("Z",":");ab("ZZ","");I("Z",rb);I("ZZ",rb);O(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=T(rb,a)});var Sb=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Tb=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ub=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;ba.fn=Ka.prototype;var Zb=ea(1,"add"),$b=ea(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Kb=v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(a){return void 0===a?this.localeData():this.locale(a)});D(0,["gg",2],0,function(){return this.weekYear()%100});D(0,["GG",2],0,function(){return this.isoWeekYear()%100});A("gggg","weekYear");A("ggggg","weekYear");A("GGGG","isoWeekYear");A("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");I("G",qb);I("g",qb);I("GG",ta,Fa);I("gg",ta,Fa);I("GGGG",Bb,wb);I("gggg",Bb,wb);I("GGGGG",pb,kb);I("ggggg",pb,kb);M(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)});
M(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});D("Q",0,"Qo","quarter");H("quarter","Q");I("Q",Eb);O("Q",function(a,b){b[Ua]=3*(r(a)-1)});D("w",["ww",2],"wo","week");D("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");I("w",ta);I("ww",ta,Fa);I("W",ta);I("WW",ta,Fa);M(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});D("D",["DD",2],"Do","date");H("date","D");I("D",ta);I("DD",ta,Fa);I("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});O(["D","DD"],
Qa);O("Do",function(a,b){b[Qa]=r(a.match(ta)[0],10)});var Lb=R("Date",!0);D("d",0,"do","day");D("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});D("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});D("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});D("e",0,0,"weekday");D("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");I("d",ta);I("e",ta);I("E",ta);I("dd",hb);I("ddd",hb);I("dddd",hb);M(["dd","ddd","dddd"],function(a,b,
c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:e(c).invalidWeekday=a});M(["d","e","E"],function(a,b,c,d){b[d]=r(a)});D("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");I("DDD",ob);I("DDDD",Fb);O(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)});D("H",["HH",2],0,"hour");D("h",["hh",2],0,ga);D("hmm",0,0,function(){return""+ga.apply(this)+F(this.minutes(),2)});D("hmmss",0,0,function(){return""+ga.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)});D("Hmm",0,0,function(){return""+
this.hours()+F(this.minutes(),2)});D("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)});na("a",!0);na("A",!1);H("hour","h");I("a",Y);I("A",Y);I("H",ta);I("h",ta);I("HH",ta,Fa);I("hh",ta,Fa);I("hmm",Gb);I("hmmss",Hb);I("Hmm",Gb);I("Hmmss",Hb);O(["H","HH"],za);O(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});O(["h","hh"],function(a,b,c){b[za]=r(a);e(c).bigHour=!0});O("hmm",function(a,b,c){var d=a.length-2;b[za]=r(a.substr(0,d));b[Ja]=r(a.substr(d));
e(c).bigHour=!0});O("hmmss",function(a,b,c){var d=a.length-4,f=a.length-2;b[za]=r(a.substr(0,d));b[Ja]=r(a.substr(d,2));b[Va]=r(a.substr(f));e(c).bigHour=!0});O("Hmm",function(a,b,c){c=a.length-2;b[za]=r(a.substr(0,c));b[Ja]=r(a.substr(c))});O("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[za]=r(a.substr(0,c));b[Ja]=r(a.substr(c,2));b[Va]=r(a.substr(d))});var ac=R("Hours",!0);D("m",["mm",2],0,"minute");H("minute","m");I("m",ta);I("mm",ta,Fa);O(["m","mm"],Ja);var bc=R("Minutes",!1);D("s",
["ss",2],0,"second");H("second","s");I("s",ta);I("ss",ta,Fa);O(["s","ss"],Va);var cc=R("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/100)});D(0,["SS",2],0,function(){return~~(this.millisecond()/10)});D(0,["SSS",3],0,"millisecond");D(0,["SSSS",4],0,function(){return 10*this.millisecond()});D(0,["SSSSS",5],0,function(){return 100*this.millisecond()});D(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});D(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});D(0,["SSSSSSSS",
8],0,function(){return 1E5*this.millisecond()});D(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");I("S",ob,Eb);I("SS",ob,Fa);I("SSS",ob,Fb);var Ra;for(Ra="SSSS";9>=Ra.length;Ra+="S")I(Ra,Vb);for(Ra="S";9>=Ra.length;Ra+="S")O(Ra,aa);var dc=R("Milliseconds",!1);D("z",0,0,"zoneAbbr");D("zz",0,0,"zoneName");var V=q.prototype;V.add=Zb;V.calendar=function(a,b){var c=a||ka(),d=Ba(c,this).startOf("day"),d=this.diff(d,"days",!0),d=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":
1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse",e=b&&(w(b[d])?b[d]():b[d]);return this.format(e||this.localeData().calendar(d,this,ka(c)))};V.clone=function(){return new q(this)};V.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=Ba(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=K(b);if("year"===b||"month"===b||"quarter"===b){d=12*(a.year()-this.year())+(a.month()-this.month());var e=this.clone().add(d,"months"),f;0>a-e?(f=this.clone().add(d-1,"months"),
a=(a-e)/(e-f)):(f=this.clone().add(d+1,"months"),a=(a-e)/(f-e));a=-(d+a);"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:t(a)};V.endOf=function(a){a=K(a);return void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};V.format=function(b){b=X(this,b||a.defaultFormat);return this.localeData().postformat(b)};V.from=function(a,b){return this.isValid()&&
(u(a)&&a.isValid()||ka(a).isValid())?ba({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};V.fromNow=function(a){return this.from(ka(),a)};V.to=function(a,b){return this.isValid()&&(u(a)&&a.isValid()||ka(a).isValid())?ba({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};V.toNow=function(a){return this.to(ka(),a)};V.get=Q;V.invalidAt=function(){return e(this).overflow};V.isAfter=function(a,c){var d=u(a)?a:ka(a);if(!this.isValid()||
!d.isValid())return!1;c=K(!b(c)?c:"millisecond");return"millisecond"===c?+this>+d:+d<+this.clone().startOf(c)};V.isBefore=function(a,c){var d=u(a)?a:ka(a);if(!this.isValid()||!d.isValid())return!1;c=K(!b(c)?c:"millisecond");return"millisecond"===c?+this<+d:+this.clone().endOf(c)<+d};V.isBetween=function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)};V.isSame=function(a,b){var c=u(a)?a:ka(a);if(!this.isValid()||!c.isValid())return!1;b=K(b||"millisecond");if("millisecond"===b)return+this===+c;
c=+c;return+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)};V.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};V.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};V.isValid=function(){return d(this)};V.lang=Kb;V.locale=P;V.localeData=fa;V.max=Yb;V.min=Xb;V.parsingFlags=function(){return k({},e(this))};V.set=Q;V.startOf=function(a){a=K(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);
case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};V.subtract=$b;V.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};V.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),
milliseconds:this.milliseconds()}};V.toDate=function(){return this._offset?new Date(+this):this._d};V.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&9999>=a.year()?w(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};V.toJSON=function(){return this.isValid()?this.toISOString():null};V.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};V.unix=function(){return Math.floor(+this/
1E3)};V.valueOf=function(){return+this._d-6E4*(this._offset||0)};V.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};V.year=Jb;V.isLeapYear=function(){return va(this.year())};V.weekYear=function(a){return da.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};V.isoWeekYear=function(a){return da.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};V.quarter=V.quarters=function(a){return null==
a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};V.month=Z;V.daysInMonth=function(){return U(this.year(),this.month())};V.week=V.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};V.isoWeek=V.isoWeeks=function(a){var b=Da(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};V.weeksInYear=function(){var a=this.localeData()._week;return Aa(this.year(),a.dow,a.doy)};V.isoWeeksInYear=function(){return Aa(this.year(),1,4)};V.date=Lb;V.day=
V.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};V.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};V.isoWeekday=function(a){return!this.isValid()?null!=a?this:
NaN:null==a?this.day()||7:this.day(this.day()%7?a:a-7)};V.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};V.hour=V.hours=ac;V.minute=V.minutes=bc;V.second=V.seconds=cc;V.millisecond=V.milliseconds=dc;V.utcOffset=function(b,c){var d=this._offset||0,e;return!this.isValid()?null!=b?this:NaN:null!=b?("string"===typeof b?b=T(rb,b):16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(e=15*-Math.round(this._d.getTimezoneOffset()/
15)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),d!==b&&(!c||this._changeInProgress?Ya(this,ba(b-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};V.utc=function(a){return this.utcOffset(0,a)};V.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};V.parseZone=
function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(T(Wb,this._i));return this};V.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?ka(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};V.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};V.isDSTShifted=function(){if(!b(this._isDSTShifted))return this._isDSTShifted;var a={};p(a,this);a=La(a);if(a._a){var c=a._isUTC?f(a._a):
ka(a._a);this._isDSTShifted=this.isValid()&&0<s(a._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};V.isLocal=function(){return this.isValid()?!this._isUTC:!1};V.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};V.isUtc=Oa;V.isUTC=Oa;V.zoneAbbr=function(){return this._isUTC?"UTC":""};V.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};V.dates=v("dates accessor is deprecated. Use date instead.",Lb);V.months=v("months accessor is deprecated. Use month instead",
Z);V.years=v("years accessor is deprecated. Use year instead",Jb);V.zone=v("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var ja=y.prototype;ja._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};ja.calendar=function(a,b,c){a=this._calendar[a];
return w(a)?a.call(b,c):a};ja._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};ja.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ja._invalidDate="Invalid date";ja.invalidDate=function(){return this._invalidDate};ja._ordinal="%d";
ja.ordinal=function(a){return this._ordinal.replace("%d",a)};ja._ordinalParse=/\d{1,2}/;ja.preparse=J;ja.postformat=J;ja._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};ja.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return w(e)?e(a,b,c,d):e.replace(/%d/i,a)};ja.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return w(c)?
c(b):c.replace(/%s/i,b)};ja.set=function(a){var b,c;for(c in a)b=a[c],w(b)?this[c]=b:this["_"+c]=b;this._config=a;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};ja.months=function(a,b){return h(this._months)?this._months[a.month()]:this._months[Ib.test(b)?"format":"standalone"][a.month()]};ja._months="January February March April May June July August September October November December".split(" ");ja.monthsShort=function(a,b){return h(this._monthsShort)?this._monthsShort[a.month()]:
this._monthsShort[Ib.test(b)?"format":"standalone"][a.month()]};ja._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");ja.monthsParse=function(a,b,c){var d,e;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=f([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),
!c&&!this._monthsParse[d]&&(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};ja._monthsRegex=hb;ja.monthsRegex=function(a){return this._monthsParseExact?(g(this,"_monthsRegex")||ia.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};
ja._monthsShortRegex=hb;ja.monthsShortRegex=function(a){return this._monthsParseExact?(g(this,"_monthsRegex")||ia.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};ja.week=function(a){return Da(a,this._week.dow,this._week.doy).week};ja._week={dow:0,doy:6};ja.firstDayOfYear=function(){return this._week.doy};ja.firstDayOfWeek=function(){return this._week.dow};ja.weekdays=function(a,b){return h(this._weekdays)?
this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]};ja._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");ja.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};ja._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");ja.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};ja._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");ja.weekdaysParse=function(a,b,c){var d,e;this._weekdaysParse||(this._weekdaysParse=
[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=ka([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+
"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};ja.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ja._meridiemParse=/[ap]\.?m?\.?/i;ja.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=
a%10,b=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=v("moment.lang is deprecated. Use moment.locale instead.",E);a.langData=v("moment.langData is deprecated. Use moment.localeData instead.",L);var Wa=Math.abs,ec=Pa("ms"),fc=Pa("s"),gc=Pa("m"),hc=Pa("h"),ic=Pa("d"),jc=Pa("w"),kc=Pa("M"),lc=Pa("y"),mc=Ta("milliseconds"),nc=Ta("seconds"),oc=Ta("minutes"),pc=Ta("hours"),qc=Ta("days"),rc=Ta("months"),sc=Ta("years"),fb=Math.round,$a={s:45,m:45,h:22,d:26,M:11},Ab=Math.abs,
oa=Ka.prototype;oa.abs=function(){var a=this._data;this._milliseconds=Wa(this._milliseconds);this._days=Wa(this._days);this._months=Wa(this._months);a.milliseconds=Wa(a.milliseconds);a.seconds=Wa(a.seconds);a.minutes=Wa(a.minutes);a.hours=Wa(a.hours);a.months=Wa(a.months);a.years=Wa(a.years);return this};oa.add=function(a,b){return eb(this,a,b,1)};oa.subtract=function(a,b){return eb(this,a,b,-1)};oa.as=function(a){var b,c=this._milliseconds;a=K(a);if("month"===a||"year"===a)return b=this._days+c/
864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=ec;oa.asSeconds=fc;oa.asMinutes=gc;oa.asHours=hc;oa.asDays=ic;oa.asWeeks=jc;oa.asMonths=kc;oa.asYears=lc;oa.valueOf=function(){return this._milliseconds+
864E5*this._days+2592E6*(this._months%12)+31536E6*r(this._months/12)};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*(0>146097*c/4800+b?Math.floor(146097*c/4800+b):Math.ceil(146097*c/4800+b)),c=b=0);d.milliseconds=a%1E3;a=t(a/1E3);d.seconds=a%60;a=t(a/60);d.minutes=a%60;a=t(a/60);d.hours=a%24;b+=t(a/24);a=t(4800*b/146097);c+=a;b-=0>146097*a/4800?Math.floor(146097*a/4800):Math.ceil(146097*a/4800);a=t(c/12);d.days=
b;d.months=c%12;d.years=a;return this};oa.get=function(a){a=K(a);return this[a+"s"]()};oa.milliseconds=mc;oa.seconds=nc;oa.minutes=oc;oa.hours=pc;oa.days=qc;oa.weeks=function(){return t(this.days()/7)};oa.months=rc;oa.years=sc;oa.humanize=function(a){var b=this.localeData(),c;c=!a;var d=ba(this).abs(),e=fb(d.as("s")),f=fb(d.as("m")),g=fb(d.as("h")),l=fb(d.as("d")),k=fb(d.as("M")),d=fb(d.as("y")),e=e<$a.s&&["s",e]||1>=f&&["m"]||f<$a.m&&["mm",f]||1>=g&&["h"]||g<$a.h&&["hh",g]||1>=l&&["d"]||l<$a.d&&
["dd",l]||1>=k&&["M"]||k<$a.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=vb.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};oa.toISOString=Za;oa.toString=Za;oa.toJSON=Za;oa.locale=P;oa.localeData=fa;oa.toIsoString=v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Za);oa.lang=Kb;D("X",0,0,"unix");D("x",0,0,"valueOf");I("x",qb);I("X",/[+-]?\d+(\.\d{1,3})?/);O("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});O("x",function(a,
b,c){c._d=new Date(r(a))});a.version="2.12.0";mb=ka;a.fn=V;a.min=function(){var a=[].slice.call(arguments,0);return Ma("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return Ma("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=f;a.unix=function(a){return ka(1E3*a)};a.months=function(a,b){return Xa(a,b,"months",12,"month")};a.isDate=m;a.locale=E;a.invalid=c;a.duration=ba;a.isMoment=u;a.weekdays=function(a,b){return Xa(a,b,"weekdays",7,"day")};a.parseZone=function(){return ka.apply(null,
arguments).parseZone()};a.localeData=L;a.isDuration=Ga;a.monthsShort=function(a,b){return Xa(a,b,"monthsShort",12,"month")};a.weekdaysMin=function(a,b){return Xa(a,b,"weekdaysMin",7,"day")};a.defineLocale=z;a.updateLocale=function(a,b){if(null!=b){var c;null!=ua[a]&&(b=B(ua[a]._config,b));c=new y(b);c.parentLocale=ua[a];ua[a]=c;E(a)}else null!=ua[a]&&(null!=ua[a].parentLocale?ua[a]=ua[a].parentLocale:null!=ua[a]&&delete ua[a]);return ua[a]};a.locales=function(){return Object.keys(ua)};a.weekdaysShort=
function(a,b){return Xa(a,b,"weekdaysShort",7,"day")};a.normalizeUnits=K;a.relativeTimeThreshold=function(a,b){if(void 0===$a[a])return!1;if(void 0===b)return $a[a];$a[a]=b;return!0};a.prototype=V;return a})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(a,h){return function(){function a(h){void 0===h&&(h=[]);this._elements=h}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=
[],g=0;g<this.length();g++)a.push(this.get(g));return a};return a}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(a,h,m,n,g,k){var f=0===k.version.indexOf("4.");return function(a){function d(c,b,d,f,g,k){a.call(this,c);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=b;this._hasZ=d;this._hasM=f;this._cacheId=g;this._partId=k}m(d,a);d.prototype.get=function(a){if(void 0===
this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var d=this._hasZ,e=this._hasM,k=null,k=d&&!e?new g(b[0],b[1],b[2],void 0,this._spRef):e&&d?new g(b[0],b[1],void 0,b[2],this._spRef):d&&e?new g(b[0],b[1],b[2],b[3],this._spRef):new g(b[0],b[1],this._spRef);f?k.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():k.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=k}return this._lazyPt[a]};
d.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof d?!1:a.getUniqueHash()===this.getUniqueHash()};d.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return d}(n)})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(a,h,m,n,g){return function(a){function f(e,d,c,b,f){a.call(this,e);this._lazyPath=[];this._hasM=this._hasZ=
!1;this._hasZ=c;this._hasM=b;this._spRef=d;this._cacheId=f}m(f,a);f.prototype.get=function(a){if(void 0===this._lazyPath[a]){var d=this._elements[a];if(void 0===d)return;this._lazyPath[a]=new g(d,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};f.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof f?!1:a.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()};return f}(n)})},"esri/arcade/treeAnalysis":function(){define(["require",
"exports"],function(a,h){function m(a,b,c,d){void 0!==a.fmin&&(a.min=a.fmin);void 0!==a.fmax&&(a.max=a.fmax);return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function n(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],
"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)):-1}function g(a,b){void 0===b&&(b=!0);var c=q(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?g(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=
g(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=g(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");c=g(a.right,b);if(""!==c)break;c=g(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=g(a.test,b),""!==c))break;if(null!==a.init&&
(c=g(a.init,b),""!==c))break;if(null!==a.update&&(c=g(a.update,b),""!==c))break;if(null!==a.body&&(c=g(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=g(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=g(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=g(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var e=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&
e.push(a.body[d]);a.body=e;for(d=0;d<a.body.length;d++)if(c=g(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?q(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):g(a.body,!1);case "ReturnStatement":return null!==a.argument?g(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):g(a.argument,b);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=g(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return g(a.right,!1);case "ExpressionStatement":return g(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=g(a.object,b);if(""!==c)break;return!0===a.computed?g(a.property,b):"";case "Literal":return"";case "ThisExpression":return q(a,
"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=g(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=g(a.argument,b);break;case "BinaryExpression":c=g(a.left,b);if(""!==c)break;c=g(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return q(a,
"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=g(a.left,b);if(""!==c)break;c=g(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&!(c=g(a.elements[d],b),""!==c);d++);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&
!(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(e=a.properties[d].key.value,"string"===typeof e||e instanceof String||(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=g(a.properties[d],b)),""!==c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&
(c=g(a.key,b),""!==c))break;c=g(a.value,b)}return c}catch(f){throw f;}}function k(a,d){var e=q(a,"SYNTAX","UNREOGNISED"),f=null,g="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==d.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase();var h=null==a.init?"":k(a.init,d);if(""!==h)return h;null===
d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":f=c(a.id.name.toLowerCase(),a,d);g=b(a,d);if(""!==g)return g;if(null!==d.localScope)return q(a,"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var e="",m=0;m<a.declarations.length&&!(e=k(a.declarations[m],d),""!==e);m++);break;case "IfStatement":e=
k(a.test,d);if(""!==e)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(e=k(a.consequent,d),""!==e))break;if(null!==a.alternate&&(e=k(a.alternate,d),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(e=k(a.body[m],d),""!==e)return e;return"";case "ReturnStatement":return null!==a.argument?k(a.argument,d):"";case "ForInStatement":if("VariableDeclaration"===
a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");e=k(a.left,d);if(""!==e)break;e=k(a.right,d);if(""!==e)break;e=k(a.body,d);if(""!==e)break;return"";case "ForStatement":if(null!==a.init&&(e=k(a.init,d),""!==e))break;if(null!==a.test&&(e=k(a.test,d),""!==e))break;if(null!==a.body&&(e=k(a.body,d),""!==e))break;if(null!==a.update&&
(e=k(a.update,d),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var p=!1;if("MemberExpression"===a.argument.type)return k(a.argument,d);null!==d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(p=!0);void 0!==d.globalScope[a.argument.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.argument.name+
" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var u=k(a.right,d);if(""!==u)return u;p=!1;if("MemberExpression"===a.left.type)return u=k(a.left,d),""!==u?u:"";null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&(p=!0);void 0!==d.globalScope[a.left.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return k(a.expression,
d);case "Identifier":var r=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[r])return"";e=void 0!==d.globalScope[r]?"":q(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":e=k(a.object,d);if(""!==e)break;return!0===a.computed?k(a.property,d):"";case "Literal":return"";case "ThisExpression":e=q(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");e="";for(m=0;m<a.arguments.length;m++)if(e=k(a.arguments[m],
d),""!==e)return e;var t=n(a.callee.name,a.arguments,d);-1===t&&(e=q(a,"SYNTAX","NOTFOUND"));-2===t&&(e=q(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=k(a.argument,d);break;case "BinaryExpression":e=k(a.left,d);if(""!==e)break;e=k(a.right,d);if(""!==e)break;return"";case "LogicalExpression":e=k(a.left,d);if(""!==e)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return q(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");e=k(a.right,d);if(""!==e)break;
return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?q(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(m=0;m<a.elements.length&&!(e=k(a.elements[m],d),""!==e);m++);break;case "ObjectExpression":e="";for(m=0;m<a.properties.length;m++){e="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),
"Literal"===a.properties[m].key.type)){var H=a.properties[m].key.value;"string"===typeof H||H instanceof String||(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===e&&(e=k(a.properties[m],d));if(""!==e)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(e=k(a.key,d),""!==e))break;e=k(a.value,d);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED")}return e}catch(K){throw K;}}function f(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?f(a.init,b):c;case "FunctionDeclaration":return f(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(f(a.declarations[d],b))return!0;return c;case "IfStatement":return f(a.test,b)||null!==a.consequent&&f(a.consequent,b)||null!==a.alternate&&f(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(f(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?f(a.argument,b):c;case "UpdateExpression":return(c=
f(a.right,b))?c:f(a.left,b);case "AssignmentExpression":return f(a.right,b);case "ExpressionStatement":return f(a.expression,b);case "ForInStatement":return(c=f(a.left,b))||(c=f(a.right,b))?c:c=f(a.body,b);case "ForStatement":if(null!==a.init&&(c=f(a.init,b))||null!==a.test&&(c=f(a.test,b))||null!==a.body&&(c=f(a.body,b)))return c;null!==a.update&&(c=f(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===
a.name.toLowerCase();case "MemberExpression":if(c=f(a.object,b))return c;!0===a.computed&&(c=f(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)f(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)f(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return f(a.argument,b);case "BinaryExpression":return(c=f(a.left,b))?c:c=f(a.right,b);case "LogicalExpression":return(c=f(a.left,
b))?c:c=f(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)f(a.properties[d],b)&&(c=!0);return c;case "Property":return c=f(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(e){throw e;}}function e(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(e(a.declarations[d],b))return!0;
return c;case "IfStatement":return e(a.test,b)||null!==a.consequent&&e(a.consequent,b)||null!==a.alternate&&e(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(e(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,b);case "AssignmentExpression":return e(a.left,b)?!0:e(a.right,b);case "ExpressionStatement":return e(a.expression,b);case "ForInStatement":return(c=
e(a.left,b))||(c=e(a.right,b))?c:c=e(a.body,b);case "ForStatement":if(null!==a.init&&(c=e(a.init,b))||null!==a.test&&(c=e(a.test,b))||null!==a.body&&(c=e(a.body,b)))return c;null!==a.update&&(c=e(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=e(a.object,b))return c;!0===a.computed&&(c=e(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===
b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)e(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)e(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return e(a.argument,b);case "BinaryExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "LogicalExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)e(a.properties[d],b)&&(c=!0);return c;case "Property":return c=
e(a.value,b);case "Array":return c;default:return c}}catch(f){throw f;}}function d(a,b){var c=[],e;try{switch(a.type){case "VariableDeclarator":return null!==a.init?d(a.init,b):c;case "FunctionDeclaration":return d(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)e=d(a.declarations[f],b),c=c.concat(e);return c;case "ForInStatement":return e=d(a.left,b),c=c.concat(e),e=d(a.right,b),c=c.concat(e),e=d(a.body,b),c=c.concat(e);case "ForStatement":return null!==a.init&&(e=d(a.init,
b),c=c.concat(e)),null!==a.test&&(e=d(a.test,b),c=c.concat(e)),null!==a.body&&(e=d(a.body,b),c=c.concat(e)),null!==a.update&&(e=d(a.update,b),c=c.concat(e)),c;case "IfStatement":return e=d(a.test,b),c=c.concat(e),null!==a.consequent&&(e=d(a.consequent,b),c=c.concat(e)),null!==a.alternate&&(e=d(a.alternate,b),c=c.concat(e)),c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)e=d(a.body[f],b),c=c.concat(e);return c;case "ReturnStatement":return null!==a.argument?d(a.argument,
b):c;case "UpdateExpression":return d(a.argument,b);case "AssignmentExpression":return c=d(a.left,b),c=c.concat(d(a.right,b));case "ExpressionStatement":return d(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&
c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(g){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(f=0;f<a.arguments.length;f++)e=d(a.arguments[f],b),c=c.concat(e);return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)e=d(a.elements[f],b),c=c.concat(e);return c;case "UnaryExpression":return d(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)e=d(a.properties[f],b),c=c.concat(e);return c;
case "Property":return d(a.value,b);case "BinaryExpression":return e=d(a.left,b),c=c.concat(e),e=d(a.right,b),c=c.concat(e);case "LogicalExpression":return e=d(a.left,b),c=c.concat(e),e=d(a.right,b),c=c.concat(e);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(k){throw k;}}function c(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,"return":"any",params:c}}function b(a,b){for(var c={globalScope:b.globalScope,
localScope:{}},d=0;d<a.params.length;d++)c.localScope[a.params[d].name.toLowerCase()]={type:"any"};return k(a.body,c)}function p(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var f in b)if("simple"!==d||"simple"===d&&"a"===b[f].av)e[f]={type:"FormulaFunction",signature:b[f]};for(b=0;b<c.length;b++)f=c[b],e[f.name]={type:"FormulaFunction",signature:f};for(f in a)e[f]=a[f],e[f].type="any";return e}
function q(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";
break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=
" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";
break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?
a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";
d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument.";
break}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":return"";case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(e){throw e;}return d}
function u(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:q(a,b,c)}}function t(a,b,c,d,e){b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};r(a.body,b,c,d,!1)}function r(a,b,d,e,f){void 0===f&&(f=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");q(a,"SYNTAX","UNREOGNISED");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(u(a,
"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(u(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==b.localScope?void 0!==b.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==b.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":r(a.init,b,d,e,f);break;case "FunctionDeclaration":!1===f&&e.push(u(a,"SYNTAX",
"GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(u(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=c("",a,b);t(a,b,d,e,f);null!==b.localScope&&e.push(u(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]});break;case "VariableDeclaration":for(var k=0;k<a.declarations.length;k++)r(a.declarations[k],b,d,e,f);break;case "IfStatement":null!==a.test&&(r(a.test,b,d,e,f),("AssignmentExpression"===a.test.type||
"UpdateExpression"===a.test.type)&&e.push(u(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&r(a.consequent,b,d,e,f);null!==a.alternate&&r(a.alternate,b,d,e,f);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)r(a.body[k],b,d,e,f);break;case "ReturnStatement":null!==a.argument&&r(a.argument,b,d,e,f);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&e.push(u(a,"SYNTAX","ONLY1VAR")),
null!==a.left.declarations[0].init&&e.push(u(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(u(a,"SYNTAX","LEFTNOTVAR"));r(a.left,b,d,e,f);r(a.right,b,d,e,f);r(a.body,b,d,e,f);break;case "ForStatement":null!==a.init&&r(a.init,b,d,e,f);null!==a.test&&r(a.test,b,d,e,f);null!==a.body&&r(a.body,b,d,e,f);null!==a.update&&r(a.update,b,d,e,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?
e.push(u(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===d&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(g=!0),!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&r(a.argument,b,d,e,f));break;case "AssignmentExpression":"Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type&&e.push(u(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(u(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.right,b,d,e,f);g=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(g=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===d&&!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===
a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&r(a.left,b,d,e,f);break;case "ExpressionStatement":r(a.expression,b,d,e,f);break;case "Identifier":var h=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[h])break;if(void 0!==b.globalScope[h])break;else!1===d&&e.push(u(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":r(a.object,b,d,e,f);!0===a.computed&&r(a.property,b,d,e,f);break;case "Literal":return"";
case "ThisExpression":e.push(u(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&e.push(u(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)r(a.arguments[k],b,d,e,f);var m=n(a.callee.name,a.arguments,b);!1===d&&-1===m&&e.push(u(a,"SYNTAX","NOTFOUND"));-2===m&&e.push(u(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":r(a.argument,b,d,e,f);break;case "BinaryExpression":r(a.left,b,d,e,f);r(a.right,b,d,e,f);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:e.push(u(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:e.push(u(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.left,b,d,e,f);("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)&&e.push(u(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));r(a.right,b,d,e,f);("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)&&e.push(u(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;
case "ConditionalExpression":e.push(u(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)r(a.elements[k],b,d,e,f);break;case "Array":e.push(u(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)r(a.properties[k],b,d,e,f);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(u(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&r(a.key,b,d,e,f);r(a.value,b,d,e,f);break;default:e.push(u(a,"SYNTAX","UNRECOGNISED"))}}catch(p){e.push({line:null==
a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}h.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",
max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",
av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"3",av:"f"},domainvalue:{min:"3",max:"3",av:"f"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",
max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",
max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",
av:"a"},min:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},
aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},
centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};h.checkFunctionSignature=m;h.findFunction=n;h.validateLanguageNode=g;h.testValidityOfExpression=k;h.referencesMemberImpl=f;h.referencesMember=function(a,b){return!0===f(a.body[0].body,b)?!0:!1};h.referencesFunctionImpl=e;h.referencesFunction=function(a,b){return!0===e(a.body[0].body,b)?!0:!1};h.findFieldLiteralsImpl=d;h.findFieldLiterals=function(a,b){return d(a.body[0].body,b)};h.extractFunctionDeclaration=c;h.validateFunction=
b;h.constructGlobalScope=p;h.validateScript=function(a,b,c){void 0===c&&(c="full");b={globalScope:p(b.vars,h.functionDecls,b.customFunctions,c),localScope:null};return k(a.body[0].body,b)};h.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":g(a.body[0].body)};h.nodeErrorMessage=q;h.makeError=u;h.extractAllIssuesInFunction=t;h.extractAllIssues=r;h.checkScript=function(a,b,c,d){void 0===d&&(d="full");var e=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:p(b.vars,h.functionDecls,b.customFunctions,d),localScope:null};try{r(a.body[0].body,b,c,e)}catch(f){}return e}})},"esri/arcade/Dictionary":function(){define(["require","exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(a,h,m,n,g){return function(){function a(f){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=f instanceof a?f.attributes:void 0===
f?{}:null===f?{}:f}a.prototype.field=function(a){var e=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===e)return this.attributes[d];throw Error("Field not Found");};a.prototype.setField=function(a,e){if(this.immutable)throw Error("Dictionary is Immutable");var d=a.toLowerCase();if(void 0===this.attributes[a])for(var c in this.attributes)if(c.toLowerCase()===d){this.attributes[c]=e;return}this.attributes[a]=e};a.prototype.hasField=function(a){var e=
a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===e)return!0;return!1};a.prototype.keys=function(){var a=[],e;for(e in this.attributes)a.push(e);return a=a.sort()};a.prototype.castToText=function(){var a="",e;for(e in this.attributes){""!==a&&(a+=",");var d=this.attributes[e];null!=d&&(m.isBoolean(d)||m.isNumber(d)||m.isString(d)?a+=JSON.stringify(e)+":"+JSON.stringify(d):d instanceof n?a+=JSON.stringify(e)+":"+m.toStringExplicit(d):d instanceof
g?a+=JSON.stringify(e)+":"+m.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(e)+":"+m.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(e)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(e)+":"+d.castToText()))}return"{"+a+"}"};return a}()})},"esri/arcade/Feature":function(){define("require exports ../geometry/Geometry ../Graphic ../geometry/support/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(a,
h,m,n,g,k,f,e,d){return function(){function a(b,d){this.attributes=this.geometry=null;this.immutable=!0;if(b instanceof a)this.attributes=b.attributes,this.geometry=b.geometry;else if(b instanceof n)this.geometry=b.geometry,this.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;else if(b instanceof k)this.attributes=b.field("attributes"),null!==this.attributes&&(this.attributes=this.attributes instanceof k?this.attributes.attributes:null),this.geometry=b.field("geometry"),null!==
this.geometry&&(this.geometry instanceof k?this.geometry=a.parseGeometryFromDictionary(this.geometry):this.geometry instanceof m||(this.geometry=null));else if(d instanceof m||null===d)this.geometry=d,this.attributes=void 0===b?{}:null===b?{}:b;else if("string"===typeof b){var e=JSON.parse(b);null!==e.geometry&&void 0!==e.geometry&&(this.geometry=g.fromJSON(e.geometry));this.attributes=void 0===e.attributes?{}:null===e.attributes?{}:e.attributes}else void 0===b?this.attributes={}:null===b&&(this.attributes=
{}),this.geometry=null}a.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var d=this.attributes[c];null!=d&&(f.isBoolean(d)||f.isNumber(d)||f.isString(d)?a+=JSON.stringify(c)+":"+JSON.stringify(d):d instanceof m?a+=JSON.stringify(c)+":"+f.toStringExplicit(d):d instanceof e?a+=JSON.stringify(c)+":"+f.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(c)+":"+f.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(d):null!==d&&"object"===
typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(c)+":"+d.castToText()))}return'{"geometry":'+(null===this.geometry?"null":f.toStringExplicit(this.geometry))+',"attributes":'+a+"}"};a.prototype._fixDateFields=function(a){for(var c=0;c<a.length;c++){var d=this.attributes[a[c]];if(null!==d)if(void 0===d)for(var e in this.attributes){if(e.toLowerCase()===a[c]){d=this.attributes[e];null!==d&&!(d instanceof Date)&&(this.attributes[e]=new Date(d));break}}else d instanceof Date||(this.attributes[a[c]]=
new Date(d))}};a.prototype.field=function(a){var c=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===c)return this.attributes[d];throw Error("Field not Found");};a.prototype.setField=function(a,c){if(this.immutable)throw Error("Feature is Immutable");var d=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===d){this.attributes[e]=c;return}this.attributes[a]=c};a.prototype.hasField=function(a){var c=
a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===c)return!0;return!1};a.prototype.keys=function(){var a=[],c;for(c in this.attributes)a.push(c);return a=a.sort()};a.fromFeature=function(b){return new a(b)};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===
b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return g.fromJSON(b)};a.fixPathArrays=function(a,c,d){var f=[];if(a instanceof Array)for(var g=0;g<a.length;g++)f.push(this.fixPointArrays(a[g],c,d));else if(a instanceof e)for(g=0;g<a.length();g++)f.push(this.fixPointArrays(a.get(g),c,d));return f};a.fixPointArrays=function(a,c,f){var g=[];if(a instanceof Array)for(var k=0;k<
a.length;k++){var h=a[k];h instanceof d?c&&f?g.push([h.x,h.y,h.z,h.m]):c?g.push([h.x,h.y,h.z]):f?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h)}else if(a instanceof e)for(k=0;k<a.length();k++)h=a.get(k),h instanceof d?c&&f?g.push([h.x,h.y,h.z,h.m]):c?g.push([h.x,h.y,h.z]):f?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h);return g};a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var e={},f;for(f in b.attributes){var g=b.attributes[f];g instanceof k&&(g=a.convertDictionaryToJson(g));
d?e[f.toLowerCase()]=g:e[f]=g}return e};a.parseAttributesFromDictionary=function(a){var c={},d;for(d in a.attributes){var e=a.attributes[d];if(f.isString(e)||f.isNumber(e)||f.isBoolean(e)||f.isDate(e))c[d]=e;else throw Error("Illegal Argument");}return c};a.fromJson=function(b){var d=null;null!==b.geometry&&void 0!==b.geometry&&(d=g.fromJSON(b.geometry));var e={};if(null!==b.attributes&&void 0!==b.attributes)for(var k in b.attributes){var h=b.attributes[k];if(f.isString(h)||f.isNumber(h)||f.isBoolean(h)||
f.isDate(h))e[k]=h;else throw Error("Illegal Argument");}return new a(e,d)};return a}()})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(a,h){return function(){return function(a,h){this.context=this.definition=null;this.definition=a;this.context=h}}()})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(a,h,m,n){function g(a){return null===a?a:isNaN(a.getTime())?null:a}h.registerFunctions=function(a,f){a.today=
function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);
return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?null:m.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getDate()})};
a.month=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=
function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,1,1);a=n.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,0,7);if(3===d.length)return g(new Date(n.toNumber(d[0]),n.toNumber(d[1]),n.toNumber(d[2]),
0,0,0,0));if(4===d.length)return g(new Date(n.toNumber(d[0]),n.toNumber(d[1]),n.toNumber(d[2]),n.toNumber(d[3]),0,0,0));if(5===d.length)return g(new Date(n.toNumber(d[0]),n.toNumber(d[1]),n.toNumber(d[2]),n.toNumber(d[3]),n.toNumber(d[4]),0,0));if(6===d.length)return g(new Date(n.toNumber(d[0]),n.toNumber(d[1]),n.toNumber(d[2]),n.toNumber(d[3]),n.toNumber(d[4]),n.toNumber(d[5]),0));if(7===d.length)return g(new Date(n.toNumber(d[0]),n.toNumber(d[1]),n.toNumber(d[2]),n.toNumber(d[3]),n.toNumber(d[4]),
n.toNumber(d[5]),n.toNumber(d[6])));if(2===d.length){a=n.toString(d[1]);if(""===a)return null;d=m(n.toString(d[0]),a,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length)return a=n.toNumber(d[0]),!1===isNaN(a)?g(new Date(a)):n.toDate(d[0]);if(0===d.length)return new Date})};a.datediff=function(a,d){return f(a,d,function(a,b,d){n.pcCheck(d,2,3);a=n.toDateM(d[0]);b=n.toDateM(d[1]);if(null===a||null===b)return NaN;switch(n.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,
"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,d){return f(a,d,function(a,
b,d){n.pcCheck(d,2,3);a=n.toDateM(d[0]);if(null===a)return null;b="milliseconds";switch(n.toString(d[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b=
"years"}a.add(n.toNumber(d[1]),b);return a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils"],function(a,h,m){h.registerFunctions=function(a,g){a.trim=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,1,1);return m.toString(c[0]).trim()})};a.upper=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,1,1);return m.toString(c[0]).toUpperCase()})};a.proper=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===
m.toString(c[1]).toLowerCase()&&(a=2);d=/\s/;c=m.toString(c[0]);for(var b="",f=!0,g=0;g<c.length;g++){var k=c[g];d.test(k)?1===a&&(f=!0):k.toUpperCase()!==k.toLowerCase()&&(f?(k=k.toUpperCase(),f=!1):k=k.toLowerCase());b+=k}return b})};a.lower=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,1,1);return m.toString(c[0]).toLowerCase()})};a.guid=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,0,1);if(0<c.length)switch(m.toString(c[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-",
"").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};a.mid=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,2,3);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return m.toString(c[0]).substr(a);d=m.toNumber(c[2]);if(isNaN(d))return"";0>d&&(d=0);return m.toString(c[0]).substr(a,d)})};a.find=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,
2,3);a=0;if(2<c.length){a=m.toNumber(m.defaultUndefined(c[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return m.toString(c[1]).indexOf(m.toString(c[0]),a)})};a.left=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(c[0]).substr(0,a)})};a.right=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(c[0]).substr(-1*a,a)})};a.split=function(a,f){return g(a,
f,function(a,d,c){m.pcCheck(c,2,4);a=m.toNumber(m.defaultUndefined(c[2],-1));-1===a||null===a?a=m.toString(c[0]).split(m.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),a=m.toString(c[0]).split(m.toString(c[1]),a));c=m.defaultUndefined(c[3],!1);if(!1===m.isBoolean(c))throw Error("Invalid Parameter");if(!1===c)return a;c=[];for(d=0;d<a.length;d++)""!==a[d]&&void 0!==a[d]&&c.push(a[d]);return c})};a.text=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,1,2);return m.toStringExplicit(c[0],c[1])})};
a.concatenate=function(a,f){return g(a,f,function(a,d,c){a=[];if(1>c.length)return"";if(m.isArray(c[0])){d=m.defaultUndefined(c[2],"");for(var b=0;b<c[0].length;b++)a[b]=m.toStringExplicit(c[0][b],d);return 1<c.length?a.join(c[1]):a.join("")}if(m.isImmutableArray(c[0])){d=m.defaultUndefined(c[2],"");for(b=0;b<c[0].length();b++)a[b]=m.toStringExplicit(c[0].get(b),d);return 1<c.length?a.join(c[1]):a.join("")}for(b=0;b<c.length;b++)a[b]=m.toStringExplicit(c[b]);return a.join("")})};a.reverse=function(a,
f){return g(a,f,function(a,d,c){m.pcCheck(c,1,1);if(m.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(m.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,f){return g(a,f,function(a,d,c){m.pcCheck(c,3,4);a=m.toString(c[0]);d=m.toString(c[1]);var b=m.toString(c[2]);return(4===c.length?m.toBoolean(c[3]):1)?m.multiReplace(a,d,b):a.replace(d,b)})}}})},"esri/arcade/functions/maths":function(){define(["require","exports",
"../languageUtils","dojo/number"],function(a,h,m,n){function g(a,f,e){if("undefined"===typeof e||0===+e)return Math[a](f);f=+f;e=+e;if(isNaN(f)||!("number"===typeof e&&0===e%1))return NaN;f=f.toString().split("e");f=Math[a](+(f[0]+"e"+(f[1]?+f[1]-e:-e)));f=f.toString().split("e");return+(f[0]+"e"+(f[1]?+f[1]+e:e))}h.registerFunctions=function(a,f){a.number=function(a,d){return f(a,d,function(c,b,g){return f(a,d,function(a,b,c){m.pcCheck(c,1,2);a=c[0];return m.isNumber(a)?a:null===a?0:m.isDate(a)||
m.isBoolean(a)||""===a||void 0===a?Number(a):m.isString(a)?void 0!==c[1]?(c=m.multiReplace(c[1],"\u2030",""),c=m.multiReplace(c,"\u00a4",""),n.parse(a,{pattern:c})):Number(a.trim()):Number(a)})})};a.abs=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.abs(m.toNumber(d[0]))})};a.acos=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.acos(m.toNumber(d[0]))})};a.asin=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.asin(m.toNumber(d[0]))})};
a.atan=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.atan(m.toNumber(d[0]))})};a.atan2=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,2);return Math.atan2(m.toNumber(d[0]),m.toNumber(d[1]))})};a.ceil=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,2);return 2===d.length?(a=m.toNumber(d[1]),isNaN(a)&&(a=0),g("ceil",m.toNumber(d[0]),-1*a)):Math.ceil(m.toNumber(d[0]))})};a.round=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,2);return 2===d.length?
(a=m.toNumber(d[1]),isNaN(a)&&(a=0),g("round",m.toNumber(d[0]),-1*a)):Math.round(m.toNumber(d[0]))})};a.floor=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,2);return 2===d.length?(a=m.toNumber(d[1]),isNaN(a)&&(a=0),g("floor",m.toNumber(d[0]),-1*a)):Math.floor(m.toNumber(d[0]))})};a.cos=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.cos(m.toNumber(d[0]))})};a.isnan=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};
a.exp=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.exp(m.toNumber(d[0]))})};a.log=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.log(m.toNumber(d[0]))})};a.pow=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,2);return Math.pow(m.toNumber(d[0]),m.toNumber(d[1]))})};a.random=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.sin(m.toNumber(d[0]))})};
a.sqrt=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.sqrt(m.toNumber(d[0]))})};a.tan=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return Math.tan(m.toNumber(d[0]))})};a.defaultvalue=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,d){return f(a,
d,function(a,b,d){m.pcCheck(d,1,1);a=d[0];m.isString(a)&&(a=a.toLowerCase());switch(a){case !0:case "true":case 1:case "1":case "on":case "yes":return!0;default:return!1}})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/support/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),function(a,h,m,n,g,k,f,e,d,c,
b,p){h.registerFunctions=function(a,h,t){a.polygon=function(a,e){return h(a,e,function(e,f,g){c.pcCheck(g,1,1);e=null;if(g[0]instanceof b){if(e=c.fixSpatialReference(p.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===e instanceof n)throw Error("Illegal Parameter");}else e=g[0]instanceof n?d.fromJSON(g[0].toJSON()):c.fixSpatialReference(new n(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.polyline=function(a,e){return h(a,e,function(e,f,k){c.pcCheck(k,1,1);e=null;if(k[0]instanceof b){if(e=c.fixSpatialReference(p.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===e instanceof g)throw Error("Illegal Parameter");}else e=k[0]instanceof g?d.fromJSON(k[0].toJSON()):c.fixSpatialReference(new g(JSON.parse(k[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.point=function(a,e){return h(a,e,function(e,f,g){c.pcCheck(g,1,1);e=null;if(g[0]instanceof b){if(e=c.fixSpatialReference(p.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===e instanceof k)throw Error("Illegal Parameter");}else e=g[0]instanceof k?d.fromJSON(g[0].toJSON()):c.fixSpatialReference(new k(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.multipoint=function(a,f){return h(a,f,function(f,g,k){c.pcCheck(k,1,1);f=null;if(k[0]instanceof b){if(f=c.fixSpatialReference(p.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===f instanceof e)throw Error("Illegal Parameter");}else f=k[0]instanceof e?d.fromJSON(k[0].toJSON()):c.fixSpatialReference(new e(JSON.parse(k[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return f})};a.extent=function(a,m){return h(a,m,function(h,m,l){c.pcCheck(l,1,1);h=null;l[0]instanceof b?h=c.fixSpatialReference(p.parseGeometryFromDictionary(l[0]),a.spatialReference):l[0]instanceof k?(h={xmin:l[0].x,ymin:l[0].y,xmax:l[0].x,ymax:l[0].y,spatialReference:l[0].spatialReference.toJSON()},l[0].hasZ?(h.zmin=l[0].z,h.zmax=l[0].z):l[0].hasM&&(h.mmin=l[0].m,h.mmax=l[0].m),h=d.fromJSON(h)):h=l[0]instanceof n?d.fromJSON(l[0].extent.toJSON()):l[0]instanceof g?d.fromJSON(l[0].extent.toJSON()):
l[0]instanceof e?d.fromJSON(l[0].extent.toJSON()):l[0]instanceof f?d.fromJSON(l[0].toJSON()):c.fixSpatialReference(new f(JSON.parse(l[0])),a.spatialReference);if(null!==h&&!1===h.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h})};a.geometry=function(a,e){return h(a,e,function(e,f,g){c.pcCheck(g,1,1);e=null;e=g[0]instanceof p?c.fixSpatialReference(g[0].geometry,a.spatialReference):g[0]instanceof
b?c.fixSpatialReference(p.parseGeometryFromDictionary(g[0]),a.spatialReference):c.fixSpatialReference(d.fromJSON(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e})};a.feature=function(a,d){return h(a,d,function(d,e,f){if(0===f.length)throw Error("Missing Parameters");d=null;if(1===f.length)if(c.isString(f[0]))d=p.fromJson(JSON.parse(f[0]));
else if(f[0]instanceof p)d=new p(f[0]);else if(f[0]instanceof m)d=new p(null,f[0]);else if(f[0]instanceof b)d=f[0].hasField("geometry")?f[0].field("geometry"):null,e=f[0].hasField("attributes")?f[0].field("attributes"):null,null!==d&&d instanceof b&&(d=p.parseGeometryFromDictionary(d)),null!==e&&(e=p.parseAttributesFromDictionary(e)),d=new p(e,d);else throw Error("Illegal Argument");else{if(2===f.length){e=d=null;if(null!==f[0])if(f[0]instanceof m)d=f[0];else if(d instanceof b)d=p.parseGeometryFromDictionary(f[0]);
else throw Error("Illegal Argument");if(null!==f[1])if(f[1]instanceof b)e=p.parseAttributesFromDictionary(f[1]);else throw Error("Illegal Argument");}else{d=null;e={};if(null!==f[0])if(f[0]instanceof m)d=f[0];else if(d instanceof b)d=p.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");for(var g=1;g<f.length;g+=2)if(c.isString(f[g])){var k=f[g+1];if(null===k||void 0===k||c.isString(k)||isNaN(k)||c.isDate(k)||c.isNumber(k)||c.isBoolean(k)){if(t(k))throw Error("Illegal Argument");
e[f[g]]=k}else throw Error("Illegal Argument");}else throw Error("Illegal Argument");}d=new p(e,d)}d.geometry=c.fixSpatialReference(d.geometry,a.spatialReference);d.immutable=!1;return d})};a.dictionary=function(a,d){return h(a,d,function(a,d,e){if(0===e.length)throw Error("Missing Parameters");if(0!==e.length%2)throw Error("Missing Parameters");a={};for(d=0;d<e.length;d+=2)if(c.isString(e[d])){var f=e[d+1];if(null===f||void 0===f||c.isString(f)||isNaN(f)||c.isDate(f)||c.isNumber(f)||c.isBoolean(f)){if(t(f))throw Error("Illegal Argument");
a[e[d]]=f}else throw Error("Illegal Argument");}else throw Error("Illegal Argument");e=new b(a);e.immutable=!1;return e})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(a,h,m,n){function g(a,f,e,d){if(1===d.length){if(m.isArray(d[0]))return n.calculateStat(a,d[0]);if(m.isImmutableArray(d[0]))return n.calculateStat(a,d[0].toArray())}return n.calculateStat(a,d)}h.registerFunctions=function(a,f){a.stdev=function(a,d){return f(a,d,
function(a,b,d){return g("stdev",a,b,d)})};a.variance=function(a,d){return f(a,d,function(a,b,d){return g("variance",a,b,d)})};a.average=function(a,d){return f(a,d,function(a,b,d){return g("mean",a,b,d)})};a.mean=function(a,d){return f(a,d,function(a,b,d){return g("mean",a,b,d)})};a.sum=function(a,d){return f(a,d,function(a,b,d){return g("sum",a,b,d)})};a.min=function(a,d){return f(a,d,function(a,b,d){return g("min",a,b,d)})};a.max=function(a,d){return f(a,d,function(a,b,d){return g("max",a,b,d)})};
a.distinct=function(a,d){return f(a,d,function(a,b,d){return g("distinct",a,b,d)})};a.count=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);if(m.isArray(d[0])||m.isString(d[0]))return d[0].length;if(m.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports"],function(a,h){function m(a){for(var k=0,f=0;f<a.length;f++)k+=a[f];return k/a.length}function n(a){for(var k=m(a),f=0,
e=0;e<a.length;e++)f+=Math.pow(k-a[e],2);return f/a.length}h.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};h.calculateStat=function(a,k,f){void 0===f&&(f=1E3);switch(a.toLowerCase()){case "distinct":a:{a=f;f=[];for(var e={},d=0;d<k.length;d++)if(void 0!==
k[d]&&null!==k[d]&&void 0===e[k[d]]&&(f.push(k[d]),e[k[d]]=1),f.length>=a&&-1!==a){k=f;break a}k=f}return k;case "avg":case "mean":return m(k);case "min":return Math.min.apply(Math,k);case "sum":for(f=a=0;f<k.length;f++)a+=k[f];return a;case "max":return Math.max.apply(Math,k);case "stdev":case "stddev":return Math.sqrt(n(k));case "var":case "variance":return n(k);case "count":return k.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],
function(a,h,m,n){h.parseScript=function(a){a=n.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var k=m.validateLanguage(a);if(""!==k)throw Error(k);return a};h.scriptCheck=function(a,k,f,e){var d=[];try{var c=n.parse("function _() { "+a+"\n}",{tolerant:!0,
loc:!0}),b=c.errors;if(0<b.length)for(var h=0;h<b.length;h++)d.push({line:b[h].lineNumber,character:b[h].column,reason:b[h].description});var q=m.checkScript(c,k,f,e);for(k=0;k<q.length;k++)d.push(q[k])}catch(u){try{"Unexpected token }"===u.description&&(u.index=("function _() { "+a+"\n}").length-1)?d.push({line:u.lineNumber,character:u.column,reason:"Unexpected end of script"}):d.push({line:u.lineNumber,character:u.column,reason:u.description})}catch(t){}}return d};h.extractFieldLiterals=function(a,
k){void 0===k&&(k=!1);return m.findFieldLiterals(a,k)};h.validateScript=function(a,k,f){void 0===f&&(f="full");return m.validateScript(a,k,f)};h.referencesMember=function(a,k){return m.referencesMember(a,k)};h.referencesFunction=function(a,k){return m.referencesFunction(a,k)}})},"esri/arcade/lib/esprima":function(){(function(a,h){"function"===typeof define&&define.amd?define(["exports"],h):"undefined"!==typeof exports?h(exports):h(a.esprima={})})(this,function(a){function h(a,b){if(!a)throw Error("ASSERT: "+
b);}function m(a){return 48<=a&&57>=a}function n(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function g(a){return 0<="01234567".indexOf(a)}function k(a){return 10===a||13===a||8232===a||8233===a}function f(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ya.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ya.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function d(a){switch(a){default:return!1}}
function c(a){if(fa&&d(a))return!0;a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,c,d,e){h("number"===typeof c,"Comment must have valid position");aa.lastCommentStart>=c||(aa.lastCommentStart=c,a={type:a,value:b},J.range&&(a.range=[c,d]),J.loc&&(a.loc=e),J.comments.push(a),J.attachComment&&
(J.leadingComments.push(a),J.trailingComments.push(a)))}function p(a){var c,d,e;c=A-a;for(d={start:{line:da,column:A-ga-a}};A<na;)if(e=P.charCodeAt(A),++A,k(e)){J.comments&&(a=P.slice(c+a,A-1),d.end={line:da,column:A-ga-1},b("Line",a,c,A-1,d));13===e&&10===P.charCodeAt(A)&&++A;++da;ga=A;return}J.comments&&(a=P.slice(c+a,A),d.end={line:da,column:A-ga},b("Line",a,c,A,d))}function q(){var a,c;for(c=0===A;A<na;)if(a=P.charCodeAt(A),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,
8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++A;else if(k(a))++A,13===a&&10===P.charCodeAt(A)&&++A,++da,ga=A,c=!0;else if(47===a)if(a=P.charCodeAt(A+1),47===a)++A,++A,p(2),c=!0;else if(42===a){++A;++A;a:{var d=a=void 0,e=void 0,e=void 0;J.comments&&(a=A-2,d={start:{line:da,column:A-ga-2}});for(;A<na;)if(e=P.charCodeAt(A),k(e))13===e&&10===P.charCodeAt(A+1)&&++A,++da,++A,ga=A,A>=na&&D();else{if(42===e&&47===P.charCodeAt(A+1)){++A;++A;J.comments&&(e=P.slice(a+2,A-
2),d.end={line:da,column:A-ga},b("Block",e,a,A,d));break a}++A}D()}}else break;else if(c&&45===a)if(45===P.charCodeAt(A+1)&&62===P.charCodeAt(A+2))A+=3,p(3);else break;else if(60===a)if("!--"===P.slice(A+1,A+4))++A,++A,++A,++A,p(4);else break;else break}function u(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(A<na&&n(P[A]))c=P[A++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function t(){var a,b;a=P.charCodeAt(A++);b=String.fromCharCode(a);92===
a&&(117!==P.charCodeAt(A)&&D(),++A,a=u("u"),(!a||"\\"===a||!f(a.charCodeAt(0)))&&D(),b=a);for(;A<na;){a=P.charCodeAt(A);if(!e(a))break;++A;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==P.charCodeAt(A)&&D(),++A,a=u("u"),(!a||"\\"===a||!e(a.charCodeAt(0)))&&D(),b+=a)}return b}function r(){var a=A,b=P.charCodeAt(A),c,d=P[A];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++A,J.tokenize&&(40===b?J.openParenToken=J.tokens.length:
123===b&&(J.openCurlyToken=J.tokens.length)),{type:T.Punctuator,value:String.fromCharCode(b),lineNumber:da,lineStart:ga,start:a,end:A};default:if(c=P.charCodeAt(A+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return A+=2,{type:T.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:da,lineStart:ga,start:a,end:A};case 33:case 61:return A+=2,61===P.charCodeAt(A)&&++A,{type:T.Punctuator,value:P.slice(a,A),lineNumber:da,lineStart:ga,
start:a,end:A}}}b=P.substr(A,4);if("\x3e\x3e\x3e\x3d"===b)return A+=4,{type:T.Punctuator,value:b,lineNumber:da,lineStart:ga,start:a,end:A};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return A+=3,{type:T.Punctuator,value:b,lineNumber:da,lineStart:ga,start:a,end:A};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return A+=2,{type:T.Punctuator,value:b,lineNumber:da,lineStart:ga,start:a,end:A};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++A,
{type:T.Punctuator,value:d,lineNumber:da,lineStart:ga,start:a,end:A};D()}function s(){var a,b,c;c=P[A];h(m(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=A;a="";if("."!==c){a=P[A++];c=P[A];if("0"===a){if("x"===c||"X"===c){++A;for(a="";A<na&&n(P[A]);)a+=P[A++];0===a.length&&D();f(P.charCodeAt(A))&&D();return{type:T.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:da,lineStart:ga,start:b,end:A}}if("b"===c||"B"===c){++A;for(c="";A<na;){a=P[A];if("0"!==
a&&"1"!==a)break;c+=P[A++]}0===c.length&&D();A<na&&(a=P.charCodeAt(A),(f(a)||m(a))&&D());return{type:T.NumericLiteral,value:parseInt(c,2),lineNumber:da,lineStart:ga,start:b,end:A}}if("o"===c||"O"===c||g(c)){g(c)?(c=!0,a="0"+P[A++]):(c=!1,++A,a="");for(;A<na&&g(P[A]);)a+=P[A++];!c&&0===a.length&&D();(f(P.charCodeAt(A))||m(P.charCodeAt(A)))&&D();return{type:T.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:da,lineStart:ga,start:b,end:A}}c&&m(c.charCodeAt(0))&&D()}for(;m(P.charCodeAt(A));)a+=P[A++];
c=P[A]}if("."===c){for(a+=P[A++];m(P.charCodeAt(A));)a+=P[A++];c=P[A]}if("e"===c||"E"===c){a+=P[A++];c=P[A];if("+"===c||"-"===c)a+=P[A++];if(m(P.charCodeAt(A)))for(;m(P.charCodeAt(A));)a+=P[A++];else D()}f(P.charCodeAt(A))&&D();return{type:T.NumericLiteral,value:parseFloat(a),lineNumber:da,lineStart:ga,start:b,end:A}}function x(){Y=null;q();N("Regular Expression language structures not supported")}function v(){q();x()}function l(){var a;a=J.tokens[J.tokens.length-1];if(!a)return v();if("Punctuator"===
a.type){if("]"===a.value)return r();if(")"===a.value)return(a=J.tokens[J.openParenToken-1])&&"Keyword"===a.type&&("if"===a.value.toLowerCase()||"while"===a.value.toLowerCase()||"for"===a.value.toLowerCase()||"with"===a.value.toLowerCase())?v():r();if("}"===a.value){if(J.tokens[J.openCurlyToken-3]&&"Keyword"===J.tokens[J.openCurlyToken-3].type){if(a=J.tokens[J.openCurlyToken-4],!a)return r()}else if(J.tokens[J.openCurlyToken-4]&&"Keyword"===J.tokens[J.openCurlyToken-4].type){if(a=J.tokens[J.openCurlyToken-
5],!a)return v()}else return r();if(0<=Oa.indexOf(a.value))return r()}return v()}return"Keyword"===a.type&&"this"!==a.value?v():r()}function w(){var a;q();if(A>=na)return{type:T.EOF,lineNumber:da,lineStart:ga,start:A,end:A};a=P.charCodeAt(A);if(f(a)){var b;a=A;if(92===P.charCodeAt(A))b=t();else a:{var d;for(b=A++;A<na;){d=P.charCodeAt(A);if(92===d){A=b;b=t();break a}if(e(d))++A;else break}b=P.slice(b,A)}return{type:1===b.length?T.Identifier:c(b)?T.Keyword:"null"===b.toLowerCase()?T.NullLiteral:"true"===
b.toLowerCase()||"false"===b.toLowerCase()?T.BooleanLiteral:T.Identifier,value:b,lineNumber:da,lineStart:ga,start:a,end:A}}if(40===a||41===a||59===a)return r();if(39===a||34===a){var p="",w,v,x;d=!1;var y,z;y=da;z=ga;a=P[A];h("'"===a||'"'===a,"String literal must starts with a quote");b=A;for(++A;A<na;)if(w=P[A++],w===a){a="";break}else if("\\"===w)if(w=P[A++],!w||!k(w.charCodeAt(0)))switch(w){case "u":case "x":if("{"===P[A]){++A;v=w=v=void 0;v=P[A];w=0;for("}"===v&&D();A<na;){v=P[A++];if(!n(v))break;
w=16*w+"0123456789abcdef".indexOf(v.toLowerCase())}(1114111<w||"}"!==v)&&D();65535>=w?w=String.fromCharCode(w):(v=(w-65536>>10)+55296,w=String.fromCharCode(v,(w-65536&1023)+56320));p+=w}else x=A,(v=u(w))?p+=v:(A=x,p+=w);break;case "n":p+="\n";break;case "r":p+="\r";break;case "t":p+="\t";break;case "b":p+="\b";break;case "f":p+="\f";break;case "v":p+="\x0B";break;default:g(w)?(v="01234567".indexOf(w),0!==v&&(d=!0),A<na&&g(P[A])&&(d=!0,v=8*v+"01234567".indexOf(P[A++]),0<="0123".indexOf(w)&&(A<na&&
g(P[A]))&&(v=8*v+"01234567".indexOf(P[A++]))),p+=String.fromCharCode(v)):p+=w}else++da,"\r"===w&&"\n"===P[A]&&++A,ga=A;else if(k(w.charCodeAt(0)))break;else p+=w;""!==a&&D();return{type:T.StringLiteral,value:p,octal:d,startLineNumber:y,startLineStart:z,lineNumber:da,lineStart:ga,start:b,end:A}}return 46===a?m(P.charCodeAt(A+1))?s():r():m(a)?s():J.tokenize&&47===a?l():r()}function B(){var a,b,c;q();a={start:{line:da,column:A-ga}};b=w();a.end={line:da,column:A-ga};b.type!==T.EOF&&(c=P.slice(b.start,
b.end),a={type:Ba[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.tokens.push(a));return b}function y(){var a;a=Y;A=a.end;da=a.lineNumber;ga=a.lineStart;Y="undefined"!==typeof J.tokens?B():w();A=a.end;da=a.lineNumber;ga=a.lineStart;return a}function C(){var a,b,c;a=A;b=da;c=ga;Y="undefined"!==typeof J.tokens?B():w();A=a;da=b;ga=c}function E(){this.line=da;this.column=A-ga}function z(){this.start=new E;this.end=null}function L(a){this.start=
a.type===T.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function H(){A=Y.start;Y.type===T.StringLiteral?(da=Y.startLineNumber,ga=Y.startLineStart):(da=Y.lineNumber,ga=Y.lineStart);J.range&&(this.range=[A,0]);J.loc&&(this.loc=new z)}function K(a){J.range&&(this.range=[a.start,0]);J.loc&&(this.loc=new L(a))}function $(){var a,b,c,d;a=A;b=da;c=ga;q();d=da!==b;A=a;da=b;ga=c;return d}function R(a,b,c){var d=Error("Line "+
a+": "+c);d.index=b;d.lineNumber=a;d.column=b-ga+1;d.description=c;return d}function N(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){h(c<b.length,"Message reference must be in range");return b[c]});throw R(da,A,c);}function Q(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){h(c<b.length,"Message reference must be in range");return b[c]});c=R(da,A,c);if(J.errors)J.errors.push(c);else throw c;}function F(a,b){var c=ea.UnexpectedToken;
a&&(c=b?b:a.type===T.EOF?ea.UnexpectedEOS:a.type===T.Identifier?ea.UnexpectedIdentifier:a.type===T.NumericLiteral?ea.UnexpectedNumber:a.type===T.StringLiteral?ea.UnexpectedString:ea.UnexpectedToken,a.type===T.Keyword&&fa&&d(a.value)&&(c=ea.StrictReservedWord));c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?R(a.lineNumber,a.start,c):R(da,A,c)}function D(a,b){throw F(a,b);}function S(a,b){var c=F(a,b);if(J.errors)J.errors.push(c);else throw c;}function X(a){var b=y();
(b.type!==T.Punctuator||b.value!==a)&&D(b)}function ha(){var a;J.errors?(a=Y,a.type===T.Punctuator&&","===a.value?y():a.type===T.Punctuator&&";"===a.value?(y(),S(a)):S(a,ea.UnexpectedToken)):X(",")}function I(a){var b=y();(b.type!==T.Keyword||b.value.toLowerCase()!==a.toLowerCase())&&D(b)}function G(a){return Y.type===T.Punctuator&&Y.value===a}function W(a){return Y.type===T.Keyword&&Y.value.toLowerCase()===a.toLowerCase()}function O(){var a;59===P.charCodeAt(A)||G(";")?y():(a=da,q(),da===a&&Y.type!==
T.EOF&&!G("}")&&D(Y))}function M(a){return a.type===ba.Identifier||a.type===ba.MemberExpression}function U(a,b){var c,d,e=new H;c=fa;d=Na();fa=c;return e.finishFunctionExpression(null,a,[],d)}function ca(){var a,b;a=fa;fa=!0;b=Ma();b=U(b.params);fa=a;return b}function Z(){var a,b=new H;a=y();return a.type===T.StringLiteral||a.type===T.NumericLiteral?(fa&&a.octal&&S(a,ea.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ia(){var a,b,c,d=new H;a=Y;if(a.type===T.Identifier)return b=
Z(),"get"===a.value&&!G(":")&&!G("(")?(b=Z(),X("("),X(")"),a=U([]),d.finishProperty("get",b,a,!1,!1)):"set"===a.value&&!G(":")&&!G("(")?(b=Z(),X("("),a=Y,a.type!==T.Identifier?(X(")"),S(a),a=U([])):(c=[Ca()],X(")"),a=U(c,a)),d.finishProperty("set",b,a,!1,!1)):G(":")?(y(),a=sa(),d.finishProperty("init",b,a,!1,!1)):G("(")?(a=ca(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0);if(a.type===T.EOF||a.type===T.Punctuator)D(a);else{b=Z();if(G(":"))return y(),a=sa(),d.finishProperty("init",
b,a,!1,!1);if(G("("))return a=ca(),d.finishProperty("init",b,a,!0,!1);D(y())}}function ma(){var a,b,c,e;if(G("("))return X("("),G(")")?(y(),b=ya.ArrowParameterPlaceHolder):(++aa.parenthesisCount,b=xa(),X(")")),b;if(G("[")){b=[];var f=new H;for(X("[");!G("]");)G(",")?(y(),b.push(null)):(b.push(sa()),G("]")||X(","));y();return f.finishArrayExpression(b)}if(G("{")){b=[];var g;a={};c=String;var k=new H;for(X("{");!G("}");)f=ia(),g=f.key.type===ba.Identifier?f.key.name:c(f.key.value),e="init"===f.kind?
Ea.Data:"get"===f.kind?Ea.Get:Ea.Set,g="$"+g,Object.prototype.hasOwnProperty.call(a,g)?(a[g]===Ea.Data?fa&&e===Ea.Data?Q(ea.StrictDuplicateProperty):e!==Ea.Data&&Q(ea.AccessorDataProperty):e===Ea.Data?Q(ea.AccessorDataProperty):a[g]&e&&Q(ea.AccessorGetSet),a[g]|=e):a[g]=e,b.push(f),G("}")||ha();X("}");return k.finishObjectExpression(b)}a=Y.type;e=new H;if(a===T.Identifier)c=e.finishIdentifier(y().value);else if(a===T.StringLiteral||a===T.NumericLiteral)fa&&Y.octal&&S(Y,ea.StrictOctalLiteral),c=e.finishLiteral(y());
else if(a===T.Keyword){if(W("function")){e=null;var h,k=[];g=[];var m;a=new H;I("function");G("(")||(c=Y,e=Ca(),!fa&&d(c.value)&&(b=c,f=ea.StrictReservedWord));h=Ma(b);k=h.params;g=h.defaults;c=h.stricted;b=h.firstRestricted;h.message&&(f=h.message);m=fa;h=Na();fa&&b&&D(b,f);fa&&c&&S(c,f);fa=m;return a.finishFunctionExpression(e,k,g,h)}W("this")?(y(),c=e.finishThisExpression()):D(y())}else a===T.BooleanLiteral?(b=y(),b.value="true"===b.value.toLowerCase(),c=e.finishLiteral(b)):a===T.NullLiteral?(b=
y(),b.value=null,c=e.finishLiteral(b)):G("/")||G("/\x3d")?(c="undefined"!==typeof J.tokens?e.finishLiteral(v()):e.finishLiteral(x()),C()):D(y());return c}function ra(){var a=[];X("(");if(!G(")"))for(;A<na;){a.push(sa());if(G(")"))break;ha()}X(")");return a}function la(){X(".");var a,b=new H;a=y();a.type===T.Identifier||(a.type===T.Keyword||a.type===T.BooleanLiteral||a.type===T.NullLiteral)||D(a);return b.finishIdentifier(a.value)}function wa(){var a;X("[");a=xa();X("]");return a}function qa(){var a,
b,c=new H;I("new");var d;h(aa.allowIn,"callee of new expression always allow in keyword.");d=Y;for(a=W("new")?qa():ma();;)if(G("["))b=wa(),a=(new K(d)).finishMemberExpression("[",a,b);else if(G("."))b=la(),a=(new K(d)).finishMemberExpression(".",a,b);else break;b=G("(")?ra():[];return c.finishNewExpression(a,b)}function va(){var a,b,c=Y,d,e=aa.allowIn;b=Y;aa.allowIn=!0;for(a=W("new")?qa():ma();;)if(G("."))d=la(),a=(new K(b)).finishMemberExpression(".",a,d);else if(G("("))d=ra(),a=(new K(b)).finishCallExpression(a,
d);else if(G("["))d=wa(),a=(new K(b)).finishMemberExpression("[",a,d);else break;aa.allowIn=e;if(Y.type===T.Punctuator&&(G("++")||G("--"))&&!$())M(a)||Q(ea.InvalidLHSInAssignment),b=y(),a=(new K(c)).finishPostfixExpression(b.value,a);return a}function pa(){var a,b,c;Y.type!==T.Punctuator&&Y.type!==T.Keyword?b=va():G("++")||G("--")?(c=Y,a=y(),b=pa(),M(b)||Q(ea.InvalidLHSInAssignment),b=(new K(c)).finishUnaryExpression(a.value,b)):G("+")||G("-")||G("~")||G("!")?(c=Y,a=y(),b=pa(),b=(new K(c)).finishUnaryExpression(a.value,
b)):W("delete")||W("void")||W("typeof")?(c=Y,a=y(),b=pa(),b=(new K(c)).finishUnaryExpression(a.value,b),fa&&("delete"===b.operator&&b.argument.type===ba.Identifier)&&Q(ea.StrictDelete)):b=va();return b}function Sa(a,b){var c=0;if(a.type!==T.Punctuator&&a.type!==T.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=
7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Da(){var a,b,c,d,e,f;a=Y;b=pa();if(b===ya.ArrowParameterPlaceHolder)return b;c=Y;d=Sa(c,aa.allowIn);if(0===d)return b;c.prec=d;y();a=[a,Y];f=pa();for(e=[b,c,f];0<(d=Sa(Y,aa.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new K(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);
c=y();c.prec=d;e.push(c);a.push(Y);b=pa();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new K(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Aa(a){var b,c,d,e,f,g,k;e=[];f=[];g=0;k={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ba.Identifier)e.push(d),f.push(null),ka(k,d,d.name);else if(d.type===ba.AssignmentExpression)e.push(d.left),f.push(d.right),++g,ka(k,d.left,d.left.name);else return null;k.message===ea.StrictParamDupe&&(a=fa?k.stricted:k.firstRestricted,
D(a,k.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}function sa(){var a,b,c,d;a=aa.parenthesisCount;d=Y;var e,f,g;g=Y;b=Da();b!==ya.ArrowParameterPlaceHolder&&G("?")&&(y(),e=aa.allowIn,aa.allowIn=!0,f=sa(),aa.allowIn=e,X(":"),e=sa(),b=(new K(g)).finishConditionalExpression(b,f,e));if(b===ya.ArrowParameterPlaceHolder||G("\x3d\x3e"))if(aa.parenthesisCount===a||aa.parenthesisCount===a+1)if(b.type===ba.Identifier?
c=Aa([b]):b.type===ba.AssignmentExpression?c=Aa([b]):b.type===ba.SequenceExpression?c=Aa(b.expressions):b===ya.ArrowParameterPlaceHolder&&(c=Aa([])),c)return a=c,d=new K(d),X("\x3d\x3e"),c=fa,b=G("{")?Na():sa(),fa&&a.firstRestricted&&D(a.firstRestricted,a.message),fa&&a.stricted&&S(a.stricted,a.message),fa=c,d.finishArrowFunctionExpression(a.params,a.defaults,b,b.type!==ba.BlockStatement);Y.type!==T.Punctuator?a=!1:(a=Y.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(M(b)||Q(ea.InvalidLHSInAssignment),a=y(),c=sa(),b=(new K(d)).finishAssignmentExpression(a.value,b,c));return b}function xa(){var a,b=Y;a=sa();if(G(",")){for(a=[a];A<na&&G(",");)y(),a.push(sa());a=(new K(b)).finishSequenceExpression(a)}return a}function Ca(){var a,b=new H;a=y();a.type!==T.Identifier&&(fa&&a.type===T.Keyword&&d(a.value)?S(a,ea.StrictReservedWord):D(a));return b.finishIdentifier(a.value)}
function db(a){var b=null,c,d=new H;c=Ca();"const"===a?(X("\x3d"),b=sa()):G("\x3d")&&(y(),b=sa());return d.finishVariableDeclarator(c,b)}function La(a){var b=[];do{b.push(db(a));if(!G(","))break;y()}while(A<na);return b}function Ha(){var a=Y.type,b,c,d;a===T.EOF&&D(Y);if(a===T.Punctuator&&"{"===Y.value){d=new H;X("{");for(b=[];A<na&&!G("}");){c=Ga();if("undefined"===typeof c)break;b.push(c)}X("}");return d.finishBlockStatement(b)}d=new H;if(a===T.Punctuator)switch(Y.value){case ";":return d=new H,
X(";"),d.finishEmptyStatement();case "(":return b=xa(),O(),d.finishExpressionStatement(b)}else if(a===T.Keyword)switch(Y.value.toLowerCase()){case "break":return b=null,I("break"),59===P.charCodeAt(A)?(y(),!aa.inIteration&&!aa.inSwitch&&N(ea.IllegalBreak),d=d.finishBreakStatement(null)):$()?(!aa.inIteration&&!aa.inSwitch&&N(ea.IllegalBreak),d=d.finishBreakStatement(null)):(Y.type===T.Identifier&&(b=Ca(),c="$"+b.name,Object.prototype.hasOwnProperty.call(aa.labelSet,c)||N(ea.UnknownLabel,b.name)),O(),
null===b&&(!aa.inIteration&&!aa.inSwitch)&&N(ea.IllegalBreak),d=d.finishBreakStatement(b)),d;case "continue":return b=null,I("continue"),59===P.charCodeAt(A)?(y(),aa.inIteration||N(ea.IllegalContinue),d=d.finishContinueStatement(null)):$()?(aa.inIteration||N(ea.IllegalContinue),d=d.finishContinueStatement(null)):(Y.type===T.Identifier&&(b=Ca(),c="$"+b.name,Object.prototype.hasOwnProperty.call(aa.labelSet,c)||N(ea.UnknownLabel,b.name)),O(),null===b&&!aa.inIteration&&N(ea.IllegalContinue),d=d.finishContinueStatement(b)),
d;case "for":var e,g,k,h;k=aa.allowIn;e=a=g=null;I("for");X("(");if(G(";"))y();else{if(W("var")){aa.allowIn=!1;var m=new H;e=y();h=La();e=m.finishVariableDeclaration(h,e.value);aa.allowIn=k;1===e.declarations.length&&W("in")&&(y(),b=e,c=xa(),e=null)}else aa.allowIn=!1,e=xa(),aa.allowIn=k,W("in")&&(M(e)||Q(ea.InvalidLHSInForIn),y(),b=e,c=xa(),e=null);"undefined"===typeof b&&X(";")}"undefined"===typeof b&&(G(";")||(a=xa()),X(";"),G(")")||(g=xa()));X(")");h=aa.inIteration;aa.inIteration=!0;k=Ha();aa.inIteration=
h;return"undefined"===typeof b?d.finishForStatement(e,a,g,k):d.finishForInStatement(b,c,k);case "function":return Ka(d);case "if":return I("if"),X("("),b=xa(),X(")"),c=Ha(),W("else")?(y(),a=Ha()):a=null,d.finishIfStatement(b,c,a);case "return":return b=null,I("return"),aa.inFunctionBody||Q(ea.IllegalReturn),32===P.charCodeAt(A)&&f(P.charCodeAt(A+1))?(b=xa(),O(),d=d.finishReturnStatement(b)):$()?d=d.finishReturnStatement(null):(G(";")||!G("}")&&Y.type!==T.EOF&&(b=xa()),O(),d=d.finishReturnStatement(b)),
d;case "var":return I("var"),b=La(),O(),d.finishVariableDeclaration(b,"var")}b=xa();if(b.type===ba.Identifier&&G(":"))return y(),a="$"+b.name,Object.prototype.hasOwnProperty.call(aa.labelSet,a)&&N(ea.Redeclaration,"Label",b.name),aa.labelSet[a]=!0,c=Ha(),delete aa.labelSet[a],d.finishLabeledStatement(b,c);O();return d.finishExpressionStatement(b)}function Na(){var a,b=[],c,d,e,f,g,k=new H;for(X("{");A<na&&Y.type===T.StringLiteral;){c=Y;a=Ga();b.push(a);if(a.expression.type!==ba.Literal)break;a=P.slice(c.start+
1,c.end-1);"use strict"===a?(fa=!0,d&&S(d,ea.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=aa.labelSet;d=aa.inIteration;e=aa.inSwitch;f=aa.inFunctionBody;g=aa.parenthesizedCount;aa.labelSet={};aa.inIteration=!1;aa.inSwitch=!1;aa.inFunctionBody=!0;for(aa.parenthesizedCount=0;A<na&&!G("}");){a=Ga();if("undefined"===typeof a)break;b.push(a)}X("}");aa.labelSet=c;aa.inIteration=d;aa.inSwitch=e;aa.inFunctionBody=f;aa.parenthesizedCount=g;return k.finishBlockStatement(b)}function ka(a,b,c){var e="$"+c;fa?Object.prototype.hasOwnProperty.call(a.paramSet,
e)&&(a.stricted=b,a.message=ea.StrictParamDupe):a.firstRestricted||(d(c)?(a.firstRestricted=b,a.message=ea.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,e)&&(a.firstRestricted=b,a.message=ea.StrictParamDupe));a.paramSet[e]=!0}function Ma(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};X("(");if(!G(")"))for(a.paramSet={};A<na;){var b=a,c=void 0,d=void 0,e=void 0,c=Y,d=Ca();ka(b,c,c.value);G("\x3d")&&(y(),e=sa(),++b.defaultCount);b.params.push(d);b.defaults.push(e);
if(G(")"))break;X(",")}X(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ka(){var a,b=[],c=[],e,f,g,k,h,m=new H;I("function");b=Y;a=Ca();!fa&&d(b.value)&&(g=b,k=ea.StrictReservedWord);e=Ma(g);b=e.params;c=e.defaults;f=e.stricted;g=e.firstRestricted;e.message&&(k=e.message);h=fa;e=Na();fa&&g&&D(g,k);fa&&f&&S(f,k);fa=h;return m.finishFunctionDeclaration(a,b,c,e)}function Ga(){if(Y.type===
T.Keyword)switch(Y.value){default:return"function"==Y.value.toLowerCase()?Ka():Ha()}if(Y.type!==T.EOF)return Ha()}function ab(){var a,b,c,d=[];for(a=0;a<J.tokens.length;++a)b=J.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.range&&(c.range=b.range),J.loc&&(c.loc=b.loc),d.push(c);J.tokens=d}var T,Ba,Oa,ba,ya,Ea,ea,Ya,P,fa,A,da,ga,na,Y,aa,J;T={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,
RegularExpression:9};Ba={};Ba[T.BooleanLiteral]="Boolean";Ba[T.EOF]="\x3cend\x3e";Ba[T.Identifier]="Identifier";Ba[T.Keyword]="Keyword";Ba[T.NullLiteral]="Null";Ba[T.NumericLiteral]="Numeric";Ba[T.Punctuator]="Punctuator";Ba[T.StringLiteral]="String";Ba[T.RegularExpression]="RegularExpression";Oa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ba={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};ya={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ea={Data:1,Get:2,Set:4};ea={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ya={NonAsciiIdentifierStart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
K.prototype=H.prototype={processComment:function(){var a,b,c,d=J.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ba.Program&&0<this.body.length)){if(0<J.trailingComments.length){c=[];for(e=J.trailingComments.length-1;0<=e;--e)f=J.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),J.trailingComments.splice(e,1));J.trailingComments=[]}else g&&(g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1])&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=
this.range[0];)a=g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<J.leadingComments.length){b=[];for(e=J.leadingComments.length-1;0<=e;--e)f=J.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),J.leadingComments.splice(e,1))}b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){J.range&&(this.range[1]=
A);J.loc&&(this.loc.end=new E,J.source&&(this.loc.source=J.source));J.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ba.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ba.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ba.LogicalExpression:ba.BinaryExpression;this.operator=a;this.left=b;
this.right=c;this.finish();return this},finishBlockStatement:function(a){this.type=ba.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ba.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ba.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ba.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();
return this},finishContinueStatement:function(a){this.type=ba.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ba.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ba.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ba.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=
ba.ForInStatement;this.left=a;this.right=b;this.body=c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ba.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ba.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(a){this.type=ba.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ba.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ba.Literal;this.value=a.value;this.raw=P.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ba.MemberExpression;this.computed="["===a;this.object=b;this.property=c;
this.finish();return this},finishObjectExpression:function(a){this.type=ba.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ba.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ba.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ba.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();
return this},finishReturnStatement:function(a){this.type=ba.ReturnStatement;this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ba.UpdateExpression:ba.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ba.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ba.VariableDeclarator;this.id=
a;this.init=b;this.finish();return this}};a.version="2.0.0-dev";a.tokenize=function(a,b){var c,d;c=String;"string"!==typeof a&&!(a instanceof String)&&(a=c(a));P=a;A=0;da=0<P.length?1:0;ga=0;na=P.length;Y=null;aa={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};b=b||{};b.tokens=!0;J.tokens=[];J.tokenize=!0;J.openParenToken=-1;J.openCurlyToken=-1;J.range="boolean"===typeof b.range&&b.range;J.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&
b.comment&&(J.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(J.errors=[]);try{C();if(Y.type===T.EOF)return J.tokens;for(y();Y.type!==T.EOF;)try{y()}catch(e){if(J.errors){J.errors.push(e);break}else throw e;}ab();d=J.tokens;"undefined"!==typeof J.comments&&(d.comments=J.comments);"undefined"!==typeof J.errors&&(d.errors=J.errors)}catch(f){throw f;}finally{J={}}return d};a.parse=function(a,b){var c,d;d=String;"string"!==typeof a&&!(a instanceof String)&&(a=d(a));P=a;A=0;da=0<P.length?1:0;
ga=0;na=P.length;Y=null;aa={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};"undefined"!==typeof b&&(J.range="boolean"===typeof b.range&&b.range,J.loc="boolean"===typeof b.loc&&b.loc,J.attachComment="boolean"===typeof b.attachComment&&b.attachComment,J.loc&&(null!==b.source&&void 0!==b.source)&&(J.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(J.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(J.comments=[]),"boolean"===
typeof b.tolerant&&b.tolerant&&(J.errors=[]),J.attachComment&&(J.range=!0,J.comments=[],J.bottomRightStack=[],J.trailingComments=[],J.leadingComments=[]));try{var e;q();C();e=new H;fa=!1;var f;d=[];for(var g,k,h;A<na;){g=Y;if(g.type!==T.StringLiteral)break;f=Ga();d.push(f);if(f.expression.type!==ba.Literal)break;k=P.slice(g.start+1,g.end-1);"use strict"===k?(fa=!0,h&&S(h,ea.StrictOctalLiteral)):!h&&g.octal&&(h=g)}for(;A<na;){f=Ga();if("undefined"===typeof f)break;d.push(f)}c=e.finishProgram(d);"undefined"!==
typeof J.comments&&(c.comments=J.comments);"undefined"!==typeof J.tokens&&(ab(),c.tokens=J.tokens);"undefined"!==typeof J.errors&&(c.errors=J.errors)}catch(m){throw m;}finally{J={}}return c};a.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ba)ba.hasOwnProperty(a)&&(b[a]=ba[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/renderers/UniqueValueRenderer":function(){define("../core/declare ../core/lang dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer".split(" "),
function(a,h,m,n,g,k){var f=a(k,{declaredClass:"esri.renderer.UniqueValueRenderer",type:"uniqueValue",classMetadata:{properties:{requiredFields:{dependsOn:["field","field2","field3"]},expressionTree:{dependsOn:["expression"]}},reader:{exclude:["field1"],add:["field"]}},constructor:function(){this._symbols={}},getDefaults:function(){return n.mixin(this.inherited(arguments),{field:null,field2:null,field3:null,expression:null,defaultLabel:null,defaultSymbol:null,fieldDelimiter:null,uniqueValueInfos:[]})},
_defaultSymbolReader:g.fromJSON,_fieldReader:function(a,d){return d.field1},_uniqueValueInfosSetter:function(a){this._symbols={};m.forEach(a,this._processUVInfo,this);return a},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(d){d&&(a[d]=!0)})},expressionTree:null,_expressionTreeGetter:function(){return this.expression?this._parseExpr(this.expression,{vars:{$feature:"any"}}):null},addUniqueValueInfo:function(a,d){var c=n.isObject(a)?
a:{value:a,symbol:d};this.uniqueValueInfos.push(c);this._processUVInfo(c)},removeUniqueValueInfo:function(a){var d=-1;m.some(this.uniqueValueInfos,function(c,b){if(c.value==a)return d=b,!0});-1!==d&&(delete this._symbols[a],this.uniqueValueInfos.splice(d,1))},getUniqueValueInfo:function(a){var d=this.field,c=a.attributes,b,f;this.expression?d=this._executeExpr(this.expressionTree,this._createExprContext(a)):this.field2?(a=this.field2,b=this.field3,f=[],d&&f.push(c[d]),a&&f.push(c[a]),b&&f.push(c[b]),
d=f.join(this.fieldDelimiter||"")):d=n.isFunction(d)?d(a):c[d];return this._symbols[d]},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},toJSON:function(){var a=h.fixJson,d=n.mixin(this.inherited(arguments),{type:this.type,field1:this.field,field2:this.field2,field3:this.field3,expression:this.expression,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJSON(),defaultLabel:this.defaultLabel,uniqueValueInfos:m.map(this.uniqueValueInfos||
[],function(c){c=n.mixin({},c);c.symbol=c.symbol&&c.symbol.toJSON();c.value+="";return a(c)})});return a(d)},clone:function(){return new f({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),expression:this.expression,fieldDelimiter:this.fieldDelimiter,uniqueValueInfos:h.clone(this.uniqueValueInfos),visualVariables:h.clone(this.visualVariables)})},_processUVInfo:function(a){var d=a.value,c=a.symbol;c&&
!c.declaredClass&&(a.symbol=g.fromJSON(c));this._symbols[d]=a}});return f})},"esri/renderers/support/jsonUtils":function(){define(["../SimpleRenderer","../UniqueValueRenderer","../ClassBreaksRenderer"],function(a,h,m){var n={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(k){console.warn(k.stack)}return n.fromJSON(a)},fromJSON:function(g){var k;switch(g.type||""){case "simple":k=a.fromJSON(g);break;case "uniqueValue":k=h.fromJSON(g);break;case "classBreaks":k=
m.fromJSON(g)}return k}};return n})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/jsonDictionary dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer".split(" "),function(a,h,m,n,g,k,f){var e=m({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),d=m({esriClassifyNaturalBreaks:"natural-breaks",esriClassifyEqualInterval:"equal-interval",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",
esriClassifyGeometricalInterval:"geometrical-interval"}),c=a(f,{declaredClass:"esri.renderer.ClassBreaksRenderer",type:"classBreaks",classMetadata:{properties:{requiredFields:{dependsOn:["field","normalizationField"]},expressionTree:{dependsOn:["expression"]},normalizationType:{dependsOn:["normalizationField","normalizationTotal"]}},reader:{exclude:["minValue"]}},constructor:function(){this._symbols={}},getDefaults:function(){return g.mixin(this.inherited(arguments),{field:null,expression:null,backgroundFillSymbol:null,
classificationMethod:null,defaultSymbol:null,classBreakInfos:[],isMaxInclusive:!0,normalizationField:null,normalizationTotal:null,normalizationType:null})},_backgroundFillSymbolReader:k.fromJSON,_classificationMethodReader:function(a){return d.fromJSON(a)},_normalizationTypeReader:function(a){return e.fromJSON(a)},_normalizationTypeGetter:function(a){var c=!!this.normalizationField,d=null!=this.normalizationTotal;if(c||d)a=c&&"field"||d&&"percent-of-total",c&&d&&console.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},_defaultSymbolReader:k.fromJSON,_classBreakInfosReader:function(a,c){var d=c.minValue;a&&(a[0]&&null!=a[0].classMaxValue)&&n.forEach(a,function(a){var b=a.classMaxValue;a.minValue=d;d=a.maxValue=b},this);return a},_classBreakInfosSetter:function(a){this._symbols={};a&&a.forEach(this._processCBInfo,this);return a},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(c){c&&(a[c]=
!0)})},expressionTree:null,_expressionTreeGetter:function(){return this.expression?this._parseExpr(this.expression,{vars:{$feature:"any"}}):null},addClassBreakInfo:function(a,c,d){a=g.isObject(a)?a:{minValue:a,maxValue:c,symbol:d};this.classBreakInfos.push(a);this._processCBInfo(a)},removeClassBreakInfo:function(a,c){var d,e,f=this.classBreakInfos.length,g=this._symbols;for(e=0;e<f;e++)if(d=[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],d[0]==a&&d[1]==c){delete g[a+"-"+c];this.classBreakInfos.splice(e,
1);break}},getBreakIndex:function(a){var c=this.field,d=a.attributes,e=this.classBreakInfos.length,f=this.isMaxInclusive;if(this.expression)a=this._executeExpr(this.expressionTree,this._createExprContext(a));else if(g.isFunction(c))a=c(a);else{a=parseFloat(d[c]);var c=this.normalizationType,k;c&&(k=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===c?a=Math.log(a)*Math.LOG10E:"percent-of-total"===c&&!isNaN(k)?a=100*(a/k):"field"===c&&!isNaN(d)&&(a/=d))}for(d=0;d<
e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]<=a&&(f?a<=c[1]:a<c[1]))return d;return-1},getClassBreakInfo:function(a){a=this.getBreakIndex(a);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a){a=this.getBreakIndex(a);return(a=-1<a&&[this.classBreakInfos[a].minValue,this.classBreakInfos[a].maxValue])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},toJSON:function(){var a=this.classBreakInfos||[],c=h.fixJson,f=a[0]&&a[0].minValue,k=this.backgroundFillSymbol,
a=g.mixin(this.inherited(arguments),{type:this.type,field:this.field,expression:this.expression,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJSON(),backgroundFillSymbol:k&&k.toJSON(),defaultLabel:this.defaultLabel,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,minValue:-Infinity===f?-Number.MAX_VALUE:f,classBreakInfos:n.map(a,function(a){a=g.mixin({},a);a.symbol=a.symbol&&a.symbol.toJSON();a.classMaxValue=Infinity===a.maxValue?Number.MAX_VALUE:a.maxValue;
delete a.minValue;delete a.maxValue;return c(a)})});a.classificationMethod=d.toJSON(this.classificationMethod);a.normalizationType=e.toJSON(this.normalizationType);a.hasOwnProperty("normalizationType")&&!a.normalizationType&&delete a.normalizationType;a.hasOwnProperty("classificationMethod")&&!a.classificationMethod&&delete a.classificationMethod;return c(a)},clone:function(){return new c({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),classificationMethod:this.classificationMethod,
defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),expression:this.expression,classBreakInfos:h.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:h.clone(this.visualVariables)})},_processCBInfo:function(a){var c=a.minValue,d=a.maxValue,e=a.symbol;e&&!e.declaredClass&&(a.symbol=k.fromJSON(e));this._symbols[c+"-"+d]=a.symbol}});return c})},
"esri/tasks/support/Query":function(){define("../../core/Accessoire ../../core/declare ../../core/jsonDictionary ../../core/lang ../../geometry/support/jsonUtils ./SpatialRelationship dojo/_base/array dojo/_base/lang".split(" "),function(a,h,m,n,g,k,f,e){var d=m({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),c=m({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=m({upperLeft:"upper-left",lowerLeft:"lower-left"});a=h(a,{declaredClass:"esri.tasks.support.Query",spatialRelationship:"intersects",text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,
objectIds:null,returnGeometry:!1,returnDistinctValues:!1,maxAllowableOffset:null,multipatchOption:null,num:null,start:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:"meters",resultOffset:null,resultRecordCount:null,quantizationParameters:null,toJSON:function(a){var e={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:d.toJSON(this.spatialRelationship),maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,returnM:this.returnM},k=a&&a.geometry||this.geometry,h=this.objectIds,m=this.outFields,s=this.outSpatialReference,x=this.groupByFieldsForStatistics,v=this.orderByFields,l=this.outStatistics;a=this.distance;k&&(e.geometry=k,e.geometryType=g.getJsonType(k),e.inSR=k.spatialReference.wkid||JSON.stringify(k.spatialReference.toJSON()));h&&(e.objectIds=h.join(","));m&&(e.outFields=m.join(","));this.returnDistinctValues&&(e.returnDistinctValues=
!0);x&&(e.groupByFieldsForStatistics=x.join(","));v&&(e.orderByFields=v.join(","));if(l){var w=[];f.forEach(l,function(a){w.push(a.toJSON())});e.outStatistics=JSON.stringify(w)}s?e.outSR=s.wkid||JSON.stringify(s.toJSON()):k&&(e.outSR=k.spatialReference.wkid||JSON.stringify(k.spatialReference.toJSON()));k=this.timeExtent;e.time=k?k.toJSON().join(","):null;if((k=this.relationParam)&&e.spatialRel===d.toJSON("relation"))e.relationParam=k;a&&(e.distance=this.distance,e.units=c.toJSON(this.units));this.hasOwnProperty("start")&&
(e.resultOffset=this.start,e.resultRecordCount=10,""===e.where&&(e.where="1\x3d1"));this.hasOwnProperty("num")&&(e.resultRecordCount=this.num);e.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null;e.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a=n.clone(this.quantizationParameters),a.originPosition&&(a.originPosition=b.toJSON(a.originPosition)),e.quantizationParameters=JSON.stringify(a));e._ts=this._ts;return e}});e.mixin(a,k);return a})},"esri/tasks/support/SpatialRelationship":function(){define([],
function(){return{SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"}})},"esri/layers/support/Field":function(){define(["../../core/jsonDictionary",
"../../core/JSONSupporter","./CodedValueDomain","./RangeDomain"],function(a,h,m,n){var g=a({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"}),k=h.createSubclass({declaredClass:"esri.layers.support.Field",
alias:null,domain:null,_domainReader:function(a,e){var d=a&&a.type;return"range"===d?new n(a):"codedValue"===d?new m(a):null},editable:!1,length:-1,name:null,nullable:!0,type:null,_typeReader:g.fromJSON,clone:function(){return k.fromJSON(this.toJSON())},toJSON:function(){return{alias:this.alias,domain:this.domain&&this.domain.toJSON(),editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:g.toJSON(this.type)}}});return k})},"esri/layers/support/CodedValueDomain":function(){define(["../../core/lang",
"./Domain","dojo/_base/array","dojo/_base/lang"],function(a,h,m,n){return h.createSubclass({declaredClass:"esri.layers.support.CodedValueDomain",properties:{codedValues:{value:null},type:{value:"coded-value"}},getName:function(a){var k;m.some(this.codedValues,function(f){f.code==a&&(k=f.name);return!!k});return k},toJSON:function(){var g=this.inherited(arguments);g.codedValues=n.clone(this.codedValues);return a.fixJson(g)}})})},"esri/layers/support/Domain":function(){define(["../../core/jsonDictionary",
"../../core/JSONSupport","../../core/lang"],function(a,h,m){var n=a({codedValue:"coded-value"});return h.createSubclass({declaredClass:"esri.layers.support.Domain",properties:{name:{value:null},type:{json:{read:n.fromJSON},value:null}},toJSON:function(){return m.fixJson({name:this.name,type:n.toJSON(this.type)})}})})},"esri/core/JSONSupport":function(){define(["./declare","./Accessor","./accessorSupport/read"],function(a,h,m){var n=h.createSubclass({declaredClass:"esri.core.JSONSupport",read:m.read}),
g=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var f=new this;f.read(a);return f};a.after(function(k){a.hasMixin(k,n)&&(k.fromJSON=g.bind(k))});return n})},"esri/layers/support/RangeDomain":function(){define(["../../core/lang","./Domain"],function(a,h){return h.createSubclass({declaredClass:"esri.layers.support.RangeDomain",properties:{maxValue:{json:{readFrom:["range"],read:function(a,h){return h.range&&h.range[1]}}},minValue:{json:{readFrom:["range"],
read:function(a,h){return h.range&&h.range[0]}}},type:{value:"range"}},toJSON:function(){var h=this.inherited(arguments);h.range=[this.minValue,this.maxValue];return a.fixJson(h)}})})},"esri/layers/support/FeatureType":function(){define("../../core/declare dojo/_base/lang dojo/_base/array ../../core/lang ../../symbols/support/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),function(a,h,m,n,g,k,f,e,d){return a(null,{declaredClass:"esri.layers.support.FeatureType",
constructor:function(a){if(a&&h.isObject(a)){this.id=a.id;this.name=a.name;var b=a.symbol;b&&(this.symbol=g.fromJSON(b));var b=a.domains,m,n=this.domains={};for(m in b)if(b.hasOwnProperty(m)){var u=b[m];switch(u.type){case "range":n[m]=new k(u);break;case "codedValue":n[m]=new f(u);break;case "inherited":n[m]=new e(u)}}if(m=a.templates){b=this.templates=[];for(a=0;a<m.length;a++)b.push(new d(m[a]))}}},toJSON:function(){var a={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJSON()},b,d=
this.domains,e=this.templates,f=n.fixJson;if(d){var g=a.domains={};for(b in d)d.hasOwnProperty(b)&&(g[b]=d[b]&&d[b].toJSON());f(g)}e&&(a.templates=m.map(e,function(a){return a.toJSON()}));return f(a)}})})},"esri/layers/support/InheritedDomain":function(){define(["../../core/declare","./Domain"],function(a,h){return a([h],{declaredClass:"esri.layers.support.InheritedDomain"})})},"esri/layers/support/FeatureTemplate":function(){define(["../../core/declare","dojo/_base/lang","../../core/lang","../../Graphic"],
function(a,h,m,n){a=a(null,{declaredClass:"esri.layers.support.FeatureTemplate",constructor:function(a){a&&h.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,a=a.prototype,this.prototype=new n(a.geometry,null,a.attributes))},toJSON:function(){return m.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJSON()})}});h.mixin(a,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",
TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",
TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return a})},"esri/layers/support/LabelClass":function(){define("../../core/Accessoire ../../core/JSONSupporter ../../core/lang ../../core/screenUtils dojo/_base/lang dojo/number ../../PopupTemplate ../../widgets/Popup/PopupRendererViewModel ../../symbols/support/jsonUtils".split(" "),function(a,h,m,n,g,k,f,e,d){var c=a.createSubclass([h],{declaredClass:"esri.layers.support.LabelClass",classMetadata:{properties:{requiredFields:{dependsOn:["labelExpression",
"labelExpressionInfo","where"]}}},labelExpression:null,labelExpressionInfo:null,labelPlacement:null,_labelPlacementReader:function(a,c){var d=a;this._labelPlacementLookup.hasOwnProperty(d)||(d=m.valueOf(this._labelPlacementLookup,d));return d},maxScale:0,minScale:0,_requiredFieldsGetter:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)},sizeInfo:null,_sizeInfoReader:function(a,c){return a?{minSize:n.pt2px(a.minSize)||0,maxSize:n.pt2px(a.maxSize)||0}:a},symbol:null,
_symbolReader:d.fromJSON,useCodedValues:null,where:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft",
"center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart",
"below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},getLabelExpression:function(){return this.labelExpressionInfo?this.labelExpressionInfo.value:this._validateLabelExpression(this.labelExpression)?
this._convertLabelExpression(this.labelExpression):""},toJSON:function(){if(this.sizeInfo)var a={minSize:n.px2pt(this.sizeInfo.minSize||0),maxSize:n.px2pt(this.sizeInfo.maxSize||0)};a={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&g.clone(this.labelExpressionInfo),useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:a,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:
this.labelPlacement,symbol:this.symbol&&this.symbol.toJSON()};return m.fixJson(a)},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_validateLabelExpression:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_collectWhereRequiredFields:function(a,c){if(null!=a){var d=a.split(" ");3===d.length&&(c[d[0]]=!0);7===
d.length&&(c[d[0]]=!0,c[d[4]]=!0)}},_collectLabelExpressionRequiredFields:function(a,c){var d=a.match(/{[^}]*}/g);d&&d.forEach(function(a){c[a.slice(1,-1)]=!0})}});c.evaluateWhere=function(a,c){var d=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var e=a.split(" ");if(3===e.length)return d(c[e[0]],
e[1],e[2]);if(7===e.length){var f=d(c[e[0]],e[1],e[2]),g=e[3],k=d(c[e[4]],e[5],e[6]);switch(g){case "AND":return f&&k;case "OR":return f||k}}return!1}catch(h){console.log("Error.: can't parse \x3d "+a)}};c.buildLabelText=function(a,d,e,f){return a.replace(/{[^}]*}/g,function(a){return c.formatField(a.slice(1,-1),a,d,e,f)})};c.formatField=function(a,c,d,h,n){var r;for(r=0;r<h.length;r++)if(h[r].name==a){c=d[h[r].name];var s=h[r].domain;if(s&&g.isObject(s)){if("codedValue"==s.type)for(a=0;a<s.codedValues.length;a++)s.codedValues[a].code==
c&&(c=s.codedValues[a].name);else"range"==s.type&&(s.minValue<=c&&c<=s.maxValue)&&(c=s.name);break}s=h[r].type;if("date"==s)s=n&&n.dateFormat||"shortDate",s=f.prototype._dateFormatJsonDict.fromJSON(s),(s="DateFormat"+e.prototype._dateFormats[s])&&(c=m.substitute({myKey:c},"{myKey:"+s+"}"));else if("integer"==s||"small-integer"==s||"long"==s||"double"==s)n&&(n.numberFormat&&n.numberFormat.digitSeparator&&n.numberFormat.places)&&(c=k.format(c,{places:n.numberFormat.places}))}return null==c?"":c};return c})},
"esri/widgets/Popup/PopupRendererViewModel":function(){define("../../core/Accessor ../../core/HandleRegistry ../../core/lang ../../core/urlUtils ../../core/promiseList ../../core/promiseUtils ../../core/watchUtils ../../request ../../tasks/support/StatisticDefinition ../../tasks/support/Query ../../tasks/QueryTask dojo/_base/lang dojo/Deferred dojo/promise/all dojo/i18n!dojo/cldr/nls/number".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t){var r=/\'/g,s=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/ig,
x=/(\{([^\{\r\n]+)\})/g,v={attachments:"attachments",fields:"fields",media:"media",text:"text"},l={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};return a.createSubclass({declaredClass:"esri.widgets.Popup.PopupRendererViewModel",properties:{content:{readOnly:!0},contentEnabled:!0,
contentTypes:{readOnly:!0},formattedAttributes:{readOnly:!0},graphic:{},title:{readOnly:!0},waitingForContent:{readOnly:!0}},constructor:function(){this._handles=new h},initialize:function(){this._handles.add([f.init(this,"graphic",function(a){this._updateGraphic(a,this.contentEnabled)}.bind(this)),f.init(this,"contentEnabled",function(a){this._updateGraphic(this.graphic,a)}.bind(this))])},destroy:function(){this._handles.destroy();this._handles=null;this._clearRelatedInfo();this._cancelPromises();
this.graphic=null;this._set("title",null);this._set("content",null);this._set("waitingForContent",null)},content:null,contentEnabled:!0,contentTypes:v,formattedAttributes:null,graphic:null,title:"",waitingForContent:!1,_handles:null,_contentPromise:null,_contentPromiseLookup:null,_relatedRecordsPromise:null,_relatedRecordsQueryPromises:[],_relatedRecordsLayerPromises:[],_relatedLayersInfo:null,_relatedInfo:null,_dateFormats:l,_addValuesToHref:function(a,b,c,d){b=this._trimString(b);return m.substitute(b&&
0===b.indexOf("${")?c:d,a)},_cancelPromises:function(){this._contentPromiseLookup&&(Object.keys(this._contentPromiseLookup).forEach(function(a){this._contentPromiseLookup[a].cancel()},this),this._contentPromiseLookup=null);this._contentPromise&&(this._contentPromise.cancel(),this._contentPromise=null);this._relatedRecordsQueryPromises.forEach(function(a){a.cancel()});this._relatedRecordsQueryPromises.length=0;this._relatedRecordsLayerPromises.length&&(this._relatedRecordsLayerPromises.forEach(function(a){a.cancel()}),
this._relatedRecordsLayerPromises.length=0);this._relatedRecordsPromise&&(this._relatedRecordsPromise.cancel(),this._relatedRecordsPromise=null)},_clearRelatedInfo:function(){this._relatedInfo=this._relatedLayersInfo=null},_compileContent:function(a,b){var c=a.content;if("string"===typeof c)return this._compileText(a,{type:v.text,text:c}).text;if(Array.isArray(c))return c.map(function(c,d){switch(c.type){case v.attachments:return this._proxyAttachments(c,b&&b[d]);case v.fields:return c;case v.media:return this._compileMedia(a,
c);case v.text:return this._compileText(a,c)}},this);try{throw Error(this.declaredClass+"::invalid content type.");}catch(d){console.warn(d.stack)}},_compileMedia:function(a,b){var c=p.clone(b),d=c.mediaInfos,e=a.attributes,f=a.layer,g=this.formattedAttributes,k=a.substOptions,h,l;d&&(h=[],d.forEach(function(b){l=0;var c=b.value;switch(b.type){case "image":var d=c.sourceURL,d=d&&this._trimString(m.substitute(e,this._fixTokens(d,f)));l=!!d;break;case "pie-chart":case "line-chart":case "column-chart":case "bar-chart":var n,
d=c.normalizeField;c.fields=c.fields.map(function(a){return(n=this._getLayerFieldInfo(f,a))?n.name:a},this);d&&(n=this._getLayerFieldInfo(f,d),c.normalizeField=n?n.name:d);l=c.fields.some(function(a){return m.isDefined(e[a])||-1!==a.indexOf("relationships/")&&this._relatedInfo},this);break;default:return}if(l){b=p.clone(b);var c=b.value,d=b.title?this._processFieldsInLinks(this._fixTokens(b.title,f),e):"",q=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,f),e):"";b.title=d?this._trimString(m.substitute(g,
d,k)):"";b.caption=q?this._trimString(m.substitute(g,q,k)):"";if("image"===b.type)c.sourceURL=m.substitute(e,this._fixTokens(c.sourceURL,f)),c.linkURL&&(c.linkURL=this._trimString(m.substitute(e,this._fixTokens(c.linkURL,f))));else{var s,r=(d=a.template)&&d.fieldInfos;c.fields.forEach(function(a,b){if(-1!==a.indexOf("relationships/")){var d=this._getRelatedChartInfos(f,r,a,c,e,k);Array.isArray(d)?c.fields=d:c.fields[b]=d}else{d=e[a];d=void 0===d?null:d;s=e[c.normalizeField]||0;d&&s&&(d/=s);var g=
r&&this._getFieldInfo(r,a);c.fields[b]={y:d,tooltip:(g&&g.label||a)+":"+this._formatValue(r,d,a,k,!!s)}}},this)}h.push(b)}},this));c.mediaInfos=h;return c},_compileText:function(a,b){var c=p.clone(b);if(c&&c.text){var d=a.attributes,e=this.formattedAttributes,f=a.substOptions,d=this._processFieldsInLinks(this._fixTokens(c.text,a.layer),d);c.text=this._trimString(m.substitute(e,d,f))}return c},_compileTitle:function(a){var b="",c=a.title,d=a.layer,e=a.attributes;a=a.substOptions;var f=this.formattedAttributes;
c&&-1===c.indexOf("{relationships/")&&(b=this._processFieldsInLinks(this._fixTokens(c,d),e),b=this._trimString(m.substitute(f,b,a)));return b},_createGraphicInfo:function(a,b){var c=a.getEffectivePopupTemplate(),d=c&&c.title,e=c&&c.content,f=a.layer,g=f&&f._getDateOpts&&f._getDateOpts().properties,k=p.clone(a.attributes)||{};return{graphic:a,template:c,title:d,content:e,contentEnabled:b,layer:f,attributes:k,properties:g,substOptions:{dateFormat:{properties:g,formatter:"DateFormat"+l["short-date-short-time"]}}}},
_fixTokens:function(a,b){return a.replace(x,function(a,c,d){return(a=this._getLayerFieldInfo(b,d))?"{"+a.name+"}":c}.bind(this))},_encodeAttributes:function(a){var b=p.clone(a)||{};Object.keys(b).forEach(function(a){var c=b[a];"string"===typeof c&&(c=encodeURIComponent(c).replace(r,"\x26apos;"),b[a]=c)});return b},_formatAttributes:function(a){var b=a.graphic,c=a.template,d=a.attributes,e=a.layer,f=a.substOptions,g=a.properties,k=c&&c.fieldInfos,h=p.clone(d);this._relatedInfo&&Object.keys(this._relatedInfo).forEach(function(a){var b=
this._relatedInfo[a];a=this._relatedLayersInfo[a];b&&(b.relatedFeatures.forEach(this._relatedFeaturesAttributes.bind(this,a,d,h)),b.relatedStatsFeatures.forEach(this._relatedStatsAttributes.bind(this,a,d,h)))},this);k&&k.forEach(function(a){var b=a.fieldName,c=this._getLayerFieldInfo(e,b);c&&(b=a.fieldName=c.name);h[b]=this._formatValue(k,h[b],b,f);g&&(a.format&&a.format.dateFormat)&&(a=g.indexOf(b),-1<a&&g.splice(a,1))},this);if(e){var l=e.typeIdField;Object.keys(d).forEach(function(a){if(-1===a.indexOf("relationships/")){var c=
d[a];if(m.isDefined(c)){var f=this._getDomainName(e,b,a,c);m.isDefined(f)?h[a]=f:a===l&&(c=this._getTypeName(e,b,c),m.isDefined(c)&&(h[a]=c))}}},this)}return h},_formatValue:function(a,b,c,d,e){var f=a&&this._getFieldInfo(a,c);a=f&&f.format;c="number"===typeof b&&d.dateFormat.properties&&-1===d.dateFormat.properties.indexOf(c)&&(!a||!a.dateFormat);if(!m.isDefined(b)||!f||!m.isDefined(a))return c?this._forceLTR(b):b;var g="",k=[],f=a.hasOwnProperty("places")||a.hasOwnProperty("digitSeparator"),h=a.hasOwnProperty("digitSeparator")?
a.digitSeparator:!0;if(f)g="NumberFormat",k.push("places: "+(m.isDefined(a.places)&&(!e||0<a.places)?Number(a.places):"Infinity")),k.length&&(g+="("+k.join(",")+")");else if(a.dateFormat)g="DateFormat"+l[a.dateFormat]||l["short-date-short-time"];else return c?this._forceLTR(b):b;b=m.substitute({myKey:b},"{myKey:"+g+"}",d)||"";f&&!h&&t.group&&(b=b.replace(RegExp("\\"+t.group,"g"),""));return c?this._forceLTR(b):b},_forceLTR:function(a){return"\x26lrm;"+a},_getDomainName:function(a,b,c,d){return(a=
a.getDomain&&a.getDomain(c,{feature:b}))&&a.codedValues?a.getName(d):null},_getFieldInfo:function(a,b){for(var c=b.toLowerCase(),d,e=0;e<a.length;e++){var f=a[e];if(f.fieldName&&f.fieldName.toLowerCase()===c){d=f;break}}return d},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_getTypeName:function(a,b){var c=a.getType&&a.getType(b);return c&&c.name},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);a&&(a=a.replace(s,function(a,d){return this._addValuesToHref(a,
d,b,c)}.bind(this)));return a},_proxyAttachments:function(a,b){var c=p.clone(a);if(b&&!(b instanceof Error)&&b.attachmentInfos&&b.attachmentInfos.length){var d=b.attachmentInfos.map(function(a){a.url=n.addProxy(a.url);return a},this);c.attachmentInfos=d}return c},_queryAttachments:function(a){var b=a.layer,c=a.attributes;a=b&&b.objectIdField;c=c&&a&&c[a];if(a&&b.hasAttachments&&c)return this._queryAttachmentInfos(b,c)},_queryAttachmentInfos:function(a,b){var c=a.url+"/"+a.layerId+"/"+b+"/attachments",
d=a.token||"";return e(c,{query:{f:"json",token:d},callbackParamName:"callback"}).then(function(a){a=a.data;a.attachmentInfos.forEach(function(a){a.url=c+"/"+a.id;d&&(a.url+="?token\x3d"+d);a.objectId=b});return a})},_queryContent:function(a){var b=a.template,b=b&&b.content;if(!b||"string"===typeof b)return k.resolve();if(!Array.isArray(b))return k.reject(Error(this.declaredClass+"::Invalid content type."));var c={};b.forEach(function(b,d){b.type===v.attachments&&(c[d]=this._queryAttachments(a))},
this);if(0===Object.keys(c).length)return k.resolve();this._contentPromiseLookup=c;return g(c).always(function(a){this._contentPromiseLookup=null;return a}.bind(this))},_trimString:function(a){return(a||"").trim()},_updateContent:function(a){if(a.contentEnabled){var b=this._queryContent(a).then(function(b){this._set("content",this._compileContent(a,b))}.bind(this),function(a){console.log(this.declaredClass+"::error loading template",a)}.bind(this)).always(function(){this._contentPromise=null}.bind(this));
return this._contentPromise=b}return k.resolve()},_updateGraphic:function(a,b){if(this._handles&&(this._clearRelatedInfo(),this._cancelPromises(),this._set("title",""),this._set("content",null),this._set("formattedAttributes",null),this._set("waitingForContent",!1),a)){this._set("waitingForContent",!0);var c=this._createGraphicInfo(a,b);this._relatedRecordsPromise=this._checkForRelatedRecords(c).then(function(){this._set("formattedAttributes",this._formatAttributes(c));this._set("title",this._compileTitle(c));
return this._updateContent(c)}.bind(this)).always(function(){this._relatedRecordsPromise=null;this._relatedRecordsLayerPromises.length=0;this._relatedRecordsQueryPromises.length=0;this._set("waitingForContent",!1)}.bind(this))}},_getAllFieldInfos:function(a){var b=[],c=a.template,d=c&&c.fieldInfos;a=a.contentEnabled;d&&(b=b.concat(d));a&&(c=c&&c.content,Array.isArray(c)&&c.forEach(function(a){b=b.concat(a&&a.fieldInfos)},this));return b},_checkForRelatedRecords:function(a){var b=this._getAllFieldInfos(a).filter(function(a){return a&&
a.fieldName&&-1!==a.fieldName.indexOf("relationships/")},this);return b&&0<b.length?this._getRelatedRecords({graphic:a.graphic,fieldsInfo:b}):k.resolve()},_relatedFeaturesAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){if("esriRelCardinalityOneToOne"===a.relation.cardinality){var f=this._toRelatedFieldName([a.relation.id,e]);b[f]=c[f]=d.attributes[e]}},this)},_relatedStatsAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){var f=this._toRelatedFieldName([a.relation.id,
e]);b[f]=c[f]=d.attributes[e]},this)},_getRelatedChartInfos:function(a,b,c,d,e,f){var g,k,h,m,l,n;g=[];n=this._fromRelatedFieldName(c);l=n[0];k=this._relatedInfo[l];l=this._relatedLayersInfo[l];k&&k.relatedFeatures.forEach(function(k){var l=k.attributes,p;Object.keys(l).forEach(function(k){if(k===n[1]){p={};m=l[k];d.normalizeField&&(h=-1!==d.normalizeField.indexOf("relationships/")?l[this._fromRelatedFieldName(d.normalizeField)[1]]:e[d.normalizeField]);m&&h&&(m/=h);if(d.tooltipField)if(-1!==d.tooltipField.indexOf("relationships/"))k=
this._fromRelatedFieldName(d.tooltipField)[1],p.tooltip=l[k]+": "+this._formatValue(b,m,l[k],f,!!h);else{if(k=this._getLayerFieldInfo(a,c))c=k.name;p.tooltip=c+": "+this._formatValue(b,m,d.tooltipField,f,!!h)}else p.tooltip=m;p.y=m;g.push(p)}},this)},this);return"esriRelCardinalityOneToMany"===l.relation.cardinality||"esriRelCardinalityManyToMany"===l.relation.cardinality?g:g[0]},_getRelatedRecords:function(a){var b=a.graphic;return this._relatedLayersInfo?this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);
return a}.bind(this)):this._getRelatedLayersInfo(a).then(function(a){Object.keys(a).forEach(function(b){a[b]&&(this._relatedLayersInfo[b].relatedLayerInfo=a[b].data)},this);return this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);return a}.bind(this))}.bind(this))},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,c,f={};c=a.graphic.layer;this._relatedLayersInfo||(this._relatedLayersInfo={});b.forEach(function(a){var b,e,f;b=this._fromRelatedFieldName(a.fieldName);e=b[0];
b=b[1];e&&(this._relatedLayersInfo[e]||(c.relationships.some(function(a){if(a.id==e)return f=a,!0}),f&&(this._relatedLayersInfo[e]={relation:f,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[e]&&(this._relatedLayersInfo[e].relatedFields.push(b),a.statisticType&&(a=new d({statisticType:a.statisticType,onStatisticField:b,outStatisticFieldName:b}),this._relatedLayersInfo[e].outStatistics.push(a))))},this);Object.keys(this._relatedLayersInfo).forEach(function(a){var b;this._relatedLayersInfo[a]&&
(b=this._relatedLayersInfo[a].relation,b=c.url+"/"+b.relatedTableId,this._relatedLayersInfo[a].relatedLayerUrl=b,f[a]=e(b,{query:{f:"json"},callbackParamName:"callback"}))},this);Object.keys(f).forEach(function(a){this._relatedRecordsLayerPromises.push(f[a])},this);return u(f)},_queryRelatedLayers:function(a){var b={};Object.keys(this._relatedLayersInfo).forEach(function(c){b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]})},this);return u(b)},_queryRelatedLayer:function(a){var d,
e,f,g,k,h,m,l,n;d=a.graphic;e=d.layer.layerId;m=a.relatedInfo;a=m.relatedLayerInfo;l=m.relatedLayerUrl;n=m.relation;a&&a.relationships&&a.relationships.some(function(a){if(a.relatedTableId===parseInt(e,10))return f=a,!0});f&&(a.fields.some(function(a){if(a.name===f.keyField)return g=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0}),k="string"===g?f.keyField+"\x3d'"+d.attributes[n.keyField]+"'":f.keyField+"\x3d"+
d.attributes[n.keyField],k=new c({where:k,outFields:m.relatedFields}),m.outStatistics&&(0<m.outStatistics.length&&a.supportsStatistics)&&(h=new c({where:k.where,outFields:k.outFields,outStatistics:m.outStatistics})),a=new b({url:l}),k=[a.execute(k)],h&&k.push(a.execute(h)));this._relatedRecordsQueryPromises=this._relatedRecordsQueryPromises.concat(k);return u(k)},_setRelatedRecords:function(a){this._relatedInfo=[];Object.keys(a).forEach(function(b){if(a[b]){var c=a[b];this._relatedInfo[b]={relatedFeatures:c[0].features};
m.isDefined(c[1])&&(this._relatedInfo[b].relatedStatsFeatures=c[1].features)}},this)},_fromRelatedFieldName:function(a){return-1!==a.indexOf("relationships/")?a.split("/").slice(1):[]},_toRelatedFieldName:function(a){return a&&0<a.length?"relationships/"+a[0]+"/"+a[1]:""}})})},"esri/core/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(a,h,m){var n=a.forEach;return function(a){function k(a,b){d[b]=a;p.progress([a,b]);0===--q&&p.resolve(d)}var f,e;a instanceof
Array?e=a:a&&"object"===typeof a&&(f=a);var d,c=[];if(f){e=[];for(var b in f)Object.hasOwnProperty.call(f,b)&&(c.push(b),e.push(f[b]));d={}}else e&&(d=[]);if(!e||!e.length)return(new h).resolve(d);var p=new h;p.promise.always(function(){d=c=null});var q=e.length;n(e,function(a,b){f||c.push(b);m(a,function(a){k(a,c[b])},function(a){k(a,c[b])})});return p.promise}})},"esri/tasks/support/StatisticDefinition":function(){define(["../../core/declare","../../core/Accessoire"],function(a,h){return a(h,{declaredClass:"esri.tasks.support.StatisticDefinition",
onStatisticField:null,outStatisticFieldName:null,statisticType:null,toJSON:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/plugins/popupManager":function(){define(["../views/PopupManager"],function(a){return{add:function(h,m){h.popupManager||(h.popupManager=new a(m),h.popupManager.view=h)},remove:function(a){var m=
a.popupManager;m&&(m.destroy(),a.popupManager=null)}}})},"esri/views/PopupManager":function(){define("require ../core/declare ../core/promiseUtils dojo/_base/array dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessoire".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q){var u;return h(q,{declaredClass:"esri.views.PopupManager",classMetadata:{properties:{map:{dependsOn:["view.map"],
readOnly:!0}}},constructor:function(){this._featureLayersCache={}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());return a},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(a){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null);a&&(this._clickHandle=g.pausable(a,"click",
this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());return a},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_showPopup:function(a){function e(){q.clear();q.close()}function g(a){if(null==a)return!1;var b=h.allLayerViews.find(function(b){return b.layer===a});return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"esri.layers.GraphicsLayer"===
a.declaredClass)}var h=this.view,q=h.popup,l=this,u=[];n.forEach(this.map.layers.toArray(),function(a){a.isInstanceOf(p)?n.forEach(a.layers.toArray(),function(a){g(a)&&(!a.elevationInfo||"on-the-ground"===a.elevationInfo.mode)&&u.push(a)}):g(a)&&(!a.elevationInfo||"on-the-ground"===a.elevationInfo.mode)&&u.push(a)});0<h.graphics.length&&u.push(h.graphics);var B=null;if(a.graphic&&(a.graphic.popupTemplate||g(a.graphic.layer)))B=a.graphic;if(!u.length&&!B)e();else{var y=[],C=!!B;if(B)if(B.layer&&"esri.layers.SceneLayer"===
B.layer.declaredClass){var E=h.whenLayerView(B.layer).then(function(a){return a.whenGraphicAttributes(B,["*"])});y.unshift(f([E]))}else E=new k,y.unshift(E.resolve([B]));else{var z=l._calculateClickTolerance(u),y=a.mapPoint;if(!y){e();return}var L=1;h.state&&(L=h.state.resolution);(E=h.basemapTerrain)&&E.overlayManager&&(L=E.overlayManager.overlayPixelSizeInMapUnits(y));z*=L;E&&!E.spatialReference.equals(h.spatialReference)&&(z*=d.getUnitValueForSR(E.spatialReference)/d.getUnitValueForSR(h.spatialReference));
var E=y.clone().offset(-z,-z),y=y.clone().offset(z,z),H=new c(Math.min(E.x,y.x),Math.min(E.y,y.y),Math.max(E.x,y.x),Math.max(E.y,y.y),h.spatialReference),y=n.map(u,function(c){var d;if("esri.layers.ImageryLayer"===c.declaredClass){var e=new b;e.geometry=a.mapPoint;d=h.allLayerViews.find(function(a){return a.layer===c});var f={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};f.layerView=d;d=c.queryVisibleRasters(e,f).then(function(a){C=C||0<a.length;return a})}else if("esri.layers.SceneLayer"===
c.declaredClass)d=m.resolve();else if(l._featureLayersCache[c.id]||"function"===typeof c.queryFeatures&&(0===c.mode||1===c.mode))d=c.createQueryParameters(),d.geometry=H,d=c.queryFeatures(d).then(function(a){a=a.features;C=C||0<a.length;return a});else{e=[];if("esri.core.Collection\x3cesri.Graphic\x3e"===c.declaredClass)f=c;else if((d=h.allLayerViews.find(function(a){return a.layer===c}))&&(d.loadedGraphics||d._graphicsCollection))f=d.loadedGraphics||d._graphicsCollection;f&&(e=f.filter(function(a){return a&&
a.popupTemplate&&a.visible&&H.intersects(a.geometry)}).toArray());C=C||0<e.length;d=m.resolve(e)}return d})}!n.some(y,function(a){return!a.isFulfilled()})&&!C?e():q.open({promises:y,location:a.mapPoint})}},_getSubLayerFeatureLayers:function(b,c){var d=c||new k,h=[],m=b.length,l=Math.floor(this.view.extent.width/this.view.width),p=this.view.scale,q=!1,y=this,C=0;a:for(;C<m;C++){var E=b[C],z=E.dynamicLayerInfos||E.layerInfos;if(z){var L=null;if(E._params&&(E._params.layers||E._params.dynamicLayers))L=
E.visibleLayers;for(var L=e._getVisibleLayers(z,L),H=e._getLayersForScale(p,z),K=z.length,$=0;$<K;$++){var R=z[$],N=R.id,Q=E.popupTemplates[N];if(!R.subLayerIds&&Q&&Q.popupTemplate&&-1<n.indexOf(L,N)&&-1<n.indexOf(H,N)){if(!u){q=!0;break a}var F=E.id+"_"+N,D=this._featureLayersCache[F];if(!D||!D.loadError)D||((D=Q.layerUrl)||(D=R.source?this._getLayerUrl(E.url,"/dynamicLayer"):this._getLayerUrl(E.url,N)),D=new u(D,{id:F,drawMode:!1,mode:u.MODE_SELECTION,outFields:this._getOutFields(Q.popupTemplate),
resourceInfo:Q.resourceInfo,source:R.source}),this._featureLayersCache[F]=D),D.setDefinitionExpression(E.layerDefinitions&&E.layerDefinitions[N]),D.setGDBVersion(E.gdbVersion),D.popupTemplate=Q.popupTemplate,D.setMaxAllowableOffset(l),D.setUseMapTime(!!E.useMapTime),E.layerDrawingOptions&&(E.layerDrawingOptions[N]&&E.layerDrawingOptions[N].renderer)&&D.setRenderer(E.layerDrawingOptions[N].renderer),h.push(D)}}}}if(q){var S=new k;a(["../layers/FeatureLayer"],function(a){u=a;S.resolve()});S.then(function(){y._getSubLayerFeatureLayers(b,
d)})}else{var X=[];n.forEach(h,function(a){if(!a.loaded){var b=new k;g.once(a,"load, error",function(){b.resolve()});X.push(b.promise)}});X.length?f(X).then(function(){h=n.filter(h,function(a){return!a.loadError&&a.isVisibleAtScale(p)});d.resolve(h)}):(h=n.filter(h,function(a){return a.isVisibleAtScale(p)}),d.resolve(h))}return d.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;a.info&&"esri.widgets.PopupTemplate"===
a.declaredClass?(b=[],n.forEach(a.info.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&("shape"!==c&&0!==c.indexOf("relationships/"))&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6;n.forEach(a,function(a){if(a=a.renderer)"esri.renderer.SimpleRenderer"===a.declaredClass?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):("esri.renderer.UniqueValueRenderer"===a.declaredClass||
"esri.renderer.ClassBreaksRenderer"===a.declaredClass)&&n.forEach(a.infos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b},_clickHandler:function(a){var b=this;if(this.view.popup&&this.view.ready){var c=a.screenPoint;null!=c?this.view.hitTest(c.x,c.y).then(function(a){0<a.results.length&&b._showPopup(a.results[0])}):this._showPopup(a)}}})})},"esri/layers/support/layerUtils":function(){define(["dojo/_base/array"],
function(a){return{_serializeLayerDefinitions:function(h){var m=[],n=!1,g=/[:;]/;if(h&&(a.forEach(h,function(a,e){a&&(m.push([e,a]),!n&&g.test(a)&&(n=!0))}),0<m.length)){var k;n?(k={},a.forEach(m,function(a){k[a[0]]=a[1]}),k=JSON.stringify(k)):(k=[],a.forEach(m,function(a){k.push(a[0]+":"+a[1])}),k=k.join(";"));return k}return null},_serializeTimeOptions:function(h,m){if(h){var n=[];a.forEach(h,function(g,k){if(g){var f=g.toJSON();m&&-1!==a.indexOf(m,k)&&(f.useTime=!1);n.push('"'+k+'":'+JSON.stringify(f))}});
if(n.length)return"{"+n.join(",")+"}"}},_getVisibleLayers:function(h,m){var n=[],g,k,f;if(!h)return n;if(m){n=m.concat();for(f=0;f<h.length;f++)g=h[f],k=a.indexOf(h,g.id),g.subLayerIds&&-1<k&&(n.splice(k,1),n=n.concat(g.subLayerIds))}else n=this._getDefaultVisibleLayers(h);return n},_getDefaultVisibleLayers:function(h){var m=[],n;if(!h)return m;for(n=0;n<h.length;n++)0<=h[n].parentLayerId&&-1===a.indexOf(m,h[n].parentLayerId)&&a.some(h,function(a){return a.id===h[n].parentLayerId})||h[n].defaultVisibility&&
m.push(h[n].id);return m},_getLayersForScale:function(h,m){var n=[];if(0<h&&m){var g;for(g=0;g<m.length;g++)if(!(0<=m[g].parentLayerId&&-1===a.indexOf(n,m[g].parentLayerId)&&a.some(m,function(a){return a.id===m[g].parentLayerId}))&&0<=m[g].id){var k=!0,f=m[g].maxScale,e=m[g].minScale;if(0<f||0<e)0<f&&0<e?k=f<=h&&h<=e:0<f?k=f<=h:0<e&&(k=h<=e);k&&n.push(m[g].id)}}return n}}})},"esri/layers/GroupLayer":function(){define(["./Layer","./mixins/PortalLayer","../support/LayersMixin","../core/JSONSupport"],
function(a,h,m,n){return a.createSubclass([m,n,h],{declaredClass:"esri.layers.GroupLayer",portalLoaderModule:"portal/loaders/GroupLayerLoader",viewModulePaths:{"2d":"../views/layers/GroupLayerView","3d":"../views/layers/GroupLayerView"},constructor:function(a){this._lyrVisibleHandles={};this._lyrVisibleWatcher=this._lyrVisibleWatcher.bind(this)},initialize:function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher)},properties:{fullExtent:{value:void 0},
spatialReference:{value:void 0},visibilityMode:{value:"independent",set:function(a){this._get("visibilityMode")!==a&&(this._enforceVisibility(a,this.visible),this._set("visibilityMode",a))}}},load:function(){this.addResolvingPromise(this.loadFromPortal())},layerAdded:function(a,k){a.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._lyrVisibleHandles[a.uid]=a.watch("visible",this._lyrVisibleWatcher)},layerRemoved:function(a,
k){var f=this._lyrVisibleHandles[a.uid];f&&(f.remove(),delete this._lyrVisibleHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)},_turnOffOtherLayers:function(a){this.layers.forEach(function(k){k!==a&&(k.visible=!1)})},_enforceVisibility:function(a,k){if(this.__accessor__.initialized){var f=this.layers,e=f.find(function(a){return a.visible});switch(a){case "exclusive":f.length&&!e&&(e=f.getItemAt(0),e.visible=!0);this._turnOffOtherLayers(e);break;case "inherited":f.forEach(function(a){a.visible=
k},this)}}},_visibleWatcher:function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(k){k.visible=a})},_lyrVisibleWatcher:function(a,k,f,e){k=this.layers.some(function(a){return a.visible});switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(e):k||(e.visible=!0);break;case "inherited":e.visible=this.visible}}})})},"esri/support/LayersMixin":function(){define(["../core/Accessor","../core/Collection"],function(a,h){var m=function(a,g){for(var k,f=0,e=a.length;f<
e;f++)if(k=a.getItemAt(f),k.id===g||k.layers&&(k=m(k.layers,g)))return k};return a.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:h,get:function(){var a=this._get("layers");if(a)return a;a=new h;a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a)}.bind(this));a.on("after-remove",function(a){a=
a.item;a.parent=null;this.layerRemoved(a)}.bind(this));return a},set:function(a){var g=this._get("layers");g&&this.remove(g.toArray());this.addMany(a.toArray())}}},findLayerById:function(a){return m(this.layers,a)},add:function(a,g){var k=this.layers;g=k.getNextIndex(g);a.parent===this?this.reorder(a,g):k.add(a,g)},addMany:function(a,g){var k=this.layers;g=k.getNextIndex(g);a.forEach(function(a){a.parent===this?this.reorder(a,g):(k.add(a,g),g+=1)},this)},remove:function(a){return this.layers.remove(a)},
removeMany:function(a){return this.layers.removeMany(a)},removeAll:function(){return this.layers.removeAll()},reorder:function(a,g){return this.layers.reorder(a,g)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/portal/creators/layersCreator":function(){define("require exports ../../layers/Layer ../../core/promiseUtils ../../core/requireUtils dojo/_base/lang dojo/has".split(" "),function(a,h,m,n,g,k,f){function e(b,c,d){return g.when(a,"./"+c).then(function(a){return(new a(k.mixin(d,
{layer:b}))).create()})}function d(a,b){var c=null,c=a.layerType||a.type;!c&&(b&&b.defaultLayerType)&&(c=b.defaultLayerType);switch(c){case "ArcGISFeatureLayer":c="FeatureLayerCreator";break;case "ArcGISImageServiceLayer":c="ImageServiceLayerCreator";break;case "ArcGISMapServiceLayer":c="MapServiceLayerCreator";break;case "ArcGISSceneServiceLayer":c="SceneServiceLayerCreator";break;case "ArcGISStreamLayer":c="StreamLayerCreator";break;case "ArcGISTiledMapServiceLayer":c="TiledMapServiceLayerCreator";
break;case "ArcGISTiledImageServiceLayer":c="TiledImageServiceLayerCreator";break;case "ArcGISTiledElevationServiceLayer":c="TiledElevationServiceLayerCreator";break;case "GroupLayer":c="GroupLayerCreator";break;case "OpenStreetMap":c="OpenStreetMapCreator";break;case "WebTiledLayer":c="WebTileLayerCreator";break;case "VectorTileLayer":c="VectorTileLayerCreator";break;case "DefaultTiledLayer":c="TiledServiceLayerCreator";break;case "ArcGISImageServiceVectorLayer":case "CSV":case "KML":case "WMS":case "GeoRSS":c=
"UnsupportedLayerCreator";break;default:c="UnknownLayerCreator"}return e(a,c,b)}function c(a,b,c){return!b||!b.filter?c:c.then(function(a){var c=b.filter(a);return void 0===c?n.resolve(a):c instanceof m?n.resolve(c):c})}function b(a,b,e,f){if(!b)return[];for(var g=[],k=[],h=0;h<b.length;h++){var m=b[h],w=e(m,f);g.push(w);k.push(null);if("GroupLayer"===m.layerType&&m.layers&&Array.isArray(m.layers)&&0<m.layers.length){m=m.layers.map(function(a){return d(a,f)});g.push.apply(g,m);for(var B=0;B<m.length;B++)k.push(w)}}var y=
{};return g.map(function(b,d){var e=function(a,b){y[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=y[a.id];return void 0===a?!1:d<a});0>c&&(c=void 0);a.add(b,c)},g=c(a,f,b).then(function(b){if(null===k[d])e(a,b);else return k[d].then(function(a){e(a.layers,b);return n.resolve(b)});return n.resolve(b)});p&&(g=g.otherwise(function(a){console.error(a.toString?a.toString():a);return n.reject(a)}));return g})}var p=0;h.createLayer=d;h.processLayer=c;h.populateLayers=b;h.populateOperationalLayers=
function(a,c,e){return b(a,c,d,e)}})},"esri/portal/creators/TiledServiceLayerCreator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessoireSupport/typescript ./LayerCreator ../../layers/TileLayer".split(" "),function(a,h,m,n,g,k,f){return function(a){function d(){a.apply(this,arguments)}m(d,a);n([g.shared("esri.portal.creators.TiledServiceLayerCreator")],d.prototype,"declaredClass",void 0);n([g.shared(f)],d.prototype,"type",
void 0);return d=n([g.subclass()],d)}(k)})},"esri/portal/creators/LayerCreator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessoireSupport/typescript dojo/_base/lang dojo/has ../../core/Accessoire ../../core/promiseUtils ../../PopupTemplate ../../layers/support/LabelClass ../../renderers/support/jsonUtils ../../core/urlUtils ../../renderers/support/layerTemplates".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u){return function(a){function e(b){a.call(this)}
m(e,a);e.prototype.create=function(){var a=this,b=this.type;return this.layerProperties(this.layer).then(function(c){a.layer.itemId&&(c.portalItem={id:a.layer.itemId,portal:a.portal});return d.resolve(new b(c))})};e.prototype.layerProperties=function(a){var d=this,e={};null!=a.title&&(e.title=a.title);void 0!==a.url&&(e.url=q.normalize(a.url));var f=function(a){return a},g=k.clone,h=function(a,b,c){for(var d in c){var e=b[d];void 0!==e&&(a[d]=c[d](e))}return a};h(e,a,{id:f,opacity:f,minScale:f,maxScale:f,
listMode:f});var m=a.layerDefinition;void 0!==m&&(h(e,m,{minScale:f,maxScale:f,elevationInfo:g,definitionExpression:f}),f=a.layerDefinition.drawingInfo,void 0!==f&&(f=f.labelingInfo,void 0!==f&&(Array.isArray(f)&&0<f.length)&&(e.labelingInfo=f.map(function(a){return b.fromJSON(a)}))));void 0!==a.showLabels&&(e.labelsVisible=a.showLabels);void 0!==a.visibility&&(e.visible=!!a.visibility);void 0!==a.disablePopup&&(e.popupEnabled=!a.disablePopup);void 0!==a.popupInfo&&(e.popupTemplate=c.fromJSON(a.popupInfo));
void 0!==a.showLegend&&(e.legendEnabled=a.showLegend);return this.createRenderer(a,e).then(function(b){b&&(e.renderer=b);d.propertyFilter&&(b=d.propertyFilter(a,e),void 0!==b&&(e=b));return e}).otherwise(function(a){return e})};e.prototype.createRenderer=function(a,b){if(!a.layerDefinition||!a.layerDefinition.drawingInfo||!a.layerDefinition.drawingInfo.renderer)return d.resolve(null);var c=a.layerDefinition.drawingInfo.renderer;return u.hasContentByReference(c)?u.createRenderer(c,this.portal).then(function(a){b.legendEnabled=
!1;return a}).otherwise(function(a){return p.fromJSON(c)}):d.resolve(p.fromJSON(c))};n([g.shared("esri.portal.creators.LayerCreator")],e.prototype,"declaredClass",void 0);n([g.shared(null)],e.prototype,"type",void 0);n([g.property()],e.prototype,"layer",void 0);n([g.property()],e.prototype,"portal",void 0);n([g.property()],e.prototype,"propertyFilter",void 0);return e=n([g.subclass()],e)}(e)})},"esri/renderers/support/layerTemplates":function(){define("require exports dojo/has ../Renderer ../SimpleRenderer ../UniqueValueRenderer ../../symbols/support/jsonUtils ../../core/urlUtils ../../core/promiseUtils ../../core/Error ../../request ../../portal/PortalQueryParams".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p){function q(a){return!a?!1:a.styleUrl||a.styleName?"renderer":a.symbol&&a.symbol.type&&"styleSymbolReference"===a.symbol.type?"symbol":!1}function u(a){s(a);(m("ie")||m("trident"))&&x(a);return f.fromJSON(a)}function t(a){return a="https:"===location.protocol?a.replace(/^http:/,"https:"):a.replace(/^https:/,"http:")}function r(a,b){if(a.symbolLayers)for(var c=0;c<a.symbolLayers.length;c++){var d=a.symbolLayers[c];d.resource&&(d=d.resource,d.href&&(d.href=b(d.href)))}}
function s(a){r(a,function(a){return t(e.fixUrl(a))})}function x(a){r(a,function(a){return-1!==a.indexOf(".svg",a.length-4)?(a.slice(0,a.length-4)+".png").replace("/resource/","/resource/png/"):a})}function v(a){return b(t(a),{query:{f:"json"},responseType:"json"}).then(function(a){return a.data})}function l(a,b){return!b?d.reject(new c("layer-templates:portal-missing","A portal is required to query styles, but non was provided")):b.load().then(function(){if(!b.stylesGroupQuery)throw new c("layer-templates:styles-group-query-missing",
"The styles group query needs to be configured in the portal to query styles");var a=new p({disableExtraQuery:!0,query:b.stylesGroupQuery});return b.queryGroups(a)}).then(function(b){b=b.results;if(!b||!Array.isArray(b)||0===b.length)throw new c("layer-templates:styles-missing","The styles group does not contain any styles");b=b[0];var d=new p({disableExtraQuery:!0,query:'typekeywords:"'+a+'"'});return b.queryItems(d)}).then(function(b){b=b.results;if(!b||!Array.isArray(b)||0===b.length)throw new c("layer-templates:style-missing",
"The style '${styleName}' is not part of the styles group",{styleName:a});return b[0].load()}).then(function(a){return a.fetchData()})}function w(a){return!a.symbolSetUrl?d.reject(new c("layer-templates:symbol-set-url-missing","Style does not provide symbol set url",{style:a})):b(t(a.symbolSetUrl),{query:{f:"json"},responseType:"json"}).then(function(b){b=b.data;if(0===b.length||!b[0].name)throw new c("layer-templates:symbol-set-missing-data","Invalid syntax or missing data in symbol set",{style:a});
for(var d={},e=0;e<b.length;e++){var f=u(b[e]);d[b[e].name]=f;b[e].name===a.defaultItem&&(d.defaultSymbol=f)}d.defaultSymbol||(d.defaultSymbol=d[b[0].name]);return d})}function B(a,e){for(var f=0;f<a.items.length;f++)if(a.items[f].name===e)return b(t(a.items[f].webRef),{query:{f:"json"},responseType:"json"}).then(function(a){return u(a.data)});return d.reject(new c("layer-templates:symbol-name-not-found","The symbol name '${symbolName}' could not be found",{symbolName:e}))}function y(a,b){var c=n.fromJSON(a);
c.sizeInfo&&(b.sizeInfo=c.sizeInfo);c.colorInfo&&(b.colorInfo=c.colorInfo);c.visualVariables&&(b.visualVariables=c.visualVariables);return b}function C(a,b){var e=a.symbol;if(!e.name)return d.reject(new c("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference"));var f;if(e.styleUrl)f=v(e.styleUrl);else if(e.styleName)f=l(e.styleName,b);else return d.reject(new c("layer-templates:style-url-and-name-missing","Either styleUrl or styleName is required in layerDefinition"));
return f.then(function(a){return B(a,e.name)}).then(function(b){b=new g({symbol:b});return y(a,b)})}function E(a,b){var e;if(a.styleUrl)e=v(a.styleUrl);else if(a.styleName)e=l(a.styleName,b);else return d.reject(new c("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference"));return e.then(function(a){return w(a)}).then(function(b){var c=new k({defaultSymbol:a.defaultSymbol&&b[a.defaultSymbol.name]?b[a.defaultSymbol.name]:b.defaultSymbol,field:a.field1}),d;for(d in b)b.hasOwnProperty(d)&&
c.addUniqueValueInfo(d,b[d]);return y(a,c)})}h.hasContentByReference=q;h.createRenderer=function(a,b){var c=q(a);return"renderer"===c?E(a,b):"symbol"===c?C(a,b):d.resolve(null)}})},"esri/views/layers/GraphicsLayerView":function(){define(["../../core/declare","./LayerView"],function(a,h){return a(h,{declaredClass:"esri.views.layers.GraphicsLayerView",constructor:function(a){},getRenderer:function(a){if(!a||a.symbol)return null;var h=this._rndForScale||this.layer.get("renderer");a&&(h&&h.getObservationRenderer)&&
(h=h.getObservationRenderer(a));return h},getSymbol:function(a){if(a.symbol)return a.symbol;var h=this.getRenderer(a);return h&&h.getSymbol(a)},getRenderingInfo:function(a){var h=this.getRenderer(a),g=this.getSymbol(a),k;if(!g)return null;g={renderer:h,symbol:g};if(h&&(h.colorInfo&&(g.color=h.getColor(a)),h.sizeInfo&&(k=h.getSize(a),g.size=[k,k,k]),h.visualVariables)){a=h.getVisualVariableValues(a);k=["proportional","proportional","proportional"];for(h=0;h<a.length;h++){var f=a[h];if("outline"!==
f.variable.target){var e=f.variable.type;"color"===e?g.color=f.value:"size"===e?(e=f.variable.axis,f=f.variable.useSymbolValue?"symbolValue":f.value,"width"===e?k[0]=f:"depth"===e?k[1]=f:"height"===e?k[2]=f:k[0]="width-and-depth"===e?k[1]=f:k[1]=k[2]=f):"opacity"===e?g.opacity=f.value:"rotation"===e&&(g.rotationAngle=f.value)}}if(isFinite(k[0])||isFinite(k[1])||isFinite(k[2]))g.size=k}return g},_evalSDRenderer:function(){}})})},"esri/views/layers/LayerView":function(){define(["../../core/declare",
"../../core/Accessoire","../../core/Evented","../../core/AccessoirePromise"],function(a,h,m,n){var g=0;return a([h,m,n],{declaredClass:"esri.views.layers.LayerView",classMetadata:{properties:{refreshTimer:{readOnly:!0,dependsOn:["suspended","layer.refreshInterval"]},suspended:{dependsOn:["view","visible","layer.loaded","parent.suspended"],readOnly:!0},updating:{dependsOn:["suspended"],value:!1},visible:{dependsOn:["layer.visible"]}}},constructor:function(){this.id=Date.now().toString(16)+"-layerview-"+
g++;this._layerHandles=[];this.watch("suspended",this._suspendedWatcher.bind(this))},initialize:function(){this.addResolvingPromise(this.layer)},destroy:function(){this.layer=this.parent=null},layer:null,_layerSetter:function(a){var f=this._layerHandles;f.forEach(function(a){a.remove()});f.length=0;a&&f.push(a.on("refresh",this.refresh.bind(this)));return a},parent:null,_refreshTimerGetter:function(a){var f=this.suspended,e=this.get("layer.refreshInterval")||0;a&&(clearTimeout(a),a=null);!f&&e&&(a=
setTimeout(this.refresh.bind(this),6E4*e));return a},suspended:!0,_suspendedGetter:function(){return!this.canResume()},_updating:!1,_updatingGetter:function(){return!(!this._updating||this.suspended)},_updatingSetter:function(a){this._updating=!!a},visible:!0,_visibleSetter:function(a){this._visible=a},_visibleGetter:function(){return null!=this._visible?this._visible:this.get("layer.visible")},refresh:function(){},canResume:function(){return!this.get("parent.suspended")&&this.get("view.ready")&&
this.get("layer.loaded")&&this.visible||!1},_suspendedWatcher:function(a){a?this.emit("suspend"):this.emit("resume")}})})},"esri/views/View":function(){define("dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-class ../Graphic ../core/Accessoire ../core/Collection ../core/Evented ../core/HandleRegistry ../core/AccessoirePromise ../core/watchUtils ../core/promiseUtils ../core/Scheduler ../geometry/SpatialReference ../geometry/Extent ./BreakpointsOwner ./DOMContainer ./LayerViewManager ./BasemapView ./GroundView ./PopupManager ./ui/DefaultUI ./support/DefaultsFromMap ../widgets/Popup".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w,B,y,C){return k.createSubclass([c,s,e,r],{declaredClass:"esri.views.View",classMetadata:{properties:{allLayerViews:{type:f},basemapView:{},container:{},animation:{},resizing:{},interacting:{},graphics:{type:f.ofType(g)},groundView:{},initialExtent:{readOnly:!0,type:t,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},layerViews:{type:f},map:{},popup:{type:C},ready:{readOnly:!0,dependsOn:"map spatialReference surface width height suspended initialExtentRequired initialExtent defaultsFromMap.isDone map.loaded".split(" ")},
defaultsFromMapCollectionPaths:{},root:{},spatialReference:{type:u,dependsOn:["defaultsFromMap.spatialReference"]},stationary:{dependsOn:["animation","interacting","resizing"]},surface:{},type:{},ui:{type:B},updating:{},width:{},height:{},suspended:{}}},constructor:function(a){this._viewHandles=new d;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.empty()}.bind(this)));
this.defaultsFromMap=new y({view:this})},getDefaults:function(){return a.mixin(this.inherited(arguments),{layerViews:[],allLayerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0},popup:{},ui:{}})},initialize:function(){var a=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");return b.whenOnce(this,"ready")}.bind(this));this.addResolvingPromise(a);this.basemapView=new v({view:this});this.groundView=new l({view:this});this.layerViewManager=new x({view:this,allLayerViews:this.allLayerViews});
this._resetInitialViewPropertiesFromContent()},destroy:function(){this.basemapView.destroy();this.groundView.destroy();this.destroyLayerViews();this.ui.destroy();this.popup&&this.popup.destroy();this.defaultsFromMap.destroy();this.defaultsFromMap=null;this._viewHandles.destroy();this.container=this.map=null},destroyLayerViews:function(){this.layerViewManager.destroy()},_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,activeTool:"navigation",
animation:null,basemapView:null,groundView:null,container:null,_containerSetter:function(a,b){a=h.byId(a);if(b===a)return b;b&&(n.remove(b,"esri-view"),this.popupManager.destroy(),this.popupManager=null,m.destroy(this.root),this.root=null);a?(n.add(a,"esri-view"),this.root=m.create("div",{className:"esri-view-root"},a,"first"),this.surface=m.create("div",{className:"esri-view-surface"},this.root),h.setSelectable(this.surface,!1),this._forceReadyCycle(),this.popupManager=new w({enabled:!0,view:this})):
this.surface=null;return a},graphics:null,_graphicsSetter:function(a){this._graphicsView&&(this._graphicsView.graphics=a);return a},interacting:!1,_interactingSetter:function(a){var b=this.surface;b&&b.setAttribute("data-interacting",a);return a},layerViews:null,map:null,_mapSetter:function(a,b){if(a===b)return a;a&&a.load&&a.load();this._forceReadyCycle();this._resetInitialViewPropertiesFromContent();return a},padding:null,_popupSetter:function(a,c){if(a===c)return c;this._viewHandles.remove("view-popup");
c&&c.destroy();a&&(a.viewModel.view=this,a._started||a.startup(),this._viewHandles.add([b.init(this,"root",function(b,c){var d=a.domNode;h.isDescendant(d.parentNode,c)&&d.parentNode.removeChild(d);b&&!d.parentNode&&a.placeAt(b)})],"view-popup"));return a},_readyGetter:function(a){return!(!this._isValid||this._readyCycleForced||!this.map||!(null!=this.surface&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||
this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isDone)&&this.isSpatialReferenceSupported(this.spatialReference)))},spatialReference:null,_spatialReferenceGetter:function(){return this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null},_spatialReferenceSetter:function(a){return this._userSpatialReference=a},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&!this.resizing},surface:null,type:null,_uiSetter:function(a,
c){if(a===c)return c;this._viewHandles.remove("ui");c&&c.destroy();a&&(a.view=this,this._viewHandles.add([b.init(this,"root",function(b){a.container=b?m.create("div",null,b):null})],"ui"));return a},updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},addHandler:function(a){this.gestureManager&&this.gestureManager.addHandler(a);return this},
removeHandler:function(a){this.gestureManager&&this.gestureManager.removeHandler(a);return this},pageToContent:function(a,b,c){var d=this.padding;c=this.pageToContainer(a,b,c);d&&(c[0]-=d.left,c[1]-=d.top);return c},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},validate:function(){return p.resolve()},isSpatialReferenceSupported:function(){return!0},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);
this.defaultsFromMap.reset();this._currentSpatialReference=null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([b.watch(this,"spatialReference",a),b.watch(this,"initialExtentRequired",a),q.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,this.notifyChange("ready"),b.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)))}})})},"esri/views/BreakpointsOwner":function(){define("../core/Accessoire ../core/ArrayPool ../core/HandleRegistry ../core/Scheduler ../core/watchUtils dojo/_base/lang dojo/dom-class".split(" "),
function(a,h,m,n,g,k,f){var e={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};return a.createSubclass({classMetadata:{properties:{breakpoints:{},orientation:{},widthBreakpoint:{},heightBreakpoint:{}}},constructor:function(){this._handles=new m},getDefaults:function(){return k.mixin(this.inherited(arguments),
{breakpoints:d})},initialize:function(){this._handles.add(g.init(this,"size",this._updateClassNames))},destroy:function(){this._removeActiveClassNames();this._handles.destroy();this.view=this._handles=null},_breakpointsSetter:function(a,b){if(a===b)return a;var e;e=(e=a)&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large;var f;e||(f=JSON.stringify(d,null,2),console.warn("provided breakpoints are not valid, using defaults:"+f));a=e?a:d;return k.mixin({},a)},_updateClassNames:function(){if(this.container){var a=
h.acquire(),b=h.acquire(),d=!1,f=this._handles,g,k,m;for(g in e)k=this[g],m=e[g].getValue({viewSize:this.size,breakpoints:this.breakpoints}),k!==m&&(d=!0,this[g]=m,b.push(e[g].valueToClassName[k]),a.push(e[g].valueToClassName[m]));d&&f.add(n.addFrameTask({update:function(){f.remove("breakpointsOwner-css-update");this._applyClassNameChanges(a,b);h.release(a);h.release(b)}.bind(this)}),"breakpointsOwner-css-update")}},_applyClassNameChanges:function(a,b){var d=this.container;d&&(f.remove(d,b),f.add(d,
a))},_removeActiveClassNames:function(){var a=this.container,b;if(a)for(b in e)f.remove(a,e[b].valueToClassName[this[b]])}})})},"esri/views/DOMContainer":function(){define(["dojo/on","../core/Accessoire","../core/Scheduler","../core/watchUtils"],function(a,h,m,n){var g=[0,0];return h.createSubclass({declaredClass:"esri.views.DOMContainer",classMetadata:{properties:{container:{},height:{},position:{},resizing:{},size:{dependsOn:["width","height"],readOnly:!0},suspended:{},width:{}}},constructor:function(){Object.defineProperty(this,
"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}})},initialize:function(){var g=this._measureInfo,f=null;n.init(this,"container",function(e,d,c,b){f&&(f.remove(),f=null,g.freq=16,g.time=750);g.task&&(g.task.remove(),g.task=null);e?(f=a(window,"resize",function(){g.freq=16;g.time=750}.bind(b)),g.task=m.addFrameTask({prepare:function(a){var b=this._measureInfo;b.time+=a.deltaTime;b.time<b.freq||(b.time=0,this._measure()?(b.freq=16,this.resizing=!0):(b.freq=Math.min(750,2*
b.freq),512<=b.freq&&(this.resizing=!1)))}.bind(b)})):this.resizing=!1;this._measure();e=this.root;d=this.surface;c=this.width;b=this.height;e&&(d&&c&&b)&&(e.style.width=d.style.width=c+"px",e.style.height=d.style.height=b+"px")})},destroy:function(){this.container=null},_measureInfo:null,size:null,_sizeGetter:function(a,f){f||(f=[0,0]);f[0]=this.width;f[1]=this.height;return f},position:null,height:0,resizing:!1,suspended:!0,width:0,pageToContainer:function(a,f,e){var d=this.position;a-=d[0];f-=
d[1];e?(e[0]=a,e[1]=f):e=[a,f];return e},containerToPage:function(a,f,e){var d=this.position;a+=d[0];f+=d[1];e?(e[0]=a,e[1]=f):e=[a,f];return e},_measure:function(){var a=this.container,f=a?a.clientWidth:0,e=a?a.clientHeight:0;if(0===f||0===e||"hidden"===window.getComputedStyle(a).visibility)return this.suspended=!0,!1;var d=this.root,c=this.surface,b=this.width,h=this.height,m=this.position;if(f===b&&e===h)return this.suspended=!1;d&&c&&(d.style.width=c.style.width=f+"px",d.style.height=c.style.height=
e+"px");this.width=f;this.height=e;this.suspended=!1;d=a.ownerDocument||window.document;d=d.parentWindow||d.defaultView;a=a.getBoundingClientRect();g[0]=a.left+d.pageXOffset;g[1]=a.top+d.pageYOffset;if(!m||g[0]!==m[0]||g[1]!==m[1])this.position=g.slice();this.emit("resize",{oldWidth:b,oldHeight:h,width:f,height:e});return!0}})})},"esri/views/LayerViewManager":function(){define("../core/Accessor ../core/Collection ../core/Error ../core/HandleRegistry ../core/Scheduler ../core/promiseUtils ../core/watchUtils ./LayerViewFactory".split(" "),
function(a,h,m,n,g,k,f,e){var d=function(a,b){var d=function(e){e&&e.forEach(function(e){b.push(e);d(e[a])});return b};return d};return a.createSubclass({constructor:function(){this._handles=new n;this._layerViewPromises={};this._layerViewBylayerUID={};this._doWork=this._doWork.bind(this);this.refresh=this.refresh.bind(this);this.factory=new e;this._handles.add(f.init(this,"view.ready",function(a){this.ready=a}.bind(this)));this._handles.add(this.watch(["view.map.basemap","view.map.ground","view.map.layers",
"ready"],this.refresh),"watcher")},destroy:function(){this.view=null;this.empty();this.factory.destroy();this.factory=null;this._handles.destroy();this._map=this._layerViewBylayerUID=this._layerViewPromises=this._handles=null},_map:null,properties:{allLayerViews:{type:h},ready:{value:!1},view:null},layersToLayerViews:{"view.map.basemap.baseLayers":"view.basemapView.baseLayerViews","view.map.ground.layers":"view.groundView.layerViews","view.map.layers":"view.layerViews","view.map.basemap.referenceLayers":"view.basemapView.referenceLayerViews"},
empty:function(){Object.keys(this._layerViewBylayerUID).forEach(this._disposeLayerView,this);Object.keys(this._layerViewPromises).forEach(function(a){this._layerViewPromises[a].cancel()},this);this._layerViewBylayerUID={};this._layerViewPromises={};this._refreshCollections()},refresh:function(){var a=this._handles;a.remove("refresh");a.add(g.schedule(this._doWork),"refresh")},getAllLayerCollections:function(){return Object.keys(this.layersToLayerViews).map(this.get,this).filter(function(a){return null!=
a})},getAllLayers:function(){var a=[];this.getAllLayerCollections().forEach(d("layers",a));return a},getAllLayerViewsCollections:function(){return Object.keys(this.layersToLayerViews).map(function(a){return this.layersToLayerViews[a]},this).map(this.get,this).filter(function(a){return null!=a})},getAllLayerViews:function(){var a=[];this.getAllLayerViewsCollections().forEach(d("layerViews",a));return a},whenLayerView:function(a){this.refresh();this._doWork();return!this._layerViewPromises[a.uid]?k.reject(new m("view:no-layerview-for-layer",
"No layerview has been found for the layer",{layer:a})):this._layerViewPromises[a.uid]},_doWork:function(){var a=this._handles,b=this.get("view.map");this._map!==b&&(this.empty(),this._map=b);if(a.has("refresh")){a.remove("refresh");a.remove("collection-change");this.factory.paused=!this.ready;var b=this.getAllLayers(),d=b.map(function(a){return a.uid});b.forEach(this._createLayerView,this);this._refreshCollections();Object.keys(this._layerViewPromises).filter(function(a){return-1===d.indexOf(a)}).forEach(this._disposeLayerView,
this);a.add(this.getAllLayerCollections().map(function(a){return a.on("change",this.refresh)},this),"collection-change")}},_refreshCollections:function(){Object.keys(this.layersToLayerViews).forEach(function(a){this._populateLayerViewsOwners(this.get(a),this.get(this.layersToLayerViews[a]),this.view)},this);var a=this.getAllLayers();this.allLayerViews.removeAll();this.allLayerViews.addMany(a.map(function(a){return this._layerViewBylayerUID[a.uid]},this).filter(function(a){return null!=a}))},_populateLayerViewsOwners:function(a,
b,d){a&&b&&(b.removeAll(),a.forEach(function(a){var c=this._layerViewBylayerUID[a.uid];c&&(c.layer=a,c.parent=d,b.push(c),a.layers&&this._populateLayerViewsOwners(a.layers,c.layerViews,c))},this))},_createLayerView:function(a){var b=this.view,d=this.factory,e=this._layerViewBylayerUID,f=this._layerViewPromises;e[a.uid]?a.load():f[a.uid]||(f[a.uid]=d.create(b,a).then(function(d){if(!this.getAllLayers().some(function(b){return a===b}))throw new m("view:no-layerview-for-layer","The layer has been removed from the map",
{layer:a});e[a.uid]=d;this._refreshCollections();a.emit("layerview-create",{view:b,layerView:d});b.emit("layerview-create",{layer:a,layerView:d});return k.resolve(d)}.bind(this)),f[a.uid].always(this.refresh))},_disposeLayerView:function(a){if(this._layerViewPromises[a]){this._layerViewPromises[a].cancel();delete this._layerViewPromises[a];var b=this._layerViewBylayerUID[a];if(b){var d=b.layer,e=b.view;this.factory.dispose(b);b.layer=b.parent=b.view=null;delete this._layerViewBylayerUID[a];d.emit("layerview-destroy",
{view:e,layerView:b});e.emit("layerview-destroy",{layer:d,layerView:b})}}}})})},"esri/views/LayerViewFactory":function(){define("dojo/_base/lang dojo/Deferred dojo/when ../core/Accessoire ../core/Error ../core/Collection ../core/watchUtils".split(" "),function(a,h,m,n,g,k,f){return n.createSubclass({declaredClass:"esri.views.LayerViewFactory",classMetadata:{properties:{creationRequests:{type:k},paused:{},working:{dependsOn:["paused","creationRequests.length"],readOnly:!0}}},getDefaults:function(){return a.mixin(this.inherited(arguments),
{creationRequests:[]})},initialize:function(){f.whenFalse(this,"paused",function(){this.creationRequests.toArray().forEach(this._processRequest,this)}.bind(this))},destroy:function(){this.creationRequests.drain(function(a){a.deferred.cancel()})},creationRequests:null,paused:!0,view:null,_workingGetter:function(){return 0<this.creationRequests.length},create:function(a,d){var c=this.getLayerViewPromise(d);if(c)return c;var b=this.creationRequests,f={deferred:new h(function(){var a=new g("cancelled:layerview-create",
"layerview creation cancelled",{layer:d});b.remove(f);f.creationPromise&&f.creationPromise.cancel(a);return a}),view:a,layer:d,started:!1};b.push(f);this.paused||this._processRequest(f);return f.deferred.promise},dispose:function(a){a.layer.destroyLayerView(a)},getLayerViewPromise:function(a){var d=this.creationRequests&&this.creationRequests.find(function(c){return c.layer===a});return d&&d.deferred.promise},_processRequest:function(a){if(!a.started){a.started=!0;var d=a.deferred,c=a.layer,b=a.view;
c.load().then(function(c){if(!d.isCanceled())return a.creationPromise=c.createLayerView(b),a.creationPromise}).then(function(b){return!d.isCanceled()?(a.creationPromise=m(b,function(a){return a.layerView?a.layerView:b}),a.creationPromise):b}).otherwise(function(a){d.isCanceled()||d.reject(new g("layerview:create-error","layerview creation failed",{layer:c,error:a}))}).then(function(b){this.creationRequests&&this.creationRequests.remove(a);d.isFulfilled()?b&&this.dispose(b):d.resolve(b);return b}.bind(this))}}})})},
"esri/views/BasemapView":function(){define(["../core/Accessoire","../core/Collection","../core/watchUtils"],function(a,h,m){return a.createSubclass({declaredClass:"esri.views.BasemapView",classMetadata:{properties:{view:{},baseLayerViews:{type:h},referenceLayerViews:{type:h}}},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},initialize:function(){this._loadingHdl=m.init(this,"view.map.basemap",this._loadBasemap)},destroy:function(){this.view=null;this._loadingHdl.remove();
this._loadingHdl=null},_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(a){a&&a.load()}})})},"esri/views/GroundView":function(){define(["../core/Accessoire","../core/Collection"],function(a,h){return a.createSubclass({declaredClass:"esri.views.GroundView",classMetadata:{properties:{view:{},layerViews:{type:h}}},getDefaults:function(){return{layerViews:[]}},destroy:function(){this.view=null},_suspendedGetter:function(){return this.view?this.view.suspended:
!0}})})},"esri/views/ui/DefaultUI":function(){define("../../core/watchUtils ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ./Component ./UI dojo/_base/lang dojo/dom-geometry".split(" "),function(a,h,m,n,g,k,f,e){return k.createSubclass({declaredClass:"esri.views.ui.DefaultUI",constructor:function(){this._addComponents=this._addComponents.bind(this);this._componentsWatcher=this._componentsWatcher.bind(this);this._updateViewAwareWidgets=this._updateViewAwareWidgets.bind(this)},getDefaults:function(){return f.mixin(this.inherited(arguments),
{components:[]})},initialize:function(){this._handles.add([a.init(this,"components",this._componentsWatcher),a.init(this,"view",this._updateViewAwareWidgets)])},_defaultPositionLookup:null,_componentsSetter:function(a,c){return a||[]},_findComponentPosition:function(a){if(!this._defaultPositionLookup){var c=e.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:c?"top-left":"top-right",zoom:c?"top-left":"top-right"}}return this._defaultPositionLookup[a]},_removeComponents:function(a){a.forEach(function(a){if(a=
this.find(a))this.remove(a),a.destroy()},this)},_updateViewAwareWidgets:function(a){this.components.forEach(function(c){if(c=(c=this.find(c))&&c.widget)c.viewModel&&c.viewModel.hasOwnProperty("view")?c.viewModel.view=a:c.hasOwnProperty("view")&&c.set("view",a)},this)},_componentsWatcher:function(a,c){this._removeComponents(c);this._addComponents(a)},_addComponents:function(a){this._accessorProps.initialized&&a.forEach(function(a){this.add(this._createComponent(a),this._findComponentPosition(a))},
this)},_createComponent:function(a){var c=this._createWidget(a);if(c)return new g({id:a,node:c})},_createWidget:function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("zoom"===a)return this._createZoom()},_createAttribution:function(){var a=new h({viewModel:{view:this.view}});a.startup();return a},_createCompass:function(){var a=new m({viewModel:{view:this.view}});a.startup();return a},_createZoom:function(){var a=new n({viewModel:{view:this.view}});
a.startup();return a}})})},"esri/widgets/Attribution":function(){define("../core/watchUtils ./Attribution/AttributionViewModel ./support/viewModelWiring ./Widget dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/on dojo/text!./Attribution/templates/Attribution.html".split(" "),function(a,h,m,n,g,k,f,e,d,c){var b={base:"esri-attribution",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",
link:"esri-attribution__link",clearFix:"esri-clearfix",interactive:"esri-interactive",hidden:"esri-hidden"};return n.createSubclass([g],{properties:{viewModel:{type:h},view:{dependsOn:["viewModel.view"]}},declaredClass:"esri.widgets.Attribution",baseClass:b.base,templateString:c,constructor:function(){this._attributionTextWatcher=this._attributionTextWatcher.bind(this);this._updateStatus=this._updateStatus.bind(this)},postCreate:function(){this.inherited(arguments);this.own(d(this._sourcesNode,k,
this._toggleOpenState.bind(this)),a.init(this.viewModel,"view.size",this._updateStatus),a.init(this.viewModel,"attributionText",this._attributionTextWatcher))},_css:b,_getViewAttr:m.createGetterDelegate("view"),_setViewAttr:m.createSetterDelegate("view"),_attributionTextWatcher:function(a){this._sourcesNode.innerHTML=a;this._updateStatus()},_updateStatus:function(){var a=this.domNode,c=this._sourcesNode,d=e.contains(a,b.open);e.remove(a,b.open);e.remove(c,b.sourcesOpen);e.remove(c,b.interactive);
f.set(c,{tabIndex:"",role:""});this._hasOverflowingText()&&(e.add(c,b.interactive),d&&(e.add(a,b.open),e.add(c,b.sourcesOpen)),f.set(c,{tabIndex:0,role:"button"}))},_hasOverflowingText:function(){var a=this._sourcesNode;return a.scrollWidth>a.clientWidth},_toggleOpenState:function(){e.contains(this._sourcesNode,b.interactive)&&e.toggle(this.domNode,b.open);this._updateStatus()}})})},"esri/widgets/Attribution/AttributionViewModel":function(){define("dojo/_base/lang ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/lang ../../core/watchUtils ../../geometry/Extent ../../geometry/support/webMercatorUtils".split(" "),
function(a,h,m,n,g,k,f,e){return h.createSubclass([m],{properties:{attributionText:{dependsOn:["items","itemDelimiter"],readOnly:!0},itemDelimiter:{},items:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Attribution.AttributionViewModel",constructor:function(){this._handles=new n;this._pendingAttributionItemsByLayerId={};this._attributionDataByLayerId={};this._updateAttributionItems=this._updateAttributionItems.bind(this)},getDefaults:function(){return a.mixin(this.inherited(arguments),
{items:[]})},initialize:function(){this._handles.add(k.init(this,"view",this._viewWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},_handles:null,_pendingAttributionItemsByLayerId:null,_attributionDataByLayerId:null,attributionText:null,_attributionTextGetter:function(){return this.items.join(this.itemDelimiter)},itemDelimiter:" | ",items:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_viewWatcher:function(a){var c=
this._handles;c&&c.remove();a&&(c.add([a.allLayerViews.on("change",function(a){this._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.id)}),this._updateAttributionItems())}.bind(this)),k.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))},_addLayerViews:function(a){a.forEach(function(a){this._handles.has(a.id)||this._handles.add(k.init(a,"suspended",this._updateAttributionItems),a.id)},this)},_updateAttributionItems:function(){var a=
[];this._getActiveLayerViews().forEach(function(c){var b=c.layer,e,f;b.hasAttributionData?(e=this._attributionDataByLayerId,e[b.uid]?(c=this._getDynamicAttribution(e[b.uid],this.view,b),this._isUnique(a,c)&&a.push(c)):(f=this._pendingAttributionItemsByLayerId,this._inProgress(f[b.uid])||(f[b.uid]=b.fetchAttributionData().then(function(a){a=this._createContributionIndex(a,this._isBingLayer(b));delete f[b.uid];e[b.uid]=a;this._updateAttributionItems()}.bind(this))))):(c=b.copyright,this._isUnique(a,
c)&&a.push(c))},this);this._itemsChanged(this.items,a)&&(this.items=a)},_itemsChanged:function(a,c){return a.length!==c.length||a.some(function(a,d){return a!==c[d]})},_inProgress:function(a){return a&&!a.isFulfilled()},_getActiveLayerViews:function(){return(this.get("view.allLayerViews")||[]).filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})},_isUnique:function(a,c){return c&&-1===a.indexOf(c)},_isBingLayer:function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")},
_createContributionIndex:function(a,c){var b=a.contributors,h={},k,m,n,r,s,x,v,l;if(!b)return h;for(r=0;r<b.length;r++)if(k=b[r],m=k.coverageAreas)for(s=0;s<m.length;s++){n=m[s];x=n.bbox;l=n.zoomMin-(c&&n.zoomMin?1:0);v=n.zoomMax-(c&&n.zoomMax?1:0);k={extent:e.geographicToWebMercator(new f({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2]})),attribution:k.attribution||"",score:g.isDefined(n.score)?n.score:100,id:r};for(n=l;n<=v;n++)h[n]=h[n]||[],h[n].push(k)}h.maxKey=Math.max.apply(null,Object.keys(h));return h},
_getDynamicAttribution:function(a,c,b){var e=c.extent;c=b.tileInfo.scaleToZoom(c.scale);var f,h;c=Math.min(a.maxKey,Math.round(c));if(!e||!g.isDefined(c)||-1>=c)return"";a=a[c];f=e.center.clone().normalize();h={};return a.filter(function(a){var b=!h[a.id]&&a.extent.contains(f);b&&(h[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],
function(a){function h(a,h){Array.isArray(h)||(h=[h]);return h.map(function(g){return a.viewModel.on(g,function(h){a.emit(g,h)})})}return{createGetterDelegate:function(a){var h="viewModel."+a;return function(){return this.get(h)}},createSetterDelegate:function(a){return function(h){var g=this.get("viewModel");g&&g.set(a,h)}},createMethodDelegate:function(a){var h="viewModel."+a;return function(){var a=this.get(h);if(a)return a.apply(this.viewModel,arguments)}},setUpEventDelegates:function(m,n){var g=
h(m,n),k=a.init(m,"viewModel",function(a,e){g.forEach(function(a){a.remove()});g.length=0;a&&(g=h(m,n));m.own.apply(m,g)});m.own(k)}}})},"esri/widgets/Widget":function(){define("../core/Accessor ../core/declare dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),function(a,h,m,n,g,k,f,e,d,c,b){function p(a){return function(b){this._set(a,b)}}function q(a,b){return function(c){u.call(this,a,b,c);this._set(a,
c)}}function u(a,b,e){(Array.isArray(b)?b:[b]).forEach(function(b){var f=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":k.isFunction(e)&&(e=e.bind(this));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?d.set(f,b,e):f.set(b,e);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(e));break;case "innerHTML":f.innerHTML=e;break;case "class":b=this._get(a),c.replace(f,e,b)}},this)}h.before(function(a,b){if(b.declaredClass===
t||h.hasMixin(a,t)){var c=b.properties;Object.keys(c).forEach(function(a){var b=c[a];var d=b.set;a="function"===typeof d?d:null===d?p(b.name):"string"===typeof d||"object"===typeof d?q(a,d):void 0;b.set=a})}});var t="esri.widgets._WidgetBase";return a.createSubclass([n],{properties:{"class":{},domNode:{},focused:{},id:{},srcNodeRef:{},style:{},widgetId:{}},declaredClass:t,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var c;(c=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):
null)&&Object.getOwnPropertyNames(c).forEach(function(a){b.setDefault(a,c[a],!0)},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=f.body(this.ownerDocument);g.add(this);this.buildRendering();this.__accessor__.initialize();a&&(this.set(a),b.ctorArgs=null);b.initialize();this.initialize();this.postCreate();if(this.domNode){var e;if((a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a)a.parentNode.replaceChild(this.domNode,
a),e=!0;d.set(this.domNode,{widgetId:this.id,id:this.id});e&&delete this.srcNodeRef}this._created=!0},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||g.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef);return k.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};if(a.srcNodeRef||b)a.srcNodeRef=e.byId(b||a.srcNodeRef);return a},destroy:function(){this._customWidgetBaseDestroy()},
postMixInProperties:m.prototype.postMixInProperties,buildRendering:m.prototype.buildRendering,postCreate:m.prototype.postCreate,startup:m.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,"class":"",_setClassAttr:{node:"domNode",type:"class"},domNode:null,id:"",srcNodeRef:null,style:null,_setStyleAttr:m.prototype._setStyleAttr,destroyDescendants:m.prototype.destroyDescendants,destroyRecursive:m.prototype.destroyRecursive,destroyRendering:m.prototype.destroyRendering,emit:m.prototype.emit,
on:function(a,c){return this.own(b(this.domNode,a,c))[0]},toString:m.prototype.toString,getChildren:m.prototype.getChildren,getParent:m.prototype.getParent,isLeftToRight:m.prototype.isLeftToRight,placeAt:m.prototype.placeAt,focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=
!0;this.domNode&&g.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);g.remove(this.id);this._destroyed=!0}}).createSubclass({properties:{viewModel:{},visible:{}},declaredClass:"esri.widgets.Widget",getDefaults:function(){return k.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},viewModel:null,
visible:!0,_setVisibleAttr:function(a){this._set("visible",a);c.toggle(this.domNode,"esri-hidden",!a)}})})},"esri/widgets/Compass":function(){define("../core/watchUtils ./Compass/CompassViewModel ./support/viewModelWiring ./Widget dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!./Compass/nls/Compass dojo/text!./Compass/templates/Compass.html".split(" "),function(a,h,m,n,g,k,f,e,d,c,b){var p={base:"esri-compass esri-widget-button",text:"esri-icon-font-fallback-text",
icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",interactive:"esri-interactive",disabled:"esri-disabled"};return n.createSubclass([g],{properties:{viewModel:{type:h},view:{dependsOn:["viewModel.view"]}},declaredClass:"esri.widgets.Compass",baseClass:p.base,templateString:b,constructor:function(){this._applyRotation=this._applyRotation.bind(this);this._handleClick=this._handleClick.bind(this);this._handleState=this._handleState.bind(this)},postCreate:function(){this.inherited(arguments);
this.own(a.init(this.viewModel,"state",this._handleState),a.when(this.viewModel,"orientation",this._applyRotation),this.on(k,this._handleClick))},_css:p,_i18n:c,_getViewAttr:m.createGetterDelegate("view"),_setViewAttr:m.createSetterDelegate("view"),reset:m.createMethodDelegate("reset"),_applyRotation:function(a){a="rotateZ("+a.z+"deg)";d.set(this._iconNode,{transform:a,mozTransform:a,webkitTransform:a,oTransform:a,msTransform:a})},_handleClick:function(){this.viewModel.reset()},_handleState:function(a){var b=
"disabled"===a;a="rotation"===a?"rotation":"compass";e.toggle(this.domNode,p.disabled,b);e.toggle(this.domNode,p.interactive,!b);f.set(this.domNode,"tabindex",b?"":0);e.toggle(this._iconNode,p.northIcon,a);e.toggle(this._iconNode,p.rotationIcon,!a)}})})},"esri/widgets/Compass/CompassViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils","dojo/_base/lang"],function(a,h,m,n){return a.createSubclass({declaredClass:"esri.widgets.CompassViewModel",properties:{canShowNorth:{dependsOn:["spatialReference"]},
orientation:{},spatialReference:{dependsOn:["view.spatialReference"]},state:{dependsOn:["view.ready","canShowNorth"]},view:{}},constructor:function(){this._handles=new h;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)},getDefaults:function(){return n.mixin(this.inherited(arguments),{orientation:{x:0,y:0,z:0}})},initialize:function(){this._handles.add(m.init(this,"view",
this._updateRotationWatcher))},destroy:function(){this._handles.destroy()},_handles:null,canShowNorth:!1,_canShowNorthGetter:function(){var a=this.spatialReference;return a&&(a.isWebMercator||4326===a.wkid)},orientation:null,spatialReference:null,_spatialReferenceGetter:function(){return this.get("view.spatialReference")||null},state:"disabled",_stateGetter:function(){return!this.get("view.ready")?"disabled":this.canShowNorth?"compass":"rotation"},view:null,reset:function(){var a=this.view;a&&a.ready&&
("2d"===a.type?a.goTo({rotation:0}):a.goTo({heading:0}))},_updateForRotation:function(a){void 0===a||null===a||(this.orientation={z:a})},_updateForCamera:function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})},_updateRotationWatcher:function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(m.init(this,"view.rotation",this._updateForRotation)):this._handles.add(m.init(this,"view.camera",this._updateForCamera)))}})})},"esri/widgets/Zoom":function(){define("../core/sniff ../core/watchUtils ./support/viewModelWiring ./Widget ./Zoom/ZoomViewModel dijit/_TemplatedMixin dijit/a11yclick dojo/dom dojo/dom-class dojo/dom-attr dojo/on dojo/i18n!./Zoom/nls/Zoom dojo/text!./Zoom/templates/Zoom.html".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q){var u={base:"esri-zoom",button:"esri-button esri-widget-button",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon",isLayoutHorizontal:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus"};return n.createSubclass([k],{properties:{viewModel:{type:g},view:{dependsOn:["viewModel.view"]}},declaredClass:"esri.widgets.Zoom",baseClass:u.base,templateString:q,constructor:function(){this._handleZoomOutClick=
this._handleZoomOutClick.bind(this);this._handleZoomInClick=this._handleZoomInClick.bind(this);this._handleStateChange=this._handleStateChange.bind(this);this._handleZoomInChange=this._handleZoomInChange.bind(this);this._handleZoomOutChange=this._handleZoomOutChange.bind(this)},postCreate:function(){this.inherited(arguments);a("css-user-select")||e.setSelectable(this.domNode,!1);this.own(b(this._zoomInNode,f,this._handleZoomInClick),b(this._zoomOutNode,f,this._handleZoomOutClick),h.init(this.viewModel,
"state",this._handleStateChange),h.init(this.viewModel,"canZoomIn",this._handleZoomInChange),h.init(this.viewModel,"canZoomOut",this._handleZoomOutChange))},_css:u,_i18n:p,layout:"vertical",_setLayoutAttr:function(a){"horizontal"!==a&&(a="vertical");d.toggle(this.domNode,u.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)},_getViewAttr:m.createGetterDelegate("view"),_setViewAttr:m.createSetterDelegate("view"),zoomIn:m.createMethodDelegate("zoomIn"),zoomOut:m.createMethodDelegate("zoomOut"),
_handleStateChange:function(a){(a="ready"===a)?(c.set(this._zoomInNode,"tabindex",0),c.set(this._zoomOutNode,"tabindex",0),d.add(this._zoomInNode,u.interactive),d.add(this._zoomOutNode,u.interactive)):(c.remove(this._zoomInNode,"tabindex"),c.remove(this._zoomOutNode,"tabindex"),d.remove(this._zoomInNode,u.interactive),d.remove(this._zoomOutNode,u.interactive));d.toggle(this.domNode,u.disabled,!a)},_handleZoomInChange:function(a){d.toggle(this._zoomInNode,u.disabled,!a);d.toggle(this._zoomInNode,u.interactive,
a)},_handleZoomOutChange:function(a){d.toggle(this._zoomOutNode,u.disabled,!a);d.toggle(this._zoomOutNode,u.interactive,a)},_handleZoomInClick:function(){this.viewModel.zoomIn()},_handleZoomOutClick:function(){this.viewModel.zoomOut()}})})},"esri/widgets/Zoom/ZoomViewModel":function(){define(["../../core/Accessor"],function(a){return a.createSubclass({properties:{state:{dependsOn:["view.ready"],readOnly:!0},canZoomIn:{dependsOn:["view.ready","view.scale"],readOnly:!0},canZoomOut:{dependsOn:["view.ready",
"view.scale"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Zoom.ZoomViewModel",constructor:function(){this.zoomIn=this.zoomIn.bind(this);this.zoomOut=this.zoomOut.bind(this)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_canZoomInGetter:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),m=this.get("view.constraints.effectiveMaxScale");return 0===m||a>m},_canZoomOutGetter:function(){if("2d"!==this.get("view.type"))return!0;
var a=this.get("view.scale"),m=this.get("view.constraints.effectiveMinScale");return 0===m||a<m},zoomIn:function(){this.canZoomIn&&this._zoomToFactor(0.5)},zoomOut:function(){this.canZoomOut&&this._zoomToFactor(2)},_zoomToFactor:function(a){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*a})}})})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/typescript ../../core/Accessor dojo/dom dojo/dom-class".split(" "),
function(a,h,m,n,g,k,f,e){return function(a){function c(){a.apply(this,arguments);this.widget=this.node=this.id=null}m(c,a);c.prototype.destroy=function(){this.widget?this.widget.destroy():this.node=null};n([g.shared("esri.views.ui.Component")],c.prototype,"declaredClass",void 0);n([g.property({get:function(){return this._get("id")||this.get("node.id")}})],c.prototype,"id",void 0);n([g.property({set:function(a){var c=this._get("node");a!==c&&(this._set("widget",null),a&&(this._set("widget",a.domNode?
a:null),a=a.domNode||f.byId(a),e.add(a,"esri-component")),c&&e.remove(c,"esri-component"),this._set("node",a))}})],c.prototype,"node",void 0);n([g.property({readOnly:!0})],c.prototype,"widget",void 0);return c=n([g.subclass()],c)}(k)})},"esri/core/accessorSupport/typescript":function(){define(["../declare","../typescript","../JSONSupport","dojo/_base/lang"],function(a,h,m,n){function g(a,f){if(!a)return f;if(!f)return a;for(var e in f){var d=a[e],c=f[e];Array.isArray(c)&&Array.isArray(d)?a[e]=d.concat(c):
a[e]="object"===typeof c&&"object"===typeof d?g(d,c):c}return a}return{subclass:function(k,f){return function(e){e=h.declareDefinition(e,k);d&&(e.instanceMembers.properties=g(d,e.instanceMembers.properties));var d=e.instanceMembers.properties;if(d)for(var c in d){var b=d[c];b&&(!b.reader&&b.type)&&(b.type===Date?b.reader=function(a){return null!=a?new Date(a):null}:-1!==b.type._meta.bases.indexOf(m)&&(b.reader=function(a){return function(b){return a.fromJSON(b)}}(b.type)))}return n.mixin(a(e.bases,
e.instanceMembers),e.classMembers)}},shared:h.shared,property:function(a){return function(f,e){var d=Object.getPrototypeOf(f),d=d&&d.properties;if(!f.properties||f.properties===d)f.properties={};f.properties=f.properties||{};f.properties[e]=a||{}}}}})},"esri/views/ui/UI":function(){define("../../core/Accessoire ../../core/HandleRegistry ../../core/watchUtils ./Component dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(a,h,m,n,g,k,f,e){var d={left:0,top:0,bottom:0,
right:0},c={bottom:30,top:15,right:15,left:15};return a.createSubclass({classMetadata:{properties:{height:{readOnly:!0,dependsOn:["view.height"]},width:{readOnly:!0,dependsOn:["view.width"]}}},declaredClass:"esri.views.ui.UI",constructor:function(){this._components=[];this._handles=new h;this._initContainers()},getDefaults:function(){return g.mixin(this.inherited(arguments),{padding:c})},initialize:function(){this._handles.add(m.init(this,"view.padding, container",this._applyViewPadding.bind(this)),
m.init(this,"padding",this._applyUIPadding.bind(this)))},destroy:function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},_cornerNameToContainerLookup:null,_positionNameToContainerLookup:null,_components:null,_handles:null,container:null,_containerSetter:function(a,c){if(a===c)return a;a&&(k.add(a,"esri-ui"),this._attachContainers(a));c&&(k.remove(c,"esri-ui"),e.set(c,{top:"",bottom:"",left:"",right:""}),f.empty(c));return a},
_heightGetter:function(){var a=this.get("view.height")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.top+c.bottom),0)},_paddingSetter:function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:g.mixin({},c,a)},view:null,_widthGetter:function(){var a=this.get("view.width")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.left+c.right),0)},add:function(a,c){var d;if(Array.isArray(a))a.forEach(function(a){this.add(a,c)},this);else if(c&&"object"===
typeof c&&(d=c.index,c=c.position),a&&(!c||this._isValidPosition(c))){if(!a.isInstanceOf||!a.isInstanceOf(n))a=new n({node:a});this._place({component:a,position:c,index:d});this._components.push(a)}},remove:function(a){if(a){if(Array.isArray(a))return a.map(this.remove,this);if(a=this.find(a)){var c=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(c,1)[0]}}},empty:function(a){if(Array.isArray(a))return a.map(function(a){return this.empty(a).reduce(function(a,
b){return a.concat(b)})},this);a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!k.contains(a,"esri-ui-corner")},this).map(this.remove,this);if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)},move:function(a,c){if(!c||this._isValidPosition(c)){var d=this.remove(a);d&&this.add(d,c)}},find:function(a){return!a?null:a.isInstanceOf&&a.isInstanceOf(n)?
this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a)},_getViewPadding:function(){return this.get("view.padding")||d},_attachContainers:function(a){f.place(this._innerContainer,a);f.place(this._manualContainer,a)},_initContainers:function(){var a=f.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),c=f.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d,e,h,k;d=f.create("div",{className:"esri-ui-top-left esri-ui-corner"},
a);e=f.create("div",{className:"esri-ui-top-right esri-ui-corner"},a);h=f.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a);k=f.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=c;this._cornerNameToContainerLookup={"top-left":d,"top-right":e,"bottom-left":h,"bottom-right":k};this._positionNameToContainerLookup=g.mixin({manual:c},this._cornerNameToContainerLookup)},_isValidPosition:function(a){return!!this._positionNameToContainerLookup[a]},
_place:function(a){var c=a.component,d=a.position||"manual";a=a.index;var e=this._positionNameToContainerLookup[d],d="bottom-right"===d,f,g;-1<a?(f=e.children,0===a?this._placeComponent(c,e,d?"last":"first"):(g=a>=f.length)?this._placeComponent(c,e,d?"first":"last"):(a=d?f.length-1-a:a,a=f[a],this._placeComponent(c,a,d?"after":"before"))):this._placeComponent(c,e,d?"first":"last")},_placeComponent:function(a,c,d){a.widget?(a.widget.placeAt(c,d),a.widget.startup()):f.place(a.node,c,d)},_applyViewPadding:function(){var a=
this.container;a&&e.set(a,this._toPxPosition(this._getViewPadding()))},_applyUIPadding:function(){this._innerContainer&&e.set(this._innerContainer,this._toPxPosition(this.padding))},_toPxPosition:function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}},_toPxUnit:function(a){return 0===a?0:a+"px"},_findByComponent:function(a){var c=null,d;this._components.some(function(e){(d=e===a)&&(c=e);return d});return c},_findById:function(a){var c=
null,d;this._components.some(function(e){(d=e.id===a)&&(c=e);return d});return c},_findByNode:function(a){var c=null,d;this._components.some(function(e){(d=e.node===a)&&(c=e);return d});return c}})})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessoireSupport/typescript dojo/_base/lang ../../core/Accessoire ../../core/watchUtils ../../core/HandleRegistry".split(" "),function(a,h,m,n,g,
k,f,e,d){return function(a){function b(b){a.call(this)}m(b,a);b.prototype.dojoConstructor=function(){this._handles=new d;this._extent=this._spatialReference=this._waitTask=null;this._isStarted=this._isDone=!1};b.prototype.normalizeCtorArgs=function(a){a=k.mixin({},a);this._view=a.view;delete a.view;return a};b.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),
this._handles=null,this._isStarted=!1);this._cancelLoading()};b.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._spatialReference=null;this.notifyChange("spatialReference");this._extent=null;this.notifyChange("extent");this._isDone=!1;this.notifyChange("isDone")};b.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0;b<this.mapCollectionPaths.length;b++)this._handles.add(e.on(this._view,this.mapCollectionPaths[b],
"change",a,a,a))};b.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};b.prototype._ensureLoadedOwnersFromCollectionName=function(a){a=this._ownerNameFromCollectionName(a).split(".");for(var b,c=0;c<a.length;c++){b=this.get(a.slice(0,c+1).join("."));if(!b)break;if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()}}return{owner:b}};b.prototype._cancelLoading=function(){this._waitTask=null};b.prototype._updateWhen=function(a){var b=
this,c=!0,d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};b.prototype._updateLayerChange=function(){!this.spatialReference&&this._isDone&&(this._isDone=!1,this.notifyChange("isDone"));this._update()};b.prototype._update=function(){this._cancelLoading();if(!this._isDone){this._isDone=!0;for(var a=0;a<this.mapCollectionPaths.length;a++){var b=this.mapCollectionPaths[a],c=this._ensureLoadedOwnersFromCollectionName(b);if(c.loading&&!this._updateWhen(c.loading)){this._isDone=
!1;break}if((c=c.owner)&&(!c.isRejected||!c.isRejected()))if((b=this.view.get(b))&&this._processSpatialReferenceSources(b))break}this._isDone&&this.notifyChange("isDone")}};b.prototype._processSpatialReferenceSources=function(a){for(var b=0;b<a.length;b++){var c=a.getItemAt(b);if(c.load&&!c.isFulfilled()&&!this._updateWhen(c.load()))return this._isDone=!1,!0;if(!c.load||c.isResolved()){var d=c.fullExtent;if((c.spatialReference||!this._extent)&&d)this._extent=d,this.notifyChange("extent");if(c.spatialReference)return this._spatialReference=
c.spatialReference,this.notifyChange("spatialReference"),!0;if(c.layers&&this._processSpatialReferenceSources(c.layers))return!0}}return!1};n([g.shared("esri.views.support.DefaultsFromMap")],b.prototype,"declaredClass",void 0);n([g.shared(["map.basemap.baseLayers","map.layers","map.ground.layers"])],b.prototype,"defaultMapCollectionPaths",void 0);n([g.property({readOnly:!0,getter:function(){return this._isDone}})],b.prototype,"isDone",void 0);n([g.property({readOnly:!0,getter:function(){return this._view}})],
b.prototype,"view",void 0);n([g.property({readOnly:!0,getter:function(){return this._spatialReference}})],b.prototype,"spatialReference",void 0);n([g.property({readOnly:!0,getter:function(){return this._extent}})],b.prototype,"extent",void 0);n([g.property({dependsOn:["view.defaultsFromMapCollectionPaths"],getter:function(){return this.view.defaultsFromMapCollectionPaths||this.defaultMapCollectionPaths}})],b.prototype,"mapCollectionPaths",void 0);return b=n([g.subclass()],b)}(f)})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widget ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner ./Message".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b,p,q,u,t,r,s,x,v,l,w,B,y,C,E){var z={base:"esri-popup",container:"esri-container",invisible:"esri-invisible",showDock:"esri-show-dock",docked:"esri-docked",dockedTopLeft:"esri-docked-top-left",dockedTopCenter:"esri-docked-top-center",dockedTopRight:"esri-docked-top-right",dockedBottomLeft:"esri-docked-bottom-left",dockedBottomCenter:"esri-docked-bottom-center",dockedBottomRight:"esri-docked-bottom-right",dockToLeft:"esri-dock-to-left",dockToRight:"esri-dock-to-right",
dockToTop:"esri-dock-to-top",dockToBottom:"esri-dock-to-bottom",menuOpen:"esri-menu-open",shadow:"esri-popup-shadow",main:"esri-popup-main",header:"esri-popup-header",headerButtons:"esri-popup-header-buttons",hidden:"esri-hidden",content:"esri-popup-content",showContent:"esri-show-content",footer:"esri-footer",showFooter:"esri-show-footer",title:"esri-title",showTitle:"esri-show-title",btn:"esri-button",icon:"esri-popup-icon",iconText:"esri-icon-font-fallback-text",close:"esri-close",closeIcon:"esri-close-icon esri-icon-close",
collapseIcon:"esri-down-icon esri-icon-down",dockBtn:"esri-dock",dockIcon:"esri-dock-icon",dockIconTop:"esri-icon-maximize",dockIconBottom:"esri-icon-dock-bottom",dockIconLeft:"esri-icon-dock-left",dockIconRight:"esri-icon-dock-right",dockIconText:"esri-dock-text",undockIcon:"esri-undock-icon esri-icon-minimize",undockIconText:"esri-undock-text",actions:"esri-actions",action:"esri-action",actionImage:"esri-action-image",actionText:"esri-action-text",pagination:"esri-pagination",paginationDocked:"esri-pagination-docked",
paginationDockedButtons:"esri-pagination-docked-buttons",showPagination:"esri-show-pagination",pointer:"esri-pointer",pointerDirection:"esri-pointer-direction",previous:"esri-previous",previousIconLTR:"esri-previous-icon-ltr esri-icon-left-triangle-arrow",previousIconRTL:"esri-previous-icon-rtl esri-icon-right-triangle-arrow",next:"esri-next",nextIconLTR:"esri-next-icon-ltr esri-icon-right-triangle-arrow",nextIconRTL:"esri-next-icon-rtl esri-icon-left-triangle-arrow",pageMenu:"esri-page-menu",pageMenuList:"esri-page-menu-list",
pageMenuItem:"esri-page-menu-item",pageMenuViewport:"esri-page-menu-viewport",pageMenuHeader:"esri-page-menu-header",pageMenuNote:"esri-page-menu-note",pageMenuSelected:"esri-selected",pageMenuBtn:"esri-page-menu-button",pageMenuIcon:"esri-page-menu-icon esri-icon-layer-list",pageMenuTitle:"esri-page-menu-title",pageMenuCheckMark:"esri-page-menu-check-mark esri-icon-check-mark",pageText:"esri-page-text",zoomIcon:"esri-icon-zoom-in-magnifying-glass",top:"esri-top",bottom:"esri-bottom",left:"esri-left",
right:"esri-right",hasPopupRenderer:"esri-has-popup-renderer",hasPromiseFeatures:"esri-has-promise-features",pendingPromises:"esri-pending-promises",pendingPromisesResult:"esri-pending-promises-result",featureUpdated:"esri-feature-updated",loadingContainer:"esri-loading-container",loadingIcon:"esri-rotating esri-icon-loading-indicator"},L={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},H=
{buttonEnabled:!0,position:L.auto,breakpoint:{width:544}},K={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return h.createSubclass([e],{properties:{actions:{dependsOn:["viewModel.actions"]},alignment:{},autoPanEnabled:{},content:{dependsOn:["viewModel.content"]},closeOnViewChangeEnabled:{},currentDockPosition:{readOnly:!0},dockOptions:{},featureCount:{dependsOn:["viewModel.featureCount"]},features:{dependsOn:["viewModel.features"]},
location:{dependsOn:["viewModel.location"]},messageEnabled:{},paginationEnabled:{},promises:{dependsOn:["viewModel.promises"]},selectedFeature:{dependsOn:["viewModel.selectedFeature"]},selectedFeatureIndex:{dependsOn:["viewModel.selectedFeatureIndex"]},spinnerEnabled:{},title:{dependsOn:["viewModel.title"]},view:{dependsOn:["viewModel.view"]},viewModel:{type:m},visible:{}},declaredClass:"esri.widgets.Popup",baseClass:z.base,templateString:u,constructor:function(){this._handleRegistry=new n;this._contentStorage=
v.create("div")},postCreate:function(){var b=this;this.inherited(arguments);var d=this.viewModel;this.own(g.whenTrue(d,"view.ready",function(){this._wireUpView(this.viewModel.view)}.bind(this)),g.init(d,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),g.init(d,"features",this._updateFeatures.bind(this)),g.init(d,"selectedFeatureIndex,selectedFeature",function(){var a=
this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),g.init(d,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),g.init(d,"actions",function(a){this._updateActions(a,this.viewModel.features);this._actionChangeListener(a)}.bind(this)),g.init(d,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),
g.init(d,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this.reposition()}.bind(this)),c(this._dockNode,f,this._toggleDock.bind(this)),c(this._closeNode,f,this.close.bind(this)),c(this._previousNode,f,d.previous.bind(d)),c(this._previousDockedNode,f,d.previous.bind(d)),c(this._nextNode,f,d.next.bind(d)),c(this._nextDockedNode,f,d.next.bind(d)),c(this._pageMenuNode,f,this._togglePageMenu.bind(this)),c(this._pageMenuDockedNode,f,this._togglePageMenu.bind(this)),c(this._pageMenuInfoNode,
f,this._togglePageMenu.bind(this)),c(this._paginationNode,c.selector("li",f),function(){b._selectFeature(this)}),c(this._paginationNode,c.selector("li","keyup"),function(a){b._keyupFeature(a,this)}),c(this._actionsNode,c.selector("[data-action-index]",f),function(){b._actionEvent(this)}),c(d,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));a.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroyMessage();
this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null},_getActionsAttr:a.createGetterDelegate("actions"),_setActionsAttr:a.createSetterDelegate("actions"),alignment:"top",_setAlignmentAttr:function(a){this._set("alignment",a);this.reposition()},autoPanEnabled:!0,_getContentAttr:a.createGetterDelegate("content"),_setContentAttr:a.createSetterDelegate("content"),closeOnViewChangeEnabled:!1,dockOptions:H,_setDockOptionsAttr:function(a){var b=r.clone(H),
c=this.viewModel.get("view.breakpoints"),d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=r.mixin({},b,a);b=r.mixin({},b.breakpoint,d);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=r.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)},dockEnabled:!1,_setDockEnabledAttr:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this.reposition()},currentDockPosition:null,_getFeatureCountAttr:a.createGetterDelegate("featureCount"),
_setFeatureCountAttr:a.createSetterDelegate("featureCount"),_getFeaturesAttr:a.createGetterDelegate("features"),_setFeaturesAttr:a.createSetterDelegate("features"),_getLocationAttr:a.createGetterDelegate("location"),_setLocationAttr:a.createSetterDelegate("location"),messageEnabled:!0,_setMessageEnabledAttr:function(a){this._set("messageEnabled",a);this._createMessage(a,this.viewModel.view)},paginationEnabled:!0,_setPaginationEnabledAttr:function(a){var b=this.viewModel;this._set("paginationEnabled",
a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()},_getPromisesAttr:a.createGetterDelegate("promises"),_setPromisesAttr:a.createSetterDelegate("promises"),_getSelectedFeatureAttr:a.createGetterDelegate("selectedFeature"),_setSelectedFeatureAttr:a.createSetterDelegate("selectedFeature"),_getSelectedFeatureIndexAttr:a.createGetterDelegate("selectedFeatureIndex"),_setSelectedFeatureIndexAttr:a.createSetterDelegate("selectedFeatureIndex"),
spinnerEnabled:!0,_setSpinnerEnabledAttr:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)},_getTitleAttr:a.createGetterDelegate("title"),_setTitleAttr:a.createSetterDelegate("title"),_getViewAttr:a.createGetterDelegate("view"),_setViewAttr:a.createSetterDelegate("view"),visible:!1,_setVisibleAttr:function(a){this._set("visible",a);s.remove(this._containerNode,z.menuOpen);s.toggle(this.domNode,z.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);
this.reposition()},_css:z,_i18n:q,_hideActionsTextNum:3,_animationDelay:10,_popupRendererVMs:[],clear:a.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:a.createMethodDelegate("next"),previous:a.createMethodDelegate("previous"),reposition:function(){this._positionPopup();return this._moveIntoView()},open:function(a){a=r.mixin({updateLocationEnabled:!1},a);this.viewModel.set(a);this.set("visible",!0)},triggerAction:a.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(K.actionsChange);
a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features)}.bind(this))],K.actionsChange)},_actionEvent:function(a){var b=this.viewModel;if(a=x.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,b){this._updateActionButtons(a);
this._updateFooterVisibility(b,a);this.reposition()},_updateActionButtons:function(a){this._handleRegistry.remove(K.actions);if(this._actionsNode){var b=document.createDocumentFragment(),c=a.length;c&&a.forEach(function(a,d){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=z.zoomIcon);var e=v.create("div",{tabindex:"0",title:a.title},b);x.set(e,"data-action-index",d);s.add(e,[z.btn,z.action]);var f=v.create("span",{"aria-hidden":!0},e);s.add(f,z.icon);a.className&&s.add(f,a.className);a.image&&
(s.add(f,z.actionImage),w.set(f,"background-image","url("+a.image+")"));var h={className:z.actionText,textContent:a.title};c>=this._hideActionsTextNum&&(h.className=z.iconText);var k=v.create("span",h,e);this._handleRegistry.add([g.init(a,"visible",function(a){s.toggle(e,z.hidden,!a)}),g.init(a,"className",function(a,b){s.remove(f,b);s.add(f,a)}),g.init(a,"image",function(a){s.toggle(f,z.actionImage,!!a);w.set(f,"background-image",a?"url("+a+")":"")}),g.init(a,"title",function(a){a=a||"";x.set(e,
"title",a);x.set(k,"textContent",a)})],K.actions)},this);v.place(b,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,b;if(a.location&&this.visible){var c=a.location;c&&a.get("view.ready")&&(b=a.view.toScreen(c))}return b},_calculatePosition:function(a,b){var c,d,e,f,g,h;if(a&&b){e=b.pointer.h;f=b.pointer.w;c=b.popup.h;if("top"===b.alignment||"bottom"===b.alignment)c+=e;d=b.popup.w;if("left"===b.alignment||"right"===b.alignment)d+=f;switch(b.alignment){case "bottom":e=
a.y+e;f=a.x-d/2;g=a.y+c;h=f+d;break;case "left":e=a.y-c/2;f=a.x-d;g=e+c;h=f+d;break;case "right":e=a.y-c/2;f=a.x+f;g=e+c;h=a.x+d;break;default:e=a.y-c,f=a.x-d/2,g=e+c,h=f+d}return{height:c,width:d,top:e,left:f,bottom:g,right:h}}},_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){var c=new y({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(c)},this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(K.paginationTitles);
this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,b){this._handleRegistry.remove(K.paginationTitles);if(a){var c=a.length;this._paginationNode&&x.set(this._paginationNode,"innerHTML","");1<c&&(c=t.substitute({total:c},this._i18n.selectedFeatures),x.set(this._pageMenuInfoNode,"textContent",c),a.forEach(function(a,c){var d=this._i18n.untitled,e=v.create("li",{role:"menu-item",className:z.pageMenuItem},this._paginationNode);c===
b?(x.set(e,"aria-label",q.selectedFeature),s.add(e,z.pageMenuSelected)):x.set(e,"data-feature-index",c);var f=v.create("span",{className:z.pageMenuTitle,innerHTML:d},e);if(d=this._popupRendererVMs[c])d=g.init(d,"title",function(a){x.set(f,"innerHTML",a)}),this._handleRegistry.add(d,K.paginationTitles);c===b&&v.create("span",{className:z.pageMenuCheckMark},f)},this))}},_createMessage:function(a,b){this._destroyMessage();a&&b&&(this._message=new E({visible:!1,text:this._i18n.noFeaturesFound,viewModel:{view:b}}),
this._message.startup(),v.place(this._message.domNode,b.root))},_createSpinner:function(a,b){this._destroySpinner();a&&b&&(this._spinner=new C({visible:!1,viewModel:{view:b}}),this._spinner.startup(),v.place(this._spinner.domNode,b.root))},_updateContent:function(a){a&&a.nodeName?(v.place(a,this._contentStorage),v.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),x.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;s.toggle(this._containerNode,
z.hasPopupRenderer,!!(this._popupRenderer&&this._popupRenderer.viewModel.content===a));s.toggle(this._containerNode,z.showContent,!!a);s.remove(this._containerNode,z.menuOpen)},_destroyPopupRenderer:function(){this._popupRenderer&&!this._popupRenderer._destroyed&&(this._handleRegistry.remove(K.popupRenderer),this._popupRenderer.destroy(),this._popupRenderer=null)},_destroyMessage:function(){this._message&&(this._message.destroyRendering(),this._message.destroy(),this._message=null)},_destroySpinner:function(){this._spinner&&
(this._spinner.destroyRendering(),this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},_togglePopupDocking:function(a){s.remove(this._containerNode,z.menuOpen);s.toggle(this._containerNode,z.docked,!!a);x.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,c){var d=a[0];a=a[1];var e=b[0];b=b[1];var f=
c.width;c=c.height;return d<=f&&e>f||d>f&&e<=f||a<=c&&b>c||a>c&&b<=c},_determineDockPosition:function(a){var b=this.viewModel,c=b.view,d=c&&c.padding,d=c&&c.width-d.left-d.right;return(b=c&&b.get("view.breakpoints"))&&d<=b.xsmall?a.bottomCenter:!this.isLeftToRight()?a.topLeft:a.topRight},_updateDockPosition:function(a){s.remove(this._containerNode,[z.dockedTopLeft,z.dockedTopCenter,z.dockedTopRight,z.dockedBottomLeft,z.dockedBottomCenter,z.dockedBottomRight,z.dockToTop,z.dockToBottom,z.dockToLeft,
z.dockToRight]);var b,c,d;b=a.position;b=b===L.auto?this._determineDockPosition(L):b;switch(b){case L.topLeft:c=z.dockedTopLeft;d=z.dockToLeft;break;case L.topCenter:c=z.dockedTopCenter;d=z.dockToTop;break;case L.bottomLeft:c=z.dockedBottomLeft;d=z.dockToLeft;break;case L.bottomCenter:c=z.dockedBottomCenter;d=z.dockToBottom;break;case L.bottomRight:c=z.dockedBottomRight;d=z.dockToRight;break;default:c=z.dockedTopRight,d=z.dockToRight}s.toggle(this._containerNode,d,!!a.buttonEnabled);this.dockEnabled?
(s.add(this._containerNode,c),this._set("currentDockPosition",b)):this._set("currentDockPosition",null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},_toggleDockButton:function(a){var b=this._containerNode;s.toggle(b,z.showDock,!!a.buttonEnabled);s.toggle(b,z.docked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){var c=this._isPaginationEnabled(a)||b&&b.length;s.toggle(this._containerNode,z.showFooter,!!c)},_isPaginationEnabled:function(a){return this.paginationEnabled&&
a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,b);this._createPaginationNodes(a,b);s.toggle(this._containerNode,z.showPagination,this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,c,d){var e=0<a&&0===b;a&&(c.length&&a===c.length)&&this.set("visible",!1);s.toggle(this._containerNode,z.pendingPromises,!!a);s.toggle(this._containerNode,z.pendingPromisesResult,!!e);s.toggle(this._containerNode,z.hasPromiseFeatures,!!b);this._message&&this._message.set({visible:!1});
e?this._spinner&&(this._spinner.set({visible:!0}),this._spinner.viewModel.point=d):(this._spinner&&(this._spinner.viewModel.point=null),b&&!this.visible&&this.set("visible",!0),!b&&(c&&c.length)&&this._message&&(this._message.set({visible:!0}),this._message.viewModel.point=d))},_moveIntoView:function(){var a=new p;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var c=this._getLocationScreenPoint();
if(c){var d=this._sizePopup(),d=this._calculatePosition(c,d),e=b.width,f=b.height,g=b.padding,h=b.ui.padding;if(this.autoPanEnabled){if(c.y<g.top||c.y>f-g.bottom||c.x<g.left||c.x>e-g.right)return a.centerAtLocation();if(!this.dockEnabled&&d&&d.width<b.width&&d.height<b.height){var m=c=0;d.top<g.top?m=-d.top+h.top+g.top:d.bottom>f-g.bottom&&(m=-(d.bottom-f+g.bottom)-h.bottom);d.left<g.left?c=d.left-h.left-g.left:d.right>e-g.right&&(c=d.right-e+g.right+h.right);if(c||m)return d=k.translateBy(k.create(),
b.viewpoint,[c,m]),b.goTo(d,a.animationOptions)}}}}}}.bind(this))},_positionPopup:function(){var a=this.viewModel.view;if(a){s.remove(this._containerNode,[z.top,z.bottom,z.left,z.right]);var b;switch(this.alignment){case "bottom":b=z.bottom;break;case "right":b=z.right;break;case "left":b=z.left;break;default:b=z.top}s.add(this._containerNode,b);b=this._getLocationScreenPoint();var c=this._sizePopup();if(b=this._calculatePosition(b,c))a=a.padding,w.set(this._containerNode,this.dockEnabled?{left:a.left?
a.left+"px":"",top:a.top?a.top+"px":"",right:a.right?a.right+"px":"",bottom:a.bottom?a.bottom+"px":""}:{left:b.left+"px",top:b.top+"px",right:"",bottom:""})}},_removeContent:function(){this._destroyPopupRenderer();x.set(this._bodyContentNode,"innerHTML","");x.set(this._titleNode,"innerHTML","");x.set(this._pageTextNode,"innerHTML","");x.set(this._pageTextDockedNode,"innerHTML","");s.remove(this._containerNode,[z.showTitle,z.showContent])},_keyupFeature:function(a,c){var e=a.keyCode;if(e===d.UP_ARROW||
e===d.DOWN_ARROW){a.stopPropagation();a.preventDefault();var f=b("li",this._paginationNode),g=f.length,h=f.indexOf(c),k;e===d.UP_ARROW?k=h-1:e===d.DOWN_ARROW&&(k=h+1);0>k?k=g-1:k>=g&&(k=0);f[k].focus()}},_selectFeature:function(a){var b=this.viewModel,c=-1;(a=x.get(a,"data-feature-index"))&&(c=parseInt(a,10));-1!==c&&(b.selectedFeatureIndex=c);s.remove(this._containerNode,z.menuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(a){var b=this.viewModel,d,e="",f="";if(a){if(d=a.layer)e=
d.id||"",f=d.name||"";if(!this._popupRenderer||this._popupRenderer&&this._popupRenderer._destroyed){this._handleRegistry.remove(K.popupRenderer);this._popupRenderer=new B;d=this._popupRenderer.viewModel.watch("title",function(a){b.title=a});var g=this._popupRenderer.viewModel.watch("content",function(a){b.content=a?this._popupRenderer.domNode:null}.bind(this)),h=c(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([d,g,h],K.popupRenderer);this._popupRenderer.startup()}this._popupRenderer.viewModel.graphic=
a}this._toggleFeatureUpdatedClass();x.set(this._containerNode,"data-layer-name",f);x.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&
b.view.ui.height<=a.height)},_sizePopup:function(){var a=l.getContentBox(this._containerNode),b=l.getContentBox(this._pointerNode);return{alignment:this.alignment,popup:a,pointer:b}},_updateTitle:function(a){a=a||"";x.set(this._titleNode,"innerHTML",a);s.toggle(this._containerNode,z.showTitle,!!a);s.remove(this._containerNode,z.menuOpen)},_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){s.toggle(this._containerNode,z.menuOpen);var a=s.contains(this._containerNode,
z.menuOpen);x.set(this._pageMenuSectionNode,"aria-hidden",!a);var c=b("li",this._paginationNode),d=c[0];c.forEach(function(b){x.set(b,"tabIndex",a?"0":"")});a?d&&d.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var c="";this._isPaginationEnabled(a)&&(c=t.substitute({index:b+1,total:a.length},this._i18n.pageText));this._pageTextNode&&x.set(this._pageTextNode,{textContent:c});this._pageTextDockedNode&&x.set(this._pageTextDockedNode,{textContent:c})},_toggleFeatureUpdatedClass:function(){s.remove(this._containerNode,
z.featureUpdated);this._containerNode.offsetWidth=this._containerNode.offsetWidth;s.add(this._containerNode,z.featureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},_wireUpView:function(a){this._handleRegistry.remove(K.view);this._viewPointEvent=null;if(a){var b="viewpoint";"3d"===a.type&&(b="camera");this._viewPointEvent=g.pausable(a,b,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),
a.watch("size",this._updateDockEnabledForViewSize.bind(this)),c(a,"resize",this.reposition.bind(this)),this._viewPointEvent],K.view);this._togglePopupLocationRepositioning(this.visible);this._createMessage(this.messageEnabled,a);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var c=this.get("viewModel.view.padding"),d=c.left+c.right,e=c.top+c.bottom,
c=[],f=[];c[0]=a[0]-d;c[1]=a[1]-e;f[0]=b[0]-d;f[1]=b[1]-e;d=this.dockOptions;this._dockingThresholdCrossed(c,f,d.breakpoint)&&this._setDockEnabledForViewSize(d);this._updateDockPosition(d)},_togglePopupLocationRepositioning:function(a){var b=this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils dojo/fx/easing dojo/_base/lang".split(" "),
function(a,h,m,n,g,k,f,e,d){var c={id:"zoom-to"};return h.createSubclass([n],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:m.ofType(a.Action)},animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{readOnly:!0},title:{},updateLocationEnabled:{},view:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},
zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new g},getDefaults:function(a){return d.mixin(this.inherited(arguments),{actions:[c],animationOptions:{duration:300,easing:e.quadInOut},promises:[]})},initialize:function(){this._handles.add(f.init(this,"view.scale",this._scaleWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[c],animationOptions:{duration:300,easing:e.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",
a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=0))},location:null,pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var c=this._get("promises");c&&c.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",
a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var c=null,d=this.features;d&&d.length&&(a=(a+d.length)%d.length,c=d[a]);this._set("selectedFeature",c);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(c,this.updateLocationEnabled)},
_stateGetter:function(){this._set("state",this.get("view.ready")?"ready":"disabled")},title:"",updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,zoomFactor:4,_zoomFactorSetter:function(a){var c=this.view;c&&this._setZoomScale(c.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){if(this.location&&this.view)return this.view.goTo({target:this.location,scale:this.view.scale},
this.animationOptions)},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){this.selectedFeatureIndex-=1;return this},zoomToLocation:function(){var a=this.view;if(a){var c=this.selectedFeature,d=c&&c.geometry,e=c&&c.symbol&&"3d"===a.type;d||e?(e={target:c},d&&("point"===d.type&&this._isScreenSize(c))&&
(e.scale=this.zoomScale,this.location=d)):e={target:this.location,scale:this.zoomScale};return a.goTo(e,this.animationOptions)}return k.resolve()},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var c=!0,d=this.view.getViewForGraphic(a);d&&d.whenGraphicBounds&&d.whenGraphicBounds(a).then(function(a){c=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return c},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=
null);var a=this.actions.filter(function(a){return!a.temporary},this),c=a,d=this.selectedFeature.getEffectivePopupTemplate();if(d&&d.actions){for(var c=d.actions,e=0;e<c.length;e++)c.getItemAt(e).temporary=!0;d.overwriteActions?this._originalActions=a:c=a.concat(c)}this.actions=c},_scaleWatcher:function(a){this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;
default:return null}},_selectedFeatureChange:function(a,c){a&&(c&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var c=0;a&&a.length&&(c=a.length);this._set("featureCount",c)},_setZoomScale:function(a,c){this._set("zoomScale",a/c)},_updateFeatures:function(a,c){if(a&&this.promises)if(!this._validatePromise(a)||c instanceof Error)console.error(this.declaredClass+":: Invalid promise");else if(c&&c.length){var d=
{};if(!this.features||!this.features.length)d.features=c,d.selectedFeatureIndex=0;else{var e=c.filter(function(a){return-1===this.features.indexOf(a)},this);d.features=this.features.concat(e)}this.set(d)}},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(a){var h={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return-1*a*(a-2)},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,
2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-0.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,
5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*(Math.PI/2))},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},
circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=2;return 1>a?-0.5*(Math.sqrt(1-Math.pow(a,2))-1):0.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){a-=1;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;a-=1;return-1*Math.pow(2,
10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)},elasticOut:function(a){return 0==a||1==a?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var h=0.3*1.5,g=h/4;if(1>a)return a-=1,-0.5*Math.pow(2,10*a)*Math.sin((a-g)*2*Math.PI/h);a-=1;return 0.5*Math.pow(2,-10*a)*Math.sin((a-g)*2*Math.PI/h)+1},bounceIn:function(a){return 1-h.bounceOut(1-a)},bounceOut:function(a){a<1/2.75?a=7.5625*Math.pow(a,2):a<2/2.75?a=7.5625*Math.pow(a-1.5/2.75,2)+0.75:
a<2.5/2.75?(a-=2.25/2.75,a=7.5625*Math.pow(a,2)+0.9375):(a-=2.625/2.75,a=7.5625*Math.pow(a,2)+0.984375);return a},bounceInOut:function(a){return 0.5>a?h.bounceIn(2*a)/2:h.bounceOut(2*a-1)/2+0.5}};a.setObject("dojo.fx.easing",h);return h})},"esri/views/2d/viewpointUtils":function(){define("./math/common ./math/mat2d ./math/vec2 ../../Viewpoint ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils".split(" "),
function(a,h,m,n,g,k,f,e,d,c,b){var p=6370997*Math.PI/180,q=180/Math.PI,u=function(b,c,d,e){return e&&(d&&!e.equals(d)&&e._canProject(d))&&e.isWebMercator?(e.isWebMercator?(d=c[1],89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999),d=Math.sin(a.toRadian(d)),b=m.set(b,6378137*a.toRadian(c[0]),3189068.5*Math.log((1+d)/(1-d)))):(d=a.toDegree(c[0]/6378137),b=m.set(b,d-360*Math.floor((d+180)/360),a.toDegree(0.5*Math.PI-2*Math.atan(Math.exp(-1*c[1]/6378137))))),b):m.copy(b,c)},t=function(a){return a.wkid?
a:a.spatialReference||k.WGS84},r=function(a,b){return b.type?m.set(a,b.x,b.y):m.copy(a,b)},s=function(a,b){return Math.max(a.width/b[0],a.height/b[1])*$(a.spatialReference)},x=function(a,b,g){var h;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new e(a);if(a.forEach)return a.reduce(function(a,c){return x(c,b,a)},g);if(Array.isArray(a)){for(h=0;h<a.length;h++)if(g=x(a[h],b,g),!g)return null;return g}a instanceof f?h=a:a.geometry&&(h=a.geometry);
if(!h)return null;a="point"===h.type?new d({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;if(!a||!c.canProject(a.spatialReference,b))return null;a=c.project(a,b);return g=g?g.union(a):a.clone()},v=function(a,b){if(!a)return new n({targetGeometry:new e,scale:0,rotation:0});var c=b.spatialReference,d=b.size,g=b.currentViewpoint,h=b.constraints,k=null;"esri.Viewpoint"===a.declaredClass?k=a:a.viewpoint?k=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&
(k=a.target);var l=null,p=null;if(k&&k.targetGeometry)p=k.targetGeometry;else if(a instanceof f)p=a;else if(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))p=x(a.center,c)||x(a.extent,c)||x(a.target,c)||x(a,c);!p&&g&&g.targetGeometry?p=g.targetGeometry:!p&&b.extent&&(p=b.extent);var q=t(p);c||(c=t(b.spatialReference||b.extent||p));l=p.center?p.center:p;l=r(m.create(),l);l=new e(u(l,l,q,c),c);c=null;c=k&&k.targetGeometry&&"point"===k.targetGeometry.type?k.scale:
a.hasOwnProperty("scale")?a.scale:a.hasOwnProperty("zoom")&&h&&h.effectiveLODs?h.zoomToScale(a.zoom):Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height?b.extent?s(b.extent,d):g.scale:s(p.extent,d);d=0;k?d=k.rotation:a.hasOwnProperty("rotation")?d=a.rotation:g&&(d=g.rotation);h&&(h.rotationEnabled||(d=0),h.snapToZoom&&(c=h.snapScale(c)),0!==h.effectiveMinScale&&(c=Math.min(h.effectiveMinScale,c)),0!==h.effectiveMaxScale&&(c=Math.max(h.effectiveMaxScale,c)));return new n({targetGeometry:l,
scale:c,rotation:d})},l=function(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a},w=function(a,b,c){if(!c)return m.scale(a,b,0.5);m.set(a,0.5*(b[0]-c.right+c.left),0.5*(b[1]-c.bottom+c.top));return a},B=function(){var a=m.create();return function(b,c,d){var e=c.targetGeometry;r(a,e);c=0.5*H(c);b.xmin=a[0]-c*d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;
return b}}(),y=function(a,b,c){a=Q(a,b,c);return h.invert(a,a)},C=function(){var a=m.create(),b=m.create();return function(c,d,e){r(a,d.targetGeometry);E(b,d,e);e=0.5*H(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}(),E=function(b,c,d){var e=a.toRadian(c.rotation)||0;c=Math.abs(Math.cos(e));e=Math.abs(Math.sin(e));return m.set(b,Math.round(d[1]*e+d[0]*c),Math.round(d[1]*c+d[0]*e))},z=function(){var a=m.create();
return function(b,c,d){return m.sub(b,R(b,c),w(a,c,d))}}(),L=function(){var b=h.create(),c=m.create();return function(d,e,f,g){var k=H(e);e=a.toRadian(e.rotation)||0;m.set(c,k,k);h.fromScaling(b,c);h.rotate(b,b,e);h.translate(b,b,z(c,f,g));h.translate(b,b,[0,g.top-g.bottom]);m.set(d,b[4],b[5]);return d}}(),H=function(a){return a.scale*K(a.targetGeometry.spatialReference)},K=function(a){return 1/(96*39.37*(b.getUnitValueForSR(a)||p))},$=function(a){return 96*39.37*(b.getUnitValueForSR(a)||p)},R=function(a,
b){return m.scale(a,b,0.5)},N=function(){var a=m.create(),b=m.create(),c=m.create();return function(d,e,f,g,k){m.negate(a,e);m.scale(b,f,0.5);m.set(c,1/g,-1/g);h.identity(d);h.translate(d,d,b);k&&h.rotate(d,d,k);h.scale(d,d,c);h.translate(d,d,a);return d}}(),Q=function(){var b=m.create();return function(c,d,e){var f=H(d),g=a.toRadian(d.rotation)||0;r(b,d.targetGeometry);return N(c,b,e,f,g)}}(),F=function(){var a=m.create();return function(b,c,d){var e=H(c);r(a,c.targetGeometry);return N(b,a,d,e,0)}}(),
D=function(){var a=m.create(),b=m.create(),c=m.create();return function(d,e,f){m.subtract(a,d,e);m.normalize(a,a);m.subtract(b,d,f);m.normalize(b,b);m.cross(c,a,b);d=Math.acos(m.dot(a,b)/(m.length(a)*m.length(b)))*q;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}(),S=function(){var a=m.create();return function(b,c,d,e){var f=b.targetGeometry;l(b,c);L(a,c,d,e);f.x+=a[0];f.y+=a[1];return b}}(),X=function(){var a=m.create();return function(b,c,d,e){var f=b.targetGeometry;l(b,c);L(a,c,d,e);f.x-=a[0];f.y-=a[1];
return b}}(),ha=function(){var a=m.create();return function(b,c,d){l(b,c);c=b.targetGeometry;var e=t(d),f=t(c);r(a,d);u(a,a,e,f);c.x=a[0];c.y=a[1];return b}}(),I=function(){var a=m.create();return function(b,c,d,e,f){f||(f="center");m.sub(a,d,e);m.scale(a,a,0.5);d=a[0];e=a[1];switch(f){case "center":m.set(a,0,0);break;case "left":m.set(a,-d,0);break;case "top":m.set(a,0,e);break;case "right":m.set(a,d,0);break;case "bottom":m.set(a,0,-e);break;case "top-left":m.set(a,-d,e);break;case "bottom-left":m.set(a,
-d,-e);break;case "top-right":m.set(a,d,e);break;case "bottom-right":m.set(a,d,-e)}U(b,c,a);return b}}(),G=function(){var a=m.create();return function(b,c,d,e,f){l(b,c);0!==d&&(O(a,e,c,f),b.scale=c.scale/d,M(a,a,b,f),U(b,b,m.set(a,a[0]-e[0],e[1]-a[1])));return b}}(),W=function(){var a=m.create();return function(b,c,d,e,f,g){l(b,c);0!==d&&(O(a,f,c,g),b.scale=c.scale/d,b.rotation+=e,M(a,a,b,g),U(b,b,m.set(a,a[0]-f[0],f[1]-a[1])));return b}}(),O=function(){var a=h.create();return function(b,c,d,e){return m.transformMat2d(b,
c,y(a,d,e))}}(),M=function(){var a=h.create();return function(b,c,d,e){return m.transformMat2d(b,c,Q(a,d,e))}}(),U=function(){var b=m.create(),c=h.create();return function(d,e,f){l(d,e);var g=H(e),k=d.targetGeometry;h.fromRotation(c,a.toRadian(e.rotation)||0);h.scale(c,c,m.fromValues(g,g));m.transformMat2d(b,f,c);k.x+=b[0];k.y+=b[1];return d}}();return{create:v,createAsync:function(a,b){return g.resolve(v(a,b))},copy:l,getAnchor:w,getExtent:B,setExtent:function(a,b,c,d,e){ha(a,b,c.center);a.scale=
s(c,d);e&&e.constraints&&e.constraints.constrain(a);return a},getPaddingMapTranslation:L,getPaddingScreenTranslation:z,getResolution:H,getScreenCenter:R,getTransform:Q,getTransformNoRotation:F,getInverseTransform:y,getOuterExtent:C,getOuterSize:E,getResolutionToScaleFactor:$,getScaleToResolutionFactor:K,angleBetween:D,addPadding:S,centerAt:ha,pixelSizeAt:function(a,b,c){return H(b)},removePadding:X,resize:I,rotateBy:function(a,b,c){l(a,b);a.rotation+=c;return a},rotateTo:function(a,b,c){l(a,b);a.rotation=
c;return a},scaleBy:G,scaleTo:function(a,b,c){l(a,b);a.scale=c;return a},scaleAndRotateBy:W,toMap:O,toScreen:M,translateBy:U}})},"esri/views/2d/math/common":function(){define([],function(){if(!a)var a=1E-6;if(!h)var h="undefined"!==typeof Float32Array?Float32Array:Array;if(!m)var m=Math.random;var n={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:h,GLMAT_RANDOM:m,setMatrixArrayType:function(a){n.GLMAT_ARRAY_TYPE=a}},g=Math.PI/180,k=180/Math.PI;n.toRadian=function(a){return a*g};n.toDegree=function(a){return a*
k};n.setMatrixArrayType(Array);return n})},"esri/views/2d/math/mat2d":function(){define(["./common"],function(a){var h=a.GLMAT_ARRAY_TYPE;a={create:function(){var a=new h(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var n=new h(6);n[0]=a[0];n[1]=a[1];n[2]=a[2];n[3]=a[3];n[4]=a[4];n[5]=a[5];return n},copy:function(a,h){a[0]=h[0];a[1]=h[1];a[2]=h[2];a[3]=h[3];a[4]=h[4];a[5]=h[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,
h){var g=h[0],k=h[1],f=h[2],e=h[3],d=h[4],c=h[5],b=g*e-k*f;if(!b)return null;b=1/b;a[0]=e*b;a[1]=-k*b;a[2]=-f*b;a[3]=g*b;a[4]=(f*c-e*d)*b;a[5]=(k*d-g*c)*b;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,h,g){var k=h[0],f=h[1],e=h[2],d=h[3],c=h[4];h=h[5];var b=g[0],p=g[1],q=g[2],u=g[3],t=g[4];g=g[5];a[0]=k*b+e*p;a[1]=f*b+d*p;a[2]=k*q+e*u;a[3]=f*q+d*u;a[4]=k*t+e*g+c;a[5]=f*t+d*g+h;return a}};a.mul=a.multiply;a.rotate=function(a,h,g){var k=h[0],f=h[1],e=h[2],d=h[3],
c=h[4];h=h[5];var b=Math.sin(g);g=Math.cos(g);a[0]=k*g+e*b;a[1]=f*g+d*b;a[2]=k*-b+e*g;a[3]=f*-b+d*g;a[4]=c;a[5]=h;return a};a.scale=function(a,h,g){var k=h[1],f=h[2],e=h[3],d=h[4],c=h[5],b=g[0];g=g[1];a[0]=h[0]*b;a[1]=k*b;a[2]=f*g;a[3]=e*g;a[4]=d;a[5]=c;return a};a.translate=function(a,h,g){var k=h[0],f=h[1],e=h[2],d=h[3],c=h[4];h=h[5];var b=g[0];g=g[1];a[0]=k;a[1]=f;a[2]=e;a[3]=d;a[4]=k*b+e*g+c;a[5]=f*b+d*g+h;return a};a.fromRotation=function(a,h){var g=Math.sin(h),k=Math.cos(h);a[0]=k;a[1]=g;a[2]=
-g;a[3]=k;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,h){a[0]=h[0];a[1]=0;a[2]=0;a[3]=h[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,h){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=h[0];a[5]=h[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return a})},"esri/views/2d/math/vec2":function(){define(["./common"],
function(a){var h=a.GLMAT_ARRAY_TYPE,m=a.GLMAT_RANDOM,n={create:function(){var a=new h(2);a[0]=0;a[1]=0;return a},clone:function(a){var k=new h(2);k[0]=a[0];k[1]=a[1];return k},fromValues:function(a,k){var f=new h(2);f[0]=a;f[1]=k;return f},copy:function(a,h){a[0]=h[0];a[1]=h[1];return a},set:function(a,h,f){a[0]=h;a[1]=f;return a},add:function(a,h,f){a[0]=h[0]+f[0];a[1]=h[1]+f[1];return a},subtract:function(a,h,f){a[0]=h[0]-f[0];a[1]=h[1]-f[1];return a}};n.sub=n.subtract;n.multiply=function(a,h,
f){a[0]=h[0]*f[0];a[1]=h[1]*f[1];return a};n.mul=n.multiply;n.divide=function(a,h,f){a[0]=h[0]/f[0];a[1]=h[1]/f[1];return a};n.div=n.divide;n.min=function(a,h,f){a[0]=Math.min(h[0],f[0]);a[1]=Math.min(h[1],f[1]);return a};n.max=function(a,h,f){a[0]=Math.max(h[0],f[0]);a[1]=Math.max(h[1],f[1]);return a};n.scale=function(a,h,f){a[0]=h[0]*f;a[1]=h[1]*f;return a};n.scaleAndAdd=function(a,h,f,e){a[0]=h[0]+f[0]*e;a[1]=h[1]+f[1]*e;return a};n.distance=function(a,h){var f=h[0]-a[0],e=h[1]-a[1];return Math.sqrt(f*
f+e*e)};n.dist=n.distance;n.squaredDistance=function(a,h){var f=h[0]-a[0],e=h[1]-a[1];return f*f+e*e};n.sqrDist=n.squaredDistance;n.length=function(a){var h=a[0];a=a[1];return Math.sqrt(h*h+a*a)};n.len=n.length;n.squaredLength=function(a){var h=a[0];a=a[1];return h*h+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,h){a[0]=-h[0];a[1]=-h[1];return a};n.inverse=function(a,h){a[0]=1/h[0];a[1]=1/h[1];return a};n.normalize=function(a,h){var f=h[0],e=h[1],f=f*f+e*e;0<f&&(f=1/Math.sqrt(f),a[0]=h[0]*f,a[1]=
h[1]*f);return a};n.dot=function(a,h){return a[0]*h[0]+a[1]*h[1]};n.cross=function(a,h,f){h=h[0]*f[1]-h[1]*f[0];a[0]=a[1]=0;a[2]=h;return a};n.lerp=function(a,h,f,e){var d=h[0];h=h[1];a[0]=d+e*(f[0]-d);a[1]=h+e*(f[1]-h);return a};n.random=function(a,h){h=h||1;var f=2*m()*Math.PI;a[0]=Math.cos(f)*h;a[1]=Math.sin(f)*h;return a};n.transformMat2=function(a,h,f){var e=h[0];h=h[1];a[0]=f[0]*e+f[2]*h;a[1]=f[1]*e+f[3]*h;return a};n.transformMat2d=function(a,h,f){var e=h[0];h=h[1];a[0]=f[0]*e+f[2]*h+f[4];
a[1]=f[1]*e+f[3]*h+f[5];return a};n.transformMat3=function(a,h,f){var e=h[0];h=h[1];a[0]=f[0]*e+f[3]*h+f[6];a[1]=f[1]*e+f[4]*h+f[7];return a};n.transformMat4=function(a,h,f){var e=h[0];h=h[1];a[0]=f[0]*e+f[4]*h+f[12];a[1]=f[1]*e+f[5]*h+f[13];return a};n.forEach=function(){var a=n.create();return function(h,f,e,d,c,b){f||(f=2);e||(e=0);for(d=d?Math.min(d*f+e,h.length):h.length;e<d;e+=f)a[0]=h[e],a[1]=h[e+1],c(a,a,b),h[e]=a[0],h[e+1]=a[1];return h}}();n.str=function(a){return"vec2("+a[0]+", "+a[1]+
")"};return n})},"esri/widgets/Popup/PopupRenderer":function(){define("require ../Widget ./PopupRendererViewModel ../../core/requireUtils ../../core/watchUtils dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/on dijit/_TemplatedMixin dijit/a11yclick dojo/i18n!./nls/PopupRenderer dojo/text!./templates/PopupRenderer.html".split(" "),function(a,h,m,n,g,k,f,e,d,c,b,p,q,u){var t={base:"esri-popup-renderer",container:"esri-popup-renderer-container",main:"esri-popup-renderer-main",content:"esri-popup-renderer-content",
contentElement:"esri-popup-renderer-content-element",text:"esri-popup-renderer-text",attachments:"esri-popup-renderer-attachments",attachmentsTitle:"esri-popup-renderer-attachments-title",attachmentsItem:"esri-popup-renderer-attachments-item",attachmentsItemIcon:"esri-popup-renderer-attachments-item-icon esri-icon-download",fields:"esri-popup-renderer-fields",btn:"esri-popup-renderer-button",icon:"esri-popup-renderer-icon",iconText:"esri-icon-font-fallback-text",media:"esri-popup-renderer-media",
mediaContainer:"esri-popup-renderer-media-container",mediaItemContainer:"esri-popup-renderer-media-item-container",mediaItem:"esri-popup-renderer-media-item",mediaItemTitle:"esri-popup-renderer-media-item-title",mediaItemCaption:"esri-popup-renderer-media-item-caption",mediaPrevious:"esri-media-previous",previousIconLTR:"esri-previous-icon-ltr esri-icon-left-triangle-arrow",previousIconRTL:"esri-previous-icon-rtl esri-icon-right-triangle-arrow",mediaNext:"esri-media-next",nextIconLTR:"esri-next-icon-ltr esri-icon-right-triangle-arrow",
nextIconRTL:"esri-next-icon-rtl esri-icon-left-triangle-arrow",mediaSummary:"esri-popup-renderer-media-summary",mediaCount:"esri-popup-renderer-media-count",mediaImageSummary:"esri-popup-renderer-media-image-summary",mediaImageIcon:"esri-popup-renderer-media-image-icon esri-icon-media",mediaChartSummary:"esri-popup-renderer-media-chart-summary",mediaChartIcon:"esri-popup-renderer-MediaChartIcon esri-icon-chart",loading:"esri-popup-renderer-loading",loadingSpinnerContainer:"esri-popup-renderer-loading-container",
loadingSpinner:"esri-icon esri-icon-loading-indicator esri-rotating",showMediaPagination:"esri-popup-renderer-show-media-pagination",chart:"esri-chart"},r=/^\s*(https?:\/\/[^\s]+)\s*$/i;return h.createSubclass([b],{declaredClass:"esri.widgets.Popup.PopupRenderer",templateString:u,properties:{viewModel:{type:m}},baseClass:t.base,constructor:function(){this._charts=[];this._chartTooltips=[]},postCreate:function(){this.inherited(arguments);var a=this,b=this.viewModel;this.own(g.init(b,"waitingForContent",
this._loadingSpinner.bind(this)),g.init(b,"content",this._render.bind(this)),c(this._contentNode,c.selector("."+t.mediaNext,p),function(){a._nextMedia(this)}),c(this._contentNode,c.selector("."+t.mediaPrevious,p),function(){a._previousMedia(this)}))},destroy:function(){this._destroyCharts();this._clearResizeTimer()},_i18n:q,_css:t,resize:function(){this._resizeCharts();this.emit("resize")},_clearResizeTimer:function(){this._mediaResizeTimer&&(clearTimeout(this._mediaResizeTimer),this._mediaResizeTimer=
0)},_countMediaInfos:function(a){var b=0,c=0;a.forEach(function(a){"image"===a.type?b++:-1!==a.type.indexOf("chart")&&c++});return{total:c+b,images:b,charts:c}},_createMediaNodes:function(a){this._destroyCharts();var b=a.mediaIndex,c=a.mediaInfos[b];a=a.node;d.empty(a);var e=d.create("div",{className:t.mediaItem},a),b=this._createMediaType(c,b);d.place(b,e,"only");c.title&&d.create("div",{className:t.mediaItemTitle,innerHTML:c.title},a);c.caption&&d.create("div",{className:t.mediaItemCaption,innerHTML:c.caption},
a);this._clearResizeTimer();this._mediaResizeTimer=setTimeout(function(){this.resize();this._clearResizeTimer()}.bind(this),0)},_createMediaType:function(b,c){var e=b.value,f;if("image"===b.type){var g=d.create("img",{alt:b.title||"",src:e.sourceURL});e.linkURL?(f=d.create("a",{title:b.title||"",href:e.linkURL,target:this._preventNewTab(e.linkURL)?"":"_blank"}),d.place(g,f)):f=g}else-1!==b.type.indexOf("chart")&&(f=d.create("div",{className:t.chart},f),e=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],
g=b.value.theme||this.chartTheme,"string"===typeof g&&(g=g.replace(/\./gi,"/"),-1===g.indexOf("/")&&(g="dojox/charting/themes/"+g)),g||(g="dojox/charting/themes/Claro"),e.push(g),this._cancelChartModules(),this._chartsPromise=n.when(a,e).then(function(a){this._showChart(f,b.type,b.value,a[0],a[1],a[2]);this._chartsPromise=null}.bind(this)));return f},_cancelChartModules:function(){this._chartsPromise&&this._chartsPromise.cancel()},_destroyCharts:function(){this._cancelChartModules();var a;if(this._chartTooltips&&
this._chartTooltips.length)for(a=0;a<this._chartTooltips.length;a++)this._chartTooltips[a].destroy();this._chartTooltips.length=0;if(this._charts&&this._charts.length)for(a=0;a<this._charts.length;a++)this._charts[a].destroy();this._charts.length=0},_loadingSpinner:function(a){e.toggle(this.domNode,t.loading,!!a)},_nextMedia:function(a){this._pageMedia(a,"next")},_pageMedia:function(a,b){var c,d=f.get(a,"data-element-index");d&&(c=parseInt(d,10),c=this._elementInfo[c]);if(c){var d=c.mediaInfos,e=
c.mediaIndex;"previous"===b?e--:e++;d&&d.length&&(e=(e+d.length)%d.length);c.mediaIndex=e;this._createMediaNodes(c)}},_preventNewTab:function(a){return(a=a&&k.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_previousMedia:function(a){this._pageMedia(a,"previous")},_render:function(a){this._elementInfo=[];this._destroyCharts();d.empty(this._contentNode);var b=this.viewModel;a&&("string"===typeof a?(a=this._renderText({type:"text",text:a}))&&d.place(a,this._contentNode,"only"):
Array.isArray(a)&&a.forEach(function(a,c){var e;switch(a.type){case b.contentTypes.attachments:e=this._renderAttachments(a,c);break;case b.contentTypes.fields:e=this._renderFields(a,c);break;case b.contentTypes.media:e=this._renderMedia(a,c);break;case b.contentTypes.text:e=this._renderText(a,c)}e&&d.place(e,this._contentNode,0===c?"only":"last")},this));this.resize()},_renderAttachments:function(a,b){var c,f=a.attachmentInfos;if(f&&f.length){c=d.create("div");e.add(c,[t.attachments,t.contentElement]);
d.create("div",{className:t.attachmentsTitle,textContent:q.attach},c);var g=d.create("ul",{},c);f.forEach(function(a){var b=d.create("li",{},g),b=d.create("a",{href:a.url,target:"_blank"},b);d.create("span",{className:t.attachmentsItemIcon},b);d.create("span",{className:t.attachmentsItem,textContent:a.name||q.noTitle},b)},this)}return c},_renderFields:function(a,b){var c=this.viewModel,f,g=c.graphic.getEffectivePopupTemplate();if(g=a.fieldInfos||g&&g.fieldInfos){var h=c.formattedAttributes;f=d.create("div");
e.add(f,[t.fields,t.contentElement]);var c=d.create("table",{summary:q.fieldsSummary},f),k=d.create("tbody",{},c);g.forEach(function(a){if(a.visible){var b=a.fieldName;a=a.label||b;var b=h[b]||"",c;b&&"string"===typeof b&&(c=b.replace(r,'\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+a+'"\x3e'+q.view+"\x3c/a\x3e"));var e=d.create("tr",{},k),f=a,g=b;c&&c!==b&&(f=a,g=c);d.create("th",{innerHTML:f},e);d.create("td",{innerHTML:g},e)}},this)}return f},_renderMedia:function(a,b){var c,f=a.mediaInfos;
if(f&&f.length){var g=this._countMediaInfos(f),h={tabIndex:"0",role:"button"};h["data-element-index"]=b;c=d.create("div");e.add(c,[t.media,t.contentElement]);e.toggle(c,t.showMediaPagination,1<g.total);var m=d.create("ul",{className:t.mediaSummary},c),n=d.create("li",{className:t.mediaImageSummary},m);d.create("span",{className:t.mediaCount,"aria-label":q.numImages,textContent:"("+g.images+")"},n);d.create("span",{"aria-hidden":!0,className:t.mediaImageIcon},n);m=d.create("li",{className:t.mediaImageSummary},
m);d.create("span",{className:t.mediaCount,"aria-label":q.numCharts,textContent:"("+g.charts+")"},m);d.create("span",{"aria-hidden":!0,className:t.mediaChartIcon},m);g=d.create("div",{className:t.mediaContainer},c);m=d.create("div",k.mixin({title:q.previous},h),g);e.add(m,[t.btn,t.mediaPrevious]);n=d.create("span",{"aria-hidden":!0},m);e.add(n,[t.icon,t.previousIconLTR]);n=d.create("span",{"aria-hidden":!0},m);e.add(n,[t.icon,t.previousIconRTL]);d.create("span",{className:t.iconText,textContent:q.previous},
m);f={mediaIndex:0,node:d.create("div",{className:t.mediaItemContainer},g),mediaInfos:f};this._elementInfo[b]=f;this._createMediaNodes(f);h=d.create("div",k.mixin({title:q.next},h),g);e.add(h,[t.btn,t.mediaNext]);f=d.create("span",{"aria-hidden":!0},h);e.add(f,[t.icon,t.nextIconLTR]);f=d.create("span",{"aria-hidden":!0},h);e.add(f,[t.icon,t.nextIconRTL]);d.create("span",{className:t.iconText,textContent:q.next},h)}return c},_renderText:function(a,b){var c;a&&a.text&&(c=d.create("div",{innerHTML:a.text}),
e.add(c,[t.text,t.contentElement]));return c},_resizeCharts:function(){if(this._charts&&this._charts.length)for(var a=0;a<this._charts.length;a++){var b=this._charts[a],c=b.node;c&&(c.offsetWidth&&c.offsetHeight)&&b.resize()}},_showChart:function(a,b,c,d,e,f){a=new d(a,{margins:{l:4,t:4,r:4,b:4}});f&&a.setTheme(f);switch(b){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});a.addSeries("Series A",c.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,
majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",c.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",c.fields);break;case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",
{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",c.fields)}b=new e(a);a.render();this._charts.push(a);this._chartTooltips.push(b)}})})},"esri/widgets/Spinner":function(){define("./Widget ./support/AnchorElementViewModel dojo/i18n!./Spinner/nls/Spinner dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(a,h,m,n,g,k){var f={base:"esri-spinner",visible:"esri-spinner--visible",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};
return a.createSubclass({properties:{viewModel:{type:h}},declaredClass:"esri.widgets.Spinner",baseClass:f.base,postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:f,_i18n:m,animationDelay:500,visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},_clearTimeout:function(){this._resetTimeout&&
clearTimeout(this._resetTimeout)},_setDomClasses:function(a){this.visible&&a?(n.remove(this.domNode,f.spinnerStart),n.remove(this.domNode,f.spinnerFinish),this.domNode.offsetWidth=this.domNode.offsetWidth,n.add(this.domNode,f.spinnerStart)):this.visible&&!a?n.add(this.domNode,f.spinnerFinish):(n.remove(this.domNode,f.spinnerStart),n.remove(this.domNode,f.spinnerFinish))},_positionDomNode:function(a){a?k.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):(this._clearTimeout(),this._resetTimeout=setTimeout(function(){k.set(this.domNode,
{left:"",top:""});this._resetTimeout=0}.bind(this),this.animationDelay))},_visibleChange:function(){n.toggle(this.domNode,f.visible,this.visible)}})})},"esri/widgets/support/AnchorElementViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(a,h,m){return a.createSubclass({properties:{point:{},screenPoint:{},state:{},view:{}},declaredClass:"esri.widgets.support.AnchorElementViewModel",constructor:function(){this._handles=new h},destroy:function(){this._viewReady&&
this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null},point:null,_pointSetter:function(a){this._viewControl(a);this._createScreenPoint(a,this.view);this._set("point",a)},screenPoint:null,state:"disabled",view:null,_viewSetter:function(a){this._handles&&(this._handles.remove("viewHandles"),this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this.state="disabled";a&&(this._viewReady=a.then(function(){this.state="ready";var g="viewpoint";"3d"===
a.type&&(g="camera");this._viewWatch=m.pausable(a,g,function(){this._createScreenPoint(this.point,this.view)}.bind(this));this._handles.add(this._viewWatch,"viewHandles");this._viewControl(this.point)}.bind(this)));this._set("view",a)},_viewControl:function(a){this._viewWatch&&(a?this._viewWatch.resume():this._viewWatch.pause())},_createScreenPoint:function(a,g){this.screenPoint=a&&g?g.toScreen(a.x,a.y,a.z):null}})})},"esri/widgets/Message":function(){define(["./Widget","./support/AnchorElementViewModel",
"dojo/dom-class","dojo/dom-construct","dojo/dom-style"],function(a,h,m,n,g){var k={base:"esri-message",visible:"esri-message--visible",text:"esri-message__text",messageFadeIn:"esri-message--fade-in"};return a.createSubclass({properties:{viewModel:{type:h}},declaredClass:"esri.widgets.Message",baseClass:k.base,constructor:function(){this._text=n.create("span",{className:k.text})},postCreate:function(){this.inherited(arguments);n.place(this._text,this.domNode);this.own(this.viewModel.watch("point",
function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:k,animationDelay:3E3,visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},text:"",_setTextAttr:{node:"_text",type:"innerText"},_clearTimeout:function(){this._resetTimeout&&(clearTimeout(this._resetTimeout),this._resetTimeout=0)},_setDomClasses:function(a){this._clearTimeout();m.remove(this.domNode,
k.messageFadeIn);this.domNode.offsetWidth=this.domNode.offsetWidth;a&&(m.add(this.domNode,k.messageFadeIn),this._resetTimeout=setTimeout(function(){this.viewModel.point=null;this._resetTimeout=0}.bind(this),this.animationDelay))},_positionDomNode:function(a){a?g.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):g.set(this.domNode,{left:"",top:""})},_visibleChange:function(){m.toggle(this.domNode,k.visible,this.visible)}})})},"esri/views/ViewAnimation":function(){define(["../core/declare","dojo/Deferred",
"../core/Accessoire","../core/AccessoirePromise","../core/Scheduler"],function(a,h,m,n,g){var k={RUNNING:"running",FINISHED:"finished",STOPPED:"stopped"};a=a([m,n],{declaredClass:"esri.views.ViewAnimation",classMetadata:{properties:{state:{}}},constructor:function(){this._dfd=new h;this.addResolvingPromise(this._dfd.promise)},initialize:function(){this.state=k.RUNNING},stop:function(){this.state=k.STOPPED;g.schedule(this._dfd.resolve)},finish:function(){this.state=k.FINISHED;g.schedule(this._dfd.resolve)},
state:null,target:null});a.State=k;return a})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" role\x3d"presentation" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/widgets/Attribution/templates/Attribution.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.sources}" data-dojo-attach-point\x3d"_sourcesNode"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.poweredBy}"\x3ePowered by \x3ca target\x3d"_blank" href\x3d"http://www.esri.com/" class\x3d"${_css.link}"\x3eEsri\x3c/a\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/Compass/templates/Compass.html":'\x3cdiv role\x3d"button" tabindex\x3d"0"\x3e\r\n  \x3cspan data-dojo-attach-point\x3d"_iconNode" aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.rotationIcon}" title\x3d"${_i18n.reset}"\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"${_css.text}"\x3e${_i18n.reset}\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Zoom/templates/Zoom.html":'\x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.disabled}"\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomInNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomIn}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomInIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomIn}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomOutNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomOut}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomOutIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomOut}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.top} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.loadingIcon}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.btn} ${_css.previous}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.previousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.previousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.pageText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.btn} ${_css.next}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.nextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.nextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.btn} ${_css.pageMenuBtn}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.pageMenuIcon}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.title}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.btn} ${_css.dockBtn}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.dockIcon} ${_css.dockIconRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.dockIcon} ${_css.dockIconTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.dockIcon} ${_css.dockIconLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.dockIcon} ${_css.dockIconBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText} ${_css.dockIconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.undockIcon}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText} ${_css.undockIconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.btn} ${_css.close}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.closeIcon}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.loadingIcon}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.btn} ${_css.previous}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.previousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.previousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.pageText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.btn} ${_css.next}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.nextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.nextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.btn} ${_css.pageMenuBtn}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.pageMenuIcon}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.pageMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.pageMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.pageMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.pageMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_pointerNode" class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Popup/templates/PopupRenderer.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.container}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3cdiv class\x3d"${_css.loadingSpinnerContainer}"\x3e\x3cspan class\x3d"${_css.loadingSpinner}"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_contentNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"*now":function(a){a(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},
"*noref":1}});require.boot&&require.apply(null,require.boot);
