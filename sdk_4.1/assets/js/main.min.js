/*! ArcGIS API for JavaScript 4.1 | Copyright (c) 2016 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
require(["SessionManager","dojo/query","dojo/topic","calcite-web","esri/config","documentation/download","dojo/NodeList-dom","dojo/NodeList-manipulate","dojo/NodeList-traverse","dojo/_base/event","dojo/domReady!"],function(e,t,o,a,n){function r(){if(e.loggedIn()){t("body").addClass("logged-in");var o=window.location,a=o.origin,n=l(o.pathname,["sign-up","developer-beta","developer-trial"]),r=l(o.pathname,["applications","usage","hosted-data"]),i=e.isPublicAccount();i&&(n||r)?window.location=a+"/downloads/":!i&&n&&(window.location=a+"/applications/")}}function i(){window.hljs&&Array.prototype.forEach&&hljs.initHighlighting()}function s(){o.subscribe("session:organization",function(){t("[data-user-avatar]").forEach(function(o){var a=t(o).attr("data-user-avatar")[0];o.src=e.avatar(a)}),t("[data-first-name]").text(e.firstName()),t("[data-full-name]").text(e.profile.fullName),t("[data-username]").text(e.username()),t("[data-profile-link]").attr("href",e.developerSubscription()?"/account/profile":e.orgUrl()+"/home/user.html")}),e.loggedIn()&&"ontouchstart"in window&&t("#logged-in-navigation a").first().on("click",function(e){e.preventDefault()});var a=SiteConfig.portal+"/rest/oauth2/signout?redirect_uri="+SiteConfig.destination;t(".js-log-out").attr("href",a)}function c(){e.loggedIn()&&e.developerSubscription()&&t(".js-account-settings").removeClass("hide")}function l(e,t){for(var o=0;o<t.length;o++)if(e.match(t[o]))return!0;return!1}a.init(),window.calcite=a,n.request.proxyUrl="/proxy",window.console||!function(){var e=function(){},t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var o=0;o<t.length;o++)window.console[t[o]]=e}(),t("body").on("click",function(e){var o=t("#down-arrow"),a=t(".logo-wrap");e.target==o[0]&&"visible"!==siteNav[0].className?a.addClass("expanded"):a.removeClass("expanded")}),r(),i(),s(),e.organization||o.subscribe("session:organization",function(){c()})});